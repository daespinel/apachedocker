
(function($){'use strict';$.fn.fakeSlide=function(options){var parameters=$.extend({},$.fn.fakeSlide.defaultOptions,options),animating=false,deltaXStart=0,angleOk=false;function init(panElement){$(panElement).hammer().on('panstart',function(event){angleOk=false;if(event.gesture.pointerType==='touch'){if((event.gesture.angle<45&&event.gesture.angle>-45)||(event.gesture.angle>135||event.gesture.angle<-135)){deltaXStart=event.gesture.deltaX;animating=true;angleOk=true;parameters.moveElement.css({transition:'none',position:'relative'});}}}).on('panmove',function(event){if(event.gesture.pointerType==='touch'){if(angleOk){if(animating){parameters.moveElement.css({left:event.gesture.deltaX+'px'});}}else{}}}).on('panend',function(event){if(event.gesture.pointerType==='touch'){if(angleOk){if(Math.abs(event.gesture.deltaX)-Math.abs(deltaXStart)<100){fakeSlideWithoutAction();return false;}
if(event.gesture.deltaX<0){if(parameters.nextButton.length>0){spinMe();window.location.href=$('.jMiddleNextButton').attr('href');}else{fakeSlideWithoutAction();}}else{if(parameters.previousButton.length>0){spinMe();window.location.href=$('.jMiddlePreviousButton').attr('href');}else{fakeSlideWithoutAction();}}}}});}
function fakeSlideWithoutAction(){animating=true;var transitionType=transitionEnabled();if(!transitionType){parameters.moveElement.animate({left:0},500,'linear',function(){animating=false;});}else{parameters.moveElement.css({left:0,transition:'all 500ms ease-in'}).on('transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd',function(){animating=false;});}}
function spinMe(){var spinnerElement=document.getElementById('spinnerSlide');if(spinnerElement===null){spinnerElement=document.createElement('div');spinnerElement.id='spinnerSlide';document.body.appendChild(spinnerElement);var styles={'position':'fixed','top':'50%','left':'50%'};for(var arg in styles){spinnerElement.style[arg]=styles[arg];}}
$(spinnerElement).spin('start');}
function transitionEnabled(){var bodyStyle=document.body.style;if(typeof(bodyStyle['transition'])==='string'){return'transition';}
var vendor=["Moz","Webkit","Khtml","O","ms"],i=0,len=vendor.length;for(;i<len;i++){if(typeof(bodyStyle[vendor[i]+'Transition'])==='string'){return vendor[i];}}
return false;}
return this.each(function(){init(this);})};$.fn.fakeSlide.defaultOptions={moveElement:'',nextButton:'',previousButton:''};})(jQuery);(function(root,factory){if(typeof exports=='object')module.exports=factory()
else if(typeof define=='function'&&define.amd)define(factory)
else root.Spinner=factory()}
(this,function(){"use strict";var prefixes=['webkit','Moz','ms','O'],animations={},useCssAnimations
function createEl(tag,prop){var el=document.createElement(tag||'div'),n
for(n in prop)el[n]=prop[n]
return el}
function ins(parent){for(var i=1,n=arguments.length;i<n;i++)
parent.appendChild(arguments[i])
return parent}
var sheet=(function(){var el=createEl('style',{type:'text/css'})
ins(document.getElementsByTagName('head')[0],el)
return el.sheet||el.styleSheet}())
function addAnimation(alpha,trail,i,lines){var name=['opacity',trail,~~(alpha*100),i,lines].join('-'),start=0.01+i/lines*100,z=Math.max(1-(1-alpha)/trail*(100-start),alpha),prefix=useCssAnimations.substring(0,useCssAnimations.indexOf('Animation')).toLowerCase(),pre=prefix&&'-'+prefix+'-'||''
if(!animations[name]){sheet.insertRule('@'+pre+'keyframes '+name+'{'+'0%{opacity:'+z+'}'+
start+'%{opacity:'+alpha+'}'+
(start+0.01)+'%{opacity:1}'+
(start+trail)%100+'%{opacity:'+alpha+'}'+'100%{opacity:'+z+'}'+'}',sheet.cssRules.length)
animations[name]=1}
return name}
function vendor(el,prop){var s=el.style,pp,i
if(s[prop]!==undefined)return prop
prop=prop.charAt(0).toUpperCase()+prop.slice(1)
for(i=0;i<prefixes.length;i++){pp=prefixes[i]+prop
if(s[pp]!==undefined)return pp}}
function css(el,prop){for(var n in prop)
el.style[vendor(el,n)||n]=prop[n]
return el}
function merge(obj){for(var i=1;i<arguments.length;i++){var def=arguments[i]
for(var n in def)
if(obj[n]===undefined)obj[n]=def[n]}
return obj}
function pos(el){var o={x:el.offsetLeft,y:el.offsetTop}
while((el=el.offsetParent))
o.x+=el.offsetLeft,o.y+=el.offsetTop
return o}
var defaults={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:'#000',direction:1,speed:1,trail:100,opacity:1/4,fps:20,zIndex:2e9,className:'spinner',top:'auto',left:'auto',position:'relative'}
function Spinner(o){if(typeof this=='undefined')return new Spinner(o)
this.opts=merge(o||{},Spinner.defaults,defaults)}
Spinner.defaults={}
merge(Spinner.prototype,{spin:function(target){this.stop()
var self=this,o=self.opts,el=self.el=css(createEl(0,{className:o.className}),{position:o.position,width:0,zIndex:o.zIndex}),mid=o.radius+o.length+o.width,ep,tp
if(target){target.insertBefore(el,target.firstChild||null)
tp=pos(target)
ep=pos(el)
css(el,{left:(o.left=='auto'?tp.x-ep.x+(target.offsetWidth>>1):parseInt(o.left,10)+mid)+'px',top:(o.top=='auto'?tp.y-ep.y+(target.offsetHeight>>1):parseInt(o.top,10)+mid)+'px'})}
el.setAttribute('role','progressbar')
self.lines(el,self.opts)
if(!useCssAnimations){var i=0,start=(o.lines-1)*(1-o.direction)/2,alpha,fps=o.fps,f=fps/o.speed,ostep=(1-o.opacity)/(f*o.trail/100),astep=f/o.lines;(function anim(){i++;for(var j=0;j<o.lines;j++){alpha=Math.max(1-(i+(o.lines-j)*astep)%f*ostep,o.opacity)
self.opacity(el,j*o.direction+start,alpha,o)}
self.timeout=self.el&&setTimeout(anim,~~(1000/fps))})()}
return self},stop:function(){var el=this.el
if(el){clearTimeout(this.timeout)
if(el.parentNode)el.parentNode.removeChild(el)
this.el=undefined}
return this},lines:function(el,o){var i=0,start=(o.lines-1)*(1-o.direction)/2,seg
function fill(color,shadow){return css(createEl(),{position:'absolute',width:(o.length+o.width)+'px',height:o.width+'px',background:color,boxShadow:shadow,transformOrigin:'left',transform:'rotate('+~~(360/o.lines*i+o.rotate)+'deg) translate('+o.radius+'px'+',0)',borderRadius:(o.corners*o.width>>1)+'px'})}
for(;i<o.lines;i++){seg=css(createEl(),{position:'absolute',top:1+~(o.width/2)+'px',transform:o.hwaccel?'translate3d(0,0,0)':'',opacity:o.opacity,animation:useCssAnimations&&addAnimation(o.opacity,o.trail,start+i*o.direction,o.lines)+' '+1/o.speed+'s linear infinite'})
if(o.shadow)ins(seg,css(fill('#000','0 0 4px '+'#000'),{top:2+'px'}))
ins(el,ins(seg,fill(o.color,'0 0 1px rgba(0,0,0,.1)')))}
return el},opacity:function(el,i,val){if(i<el.childNodes.length)el.childNodes[i].style.opacity=val}})
function initVML(){function vml(tag,attr){return createEl('<'+tag+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',attr)}
sheet.addRule('.spin-vml','behavior:url(#default#VML)')
Spinner.prototype.lines=function(el,o){var r=o.length+o.width,s=2*r
function grp(){return css(vml('group',{coordsize:s+' '+s,coordorigin:-r+' '+-r}),{width:s,height:s})}
var margin=-(o.width+o.length)*2+'px',g=css(grp(),{position:'absolute',top:margin,left:margin}),i
function seg(i,dx,filter){ins(g,ins(css(grp(),{rotation:360/o.lines*i+'deg',left:~~dx}),ins(css(vml('roundrect',{arcsize:o.corners}),{width:r,height:o.width,left:o.radius,top:-o.width>>1,filter:filter}),vml('fill',{color:o.color,opacity:o.opacity}),vml('stroke',{opacity:0}))))}
if(o.shadow)
for(i=1;i<=o.lines;i++)
seg(i,-2,'progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)')
for(i=1;i<=o.lines;i++)seg(i)
return ins(el,g)}
Spinner.prototype.opacity=function(el,i,val,o){var c=el.firstChild
o=o.shadow&&o.lines||0
if(c&&i+o<c.childNodes.length){c=c.childNodes[i+o];c=c&&c.firstChild;c=c&&c.firstChild
if(c)c.opacity=val}}}
var probe=css(createEl('group'),{behavior:'url(#default#VML)'})
if(!vendor(probe,'transform')&&probe.adj)initVML()
else useCssAnimations=vendor(probe,'animation')
return Spinner}));(function($){$.spin={defaultConfig:{lines:12,length:10,width:4,radius:10,color:'#000',speed:1.0,trail:50,shadow:false}};$.fn.spin=function(opts){opts=$.extend({},$.spin.defaultConfig,opts);this.each(function(){var $this=$(this),data=$this.data();if(data.spinner){data.spinner.stop();delete data.spinner;return $this;}
if(opts!==false){data.spinner=new Spinner($.extend({color:$this.css('color')},opts)).spin(this);$.core.$fake[0]=data.spinner.el;$.core.$fake.css({zIndex:1000});}});return $.core.$fake;};})(jQuery);(function($)
{$.moreResults={defaultOptions:{beforeDomManip:function()
{$(this).closest('div.mod').remove();}}};$.fn.moreResults=function(options)
{options=$.extend({destination:null,source:null},$.moreResults.defaultOptions,options);var self=this;$('body').delegate(self.selector,'click',function()
{var $self=$(this).addClass('loading');$self.click(function(){return false;});var url=options.source||$self.attr('data-source')||$self.attr('href'),tgt=(function()
{var $destination=$(options.destination);if($destination.length>0)
{return $destination;}
$destination=$($self.attr('data-destination'));if($destination.length>0)
{return $destination;}
return $self.closest('div.listContainer, ul.listContainer');})()
if(url&&tgt)
{tgt.ajaxUpdate(url,'xhr',{manip:'append',scroll:false,anim:false,dataType:'json',complete:function()
{$(document).trigger('refresh');},error:function(error,text)
{$.note&&$.note.error(text);$self.removeClass('loading').addClass('error');},beforeDomManip:function(){options.beforeDomManip.apply($self);}});}
return false;});};})(jQuery);(function($){$.jet.services.ajaxStartNote={start:false,options:{label:'loading...',closeable:false,show:function(){return true;}},init:function(){var $node={},self=this;$(document).ajaxStart(function(){if(!$.ajaxSettings.discrete&&self.options.show.call(this,arguments))
{typeof $node.remove=='function'&&$node.remove();$node=$.note.flash(self.options.label,self.options);}
$.ajaxSettings.discrete=false;}).ajaxStop(function(){typeof $node.remove=='function'&&$node.remove();});}};$.note={defaultOptions:{title:false,type:'info',delay:5000,onClose:function(){},ghost:false,hide:true,closeable:true,classes:'',width:50},note:function(note,options)
{$.pnotify.defaults.pnotify_stack.firstpos1=0;$.pnotify.defaults.pnotify_stack.firstpos2=0;options=$.extend({},this.defaultOptions,options);var opt={pnotify_text:note,pnotify_title:options.title,pnotify_history:false,pnotify_type:(function(){switch(options.type){case'warn':return'error';default:return'notice';}})(),pnotify_nonblock:options.ghost,pnotify_before_close:options.onClose,pnotify_delay:options.delay,pnotify_hide:options.hide,pnotify_addclass:options.classes,pnotify_width:options.width,pnotify_closer:options.closeable};$.inArray(options.type,['warn','stick'])!==-1&&(opt.pnotify_stack={animation:true,dir1:'up',dir2:'left',firstpos1:15,firstpos2:5,nextpos1:15,nextpos2:5,push:'bottom'});options.type=='flash'&&(opt.pnotify_stack={animation:true,dir1:'down',dir2:'right',firstpos1:50,firstpos2:5,nextpos1:50,nextpos2:5,push:'bottom'});return $.pnotify(opt);},info:function(note,options)
{return this.note(note,$.extend(options,{type:'info'}));},warn:function(note,options)
{return this.note(note,$.extend({hide:false,classes:'warn'},options,{type:'warn'}));},stick:function(note,options)
{return this.note(note,$.extend({hide:false,classes:'stick',closeable:true},options,{type:'stick'}));},flash:function(note,options)
{return this.note(note,$.extend({hide:false,classes:'flash',closeable:false},options,{type:'flash'}));}};$.note.log=$.note.info;$.note.error=$.note.warn;})(jQuery);(function($){var history_handle_top,timer;var body;var jwindow;$.extend({pnotify_remove_all:function(){var body_data=body.data("pnotify");if(body_data&&body_data.length){$.each(body_data,function(){if(this.pnotify_remove)
this.pnotify_remove();});}},pnotify_position_all:function(){if(timer)
clearTimeout(timer);timer=null;try{var body_data=body.data("pnotify");}
catch(e){return;}
if(!body_data||!body_data.length)
return;$.each(body_data,function(){var s=this.opts.pnotify_stack;if(!s)return;if(!s.nextpos1)
s.nextpos1=s.firstpos1;if(!s.nextpos2)
s.nextpos2=s.firstpos2;if(!s.addpos2)
s.addpos2=0;if(this.css("display")!="none"){var curpos1,curpos2;var animate={};var csspos1;switch(s.dir1){case"down":csspos1="top";break;case"up":csspos1="bottom";break;case"left":csspos1="right";break;case"right":csspos1="left";break;}
curpos1=parseInt(this.css(csspos1));if(isNaN(curpos1))
curpos1=0;if(typeof s.firstpos1=="undefined"){s.firstpos1=curpos1;s.nextpos1=s.firstpos1;}
var csspos2;switch(s.dir2){case"down":csspos2="top";break;case"up":csspos2="bottom";break;case"left":csspos2="right";break;case"right":csspos2="left";break;}
curpos2=parseInt(this.css(csspos2));if(isNaN(curpos2))
curpos2=0;if(typeof s.firstpos2=="undefined"){s.firstpos2=curpos2;s.nextpos2=s.firstpos2;}
if((s.dir1=="down"&&s.nextpos1+this.height()>jwindow.height())||(s.dir1=="up"&&s.nextpos1+this.height()>jwindow.height())||(s.dir1=="left"&&s.nextpos1+this.width()>jwindow.width())||(s.dir1=="right"&&s.nextpos1+this.width()>jwindow.width())){s.nextpos1=s.firstpos1;s.nextpos2+=s.addpos2+10;s.addpos2=0;}
if(s.animation&&s.nextpos2<curpos2){switch(s.dir2){case"down":animate.top=s.nextpos2+"px";break;case"up":animate.bottom=s.nextpos2+"px";break;case"left":animate.right=s.nextpos2+"px";break;case"right":animate.left=s.nextpos2+"px";break;}}else
this.css(csspos2,s.nextpos2+"px");switch(s.dir2){case"down":case"up":if(this.outerHeight(true)>s.addpos2)
s.addpos2=this.height();break;case"left":case"right":if(this.outerWidth(true)>s.addpos2)
s.addpos2=this.width();break;}
if(s.nextpos1){if(s.animation&&(curpos1>s.nextpos1||animate.top||animate.bottom||animate.right||animate.left)){switch(s.dir1){case"down":animate.top=s.nextpos1+"px";break;case"up":animate.bottom=s.nextpos1+"px";break;case"left":animate.right=s.nextpos1+"px";break;case"right":animate.left=s.nextpos1+"px";break;}}else
this.css(csspos1,s.nextpos1+"px");}
if(animate.top||animate.bottom||animate.right||animate.left)
this.animate(animate,{duration:500,queue:false});switch(s.dir1){case"down":case"up":s.nextpos1+=this.height()+10;break;case"left":case"right":s.nextpos1+=this.width()+10;break;}}});$.each(body_data,function(){var s=this.opts.pnotify_stack;if(!s)return;s.nextpos1=s.firstpos1;s.nextpos2=s.firstpos2;s.addpos2=0;s.animation=true;});},pnotify:function(options){if(!body)
body=$("body");if(!jwindow)
jwindow=$(window);var animating;var opts;if(typeof options!="object"){opts=$.extend({},$.pnotify.defaults);opts.pnotify_text=options;}else{opts=$.extend({},$.pnotify.defaults,options);}
if(opts.pnotify_before_init){if(opts.pnotify_before_init(opts)===false)
return null;}
var nonblock_last_elem;var nonblock_pass=function(e,e_name){pnotify.css("display","none");var element_below=document.elementFromPoint(e.clientX,e.clientY);pnotify.css("display","block");var jelement_below=$(element_below);var cursor_style=jelement_below.css("cursor");pnotify.css("cursor",cursor_style!="auto"?cursor_style:"default");if(!nonblock_last_elem||nonblock_last_elem.get(0)!=element_below){if(nonblock_last_elem){dom_event.call(nonblock_last_elem.get(0),"mouseleave",e.originalEvent);dom_event.call(nonblock_last_elem.get(0),"mouseout",e.originalEvent);}
dom_event.call(element_below,"mouseenter",e.originalEvent);dom_event.call(element_below,"mouseover",e.originalEvent);}
dom_event.call(element_below,e_name,e.originalEvent);nonblock_last_elem=jelement_below;};var pnotify=$("<div />",{"class":"ui-pnotify "+opts.pnotify_addclass,"css":{"display":"none"},"mouseenter":function(e){if(opts.pnotify_nonblock)e.stopPropagation();if(opts.pnotify_mouse_reset&&animating=="out"){pnotify.stop(true);animating="in";pnotify.css("height","auto").animate({"width":opts.pnotify_width,"opacity":opts.pnotify_nonblock?opts.pnotify_nonblock_opacity:opts.pnotify_opacity},"fast");}
if(opts.pnotify_nonblock){pnotify.animate({"opacity":opts.pnotify_nonblock_opacity},"fast");}
if(opts.pnotify_hide&&opts.pnotify_mouse_reset)pnotify.pnotify_cancel_remove();if(opts.pnotify_closer&&!opts.pnotify_nonblock)pnotify.closer.show();},"mouseleave":function(e){if(opts.pnotify_nonblock)e.stopPropagation();nonblock_last_elem=null;pnotify.css("cursor","auto");if(opts.pnotify_nonblock&&animating!="out")
pnotify.animate({"opacity":opts.pnotify_opacity},"fast");if(opts.pnotify_hide&&opts.pnotify_mouse_reset)pnotify.pnotify_queue_remove();pnotify.closer.hide();$.pnotify_position_all();},"mouseover":function(e){if(opts.pnotify_nonblock)e.stopPropagation();},"mouseout":function(e){if(opts.pnotify_nonblock)e.stopPropagation();},"mousemove":function(e){if(opts.pnotify_nonblock){e.stopPropagation();nonblock_pass(e,"onmousemove");}},"mousedown":function(e){if(opts.pnotify_nonblock){e.stopPropagation();e.preventDefault();nonblock_pass(e,"onmousedown");}},"mouseup":function(e){if(opts.pnotify_nonblock){e.stopPropagation();e.preventDefault();nonblock_pass(e,"onmouseup");}},"click":function(e){if(opts.pnotify_nonblock){e.stopPropagation();nonblock_pass(e,"onclick");}},"dblclick":function(e){if(opts.pnotify_nonblock){e.stopPropagation();nonblock_pass(e,"ondblclick");}}});pnotify.opts=opts;if(opts.pnotify_shadow&&!$.browser.msie)
pnotify.shadow_container=$("<div />",{"class":"ui-widget-shadow ui-corner-all ui-pnotify-shadow"}).prependTo(pnotify);pnotify.container=$("<div />",{"class":"ui-widget ui-widget-content ui-corner-all ui-pnotify-container "+(opts.pnotify_type=="error"?"ui-state-error":"ui-state-highlight")}).appendTo(pnotify);pnotify.pnotify_version="1.0.1";pnotify.pnotify=function(options){var old_opts=opts;if(typeof options=="string")
opts.pnotify_text=options;else
opts=$.extend({},opts,options);pnotify.opts=opts;if(opts.pnotify_shadow!=old_opts.pnotify_shadow){if(opts.pnotify_shadow&&!$.browser.msie)
pnotify.shadow_container=$("<div />",{"class":"ui-widget-shadow ui-pnotify-shadow"}).prependTo(pnotify);else
pnotify.children(".ui-pnotify-shadow").remove();}
if(opts.pnotify_addclass===false)
pnotify.removeClass(old_opts.pnotify_addclass);else if(opts.pnotify_addclass!==old_opts.pnotify_addclass)
pnotify.removeClass(old_opts.pnotify_addclass).addClass(opts.pnotify_addclass);if(opts.pnotify_title===false)
pnotify.title_container.hide("fast");else if(opts.pnotify_title!==old_opts.pnotify_title)
pnotify.title_container.html(opts.pnotify_title).show(200);if(opts.pnotify_text===false){pnotify.text_container.hide("fast");}else if(opts.pnotify_text!==old_opts.pnotify_text){if(opts.pnotify_insert_brs)
opts.pnotify_text=opts.pnotify_text.replace(/\n/g,"<br />");pnotify.text_container.html(opts.pnotify_text).show(200);}
pnotify.pnotify_history=opts.pnotify_history;if(opts.pnotify_type!=old_opts.pnotify_type)
pnotify.container.toggleClass("ui-state-error ui-state-highlight");if((opts.pnotify_notice_icon!=old_opts.pnotify_notice_icon&&opts.pnotify_type=="notice")||(opts.pnotify_error_icon!=old_opts.pnotify_error_icon&&opts.pnotify_type=="error")||(opts.pnotify_type!=old_opts.pnotify_type)){pnotify.container.find("div.ui-pnotify-icon").remove();if((opts.pnotify_error_icon&&opts.pnotify_type=="error")||(opts.pnotify_notice_icon)){$("<div />",{"class":"ui-pnotify-icon"}).append($("<span />",{"class":opts.pnotify_type=="error"?opts.pnotify_error_icon:opts.pnotify_notice_icon})).prependTo(pnotify.container);}}
if(opts.pnotify_width!==old_opts.pnotify_width)
pnotify.animate({width:opts.pnotify_width});if(opts.pnotify_min_height!==old_opts.pnotify_min_height)
pnotify.container.animate({minHeight:opts.pnotify_min_height});if(opts.pnotify_opacity!==old_opts.pnotify_opacity)
pnotify.fadeTo(opts.pnotify_animate_speed,opts.pnotify_opacity);if(!opts.pnotify_hide)
pnotify.pnotify_cancel_remove();else if(!old_opts.pnotify_hide)
pnotify.pnotify_queue_remove();pnotify.pnotify_queue_position();return pnotify;};pnotify.pnotify_queue_position=function(){if(timer)
clearTimeout(timer);timer=setTimeout($.pnotify_position_all,10);};pnotify.pnotify_display=function(){if(!pnotify.parent().length)
pnotify.appendTo(body);if(opts.pnotify_before_open){if(opts.pnotify_before_open(pnotify)===false)
return;}
pnotify.pnotify_queue_position();if(opts.pnotify_animation=="fade"||opts.pnotify_animation.effect_in=="fade"){pnotify.show().fadeTo(0,0).hide();}else{if(opts.pnotify_opacity!=1)
pnotify.show().fadeTo(0,opts.pnotify_opacity).hide();}
pnotify.animate_in(function(){if(opts.pnotify_after_open)
opts.pnotify_after_open(pnotify);pnotify.pnotify_queue_position();if(opts.pnotify_hide)
pnotify.pnotify_queue_remove();});};pnotify.pnotify_remove=function(){if(pnotify.timer){window.clearTimeout(pnotify.timer);pnotify.timer=null;}
if(opts.pnotify_before_close){if(opts.pnotify_before_close(pnotify)===false)
return;}
pnotify.animate_out(function(){if(opts.pnotify_after_close){if(opts.pnotify_after_close(pnotify)===false)
return;}
pnotify.pnotify_queue_position();if(opts.pnotify_remove)
pnotify.detach();});};pnotify.animate_in=function(callback){animating="in";var animation;if(typeof opts.pnotify_animation.effect_in!="undefined")
animation=opts.pnotify_animation.effect_in;else
animation=opts.pnotify_animation;if(animation=="none"){pnotify.show();callback();}else if(animation=="show")
pnotify.show(opts.pnotify_animate_speed,callback);else if(animation=="fade")
pnotify.show().fadeTo(opts.pnotify_animate_speed,opts.pnotify_opacity,callback);else if(animation=="slide")
pnotify.slideDown(opts.pnotify_animate_speed,callback);else if(typeof animation=="function")
animation("in",callback,pnotify);else if(pnotify.effect)
pnotify.effect(animation,{},opts.pnotify_animate_speed,callback);};pnotify.animate_out=function(callback){animating="out";var animation;if(typeof opts.pnotify_animation.effect_out!="undefined")
animation=opts.pnotify_animation.effect_out;else
animation=opts.pnotify_animation;if(animation=="none"){pnotify.hide();callback();}else if(animation=="show")
pnotify.hide(opts.pnotify_animate_speed,callback);else if(animation=="fade")
pnotify.fadeOut(opts.pnotify_animate_speed,callback);else if(animation=="slide")
pnotify.slideUp(opts.pnotify_animate_speed,callback);else if(typeof animation=="function")
animation("out",callback,pnotify);else if(pnotify.effect)
pnotify.effect(animation,{},opts.pnotify_animate_speed,callback);};pnotify.pnotify_cancel_remove=function(){if(pnotify.timer)
window.clearTimeout(pnotify.timer);};pnotify.pnotify_queue_remove=function(){pnotify.pnotify_cancel_remove();pnotify.timer=window.setTimeout(function(){pnotify.pnotify_remove();},(isNaN(opts.pnotify_delay)?0:opts.pnotify_delay));};pnotify.closer=$("<div />",{"class":"ui-pnotify-closer","css":{"cursor":"pointer","display":"none"},"click":function(){pnotify.pnotify_remove();pnotify.closer.hide();}}).append($("<span />",{"class":"ui-icon ui-icon-circle-close"})).appendTo(pnotify.container);if((opts.pnotify_error_icon&&opts.pnotify_type=="error")||(opts.pnotify_notice_icon)){$("<div />",{"class":"ui-pnotify-icon"}).append($("<span />",{"class":opts.pnotify_type=="error"?opts.pnotify_error_icon:opts.pnotify_notice_icon})).appendTo(pnotify.container);}
pnotify.title_container=$("<div />",{"class":"ui-pnotify-title","html":opts.pnotify_title}).appendTo(pnotify.container);if(opts.pnotify_title===false)
pnotify.title_container.hide();if(opts.pnotify_insert_brs&&typeof opts.pnotify_text=="string")
opts.pnotify_text=opts.pnotify_text.replace(/\n/g,"<br />");pnotify.text_container=$("<div />",{"class":"ui-pnotify-text","html":opts.pnotify_text}).appendTo(pnotify.container);if(opts.pnotify_text===false)
pnotify.text_container.hide();if(typeof opts.pnotify_width=="string")
pnotify.css("width",opts.pnotify_width);if(typeof opts.pnotify_min_height=="string")
pnotify.container.css("min-height",opts.pnotify_min_height);pnotify.pnotify_history=opts.pnotify_history;var body_data=body.data("pnotify");if(body_data==null||typeof body_data!="object")
body_data=[];if(opts.pnotify_stack.push=="top")
body_data=$.merge([pnotify],body_data);else
body_data=$.merge(body_data,[pnotify]);body.data("pnotify",body_data);if(opts.pnotify_after_init)
opts.pnotify_after_init(pnotify);if(opts.pnotify_history){var body_history=body.data("pnotify_history");if(typeof body_history=="undefined"){body_history=$("<div />",{"class":"ui-pnotify-history-container ui-state-default ui-corner-bottom","mouseleave":function(){body_history.animate({top:"-"+history_handle_top+"px"},{duration:100,queue:false});}}).append($("<div />",{"class":"ui-pnotify-history-header","text":"Redisplay"})).append($("<button />",{"class":"ui-pnotify-history-all ui-state-default ui-corner-all","text":"All","mouseenter":function(){$(this).addClass("ui-state-hover");},"mouseleave":function(){$(this).removeClass("ui-state-hover");},"click":function(){$.each(body_data,function(){if(this.pnotify_history&&this.pnotify_display)
this.pnotify_display();});return false;}})).append($("<button />",{"class":"ui-pnotify-history-last ui-state-default ui-corner-all","text":"Last","mouseenter":function(){$(this).addClass("ui-state-hover");},"mouseleave":function(){$(this).removeClass("ui-state-hover");},"click":function(){var i=1;while(!body_data[body_data.length-i]||!body_data[body_data.length-i].pnotify_history||body_data[body_data.length-i].is(":visible")){if(body_data.length-i===0)
return false;i++;}
var n=body_data[body_data.length-i];if(n.pnotify_display)
n.pnotify_display();return false;}})).appendTo(body);var handle=$("<span />",{"class":"ui-pnotify-history-pulldown ui-icon ui-icon-grip-dotted-horizontal","mouseenter":function(){body_history.animate({top:"0"},{duration:100,queue:false});}}).appendTo(body_history);history_handle_top=handle.offset().top+2;body_history.css({top:"-"+history_handle_top+"px"});body.data("pnotify_history",body_history);}}
opts.pnotify_stack.animation=false;pnotify.pnotify_display();return pnotify;}});var re_on=/^on/;var re_mouse_events=/^(dbl)?click$|^mouse(move|down|up|over|out|enter|leave)$|^contextmenu$/;var re_ui_events=/^(focus|blur|select|change|reset)$|^key(press|down|up)$/;var re_html_events=/^(scroll|resize|(un)?load|abort|error)$/;var dom_event=function(e,orig_e){var event_object;e=e.toLowerCase();if(document.createEvent&&this.dispatchEvent){e=e.replace(re_on,'');if(e.match(re_mouse_events)){$(this).offset();event_object=document.createEvent("MouseEvents");event_object.initMouseEvent(e,orig_e.bubbles,orig_e.cancelable,orig_e.view,orig_e.detail,orig_e.screenX,orig_e.screenY,orig_e.clientX,orig_e.clientY,orig_e.ctrlKey,orig_e.altKey,orig_e.shiftKey,orig_e.metaKey,orig_e.button,orig_e.relatedTarget);}else if(e.match(re_ui_events)){event_object=document.createEvent("UIEvents");event_object.initUIEvent(e,orig_e.bubbles,orig_e.cancelable,orig_e.view,orig_e.detail);}else if(e.match(re_html_events)){event_object=document.createEvent("HTMLEvents");event_object.initEvent(e,orig_e.bubbles,orig_e.cancelable);}
if(!event_object)return;this.dispatchEvent(event_object);}else{if(!e.match(re_on))e="on"+e;event_object=document.createEventObject(orig_e);this.fireEvent(e,event_object);}};$.pnotify.defaults={pnotify_title:false,pnotify_text:false,pnotify_addclass:"",pnotify_nonblock:false,pnotify_nonblock_opacity:.2,pnotify_history:true,pnotify_width:"300px",pnotify_min_height:"16px",pnotify_type:"notice",pnotify_notice_icon:"ui-icon ui-icon-info",pnotify_error_icon:"ui-icon ui-icon-alert",pnotify_animation:"fade",pnotify_animate_speed:"slow",pnotify_opacity:1,pnotify_shadow:false,pnotify_closer:true,pnotify_hide:true,pnotify_delay:8000,pnotify_mouse_reset:true,pnotify_remove:true,pnotify_insert_brs:true,pnotify_stack:{"dir1":"down","dir2":"left","push":"bottom"}};})(jQuery);if(!window.JSON){window.JSON={};}
(function(){"use strict";function f(n){return n<10?'0'+n:n;}
if(typeof Date.prototype.toJSON!=='function'){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+'-'+
f(this.getUTCMonth()+1)+'-'+
f(this.getUTCDate())+'T'+
f(this.getUTCHours())+':'+
f(this.getUTCMinutes())+':'+
f(this.getUTCSeconds())+'Z':null;};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf();};}
var JSON=window.JSON,cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==='string'?c:'\\u'+('0000'+a.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+string+'"';}
function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==='object'&&typeof value.toJSON==='function'){value=value.toJSON(key);}
if(typeof rep==='function'){value=rep.call(holder,key,value);}
switch(typeof value){case'string':return quote(value);case'number':return isFinite(value)?String(value):'null';case'boolean':case'null':return String(value);case'object':if(!value){return'null';}
gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==='[object Array]'){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||'null';}
v=partial.length===0?'[]':gap?'[\n'+gap+partial.join(',\n'+gap)+'\n'+mind+']':'['+partial.join(',')+']';gap=mind;return v;}
if(rep&&typeof rep==='object'){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==='string'){v=str(k,value);if(v){partial.push(quote(k)+(gap?': ':':')+v);}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?': ':':')+v);}}}}
v=partial.length===0?'{}':gap?'{\n'+gap+partial.join(',\n'+gap)+'\n'+mind+'}':'{'+partial.join(',')+'}';gap=mind;return v;}}
if(typeof JSON.stringify!=='function'){JSON.stringify=function(value,replacer,space){var i;gap='';indent='';if(typeof space==='number'){for(i=0;i<space;i+=1){indent+=' ';}}else if(typeof space==='string'){indent=space;}
rep=replacer;if(replacer&&typeof replacer!=='function'&&(typeof replacer!=='object'||typeof replacer.length!=='number')){throw new Error('JSON.stringify');}
return str('',{'':value});};}
if(typeof JSON.parse!=='function'){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==='object'){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v;}else{delete value[k];}}}}
return reviver.call(holder,key,value);}
text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return'\\u'+
('0000'+a.charCodeAt(0).toString(16)).slice(-4);});}
if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,''))){j=eval('('+text+')');return typeof reviver==='function'?walk({'':j},''):j;}
throw new SyntaxError('JSON.parse');};}}());(function(window,undefined){"use strict";var
History=window.History=window.History||{},jQuery=window.jQuery;if(typeof History.Adapter!=='undefined'){throw new Error('History.js Adapter has already been loaded...');}
History.Adapter={bind:function(el,event,callback){jQuery(el).bind(event,callback);},trigger:function(el,event,extra){jQuery(el).trigger(event,extra);},extractEventData:function(key,event,extra){var result=(event&&event.originalEvent&&event.originalEvent[key])||(extra&&extra[key])||undefined;return result;},onDomLoad:function(callback){jQuery(callback);}};if(typeof History.init!=='undefined'){History.init();}})(window);(function(window,undefined){"use strict";var
document=window.document,setTimeout=window.setTimeout||setTimeout,clearTimeout=window.clearTimeout||clearTimeout,setInterval=window.setInterval||setInterval,History=window.History=window.History||{};if(typeof History.initHtml4!=='undefined'){throw new Error('History.js HTML4 Support has already been loaded...');}
History.initHtml4=function(){if(typeof History.initHtml4.initialized!=='undefined'){return false;}
else{History.initHtml4.initialized=true;}
History.enabled=true;History.savedHashes=[];History.isLastHash=function(newHash){var oldHash=History.getHashByIndex(),isLast;isLast=newHash===oldHash;return isLast;};History.saveHash=function(newHash){if(History.isLastHash(newHash)){return false;}
History.savedHashes.push(newHash);return true;};History.getHashByIndex=function(index){var hash=null;if(typeof index==='undefined'){hash=History.savedHashes[History.savedHashes.length-1];}
else if(index<0){hash=History.savedHashes[History.savedHashes.length+index];}
else{hash=History.savedHashes[index];}
return hash;};History.discardedHashes={};History.discardedStates={};History.discardState=function(discardedState,forwardState,backState){var discardedStateHash=History.getHashByState(discardedState),discardObject;discardObject={'discardedState':discardedState,'backState':backState,'forwardState':forwardState};History.discardedStates[discardedStateHash]=discardObject;return true;};History.discardHash=function(discardedHash,forwardState,backState){var discardObject={'discardedHash':discardedHash,'backState':backState,'forwardState':forwardState};History.discardedHashes[discardedHash]=discardObject;return true;};History.discardedState=function(State){var StateHash=History.getHashByState(State),discarded;discarded=History.discardedStates[StateHash]||false;return discarded;};History.discardedHash=function(hash){var discarded=History.discardedHashes[hash]||false;return discarded;};History.recycleState=function(State){var StateHash=History.getHashByState(State);if(History.discardedState(State)){delete History.discardedStates[StateHash];}
return true;};if(History.emulated.hashChange){History.hashChangeInit=function(){History.checkerFunction=null;var lastDocumentHash='',iframeId,iframe,lastIframeHash,checkerRunning;if(History.isInternetExplorer()){iframeId='historyjs-iframe';iframe=document.createElement('iframe');iframe.setAttribute('id',iframeId);iframe.style.display='none';document.body.appendChild(iframe);iframe.contentWindow.document.open();iframe.contentWindow.document.close();lastIframeHash='';checkerRunning=false;History.checkerFunction=function(){if(checkerRunning){return false;}
checkerRunning=true;var documentHash=History.getHash()||'',iframeHash=History.unescapeHash(iframe.contentWindow.document.location.hash)||'';if(documentHash!==lastDocumentHash){lastDocumentHash=documentHash;if(iframeHash!==documentHash){lastIframeHash=iframeHash=documentHash;iframe.contentWindow.document.open();iframe.contentWindow.document.close();iframe.contentWindow.document.location.hash=History.escapeHash(documentHash);}
History.Adapter.trigger(window,'hashchange');}
else if(iframeHash!==lastIframeHash){lastIframeHash=iframeHash;History.setHash(iframeHash,false);}
checkerRunning=false;return true;};}
else{History.checkerFunction=function(){var documentHash=History.getHash();if(documentHash!==lastDocumentHash){lastDocumentHash=documentHash;History.Adapter.trigger(window,'hashchange');}
return true;};}
History.intervalList.push(setInterval(History.checkerFunction,History.options.hashChangeInterval));return true;};History.Adapter.onDomLoad(History.hashChangeInit);}
if(History.emulated.pushState){History.onHashChange=function(event){var currentUrl=((event&&event.newURL)||document.location.href),currentHash=History.getHashByUrl(currentUrl),currentState=null,currentStateHash=null,currentStateHashExits=null,discardObject;if(History.isLastHash(currentHash)){History.busy(false);return false;}
History.doubleCheckComplete();History.saveHash(currentHash);if(currentHash&&History.isTraditionalAnchor(currentHash)){History.Adapter.trigger(window,'anchorchange');History.busy(false);return false;}
currentState=History.extractState(History.getFullUrl(currentHash||document.location.href,false),true);if(History.isLastSavedState(currentState)){History.busy(false);return false;}
currentStateHash=History.getHashByState(currentState);discardObject=History.discardedState(currentState);if(discardObject){if(History.getHashByIndex(-2)===History.getHashByState(discardObject.forwardState)){History.back(false);}else{History.forward(false);}
return false;}
History.pushState(currentState.data,currentState.title,currentState.url,false);return true;};History.Adapter.bind(window,'hashchange',History.onHashChange);History.pushState=function(data,title,url,queue){if(History.getHashByUrl(url)){throw new Error('History.js does not support states with fragement-identifiers (hashes/anchors).');}
if(queue!==false&&History.busy()){History.pushQueue({scope:History,callback:History.pushState,args:arguments,queue:queue});return false;}
History.busy(true);var newState=History.createStateObject(data,title,url),newStateHash=History.getHashByState(newState),oldState=History.getState(false),oldStateHash=History.getHashByState(oldState),html4Hash=History.getHash();History.storeState(newState);History.expectedStateId=newState.id;History.recycleState(newState);History.setTitle(newState);if(newStateHash===oldStateHash){History.busy(false);return false;}
if(newStateHash!==html4Hash&&newStateHash!==History.getShortUrl(document.location.href)){History.setHash(newStateHash,false);return false;}
History.saveState(newState);History.Adapter.trigger(window,'statechange');History.busy(false);return true;};History.replaceState=function(data,title,url,queue){if(History.getHashByUrl(url)){throw new Error('History.js does not support states with fragement-identifiers (hashes/anchors).');}
if(queue!==false&&History.busy()){History.pushQueue({scope:History,callback:History.replaceState,args:arguments,queue:queue});return false;}
History.busy(true);var newState=History.createStateObject(data,title,url),oldState=History.getState(false),previousState=History.getStateByIndex(-2);History.discardState(oldState,newState,previousState);History.pushState(newState.data,newState.title,newState.url,false);return true;};}
if(History.emulated.pushState){if(History.getHash()&&!History.emulated.hashChange){History.Adapter.onDomLoad(function(){History.Adapter.trigger(window,'hashchange');});}}};if(typeof History.init!=='undefined'){History.init();}})(window);(function(window,undefined){"use strict";var
console=window.console||undefined,document=window.document,navigator=window.navigator,sessionStorage=window.sessionStorage||false,setTimeout=window.setTimeout,clearTimeout=window.clearTimeout,setInterval=window.setInterval,clearInterval=window.clearInterval,JSON=window.JSON,alert=window.alert,History=window.History=window.History||{},history=window.history;JSON.stringify=JSON.stringify||JSON.encode;JSON.parse=JSON.parse||JSON.decode;if(typeof History.init!=='undefined'){throw new Error('History.js Core has already been loaded...');}
History.init=function(){if(typeof History.Adapter==='undefined'){return false;}
if(typeof History.initCore!=='undefined'){History.initCore();}
if(typeof History.initHtml4!=='undefined'){History.initHtml4();}
return true;};History.initCore=function(){if(typeof History.initCore.initialized!=='undefined'){return false;}
else{History.initCore.initialized=true;}
History.options=History.options||{};History.options.hashChangeInterval=History.options.hashChangeInterval||100;History.options.safariPollInterval=History.options.safariPollInterval||500;History.options.doubleCheckInterval=History.options.doubleCheckInterval||500;History.options.storeInterval=History.options.storeInterval||1000;History.options.busyDelay=History.options.busyDelay||250;History.options.debug=History.options.debug||false;History.options.initialTitle=History.options.initialTitle||document.title;History.intervalList=[];History.clearAllIntervals=function(){var i,il=History.intervalList;if(typeof il!=="undefined"&&il!==null){for(i=0;i<il.length;i++){clearInterval(il[i]);}
History.intervalList=null;}};History.debug=function(){if((History.options.debug||false)){History.log.apply(History,arguments);}};History.log=function(){var
consoleExists=!(typeof console==='undefined'||typeof console.log==='undefined'||typeof console.log.apply==='undefined'),textarea=document.getElementById('log'),message,i,n,args,arg;if(consoleExists){args=Array.prototype.slice.call(arguments);message=args.shift();if(typeof console.debug!=='undefined'){console.debug.apply(console,[message,args]);}
else{console.log.apply(console,[message,args]);}}
else{message=("\n"+arguments[0]+"\n");}
for(i=1,n=arguments.length;i<n;++i){arg=arguments[i];if(typeof arg==='object'&&typeof JSON!=='undefined'){try{arg=JSON.stringify(arg);}
catch(Exception){}}
message+="\n"+arg+"\n";}
if(textarea){textarea.value+=message+"\n-----\n";textarea.scrollTop=textarea.scrollHeight-textarea.clientHeight;}
else if(!consoleExists){alert(message);}
return true;};History.getInternetExplorerMajorVersion=function(){var result=History.getInternetExplorerMajorVersion.cached=(typeof History.getInternetExplorerMajorVersion.cached!=='undefined')?History.getInternetExplorerMajorVersion.cached:(function(){var v=3,div=document.createElement('div'),all=div.getElementsByTagName('i');while((div.innerHTML='<!--[if gt IE '+(++v)+']><i></i><![endif]-->')&&all[0]){}
return(v>4)?v:false;})();return result;};History.isInternetExplorer=function(){var result=History.isInternetExplorer.cached=(typeof History.isInternetExplorer.cached!=='undefined')?History.isInternetExplorer.cached:Boolean(History.getInternetExplorerMajorVersion());return result;};History.emulated={pushState:!Boolean(window.history&&window.history.pushState&&window.history.replaceState&&!((/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i).test(navigator.userAgent)||(/AppleWebKit\/5([0-2]|3[0-2])/i).test(navigator.userAgent))),hashChange:Boolean(!(('onhashchange'in window)||('onhashchange'in document))||(History.isInternetExplorer()&&History.getInternetExplorerMajorVersion()<8))};History.enabled=!History.emulated.pushState;History.bugs={setHash:Boolean(!History.emulated.pushState&&navigator.vendor==='Apple Computer, Inc.'&&/AppleWebKit\/5([0-2]|3[0-3])/.test(navigator.userAgent)),safariPoll:Boolean(!History.emulated.pushState&&navigator.vendor==='Apple Computer, Inc.'&&/AppleWebKit\/5([0-2]|3[0-3])/.test(navigator.userAgent)),ieDoubleCheck:Boolean(History.isInternetExplorer()&&History.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(History.isInternetExplorer()&&History.getInternetExplorerMajorVersion()<7)};History.isEmptyObject=function(obj){for(var name in obj){return false;}
return true;};History.cloneObject=function(obj){var hash,newObj;if(obj){hash=JSON.stringify(obj);newObj=JSON.parse(hash);}
else{newObj={};}
return newObj;};History.getRootUrl=function(){var rootUrl=document.location.protocol+'//'+(document.location.hostname||document.location.host);if(document.location.port||false){rootUrl+=':'+document.location.port;}
rootUrl+='/';return rootUrl;};History.getBaseHref=function(){var
baseElements=document.getElementsByTagName('base'),baseElement=null,baseHref='';if(baseElements.length===1){baseElement=baseElements[0];baseHref=baseElement.href.replace(/[^\/]+$/,'');}
baseHref=baseHref.replace(/\/+$/,'');if(baseHref)baseHref+='/';return baseHref;};History.getBaseUrl=function(){var baseUrl=History.getBaseHref()||History.getBasePageUrl()||History.getRootUrl();return baseUrl;};History.getPageUrl=function(){var
State=History.getState(false,false),stateUrl=(State||{}).url||document.location.href,pageUrl;pageUrl=stateUrl.replace(/\/+$/,'').replace(/[^\/]+$/,function(part,index,string){return(/\./).test(part)?part:part+'/';});return pageUrl;};History.getBasePageUrl=function(){var basePageUrl=document.location.href.replace(/[#\?].*/,'').replace(/[^\/]+$/,function(part,index,string){return(/[^\/]$/).test(part)?'':part;}).replace(/\/+$/,'')+'/';return basePageUrl;};History.getFullUrl=function(url,allowBaseHref){var fullUrl=url,firstChar=url.substring(0,1);allowBaseHref=(typeof allowBaseHref==='undefined')?true:allowBaseHref;if(/[a-z]+\:\/\//.test(url)){}
else if(firstChar==='/'){fullUrl=History.getRootUrl()+url.replace(/^\/+/,'');}
else if(firstChar==='#'){fullUrl=History.getPageUrl().replace(/#.*/,'')+url;}
else if(firstChar==='?'){fullUrl=History.getPageUrl().replace(/[\?#].*/,'')+url;}
else{if(allowBaseHref){fullUrl=History.getBaseUrl()+url.replace(/^(\.\/)+/,'');}else{fullUrl=History.getBasePageUrl()+url.replace(/^(\.\/)+/,'');}}
return fullUrl.replace(/\#$/,'');};History.getShortUrl=function(url){var shortUrl=url,baseUrl=History.getBaseUrl(),rootUrl=History.getRootUrl();if(History.emulated.pushState){shortUrl=shortUrl.replace(baseUrl,'');}
shortUrl=shortUrl.replace(rootUrl,'/');if(History.isTraditionalAnchor(shortUrl)){shortUrl='./'+shortUrl;}
shortUrl=shortUrl.replace(/^(\.\/)+/g,'./').replace(/\#$/,'');return shortUrl;};History.store={};History.idToState=History.idToState||{};History.stateToId=History.stateToId||{};History.urlToId=History.urlToId||{};History.storedStates=History.storedStates||[];History.savedStates=History.savedStates||[];History.normalizeStore=function(){History.store.idToState=History.store.idToState||{};History.store.urlToId=History.store.urlToId||{};History.store.stateToId=History.store.stateToId||{};};History.getState=function(friendly,create){if(typeof friendly==='undefined'){friendly=true;}
if(typeof create==='undefined'){create=true;}
var State=History.getLastSavedState();if(!State&&create){State=History.createStateObject();}
if(friendly){State=History.cloneObject(State);State.url=State.cleanUrl||State.url;}
return State;};History.getIdByState=function(newState){var id=History.extractId(newState.url),str;if(!id){str=History.getStateString(newState);if(typeof History.stateToId[str]!=='undefined'){id=History.stateToId[str];}
else if(typeof History.store.stateToId[str]!=='undefined'){id=History.store.stateToId[str];}
else{while(true){id=(new Date()).getTime()+String(Math.random()).replace(/\D/g,'');if(typeof History.idToState[id]==='undefined'&&typeof History.store.idToState[id]==='undefined'){break;}}
History.stateToId[str]=id;History.idToState[id]=newState;}}
return id;};History.normalizeState=function(oldState){var newState,dataNotEmpty;if(!oldState||(typeof oldState!=='object')){oldState={};}
if(typeof oldState.normalized!=='undefined'){return oldState;}
if(!oldState.data||(typeof oldState.data!=='object')){oldState.data={};}
newState={};newState.normalized=true;newState.title=oldState.title||'';newState.url=History.getFullUrl(History.unescapeString(oldState.url||document.location.href));newState.hash=History.getShortUrl(newState.url);newState.data=History.cloneObject(oldState.data);newState.id=History.getIdByState(newState);newState.cleanUrl=newState.url.replace(/\??\&_suid.*/,'');newState.url=newState.cleanUrl;dataNotEmpty=!History.isEmptyObject(newState.data);if(newState.title||dataNotEmpty){newState.hash=History.getShortUrl(newState.url).replace(/\??\&_suid.*/,'');if(!/\?/.test(newState.hash)){newState.hash+='?';}
newState.hash+='&_suid='+newState.id;}
newState.hashedUrl=History.getFullUrl(newState.hash);if((History.emulated.pushState||History.bugs.safariPoll)&&History.hasUrlDuplicate(newState)){newState.url=newState.hashedUrl;}
return newState;};History.createStateObject=function(data,title,url){var State={'data':data,'title':title,'url':url};State=History.normalizeState(State);return State;};History.getStateById=function(id){id=String(id);var State=History.idToState[id]||History.store.idToState[id]||undefined;return State;};History.getStateString=function(passedState){var State,cleanedState,str;State=History.normalizeState(passedState);cleanedState={data:State.data,title:passedState.title,url:passedState.url};str=JSON.stringify(cleanedState);return str;};History.getStateId=function(passedState){var State,id;State=History.normalizeState(passedState);id=State.id;return id;};History.getHashByState=function(passedState){var State,hash;State=History.normalizeState(passedState);hash=State.hash;return hash;};History.extractId=function(url_or_hash){var id,parts,url;parts=/(.*)\&_suid=([0-9]+)$/.exec(url_or_hash);url=parts?(parts[1]||url_or_hash):url_or_hash;id=parts?String(parts[2]||''):'';return id||false;};History.isTraditionalAnchor=function(url_or_hash){var isTraditional=!(/[\/\?\.]/.test(url_or_hash));return isTraditional;};History.extractState=function(url_or_hash,create){var State=null,id,url;create=create||false;id=History.extractId(url_or_hash);if(id){State=History.getStateById(id);}
if(!State){url=History.getFullUrl(url_or_hash);id=History.getIdByUrl(url)||false;if(id){State=History.getStateById(id);}
if(!State&&create&&!History.isTraditionalAnchor(url_or_hash)){State=History.createStateObject(null,null,url);}}
return State;};History.getIdByUrl=function(url){var id=History.urlToId[url]||History.store.urlToId[url]||undefined;return id;};History.getLastSavedState=function(){return History.savedStates[History.savedStates.length-1]||undefined;};History.getLastStoredState=function(){return History.storedStates[History.storedStates.length-1]||undefined;};History.hasUrlDuplicate=function(newState){var hasDuplicate=false,oldState;oldState=History.extractState(newState.url);hasDuplicate=oldState&&oldState.id!==newState.id;return hasDuplicate;};History.storeState=function(newState){History.urlToId[newState.url]=newState.id;History.storedStates.push(History.cloneObject(newState));return newState;};History.isLastSavedState=function(newState){var isLast=false,newId,oldState,oldId;if(History.savedStates.length){newId=newState.id;oldState=History.getLastSavedState();oldId=oldState.id;isLast=(newId===oldId);}
return isLast;};History.saveState=function(newState){if(History.isLastSavedState(newState)){return false;}
History.savedStates.push(History.cloneObject(newState));return true;};History.getStateByIndex=function(index){var State=null;if(typeof index==='undefined'){State=History.savedStates[History.savedStates.length-1];}
else if(index<0){State=History.savedStates[History.savedStates.length+index];}
else{State=History.savedStates[index];}
return State;};History.getHash=function(){var hash=History.unescapeHash(document.location.hash);return hash;};History.unescapeString=function(str){var result=str,tmp;while(true){tmp=window.unescape(result);if(tmp===result){break;}
result=tmp;}
return result;};History.unescapeHash=function(hash){var result=History.normalizeHash(hash);result=History.unescapeString(result);return result;};History.normalizeHash=function(hash){var result=hash.replace(/[^#]*#/,'').replace(/#.*/,'');return result;};History.setHash=function(hash,queue){var adjustedHash,State,pageUrl;if(queue!==false&&History.busy()){History.pushQueue({scope:History,callback:History.setHash,args:arguments,queue:queue});return false;}
adjustedHash=History.escapeHash(hash);History.busy(true);State=History.extractState(hash,true);if(State&&!History.emulated.pushState){History.pushState(State.data,State.title,State.url,false);}
else if(document.location.hash!==adjustedHash){if(History.bugs.setHash){pageUrl=History.getPageUrl();History.pushState(null,null,pageUrl+'#'+adjustedHash,false);}
else{document.location.hash=adjustedHash;}}
return History;};History.escapeHash=function(hash){var result=History.normalizeHash(hash);result=window.escape(result);if(!History.bugs.hashEscape){result=result.replace(/\%21/g,'!').replace(/\%26/g,'&').replace(/\%3D/g,'=').replace(/\%3F/g,'?');}
return result;};History.getHashByUrl=function(url){var hash=String(url).replace(/([^#]*)#?([^#]*)#?(.*)/,'$2');hash=History.unescapeHash(hash);return hash;};History.setTitle=function(newState){var title=newState.title,firstState;if(!title){firstState=History.getStateByIndex(0);if(firstState&&firstState.url===newState.url){title=firstState.title||History.options.initialTitle;}}
try{document.getElementsByTagName('title')[0].innerHTML=title.replace('<','&lt;').replace('>','&gt;').replace(' & ',' &amp; ');}
catch(Exception){}
document.title=title;return History;};History.queues=[];History.busy=function(value){if(typeof value!=='undefined'){History.busy.flag=value;}
else if(typeof History.busy.flag==='undefined'){History.busy.flag=false;}
if(!History.busy.flag){clearTimeout(History.busy.timeout);var fireNext=function(){var i,queue,item;if(History.busy.flag)return;for(i=History.queues.length-1;i>=0;--i){queue=History.queues[i];if(queue.length===0)continue;item=queue.shift();History.fireQueueItem(item);History.busy.timeout=setTimeout(fireNext,History.options.busyDelay);}};History.busy.timeout=setTimeout(fireNext,History.options.busyDelay);}
return History.busy.flag;};History.busy.flag=false;History.fireQueueItem=function(item){return item.callback.apply(item.scope||History,item.args||[]);};History.pushQueue=function(item){History.queues[item.queue||0]=History.queues[item.queue||0]||[];History.queues[item.queue||0].push(item);return History;};History.queue=function(item,queue){if(typeof item==='function'){item={callback:item};}
if(typeof queue!=='undefined'){item.queue=queue;}
if(History.busy()){History.pushQueue(item);}else{History.fireQueueItem(item);}
return History;};History.clearQueue=function(){History.busy.flag=false;History.queues=[];return History;};History.stateChanged=false;History.doubleChecker=false;History.doubleCheckComplete=function(){History.stateChanged=true;History.doubleCheckClear();return History;};History.doubleCheckClear=function(){if(History.doubleChecker){clearTimeout(History.doubleChecker);History.doubleChecker=false;}
return History;};History.doubleCheck=function(tryAgain){History.stateChanged=false;History.doubleCheckClear();if(History.bugs.ieDoubleCheck){History.doubleChecker=setTimeout(function(){History.doubleCheckClear();if(!History.stateChanged){tryAgain();}
return true;},History.options.doubleCheckInterval);}
return History;};History.safariStatePoll=function(){var
urlState=History.extractState(document.location.href),newState;if(!History.isLastSavedState(urlState)){newState=urlState;}
else{return;}
if(!newState){newState=History.createStateObject();}
History.Adapter.trigger(window,'popstate');return History;};History.back=function(queue){if(queue!==false&&History.busy()){History.pushQueue({scope:History,callback:History.back,args:arguments,queue:queue});return false;}
History.busy(true);History.doubleCheck(function(){History.back(false);});history.go(-1);return true;};History.forward=function(queue){if(queue!==false&&History.busy()){History.pushQueue({scope:History,callback:History.forward,args:arguments,queue:queue});return false;}
History.busy(true);History.doubleCheck(function(){History.forward(false);});history.go(1);return true;};History.go=function(index,queue){var i;if(index>0){for(i=1;i<=index;++i){History.forward(queue);}}
else if(index<0){for(i=-1;i>=index;--i){History.back(queue);}}
else{throw new Error('History.go: History.go requires a positive or negative integer passed.');}
return History;};if(History.emulated.pushState){var emptyFunction=function(){};History.pushState=History.pushState||emptyFunction;History.replaceState=History.replaceState||emptyFunction;}
else{History.onPopState=function(event,extra){var stateId=false,newState=false,currentHash,currentState;History.doubleCheckComplete();currentHash=History.getHash();if(currentHash){currentState=History.extractState(currentHash||document.location.href,true);if(currentState){History.replaceState(currentState.data,currentState.title,currentState.url,false);}
else{History.Adapter.trigger(window,'anchorchange');History.busy(false);}
History.expectedStateId=false;return false;}
stateId=History.Adapter.extractEventData('state',event,extra)||false;if(stateId){newState=History.getStateById(stateId);}
else if(History.expectedStateId){newState=History.getStateById(History.expectedStateId);}
else{newState=History.extractState(document.location.href);}
if(!newState){newState=History.createStateObject(null,null,document.location.href);}
History.expectedStateId=false;if(History.isLastSavedState(newState)){History.busy(false);return false;}
History.storeState(newState);History.saveState(newState);History.setTitle(newState);History.Adapter.trigger(window,'statechange');History.busy(false);return true;};History.Adapter.bind(window,'popstate',History.onPopState);History.pushState=function(data,title,url,queue){if(History.getHashByUrl(url)&&History.emulated.pushState){throw new Error('History.js does not support states with fragement-identifiers (hashes/anchors).');}
if(queue!==false&&History.busy()){History.pushQueue({scope:History,callback:History.pushState,args:arguments,queue:queue});return false;}
History.busy(true);var newState=History.createStateObject(data,title,url);if(History.isLastSavedState(newState)){History.busy(false);}
else{History.storeState(newState);History.expectedStateId=newState.id;history.pushState(newState.id,newState.title,newState.url);History.Adapter.trigger(window,'popstate');}
return true;};History.replaceState=function(data,title,url,queue){if(History.getHashByUrl(url)&&History.emulated.pushState){throw new Error('History.js does not support states with fragement-identifiers (hashes/anchors).');}
if(queue!==false&&History.busy()){History.pushQueue({scope:History,callback:History.replaceState,args:arguments,queue:queue});return false;}
History.busy(true);var newState=History.createStateObject(data,title,url);if(History.isLastSavedState(newState)){History.busy(false);}
else{History.storeState(newState);History.expectedStateId=newState.id;history.replaceState(newState.id,newState.title,newState.url);History.Adapter.trigger(window,'popstate');}
return true;};}
if(sessionStorage){try{History.store=JSON.parse(sessionStorage.getItem('History.store'))||{};}
catch(err){History.store={};}
History.normalizeStore();}
else{History.store={};History.normalizeStore();}
History.Adapter.bind(window,"beforeunload",History.clearAllIntervals);History.Adapter.bind(window,"unload",History.clearAllIntervals);History.saveState(History.storeState(History.extractState(document.location.href,true)));if(sessionStorage){History.onUnload=function(){var currentStore,item;try{currentStore=JSON.parse(sessionStorage.getItem('History.store'))||{};}
catch(err){currentStore={};}
currentStore.idToState=currentStore.idToState||{};currentStore.urlToId=currentStore.urlToId||{};currentStore.stateToId=currentStore.stateToId||{};for(item in History.idToState){if(!History.idToState.hasOwnProperty(item)){continue;}
currentStore.idToState[item]=History.idToState[item];}
for(item in History.urlToId){if(!History.urlToId.hasOwnProperty(item)){continue;}
currentStore.urlToId[item]=History.urlToId[item];}
for(item in History.stateToId){if(!History.stateToId.hasOwnProperty(item)){continue;}
currentStore.stateToId[item]=History.stateToId[item];}
History.store=currentStore;History.normalizeStore();sessionStorage.setItem('History.store',JSON.stringify(currentStore));};History.intervalList.push(setInterval(History.onUnload,History.options.storeInterval));History.Adapter.bind(window,'beforeunload',History.onUnload);History.Adapter.bind(window,'unload',History.onUnload);}
if(!History.emulated.pushState){if(History.bugs.safariPoll){History.intervalList.push(setInterval(History.safariStatePoll,History.options.safariPollInterval));}
if(navigator.vendor==='Apple Computer, Inc.'||(navigator.appCodeName||'')==='Mozilla'){History.Adapter.bind(window,'hashchange',function(){History.Adapter.trigger(window,'popstate');});if(History.getHash()){History.Adapter.onDomLoad(function(){History.Adapter.trigger(window,'hashchange');});}}}};History.init();})(window);(function($)
{$(document).start(function()
{'use strict';var $odM=$('.jODMainSearch');if($odM.length>0)
{var packagerParams=$('script.jAppPackager').attr('src').match(/(\S+)\?.*(&v=[^&]+)/i);if(packagerParams!==null&&packagerParams.length==3)
{$.proxyLoader({load:packagerParams[1]+'?m=odmainsearch'+packagerParams[2],complete:function()
{(function($){$.perform(function(){$odM.each(function(){var $this=$(this);$this.odMainsearch($.parseJSON($this.attr('data-options')));});}).onlyIf(function(){return(typeof $.fn.odMainsearch!='undefined');}).orRetry(100);}(jQuery));}});}}},{name:'odMainSearch'});}(jQuery));(function($)
{$(document).start(function()
{'use strict';var $odI=$('.jODInsitu');if($odI.length>0)
{var packagerParams=$('script.jAppPackager').attr('src').match(/(\S+)\?.*(&v=[^&]+)/i);if(packagerParams!==null&&packagerParams.length==3)
{$.proxyLoader({load:[packagerParams[1]+'?m=odinsitu'+packagerParams[2]],complete:function()
{var runOdInsitu=function(){$odI.each(function(){var $this=$(this);$this.odInsitu($.parseJSON($this.attr('data-options')));});};if($.jet.services.ckeditor.isLoaded()){runOdInsitu();}else{$(document).on('ckeditorReady',runOdInsitu);}}});}}},{name:'odInsitu'});}(jQuery));(function($)
{if($data.ccmcms.services.slider.start===true){$.yslider={options:{title:"",subtitle:"",slideBy:4,autoplay:true,contentTitle:"h2"}};$(document).start(function(){$($data.ccmcms.services.slider.selector).closest('section').removeClass('slider_loading');$($data.ccmcms.services.slider.selector).length>0&&typeof $.fn.accessNews!='undefined'&&$($data.ccmcms.services.slider.selector).accessNews($.extend(true,$.yslider.options,$data.ccmcms.services.slider.options));});}})(jQuery);(function($)
{try{$data.services.contents;}catch(e){typeof $data=='undefined'&&($data={});typeof $data.services=='undefined'&&($data.services={});typeof $data.services.contents=='undefined'&&($data.services.contents={});}
finally{$data.services.contents=$.extend({content:{common:{view:{start:true},form:{start:false},common:{start:false}},top:{view:{start:false},form:{start:false},common:{start:false}},qr:{view:{start:false},form:{start:false},common:{start:false}},blog:{view:{start:false},form:{start:false},common:{start:false}}}},$data.services.contents);}
$.contents={init:function()
{this.microTemplateInit();},users:{settings:{AUTO_FOLLOW:'7',NEVER_FOLLOW:'8'}},type:{POST:'1',JSON:'10',ANSWER:'2',COMMENT:'3'},counter:{FOLLOW:'3'},mode:{INSERT:'0',UPDATE:'1'},confs:{},fields:{},events:{}};$.extend($.contents,$.microTemplate);$.contentForm={defaultConfig:{fields:['title','content'],tagName:'FORM',mode:'0',onlyActive:false,anyHighlight:false,showTag:true,useDefaultTag:true,validateAnyActive:true,suggestFollowContent:false,geolocation:{start:false,options:{}},ccmEditorConfig:{actions:['italic','bold','underline','format','ul','ol','code','image','url'],discreteToolbar:false,history:true,defaultValue:true,magicLinks:{support:false}}},forms:[],form:function(element)
{this.config=null;this.ctype=null;this.title_max_length=150;this.$element=$(element);this.ccmEditorOn=true;this.init=function()
{var self=this,$self=$(this);this.$element.delegate('button[actid],a[actid]','click',function(e)
{e.preventDefault();e.stopPropagation();var $this=$(this);self.$element.trigger($this.attr('actid'),[false,$this]);return false;}).bind('save draft',function(e,data,$originalTarget)
{self.disable();if(!self.validate(e)){self.enable();return false;}
self.$ccmPaginator&&$.extend(data,{orderedItems:self.$ccmPaginator.data('paginatorData').orderedItems});var postData=self.to_struct_val(self.$element,true,data),urlAjax='',urlPost=self.$element.attr('action');if(!postData){return false;}
urlAjax=(urlPost.indexOf('?')==-1)?urlPost+'?xhr&actid='+e.type:urlPost+'&xhr&actid='+e.type;$.ajax({type:'POST',url:urlAjax,data:postData,dataType:'json',error:function(){self.enable();},success:function(r)
{switch(''+self.config.mode){case $.contents.mode.UPDATE:if(r.url){window.location=r.url;}else{if(typeof self.config.success=='function')
{self.config.success.call(self,r);}else{self.restore(r.html,r.id);r.t&&$('div.tagslist').html(r.t).css('visibility','visible');}}
break;case $.contents.mode.INSERT:switch(self.ctype){case $.contents.type.POST:case $.contents.type.JSON:if(r.url){window.location.href=r.url;}else{self.$element.html(r.str.success);}
break;case $.contents.type.ANSWER:case $.contents.type.COMMENT:if(self.config.suggestFollowContent&&($('a#updcounter_'+$.contents.counter.FOLLOW).length>0)&&($('input#invite_follow').length>0)&&($('input#invite_follow').val()==1))
{$.note.info($.contents.langs[$.contents.lang].COMMON_FORM_POPUP_FOLLOW_ACTION,{hide:false,classes:'notify_question'});var id_parentx=$('form.contentForm').attr('parentx');$('button.follow_yes').bind('click',function(){var cid=$.contents.counter.FOLLOW;typeof $.toggleCounterAction=='function'&&$.toggleCounterAction(id_parentx,cid,$('a#updcounter_'+$.contents.counter.FOLLOW));var chk_dont_ask=$('input#chk_dont_ask').attr('checked');$('div.notify_question').fadeOut();if(chk_dont_ask!==undefined){$.ajax({type:'POST',url:'/fr/p/xhr_upd_user_settings',data:{setting:$.contents.users.settings.AUTO_FOLLOW}});}else{$.note.info($.contents.langs[$.contents.lang].COMMON_FORM_POPUP_FOLLOW_INFO,{delay:5000});}});$('a.followNo').bind('click',function(){var chk_dont_ask=$('input#chk_dont_ask').attr('checked');$('div.notify_question').fadeOut();if(chk_dont_ask!==undefined){$.ajax({type:'POST',url:'/fr/p/xhr_upd_user_settings',data:{setting:$.contents.users.settings.NEVER_FOLLOW}});$('input#invite_follow').val('0');$('div.notify_question').fadeOut();}});}
switch(self.ctype){case $.contents.type.ANSWER:if(typeof self.config.success=='function')
{self.config.success.call(self,r,$originalTarget.attr('acttgt'));}
else{self.close();$("div#"+$originalTarget.attr('acttgt')).append(r.str.answer);$("h3#nb_answers").show().html(r.str.nbanswers);}
break;case $.contents.type.COMMENT:if(typeof self.config.success=='function')
{self.config.success.call(self,r,$originalTarget.attr('acttgt'));}
else{self.close();$("div#"+$originalTarget.attr('acttgt')).append(r.str.comment);$("a[actid='toggleCmt']").show();$("h3#nb_comments").show().html(r.str.nbcomment);}
break;}
$self.contentBindBehavior();break;}
if(typeof r.API!='undefined'&&typeof r.API.facebook!='undefined'&&typeof r.API.facebook.enabled!='undefined'&&r.API.facebook.enabled==true&&typeof r.API.facebook.action!='undefined'){$.jet.facebook.openGraph(r.API.facebook.action,r.API.facebook.params,'article',(r.API.facebook.options?r.API.facebook.options:[]));}}
$(document).trigger('refresh');return false;}});return false;}).bind('preview',function(e,data,$originalTarget)
{if($('div[viewbox]:visible').length>0||!self.validate(e)){return;}
var cst=null;switch(self.ctype){case $.contents.type.POST:case $.contents.type.JSON:cst='.box1';case $.contents.type.ANSWER:case $.contents.type.COMMENT:cst===null&&(cst='div.line');$.ajax({type:'POST',url:$originalTarget.attr('url')+'?xhr',data:self.to_struct_val(self.$element),dataType:'json',success:function(html){$('div.preview').remove();var
$p=$(html.preview).addClass('preview'),$b=self.$element.closest(cst);if($b.length>0)
{$b.before($p);}
else
{self.$element.parent().parent().parent().prepend($p);}
$.scrollTo($p,{axis:'y',offset:{top:-100},duration:250});return false;}});return false;default:}}).bind('cancel',function(e,data,$originalTarget)
{switch(self.config.mode)
{case $.contents.mode.UPDATE:var $contentOld=$('div#contentOld');html=($contentOld.length>0)?$contentOld.html():null;self.restore(html);self.ctype==$.contents.type.POST&&$('div.tagslist').css('visibility','visible');break;default:switch(self.ctype){case $.contents.type.POST:var form_elmts=self.to_struct_elmt(self.$element);for(var f in self.config.fields){switch(self.config.fields[f]){case'title':if(form_elmts.title.val()!=form_elmts.title.data('default'))
{form_elmts.title.val('');}
break;case'content':form_elmts.content.ccmEditorHistoryCancel();break;default:typeof self.config.fields[f]==='object'&&typeof self.config.fields[f].cancel==='function'&&self.config.fields[f].cancel.call(self,self.config.fields[f]);break;}}
break;case $.contents.type.ANSWER:case $.contents.type.COMMENT:default:if(self.ctype==$.contents.type.COMMENT){if(self.$element.closest('div.cmtline').children('div.line').attr('id')=='c0'&&(self.$element.closest('div.cmtline').siblings('.cuser:hidden').length!==0||self.$element.closest('div.cmtline').siblings().length===0)){self.$element.closest('div.cmtline').parent().hide();}}
self.close();break;}}});var $external_url=this.$element.find('[name=external_url]');if($external_url.length>0){$external_url.addLinkCrawler({behaveInput:true}).bind('urlValid urlInvalid',function(e){self.hide_error('content');switch(e.type){case'urlInvalid':self.show_error('external_url',$.contents.langs[$.contents.lang].COMMON_FORM_URL_INVALID)&&self.disable();break;case'urlValid':self.hide_error('external_url');break;default:break;}}).bind('crawlerDuplicated',function(){self.$element.find('div.divContent').show();self.config.showTag&&self.$element.find('div.divTagslist').hide();self.hide_error('external_url')&&self.enable();}).bind('crawlerNew',function(){self.config.showTag&&self.$element.find('div.divTagslist').show();self.hide_error('external_url')&&self.enable();}).bind('crawlerCrawling',function(){self.disable();}).bind('crawlerError',function(){self.disable();});this.$element.find('.divUrlDisplayer').addLinkCrawler().linkDisplayer({$commentNode:this.$element.find('.lastCmt'),$commentZone:this.$element.find('#bookmarkCmt'),$allowedInput:$external_url});}else{self.enable();}
this.config.fields.push('ctype');this.ctype=this.$element.find('.ctype').val();if(typeof this.config.editing=='undefined')
{this.config.editing=this.$element.closest('.hasId');}
$("input[type=checkbox]").ccmCheckbox();for(f in this.config.fields)
{var name=(typeof this.config.fields[f]==='object')?this.config.fields[f].name:this.config.fields[f];switch(name){case'tags':$.contents.fields.tags.init.call(this,this.config.fields[f]);break;case'title':$.contents.fields.title.init.call(this,this.config.fields[f]);break;case'content':$.contents.fields.content.init.call(this,this.config.fields[f]);break;case'geolocation':$.contents.fields.geolocation.init.call(this,this.config.fields[f]);break;case'ctype':var cnt=this.$element.find('.content');!cnt.hasClass('contenteditable')&&cnt.ccmEditor(this.config.ccmEditorConfig);if(this.ctype!=$.contents.type.POST){cnt.focus();}
break;default:typeof this.config.fields[f]==='object'&&typeof this.config.fields[f].init==='function'&&this.config.fields[f].init.call(this,this.config.fields[f]);break;}}};this.enable=function(){this.$element.find('[actid=save],[actid=preview],button.saveDraft').removeClass('buttonSel');};this.disable=function(){this.$element.find('[actid=save],[actid=preview],button.saveDraft').addClass('buttonSel');};this.show_error=function(node,msg){msg=msg||'undefined';switch(typeof node)
{case'string':var ucffield=node.charAt(0).toUpperCase()+node.substr(1);this.$element.find('.div'+ucffield).addClass('lineError');this.$element.find('.divError'+ucffield).html(msg);return true;case'object':node.showInputError(msg);return true;default:break;}};this.hide_error=function(node){switch(typeof node)
{case'string':var ucffield=node.charAt(0).toUpperCase()+node.substr(1);this.$element.find('.div'+ucffield).removeClass('lineError');this.$element.find('.divError'+ucffield).html('');return true;case'object':node.hideInputError();return true;default:break;}};this.close=function(){this.$element.contentFormRemove();this.config.editing.find(':visible').remove();(this.config.mode==$.contents.mode.INSERT)&&this.$element.closest('.editing:visible').remove();$("div.preview").remove();};this.restore=function(html,id)
{this.close();if(html!==null)
{if(this.config.editing.hasClass('sliderContainer')&&typeof id!='undefined')
{this.config.editing.removeClass('editing').find('.slideItem[data-id='+id+']').html(html);this.config.editing.find(':hidden').show();}
else{this.config.editing.removeClass('editing').empty().html(html);}}
else{this.config.editing.removeClass('editing').children().show();}
this.config.editing.contentBindBehavior();};this.validate=function(data)
{var errors=[],data=this.to_struct_val(this.$element,true,data),fields=this.config.fields.slice(0);data.external_url&&data.parentx&&fields.push('content');for(var f in fields)
{var name=(typeof fields[f]==='object')?fields[f].name:fields[f];switch(name)
{case'tags':!$.contents.fields.tags.validate.call(this,fields[f])&&errors.push($.contents.fields.tags.validate);break;case'title':!$.contents.fields.title.validate.call(this,fields[f])&&errors.push($.contents.fields.title.validate);break;case'url_title':var $urlTitle=this.$element.find('[name=url_title]'),urlTitle=$.trim($urlTitle.val());if($urlTitle.length>0&&urlTitle==='')
{$urlTitle.css({border:'1px dashed #E01616'}).parent().parent().css({border:'1px solid #E01616'}).find('.titleError').show();errors.push('url_title');}
else
{$urlTitle.css({border:'1px dashed transparent'}).parent().parent().css({border:'1px solid transparent'}).find('.titleError').hide();}
break;case'external_url':if(data.external_url===''||data.external_url==this.$element.find('.external_url').data('default')||data.external_url==this.$element.find('.external_url').attr('defaultstart'))
{this.show_error('external_url',$.contents.langs[$.contents.lang].COMMON_FORM_FIELD_FILLED);errors.push('external_url');}else
{this.hide_error('external_url');}
break;case'content':!$.contents.fields.content.validate.call(this,fields[f])&&errors.push($.contents.fields.content.validate);break;default:typeof fields[f]==='object'&&typeof fields[f].validate==='function'&&!fields[f].validate.call(this,fields[f])&&errors.push(fields[f].validate);break;}}
return errors.length===0;};this.to_struct_val=function(form,save,data){if(save&&typeof this.config.cnt=='object')
{var
cnt=[],instance=this,data2content=function(cnt)
{if(typeof this=='object')
{for(var i=0;i<this.length;++i)
{if(!this.hasOwnProperty(i)){continue;}
typeof this[i].$reference=='function'&&(this[i].$reference=this[i].$reference.apply(form));if(typeof this[i].$reference!='object'||typeof this[i].getContent!='function')
{console.warn('cnt is not formated correctly, see iner doc to get the right format');continue;}
var self=this[i];self.$reference.each(function(j){var z=(cnt.push(self.getContent.call(this,form,instance))-1);typeof self.cnt=="object"&&((typeof cnt[z].cnt=='undefined'&&(cnt[z].cnt=[])),data2content.call(self.cnt,cnt[z].cnt));});}}};data2content.call(this.config.cnt,cnt);return{cnt:$.extend(true,cnt,data)};}
if(typeof this.config.cnt=='function')
{cnt=this.config.cnt.call(this,form,data);if(cnt){return $.extend(true,data,cnt);}
return false;}
var ces=this.to_struct_elmt(form),tagsData='',nbInput=ces.tags_list.length;if(nbInput!=0)
{if(nbInput==1)
{tagsData=ces.tags_list.val();}
else{tagsData={};ces.tags_list.each(function()
{var $this=$(this),idCat=$this.closest('div.input').attr('data-cat');typeof idCat=='undefined'&&(idCat=-1);tagsData[idCat]=$this.val();});}}
return $.extend(true,{id:ces.id.val(),parentx:this.config.parentxupd||((ces.parentx.val()!='')?ces.parentx.val():undefined),parent:ces.parent.val(),module_id:ces.module_id.val(),title:ces.title.val(),external_url:ces.external_url.val()!=''?ces.external_url.val():undefined,content:!ces.content.ccmEditorIsEmpty()?ces.content.html():undefined,email:ces.email.val()!=''?ces.email.val():undefined,password:ces.password.val()!=''?ces.password.val():undefined,referer:ces.referer.val()!=''?ces.referer.val():undefined,content_type:ces.content_type.val(),tags_list:tagsData,url_final:ces.url_final.val(),url_title:ces.url_title.val(),url_resume:ces.url_resume.html()?ces.url_resume.html():undefined,publication_date:(ces.publication_date.val()!='')?ces.publication_date.val():undefined,publication_time:(ces.publication_time.val()!='')?ces.publication_time.val():undefined,url_image_src:ces.url_image_src.val(),url_no_image:ces.url_no_image.length,author_anon:ces.author_anon.length,contentToken:(ces.contentToken.val()!='')?ces.contentToken.val():undefined,typeQuizz:(ces.typeQuizz.val()!='')?ces.typeQuizz.val():undefined,screenName:(ces.screenName.val()!='')?ces.screenName.val():undefined,email:(ces.email.val()!='')?ces.email.val():undefined,player_html:(ces.player_html.val()!='')?ces.player_html.val():undefined,player_height:(ces.player_height.val()!='')?ces.player_height.val():undefined,player_width:(ces.player_width.val()!='')?ces.player_width.val():undefined,player_url:(ces.player_url.val()!='')?ces.player_url.val():undefined,player_provider:(ces.player_provider.val()!='')?ces.player_provider.val():undefined,date_year_event:(ces.date_year_event.val()!='')?ces.date_year_event.val():undefined,location_name:(ces.location_name.val()!='')?ces.location_name.val():undefined,location_id:(ces.location_id.val()!='')?ces.location_id.val():undefined,latitude:(ces.latitude.val()!='')?ces.latitude.val():undefined,longitude:(ces.longitude.val()!='')?ces.longitude.val():undefined},data);};this.toStructVal=function(form,data)
{if(typeof this.config.cnt=='object')
{var
cnt=[],instance=this,data2content=function(cnt)
{if(typeof this=='object')
{for(var i=0;i<this.length;++i)
{if(!this.hasOwnProperty(i)){continue;}
typeof this[i].$reference=='function'&&(this[i].$reference=this[i].$reference.apply(form));if(typeof this[i].$reference!='object'||typeof this[i].getContent!='function')
{console.warn('cnt is not formated correctly, see iner doc to get the right format');continue;}
var self=this[i];self.$reference.each(function(j)
{var z=(cnt.push(self.getContent.call(this,form,instance))-1);typeof self.cnt=="object"&&((typeof cnt[z].cnt=='undefined'&&(cnt[z].cnt=[])),data2content.call(self.cnt,cnt[z].cnt));});}}};data2content.call(this.config.cnt,cnt);return{cnt:$.extend(true,cnt,data)};}
if(typeof this.config.cnt=='function')
{cnt=this.config.cnt.call(this,form,data);if(cnt){return $.extend(true,data,cnt);}
return false;}};this.toStructVal.getValOrUndefined=function(form,search,htmlFunc)
{var $element=form.find(search),funcName=htmlFunc?'html':'val',value;return(($element.length>0&&(value=$element[funcName]())!='')?value:undefined);}
this.to_struct_elmt=function($form){return({id:$form.find('[name=id]'),parentx:$form.find('.parentx'),parent:$form.find('.parent'),module_id:$form.find('.module_id'),title:$form.find('.title'),external_url:$form.find('[name=external_url]'),content:$form.find('.content'),email:$form.find('.email'),password:$form.find('.password'),referer:$form.find('[name=referer]'),content_type:$form.find('.ctype'),tags_list:$form.find('input.tags'),publication_date:$form.find('.publicationDate'),publication_time:$form.find('.publicationTime'),url_final:$form.find('[name=url_final]'),url_title:$form.find('[name=url_title]'),url_resume:$form.find('[name=url_resume]'),url_image_src:$form.find('[name=url_image_src]:checked'),url_no_image:$form.find('[name=url_no_image]:checked'),author_anon:$form.find('[name=author_anon]:checked'),contentToken:$form.find('[name=contentToken]'),screenName:$form.find('[name=screenName]'),typeQuizz:$form.find('[name=typeQuizz]'),email:$form.find('[name=email]'),player_html:$form.find('[name=player_html]'),player_height:$form.find('[name=player_height]'),player_width:$form.find('[name=player_width]'),player_url:$form.find('[name=player_url]'),player_provider:$form.find('[name=player_provider]'),date_year_event:$form.find('[name=date_year_event]'),location_name:$form.find('[name=location_name]'),location_id:$form.find('[name=location_id]'),latitude:$form.find('[name=latitude]'),longitude:$form.find('[name=longitude]')});};}};$.fn.contentFormRemove=function()
{return this.each(function()
{var self=$(this),id=self.attr('formid');if(typeof(id)!='undefined')
{$.contentForm.forms[id].$element.find('.content').trigger('ccmEditorRemove');typeof $ec!='undefined'&&$ec.off('click',$.contentForm.forms[id].idDelegation);delete($.contentForm.forms[id]);}});};$.fn.contentForm=function(config)
{var oConf=config;config=$.extend(true,{},$.contentForm.defaultConfig,config);if($.isArray(oConf.fields)&&oConf.fields.length==0){config.fields=[];}
typeof oConf!='undefined'&&typeof oConf.ccmEditorConfig!='undefined'&&typeof oConf.ccmEditorConfig.actions=='object'&&(config.ccmEditorConfig.actions=oConf.ccmEditorConfig.actions);$.evalOptions(config);return this.each(function()
{if(this.tagName==config.tagName)
{var id=$.contentForm.forms.push(new $.contentForm.form(this))-1;$(this).attr('formId',id);$.contentForm.forms[id].config=config;$.contentForm.forms[id].init();}else{}});};$.fn.remoteContentForm=function(config)
{var $this=$(this);config=$.extend(true,{before:function(){},after:function(){},destination:$this.closest('.hasId'),url:'',contentFormConf:$.extend(true,{},$.contentForm.defaultConfig,{mode:$.contents.mode.UPDATE})},config);return this.bind('click',function()
{config.before.apply(this);$.ajax({type:'POST',url:config.url,success:function(html){config.after.apply(this);$(config.destination).html(html).find(config.contentFormConf.tagName).contentForm(config.contentFormConf);}});});};$.fn.contentCommonView=function()
{return this.each(function()
{var $this=$(this);$this.contentBindBehavior();$this.find('div.ui-pnotify-closer').bind('click',function(){$(this).closest('div.ui-pnotify').hide('slow');});var $editBtn=$('.editContent[data-id='+$this.attr('data-id')+']');if(!$editBtn.hasClass('binded')){$editBtn.bind('click',function(e){$.ajax({type:'POST',dataType:'json',url:$data.common.baseUrl+'/c/update',data:{'ctype':0,'id':$(this).attr('data-id'),'xhr':1},success:function(data){console.log(data);$editBtn.hide();data.conf.mode=$.contents.mode.UPDATE;data.conf.success=function(res)
{$editBtn.show();$this.html(res.html);};data.conf=$.extend(true,{},$.contentForm.defaultConfig,data.conf);$this.html(data.html).find(data.conf.tagName).contentForm(data.conf);}});}).addClass('binded');}
$(document).bind('codeSnippetReady',function(){$this.find('pre').codeSnippet();}).trigger('contentCommonView',[$this]);});};$.fn.contentUnbindBehavior=function()
{return this.each(function()
{var $this=$(this);$this.find('.content a.edit').unbind('click dblclick',$.fn.contentBindBehavior.showForm);$this.find('.hasId[editable]').unbind('dblclick',$.fn.contentBindBehavior.showForm).tipsy('remove');});};$.fn.contentBindBehavior=function()
{return this.each(function()
{var $this=$(this);if(!$this.hasClass('contentBehavior'))
{$this.addClass('contentBehavior').delegate('.content a.edit','click dblclick',$.fn.contentBindBehavior.showForm).delegate('.hasId[editable]','dblclick',$.fn.contentBindBehavior.showForm).find('.hasId[editable], .content a.edit').tipsy({title:function(){return $.contents.langs[$.contents.lang].COMMON_DBLCLICK_TO_EDIT;},gravity:'s',delayIn:100,fade:false});$this.find('a.icoOptions[title]').tipsy({gravity:'s',delayIn:100,fade:false});}});};$.fn.contentBindBehavior.showForm=function(e)
{var mask=(function(){var $body=$('body');return $('<div class="disabled"></div>').css({'position':'absolute','top':'0px','left':'0px','height':$body.css('height'),'opacity':'0','background-color':'#fff'}).animate({opacity:0.5},100).appendTo($body);})(),$this=$(this),$editing=!$this.hasClass('hasId')?$this.closest('.hasId'):$this,lctype=$editing.attr('id').charAt(0),$target=$(e.target),ctype;if(!$this.hasClass('editing')&&!$target.hasClass('contenteditable'))
{$this.tipsy("hide");switch(lctype)
{case'p':ctype=$.contents.type.POST;$('div.tagslist').css('visibility','hidden');break;case'c':ctype=$.contents.type.COMMENT;break;case'a':ctype=$.contents.type.ANSWER;break;}
$.ajax($.extend({type:'POST',url:$editing.attr('editable')+'?xhr&id='+($editing.attr('id').replace(/[^\d]/g,''))+'&ctype='+ctype,success:function(data)
{$editing.unbind().addClass('editing').children().hide();$.fn.contentBindBehavior.showForm.displayData.call(this,data,$editing);mask.stop().remove();}},$.fn.contentBindBehavior.showForm.ajaxOptions));return false;}};$.fn.contentBindBehavior.showForm.ajaxOptions={corePacket:false,dataType:'json'};$.fn.contentBindBehavior.showForm.displayData=function(data,$editing){$editing.append(data.html).find('.contentForm').contentForm($.extend(data.conf,{mode:$.contents.mode.UPDATE,editing:$editing}));};$.fn.contentCommonForm=function()
{return this.each(function()
{var $this=$(this);$this.find('input[default],textarea[default]').InitInputDefault();typeof $data.services.contents.content.common.form.options=='object'&&$this.contentForm($data.services.contents.content.common.form.options);});};$.fn.contentCommonCommon=function()
{return this.each(function()
{var $this=$(this);$.contents.init();if($this.hasClass('contentCommonCommonReady')){return;}
$this.addClass('contentCommonCommonReady').delegate('button[actid],a[actid]','click',function(e)
{e.preventDefault();var $self=$(this);$this.trigger($self.attr('actid'),[false,$self]);}).bind('nextpage prevpage',function(e,data,$target)
{$.contents.events.nextPrevPage(e,data,$target);}).bind('toc_off toc_on',function(e,data,$target)
{$.contents.events.toggleToc(e,data,$target);}).bind('addcomment addanswer',function(e,data,$target)
{$.contents.events.addReply(e,$target);}).bind('loadcom',function(e,data,$target)
{$.contents.events.loadComment(e,data,$target);});$(document).trigger('contentCommonCommon',[$this]);});};$(document).bind('contentsLoaded',function(){$.core.tryOn('services.contents.content.common.common.start',function(){$data.services.contents.content.common.common.start===true&&typeof $data.services.contents.content.common.common.selector=='string'&&$data.services.contents.content.common.common.selector!==''&&$($data.services.contents.content.common.common.selector).contentCommonCommon();});$.core.tryOn('services.contents.content.common.view.start',function(){$data.services.contents.content.common.view.start===true&&typeof $data.services.contents.content.common.view.selector=='string'&&$data.services.contents.content.common.view.selector!==''&&$($data.services.contents.content.common.view.selector).contentCommonView();});$.core.tryOn('services.contents.content.common.form.start',function(){$data.services.contents.content.common.form.start===true&&typeof $data.services.contents.content.common.form.selector=='string'&&$data.services.contents.content.common.form.selector!==''&&$($data.services.contents.content.common.form.selector).contentCommonForm();});});})(jQuery);(function($){$.contentTop={instanceArray:{},defaultOptions:{speed:250,contentFormOptions:{ccmEditorConfigAnswerLight:{actions:['image','url'],discreteToolbar:true,history:false,magicLinks:{support:false},defaultValue:true}}}};$.fn.contentTopCommon=function(options)
{options=$.extend({},$.contentTop.defaultOptions,options);return this;};$.fn.contentTopForm=function(options)
{options=$.extend(true,{},$.contentTop.defaultOptions,options);$.contentForm.defaultConfig.ccmEditorConfig.defaultValue=true;$.evalOptions(options.contentFormOptions.ccmEditorConfigAnswerLight.image);return this.each(function(){var $self=$(this);$self.find('#content').contentForm($.extend(true,{},{cnt:[{$reference:$self.find('.content'),getContent:function(form,instance)
{var $this=$(this);return $.extend({title:form.find('.title').val(),content:$this.ccmEditorIsEmpty()?'':$this.html(),content_type:1,module_id:8,tags_list:form.find('.tags').val()},$.contents.confs.geolocation.cnt[0].isPresent.apply(this,arguments)?$.contents.confs.geolocation.cnt[0].getContent.apply(this,arguments):{});},cnt:[{$reference:function(form){return $(this).find('.answerLight');},getContent:function(){return{content:$(this).html(),content_type:2};}}]}],fields:['title','content','tags',$.contents.fields.answerLight],mode:$.contents.type.INSERT},options.contentFormOptions));$self.find('.addTopAnswerLight').bind('click',function(e){var $self=$(this);$self.siblings('.answerLightTemplate:first').clone().removeClass('addTopAnswerLight').show().insertBefore($self).find('.edito').addClass('answerLight').ccmEditor(options.contentFormOptions.ccmEditorConfigAnswerLight).focus();});});};$.fn.contentTopView=function(options)
{options=$.extend({},$.contentTop.defaultOptions,options);return this.each(function()
{var
$self=$(this),$first=$self.find('.totalBar:first'),id=parseInt($first.attr('data-id'),10);typeof $.contentTop.instanceArray[id]=='undefined'&&($.contentTop.instanceArray[id]={total:parseInt($first.attr('data-total'),10),max:0})&&$self.find('.totalBar').each(function(){var dataValue=parseInt($(this).attr('data-value'));if(dataValue>$.contentTop.instanceArray[id].max){$.contentTop.instanceArray[id].max=dataValue;}});$self.find('div.content').each(function()
{var $this,$cmtsZone,$cmts,initNodeScope=function($node)
{$this=$node;$cmtsZone=$this.find('div.toggleCmt');$cmts=$cmtsZone.find('.comments');},tryBindForm=function($node)
{if(!$node.hasClass('formBinded'))
{$node.find('.newComment form').addClass('formBinded').contentForm({fields:['content'],ccmEditorConfig:$.contentForm.defaultConfig.ccmEditorConfig,success:function(data,target)
{$cmts.append($(data.str.comment).slideDown('slow'));this.enable();this.$element.find('.content').html('').blur();$this.find('.nbComent').trigger('counterChange',{value:'+1'});}});}},unbindForm=function($node)
{$node.removeClass('formBinded').find('.newComment form').contentFormRemove();};initNodeScope($(this));if(!$this.hasClass('contentBinded'))
{tryBindForm($cmtsZone);$this.addClass('contentBinded').bind('helpfulChange',function(e,typeAction){var $this=$(this);if((typeof(typeAction)!="undefined")&&((typeAction=='+1')||(typeAction=='-1'))){$this.find('div.totalBar').trigger('counterChange',{value:typeAction});}
if(typeAction=='+1')
{$cmtsZone.find('.newComment').slideDown('slow');}
else
{$cmtsZone.find('.newComment').slideUp('slow');}});$this.find('.totalBar').bind('click',function(){$cmtsZone.toggle('blind');}).each(function(i)
{var $this=$(this).counter({getValue:function(){return parseInt(this.attr('data-value'),10);},beforeChange:function(valueBefore,valueAfter,options)
{$.contentTop.instanceArray[id].total+=(valueAfter-valueBefore);var $this=$(this),ratio=0;if(valueAfter>=$.contentTop.instanceArray[id].max){ratio=85;$.contentTop.instanceArray[id].max=valueAfter;}else{ratio=valueAfter*85/$.contentTop.instanceArray[id].max}
$(this).attr('data-value',valueAfter);$this.find('.nbVote').trigger('counterChange',{value:valueAfter});$this.find('.bar').trigger('counterChange',{value:ratio});$self.find('.totalBar').trigger('refreshBars');}}).bind('refreshBars',function()
{var $this=$(this),ratio=0;var valueAfter=parseInt($this.attr('data-value'),10);if(valueAfter>=$.contentTop.instanceArray[id].max){ratio=85;$.contentTop.instanceArray[id].max=valueAfter;}else{ratio=valueAfter*85/$.contentTop.instanceArray[id].max}
isNaN(ratio)&&(ratio=0);$this.find('.bar').trigger('counterChange',{value:ratio});});$this.find('.nbVote').counter({limit:{min:0}}).bind('counterChanged',function(e,v1,v2)
{var $this=$(this),$current=$this.closest('.content').parent('.line'),getSibling,changeSibling,moveNode=function($node,$dest,mode)
{unbindForm($cmtsZone);var $clone=$node.clone(true,true).hide();switch(mode){case'after':$clone.insertAfter($dest);break;case'before':$clone.insertBefore($dest);break;case'append':$clone.appendTo($dest);break;case'prepend':$clone.prependTo($dest);break;}
$clone.slideDown(250);initNodeScope($clone);tryBindForm($cmtsZone);$node.slideUp(250,function(){$(this).remove();});},moveMode='after',moveFirstOrLast="prepend";if(v1<v2)
{getSibling=function($node){var $ret=$node.prev();while($ret.length>0&&$ret[0].tagName=='A'){$ret=$ret.prev();}
return $ret;};changeSibling=function($current,$other)
{return $current.find('.nbVote').counterValue()>$other.find('.nbVote').counterValue();};moveMode='after';moveFirstOrLast="prepend";}
else
{getSibling=function($node){var $ret=$node.next();while($ret.length>0&&$ret[0].tagName=='A'){$ret=$ret.next();}
return $ret;};changeSibling=function($current,$other)
{return $current.find('.nbVote').counterValue()<$other.find('.nbVote').counterValue();};moveMode='before';moveFirstOrLast="append";}
setTimeout(function()
{var
$other=getSibling($current),moved=false,top=1,prevVote=null;while($other.length===1&&changeSibling($current,$other))
{moved=true;$other=getSibling($other);}
moved&&typeof $other!='undefined'&&$other.length>0&&moveNode($current,$other,moveMode);moved&&$other.length==0&&moveNode($current,$current.parent(),moveFirstOrLast);setTimeout(function()
{$self.find('.content').not('.deleted').find('.icoTaupe').each(function(i)
{var
$this=$(this),$content=$this.closest('.contentBinded'),nbVote=parseInt($content.find('.nbVote').counterValue());prevVote===null&&(prevVote=nbVote);prevVote>=nbVote&&(top=i+1,prevVote=nbVote);$this.html(top);if(nbVote>0)
{if(top<=3){$this.removeClass('icoClass icoClassEmpty').addClass('icoClassTop');$content.find('.bar').removeClass('greyBar').addClass('redBar');}
else{$this.removeClass('icoClassTop icoClassEmpty').addClass('icoClass');$content.find('.bar').removeClass('redBar').addClass('greyBar');}}
else{$this.removeClass('icoClassTop icoClass').addClass('icoClassEmpty');}});},300);},1500);});$this.find('.bar').counter({getValue:function(){return 0;},limit:{min:0},beforeChange:function(valueBefore,valueAfter,options)
{$.core.$fake[0]=this;$(this).animate({width:(options.value<=100?options.value:100)+'%'},options.speed);}});$this.find('.nbComent').counter({limit:{min:0}});});}});});};$(document).bind('contentsLoaded',function(){$.core.tryOn('services.contents.content.top.common.start',function(){$data.services.contents.content.top.common.start===true&&typeof $data.services.contents.content.top.common.selector=='string'&&$data.services.contents.content.top.common.selector!==''&&$($data.services.contents.content.top.common.selector).contentTopCommon();});$.core.tryOn('services.contents.content.top.view.start',function(){$data.services.contents.content.top.view.start===true&&typeof $data.services.contents.content.top.view.selector=='string'&&$data.services.contents.content.top.view.selector!==''&&$($data.services.contents.content.top.view.selector).contentTopView();});$.core.tryOn('services.contents.content.top.form.start',function(){$data.services.contents.content.top.form.start===true&&typeof $data.services.contents.content.top.form.selector=='string'&&$data.services.contents.content.top.form.selector!==''&&$($data.services.contents.content.top.form.selector).contentTopForm($data.services.contents.content.top.form.options);});});})(jQuery);(function($){$.tagsForm={config:{ccmeditorConf:{actions:['bold','italic'],discreteToolbar:false,history:true,defaultValue:true,magicLinks:{support:false}}}},$.fn.tagsForm=function(config)
{$.extend(true,$.tagsForm.config,config);return this.each(function(){var $self=$(this);$self.find('.modify').remoteContentForm({contentFormConf:{cnt:[{$reference:function(){return $self.find('.desc');},getContent:function(form){var $this=$(this);return{id:$self.find('[name=id]').val(),desc:$this.html()};}}],fields:[{name:'desc',$nodes:$self.find('.desc'),init:function(conf){$self.find('.desc').ccmEditor($.tagsForm.config.ccmeditorConf);$('div#groupDescForm').addClass('editing');},validate:function(conf){var form=this,valid=true;conf.$nodes.each(function(){$.core.$fake[0]=this;var description=$.core.$fake.html();description=description.replace(/<\/?(?!\!)[^>]*>/gi,'');if(description===''){$.core.$fake.showInputError('empty field');valid=false;}else{if(description.length>200){$.core.$fake.showInputError('char max');valid=false;}else{$.core.$fake.hideInputError();}}});return valid;}}],mode:$.contents.mode.UPDATE},url:$self.attr('url')});});};$(document).bind('contentsLoaded',function(){$.core.tryOn('services.contents.tag.common.start',function(){$data.services.contents.tag.common.start===true&&typeof $data.services.contents.tag.common.selector=='string'&&$data.services.contents.tag.common.selector!==''&&$($data.services.contents.tag.common.selector).tagsForm($data.services.contents.tag.common.config);});});})(jQuery);(function($){$.tagCloud={defaultConfig:{url:{},beforeTemplate:'<a class="buttonS-T mar5 validAll"><span class="icoValid-2"></span>&nbsp;$l{TAG_CLOUD_ACCEPT_ALL}</a>',template:'<a class="tag tagS mar5 valid" href="javascript:void(0);" title="$l{TAG_CLOUD_ACCEPT}">'
+'${name}'
+'<span class="marL5 valid icoValid-3" title="$l{TAG_CLOUD_ACCEPT}" href="javascript:void(0);"></span>'
+'<span class="marL5 cancel icoCancel-3" title="$l{TAG_CLOUD_REFUSE}" href="javascript:void(0);"></span>'
+'</a>',selectorAcceptAllTag:'.validAll',selectorAcceptTag:'.valid',selectorRejectTag:'.cancel',paramName:'listWords',paramNameExclude:'excludeWords',deleteTagOnValidate:true,onTagRendered:function(tags,excludedTags,config,$clientNodes){},onSortStart:function(e,ui){},localCache:false,sortable:false,sortableOptions:{items:'.tag'},parseExcludeData:function(data){var ret=[],k;for(k in data)
{ret.push(data[k].name);}
return ret.join(',');},parseTagSended:function(tag)
{!tag.order&&(tag.order=0);tag.display=true;tag.validated=true;return tag;},renderTag:function(tag,config){return $($.tagCloud.getTemplate(config.template,{'name':tag.name}));}},getTagByName:function(name,tags)
{for(var i in tags)
{if(tags[i].name==name){return tags[i];}}
return false;},removeTagByName:function(name,tags)
{for(var i in tags)
{if(tags[i].name==name){delete tags[i];break;}}
return tags;}};$.extend($.tagCloud,$.microTemplate);$.fn.tagCloud=function(config)
{config=$.extend(true,{},$.tagCloud.defaultConfig,config);$.tagCloud.microTemplateInit();return this.each(function()
{var
$clientNodes=[],tags=[],excludedTags=false,triggerToClients=function(eventName,options)
{for(var i=0;i<$clientNodes.length;++i)
{$clientNodes[i].trigger(eventName,options);}},$self=$(this).bind('replaceItem addItem',function(e,data)
{var dataObject={};switch(typeof data)
{case'object':dataObject=data;break;default:case'string':dataObject[config.paramName]=data;}
config.paramNameExclude&&excludedTags&&(dataObject[config.paramNameExclude]=config.parseExcludeData(excludedTags));data&&$.ajax({type:'POST',async:true,data:dataObject,url:config.url(),localCache:config.localCache,dataType:'json',success:function(json)
{if(json)
{tags=json;$self.trigger('renderTags');}}});}).bind('renderTags',function()
{var $this=$(this),i;$this.empty();!$.isEmptyObject(tags)&&$this.append($.tagCloud.getTemplate(config.beforeTemplate),{});for(i in tags)
{$this.append(config.renderTag.call($this,tags[i],config));}
config.onTagRendered.call(this,tags,excludedTags,config,$clientNodes);}).bind('removeItem',function(e,tagName)
{!excludedTags&&(excludedTags=[]);var tag=$.tagCloud.getTagByName(tagName,tags);if(tag)
{excludedTags.push(tag);tags=$.tagCloud.removeTagByName(tagName,tags);$self.trigger('renderTags');}}).bind('sortstart',config.onSortStart).delegate(config.selectorRejectTag,'click',function(e)
{e.stopPropagation();$self.trigger('removeItem',[$.trim($(e.target).closest(config.selectorAcceptTag).text())]);}).delegate(config.selectorAcceptTag,'click',function()
{var
$this=$(this),name=$.trim($this.hasClass('.tag')?$this.text():$this.closest('.tag').text()),tag=$.tagCloud.getTagByName(name,tags);if(tag){tag=config.parseTagSended(tag);triggerToClients('addTag',tag);$this.trigger('renderTags');config.deleteTagOnValidate&&$self.trigger('removeItem',[tag.name]);}}).delegate(config.selectorAcceptAllTag,'click',function()
{var
$this=$(this),tag,i;for(i in tags)
{triggerToClients('addTag',config.parseTagSended(tags[i]));config.deleteTagOnValidate&&$self.trigger('removeItem',[tags[i].name]);}
$this.trigger('renderTags');}).bind('registerClientNode',function(e,$clientNode){$clientNodes.push($clientNode);}).bind('transfert',function(e,$clientNode,name,order)
{var tag=$.tagCloud.getTagByName(name,tags);if(tag){tag.order=order;$clientNode.trigger('addTag',[config.parseTagSended(tag)]);config.deleteTagOnValidate&&$self.trigger('removeItem',[name]);}});config.sortable&&$self.sortable(config.sortableOptions);});};})(jQuery);(function($){$.ccmPaginator=function(options){options=$.extend(true,{getController:function(){return[$data.common.baseUrl,'/c/xhr_updateposition'].join('');},updateMode:'incremental',templateList:'<ol/>',templateItem:'<li/>',templateLink:'<a/>',templateImg:'<img/>',templateBody:'<div/>',templateAdd:'<li class="add"><a href="javascript:void(0);">+</a></li>',onAdd:function(e){console.log('defaultAdd function');},itemMarker:'pageItem',dataName:'paginatorData',data:[],titleLength:20,overFlowChar:'&hellip;',tipsyOptions:{gravity:$.fn.tipsy.autoNS,delayIn:100,fade:false,opacity:0.75},sortable:true,firstNotSortable:true,sortableOptions:{},orderedItems:[]},options);var $this=$(options.templateList),i,item,$item,$href,$itemBody,_trimTitle=function(title){return title.substring(0,options.titleLength)+(title.length>options.titleLength?options.overFlowChar:'');};for(i=0;i<options.data.length;++i)
{item=options.data[i];$item=$(options.templateItem);if(i===0&&options.firstNotSortable){$item.bind('dragstart',function(e){e.preventDefault();});}else{$item.addClass(options.itemMarker);}
(item.href&&($href=$(options.templateLink).attr('href',item.href)))||($href=false);if(item.src){$itemBody=$(options.templateImg).attr('src',item.src);}
else{$itemBody=$(options.templateBody).html(item.title?_trimTitle(item.title):i);}
item.title&&$item.attr('title',item.title).tipsy(options.tipsyOptions);item.data&&$item.data(options.dataName,item.data);$href&&$item.append($href);$href&&$itemBody&&$href.append($itemBody);$this.append($item);}
$this.data(options.dataName,options).append($(options.templateAdd).bind('click',options.onAdd));$this.bind('updateItemContent',function(e,id,title){$this.find('.'+options.itemMarker).each(function(){$.core.$fake[0]=this;$.core.$fake.data(options.dataName).id==id&&$.core.$fake.find(options.templateBody.replace(/\W*/gi,'')).html(_trimTitle(title));});});options.sortable&&$this.sortable($.extend(options.sortableOptions,{items:'.'+options.itemMarker})).bind('sortupdate',function(e,ui){$('.tipsy').remove();switch(options.updateMode)
{case'store':var orderedItems=[];$this.find('.'+options.itemMarker).each(function(i)
{$.core.$fake[0]=this;orderedItems.push($.core.$fake.data(options.dataName).id);});$this.data(options.dataName,$.extend($this.data(options.dataName),{orderedItems:orderedItems}));break;default:case'incremental':var ret={prev:null,id:null,pos:null};$this.find('.'+options.itemMarker).each(function(i)
{$.core.$fake[0]=this;if($.core.$fake[0]==ui.item[0])
{ret.id=$.core.$fake.data(options.dataName).id;ret.pos=i;return false;}
ret.prev=$.core.$fake.data(options.dataName).id;});$.ajax({url:options.getController(),dataType:"json",localCache:false,data:ret});break;}});return $this;};})(jQuery);(function($)
{$.linkCrawler={defaultOptions:{getSource:function(){return[$data.common.baseUrl,'/c/suggest_attachment'].join('');},behaveInput:false,delayInput:400,completeSearch:false,groupName:'default',beforeCrawl:function(){return true;}},clientsNodes:{},currentXhr:null,submit:function(e,link,groupName)
{for(var key in $.linkCrawler.clientsNodes[groupName])
{if(!$.linkCrawler.clientsNodes[groupName].hasOwnProperty(key)){continue;}
$.linkCrawler.clientsNodes[groupName][key].trigger('crawlerCrawling',[e]).data('crawlerResult','crawling');}
$.ajaxSettings.discrete=true;$.linkCrawler.currentXhr=$.ajax({url:e.data.options.getSource(),cache:true,dataType:"json",localCache:false,global:false,data:{url:link},success:function(data){if(!data){return;}
for(var key in $.linkCrawler.clientsNodes[groupName])
{if(!$.linkCrawler.clientsNodes[groupName].hasOwnProperty(key)){continue;}
if(typeof data.result!='undefined'&&(''+data.http_response_code).substr(0,1)in{2:1,3:1})
{switch(data.result)
{case'duplicated':$.linkCrawler.clientsNodes[groupName][key].trigger('crawlerDuplicated',[data,e]).data('crawlerResult','duplicated');break;case'new':$.linkCrawler.clientsNodes[groupName][key].trigger('crawlerNew',[data,e]).data('crawlerResult','new');break;}}
else{$.linkCrawler.clientsNodes[groupName][key].trigger('crawlerError',[data,e]).data('crawlerResult','error');}}}});}};$.fn.addLinkCrawler=function(options)
{options=$.extend({},$.linkCrawler.defaultOptions,options);return this.each(function()
{var $this=$(this).bind('crawlerSubmit',{options:options},function(e,link){$.linkCrawler.submit(e,link,options.groupName);});options.behaveInput&&$this.typeUrl({delay:options.delayInput,completeSearch:options.completeSearch}).bind('typeUrlValid',function(e,url)
{e.stopPropagation();$.linkCrawler.currentXhr!==null&&$.linkCrawler.currentXhr.abort();options.beforeCrawl.call(this,e,url)&&$this.trigger('crawlerSubmit',[url]).trigger('urlValid');}).bind('typeUrlInvalid',function(e,url)
{$this.trigger('urlInvalid');});typeof $.linkCrawler.clientsNodes[options.groupName]=='undefined'&&($.linkCrawler.clientsNodes[options.groupName]=[]);$.linkCrawler.clientsNodes[options.groupName].push($this);});};})(jQuery);(function($)
{$.fn.imageSelector=function(options)
{options=$.extend({displayPositionTotal:true,imgStyle:'display:none;max-width:100px;max-height:100px;',$selectorContainer:$('<div></div>')},options);return this.each(function()
{var $this=$(this),$sel,list=$this.find('input[type=radio]'),container=$this,selected=0,sliding=false,previous=function(){if(sliding){return;}
if(selected===0)selected=list.length;selected--;select(selected);},next=function(){if(sliding){return;}
if(selected===list.length-1)selected=-1;selected++;select(selected);},select=function(i){$sel&&$sel.children('.position').html(i+1);$(list[i]).attr("checked","checked");var $ctn=$(container),$img=$ctn.find('img');if($img.length>=1)
{sliding=true;var pos=$img.position();$img.stop().css({position:"relative",top:0,left:0}).after($('<img src="'+$(list[i]).attr('value')+'" style="'+options.imgStyle+'">').css({position:"absolute",top:pos.top,left:pos.left}).fadeIn(250,function(){$(this).css({position:'inherit',top:'auto',left:'auto'});})).fadeOut(250,function(){$(this).remove();sliding=false;});}
else{$('<img src="'+$(list[i]).attr('value')+'" style="'+options.imgStyle+'">').prependTo($ctn).fadeIn();}};$(list).css('display','none');select(0);(list.length>1)&&($sel=options.$selectorContainer.append($('<a href="javascript:void(0);" class="icoUp"></a>').bind('click',function(){previous();}),$('<a href="javascript:void(0);" class="icoDown"></a>').bind('click',function(){next();}),options.displayPositionTotal&&'&nbsp;&nbsp;<span class="position ft85">1</span>/<span class="total ft75">'+list.length+'</span>').prependTo($this));});};$.linkDisplayer={options:{},templateDisplay:['<div class="box1 pad10 line" style="min-height:110px">','<input type="hidden" name="url_final" value="${final_url}">','<input type="hidden" name="url_title" value="${title}">','<input type="hidden" name="player_height" value="${player_height}">','<input type="hidden" name="player_width" value="${player_width}">','<input type="hidden" name="player_url" value="${player_url}">','<input type="hidden" name="player_html" value="${player_html}">','<input type="hidden" name="player_provider" value="${player_provider}">','<input type="hidden" name="parentx" value="${parentx}" class="parentx">','<div class="description lastBloc">','<a target="_blank" href="${final_url}">${final_url}</a>','<h5 data-destination="url_title" maxLength="255">${title}</h5>','<p data-destination="url_resume" maxLength="1024">${resume}</p>','</div>','<div class="titleError txtR" style="color:#E01616;display:none;">$l{NO_TITLE}</div>','</div>'].join(''),templateImage:['<div class="bloc size1of4 txtC marR5"></div>'].join(''),templateImageReadOnly:['<img src="${imgSrc}" style="max-width:100px;max-height:100px;">'].join(''),templateImageRadio:['<input type=radio name="url_image_src" value="${imgSrc}">'].join(''),templateNoImage:['<div class="txtC">','<input type="checkbox" name="url_no_image"> $l{NO_IMAGE}','</div>'].join(''),templateDuplicate:'<div class="marB20 infoMsg">$l{DUPLICATE_TEXT} <a href="${content_url}">$l{DUPLICATE_LINK}</a></div>',templateCmts:'<div class="pad10 line">${HEAD_CMTS} ${cmts} ${FOOT_CMTS}</div>',templateError:'<div class="marB20 infoMsg error"></span>$l{DUPLICATE_ERROR}</div>',templateLinkMore:'<a href="${content_url}" class="floatRight">${MORE}</a>',templateImgContainer:'<div class="pad5"></div>',templateLoading:'<div class="box1 pad10 line"><img alt="loading" src="/skin/common/img/loadingS.gif" class="inlineBlock" style="margin-left:250px"></div>',generateDisplay:function(data,newUrl)
{var $ret=$(this.getTemplate(this.templateDisplay,data));if(data.images.length>0)
{if(data.result=='new')
{($radio=$(this.templateImgContainer));for(var image in data.images){$radio.append($(this.getTemplate(this.templateImageRadio,{imgSrc:data.images[image]})));}
$img=$(this.getTemplate(this.templateImage)).append($($radio).imageSelector($.extend({$select:$ret},$.linkDisplayer.options))).append($(this.getTemplate(this.templateNoImage)));}else{$img=$(this.getTemplate(this.templateImage)).append($(this.getTemplate(this.templateImageReadOnly,{imgSrc:data.images[0]})));}
var $resume=$('<div name=url_resume/>').html(data.resume);$ret.prepend($img).find('p').replaceWith($('<div class="line"/>').html($('<div class="input"/>').html($resume)));$resume.ccmEditor({actions:['italic','bold','underline','code'],discreteToolbar:true,history:true,defaultValue:true,magicLinks:{support:false}});}
return $ret.fadeIn();},generateDuplicated:function(data)
{return $(this.getTemplate(this.templateDuplicate,data)).effect('pulsate',{times:1},1000);},generateError:function(data)
{return $(this.getTemplate(this.templateError,data)).effect('pulsate',{times:1},1000);},generateLoading:function(data)
{return $(this.getTemplate(this.templateLoading,data));},generateCmts:function(data)
{var nbDiff=data.nbcmts-data.nbcmtsdisp;$.extend(data,{nbDiff:nbDiff});return $(this.getTemplate(this.templateCmts,$.extend({HEAD_CMTS:this.getTemplate(this.langs[this.lang][(data.nbcmtsdisp>1?'HEAD_CMTS':'HEAD_CMT')],data),FOOT_CMTS:(nbDiff<1?'':this.getTemplate(this.templateLinkMore,$.extend(data,{MORE:this.getTemplate(this.langs[this.lang][(nbDiff>1?'FOOT_CMTS':'FOOT_CMT')],data)})))},data))).slideDown();},applyEdition:function($this)
{$this.find('[data-destination]').each(function()
{$.core.$fake[0]=this;var name=$.core.$fake.attr('data-destination'),length=$.core.$fake.attr('maxLength');if(name!='url_title')return;$this.find('input[name='+name+']').remove();$.core.$fake.after($('<textarea></textearea>').val($.core.$fake.text().substr(0,length)).attr('maxLength',length).maxLength().addClass('highlight').css({height:$.core.$fake.height()+5,minHeight:20,fontWeight:(name=='url_title'?'bold':'')}).attr('name',name).bind('focus',function(){$(this).removeClass('highlight').addClass('edit');}).bind('blur',function(){$(this).removeClass('edit').addClass('highlight');})).remove();});}};$.extend($.linkDisplayer,$.microTemplate);$.linkDisplayer.microTemplateInit();$.fn.linkDisplayer=function(options)
{options=$.extend({$commentNode:null,$commentZone:null,$allowedInput:false,displayMessageOnDuplicated:true},options);return this.each(function()
{var $this=$(this).bind('crawlerDuplicated',function(e,data,originalEvent)
{if(!options.$allowedInput||(typeof originalEvent!='undefined'&&originalEvent.target==options.$allowedInput[0]))
{$this.empty().append($.linkDisplayer.generateDisplay.apply($.linkDisplayer,[data]))&&options.displayMessageOnDuplicated&&$this.append($.linkDisplayer.generateDuplicated.apply($.linkDisplayer,[data]));options.$commentNode&&data.cmts&&options.$commentNode.length>=1&&options.$commentNode.empty().append($.linkDisplayer.generateCmts.apply($.linkDisplayer,[data]));options.$commentZone&&options.$commentZone.length>=1&&options.$commentZone.slideDown();}}).bind('crawlerNew',function(e,data,originalEvent)
{if(!options.$allowedInput||(typeof originalEvent!='undefined'&&originalEvent.target==options.$allowedInput[0]))
{options.$commentNode&&options.$commentNode.length>=1&&options.$commentNode.empty();$this.empty().append($.linkDisplayer.generateDisplay.apply($.linkDisplayer,[data]));$.linkDisplayer.applyEdition($this);options.$commentZone&&options.$commentZone.length>=1&&options.$commentZone.slideDown();}}).bind('crawlerError',function(e,data,originalEvent)
{if(!options.$allowedInput||(typeof originalEvent!='undefined'&&originalEvent.target==options.$allowedInput[0]))
{options.$commentNode&&options.$commentNode.length>=1&&options.$commentNode.empty();$this.empty().append($.linkDisplayer.generateError.apply($.linkDisplayer,[data]));options.$commentZone&&options.$commentZone.length>=1&&options.$commentZone.slideUp();}}).bind('crawlerCrawling',function(e,originalEvent)
{if(!options.$allowedInput||(typeof originalEvent!='undefined'&&originalEvent.target==options.$allowedInput[0]))
{options.$commentNode&&options.$commentNode.length>=1&&options.$commentNode.empty();$this.empty().append($.linkDisplayer.generateLoading.apply($.linkDisplayer));options.$commentZone&&options.$commentZone.length>=1&&options.$commentZone.slideUp();}});});};})(jQuery);(function($){$.extend(true,$.contents.langs,{'FR':{COMMON_FORM_FIELD_FILLED:"Ce champ est obligatoire",COMMON_FORM_INVALID_DATE:"Cette date est invalide",COMMON_FORM_INVALID_TIME:"Cette heure est invalide",COMMON_FORM_URL_INVALID:"URL invalide",COMMON_FORM_CHAR_MAX:" caractères maximum",COMMON_DBLCLICK_TO_EDIT:"Double-cliquer pour éditer",COMMON_FORM_FIELD_ACTIVE_TAG_MISSING:"Au moins un groupe valide est nécessaire",COMMON_FORM_FIELD_HIGHLIGHT_TAG_MISSING:"Au moins un groupe fil est nécéssaire",COMMON_FORM_POPUP_FOLLOW_ACTION:'Voulez-vous suivre ce contenu ?<br>'
+'<div class="marT15"><input type="checkbox" name="chk_dont_ask" id="chk_dont_ask"> <label for="chk_dont_ask">Ne plus poser la question</label></div>'
+'<div class="marT15 txtR">'
+'<a class="followNo marR5" href="javascript:void(0);">Non</a>'
+'<button asrc="answer" class="follow_yes buttonS-B">Oui</button>'
+'</div>',COMMON_FORM_POPUP_FOLLOW_INFO:'Vous pouvez être automatiquement<br>abonné aux contenus que vous<br>publiez.<br><br>'
+'Si vous désirez activer cette fonctionnalité, <a href="/fr/p/edit">cliquez ici</a>',TOP_MIN_ANSWER:'Un classement doit posséder au moins deux premières réponses'}});})(jQuery);(function($){$.extend(true,$.tagCloud.langs,{'FR':{'TAG_CLOUD_ACCEPT':'Accepter ce tag','TAG_CLOUD_ACCEPT_ALL':'Tout accepter','TAG_CLOUD_REFUSE':'Supprimer ce tag'}});})(jQuery);(function($){$.extend(true,$.linkDisplayer.langs,{'FR':{DUPLICATE_TEXT:'Ce lien a déjà été publié par d\'autres utilisateurs, vous pouvez y ajouter un commentaire ou bien',DUPLICATE_LINK:' voir ce que les autres en pensent',HEAD_CMTS:'Voici les ${nbcmtsdisp} derniers commentaires :',HEAD_CMT:'Voici le dernier commentaire :',FOOT_CMTS:'Voir les ${nbDiff} autres commentaires',FOOT_CMT:'Voir le commentaire restant',DUPLICATE_ERROR:'Nous ne pouvons accepter ce lien car une erreur est survenue lors de sa vérification.',NO_IMAGE:'Pas d\'image',NO_TITLE:'Un titre est obligatoire'}});})(jQuery);(function($){'use strict';$.fn.breadCrumbResizer=function(params){params=$.extend({},$.fn.breadCrumbResizer.defaultOptions,params);var init=function($this){var resizeStart=false,xStart=0,timer=0,isIncreased=false,nbAuthorized=window.screen.width>320?4:3;removeNonDesiredDiv($this,nbAuthorized);resizeBreadCrumb($this,true);resizeBreadCrumb($this,false);$(window).on('resize orientationchange',function(event){var winWidth=document.body.offsetWidth;if(!resizeStart){xStart=winWidth;resizeStart=true;}
window.clearTimeout(timer);timer=window.setTimeout(function(){isIncreased=(xStart-winWidth)<0;resizeStart=false;resizeBreadCrumb($this,isIncreased);},params.resizeTimer);});};var removeNonDesiredDiv=function($this,nbSpanAuthorized){var nbDivToDelete=$this.find('div span').size()-nbSpanAuthorized;if(nbDivToDelete>0){while(nbDivToDelete>0){$this.find('div').eq(1).remove();nbDivToDelete--;}}}
var resizeBreadCrumb=function($this,isIncreased){var $divs=$this.find('div'),len=$divs.size(),windowWidth=document.body.offsetWidth;if(!isIncreased){if($this.height()>params.breadCrumbHeight){$divs.each(function(i,item){if(i!==0&&i<len-1){var $span=$(item).find('span'),spanWidth=$span.width();if(spanWidth>params.spanMinimumWidth){$span.css('width',parseInt((spanWidth-5),10));}}});if($this.height()>params.breadCrumbHeight){resizeBreadCrumb($this,false);}else{$this.css('visibility','visible');}}}else{var widthHome=$divs.first().outerWidth()+5,lastSpanWidth=$divs.last().outerWidth()+5,nbSpan=$this.find('div span').size()-2,$spanWidth=($this.width()-(widthHome+lastSpanWidth))/nbSpan;$divs.each(function(i,item){if(i>0&&i<len-1){var $span=$(item).find('span'),paddingEW=parseInt($(item).css('paddingLeft'),10)+parseInt($(item).css('paddingRight'),10)
$span.css('width',parseInt($spanWidth-paddingEW,10));}});$this.css('visibility','visible');}};return this.each(function(){init($(this));});}
$.fn.breadCrumbResizer.defaultOptions={breadCrumbHeight:37,spanMinimumWidth:25,resizeTimer:200};})(jQuery);(function($)
{$.summary={defaultOptions:{behavior:{hideChaptersSections:true}},init:function(options)
{options=$.extend(true,{},$.summary.defaultOptions,options);$('#jAppCustomSelect').bind('mouseenter',function(){$(".app_customselect__items",this).show();if(typeof _gaq!='undefined'){_gaq.push(['_trackEvent','ccmcms/contents','header/summary','show']);return false;}}).bind('mouseleave',function(){$(".app_customselect__items",this).hide();}).bind('click',function(){$(".app_customselect__items",this).toggle();});$('#summary .app_menu_1__title').bind('click',function(){$('#summary ul:first').css("position","absolute");$('#summary ul:first').toggle(200);$(this).find('.icon-arrow-b').toggleClass('icon-arrow-t');});if(options.behavior.hideChaptersSections){$('#summary li.chapter-section ul').hide();}
$currentChapter=$('#summary li.chapter-section li.current').parents('li');$currentChapter.find('.icon-arrow-b').addClass('icon-arrow-t');$currentChapter.children('ul').show();if($currentChapter.length==0)
{$('#summary li.chapter-section:first ul').show();$('#summary li.chapter-section:first .icon-arrow-b').toggleClass('icon-arrow-t');}
$('#summary li.chapter-section h4').bind('click',function(){$(this).next('ul').toggle(200);$(this).find('.icon-arrow-b').toggleClass('icon-arrow-t');});}};if($data.ccmcms.services.contents.content.summary.start===true){$(document).start(function(){$.summary.init($data.ccmcms.services.contents.content.summary.options);});}})(jQuery);(function($)
{var _nbRequest=0;$.contentSlide={dataArray:[],animateSpeed:500,cssAnimation:function(isNext)
{var $oldContentImg=$('.app_entry_diapo__content img:first'),classes=isNext?['Left','Next','Prev']:['Right','Prev','Next'];setTimeout(function(){$oldContentImg.remove();},$.contentSlide.animateSpeed+100);$oldContentImg.removeAttr('class').addClass('hide'+classes[0]);$('.app_entry_diapo__content img.jIsImg'+classes[1]).css('display','inline').addClass('show');$('.jIsImg'+classes[2]).remove();},jsAnimation:function(isNext)
{var $oldContentImg=$('.app_entry_diapo__content img:first'),center=0,left=-650,right=650,classes=isNext?['Next','Prev']:['Prev','Next'],$contentImg=$('.app_entry_diapo__content img.jIsImg'+classes[0]);$contentImg.animate({marginLeft:center},$.contentSlide.animateSpeed,function(){$contentImg.removeClass('jIsImg'+classes[0])});$oldContentImg.animate({marginLeft:isNext?left:right},$.contentSlide.animateSpeed,function(){$oldContentImg.remove();});$('.jIsImg'+classes[1]).remove();},slide:function(isNext,isAnimate){var infoPage=$.contentSlide.dataArray[isNext?'next':'prev'];if(!isAnimate){infoPage=$.contentSlide.dataArray['next'];$('.entry .app_entry_diapo__content .ccmcss_cms_figure__img').append(infoPage.contentImg);}else{if($.support.transition){$.contentSlide.cssAnimation(isNext);}else{$.contentSlide.jsAnimation(isNext);}}
$('.entry header').replaceWith(infoPage.header);$('.entry .app_entry_diapo__content figcaption').replaceWith(infoPage.contentLegend);if(infoPage.prev=='undefined'){$('.app_entry_diapo__content .jMiddlePreviousButton').remove();}
if($('.app_entry_diapo__content .jMiddlePreviousButton').attr('href')==undefined){$('.app_entry_diapo__content div.ccmcss_cms_figure__img').append(infoPage.prev);}else{$('.app_entry_diapo__content .jMiddlePreviousButton').replaceWith(infoPage.prev);}
$('.app_entry_diapo__content .jMiddleNextButton').replaceWith(infoPage.next);$('.app_entry_diapo #jScrollPane').replaceWith(infoPage.nav);$('.app_entry_diapo #jScrollBarWrapper').replaceWith(infoPage.slideBar);$('.app_entry_diapo section.ccmcss_paginator').replaceWith(infoPage.paginator);$('.see-also').replaceWith(infoPage.simili);$('#jNavFbcomments').replaceWith(infoPage.fb);FB.XFBML.parse();$.thumbslider.init();if(infoPage.prev!='undefined'){$.contentSlide.loadSlide(infoPage.prev.attr('href'),false);}
$.contentSlide.loadSlide(infoPage.next.attr('href'),true);},loadSlide:function(link,isNext)
{$.ajax({type:'POST',url:link,dataType:'json',localCache:true,beforeSend:function(){_nbRequest++;},success:function(json){var html=json.html,$html=$(html),$contentImg=$html.find('.app_entry_diapo__content img'),cleDataArray=isNext?'next':'prev',domBloc=$.contentSlide.dataArray[cleDataArray]=[];domBloc.link.header=$html.find('header');domBloc.link.contentLegend=$html.find('.app_entry_diapo__content figcaption');domBloc.link.prev=$html.find('.app_entry_diapo__content .jMiddlePreviousButton');domBloc.link.next=$html.find('.app_entry_diapo__content .jMiddleNextButton');domBloc.link.nav=$html.find('#jScrollPane');domBloc.link.slideBar=$html.find('#jScrollBarWrapper');domBloc.link.paginator=$html.find('section.ccmcss_paginator');domBloc.link.simili=$html.find('.see-also');domBloc.link.fb=$html.find('#jNavFbcomments');domBloc.link.contentImg=$contentImg;$contentImg.attr('class',isNext?'jIsImgNext':'jIsImgPrev');$('.entry .app_entry_diapo__content .ccmcss_cms_figure__img').append($contentImg);if(isNext){if(link.match('en-savoir-plus')){$('.next').each(function(){$(this).removeClass('next')});}}
_nbRequest--;}});},f:function(e){e.preventDefault();if(_nbRequest<1){var isNext=$(this).hasClass('next');History.pushState({'url':$(this).attr('href')+'?slide=1','isNext':isNext},History.options.initialTitle,$(this).attr('href'));}},init:function()
{History.Adapter.bind(window,'statechange stateinit',function(e)
{var state=History.getState(),params=[];if(typeof state.data.url!='undefined'){if(state.data.isNext){_gaq.push(['_trackEvent','ccmcms/contents','ajaxNext','click']);}else{_gaq.push(['_trackEvent','ccmcms/contents','ajaxPrev','click']);}
$.contentSlide.slide(state.data.isNext);}});$.contentSlide.loadSlide($('.app_entry_diapo__content .next:first').attr('href'),true);$.contentSlide.loadSlide($('.app_entry_diapo__content .prev:first').attr('href'));$('body').delegate('.next, .prev','click',$.contentSlide.f);}};if($data.ccmcms.services.contentSlide.start===true){$(document).start(function(){$.contentSlide.init();});}})(jQuery);(function($)
{$.account={init:function()
{this.microTemplateInit();$.account.initUpload();if($($data.ccmcms.services.account.selector).data('type')=='signup')
{$.account.initForm();}
else
{$('#ui-nav-account').parent().ccmUITabs({history:true,tabHandlers:{load:{'infos':$.account.initFormInfo,'media':$.account.plugUpload,'password':$.account.initFormPassword}}});}
$('body').delegate('.unsubscribeLink','click',function(e){$.account.unsubscribeConfirmationMessage(e);}).delegate('.unsubscribeLinkNo','click',function(){$(this).closest('#unsubscribeMessage').dialog('destroy');}).delegate('.unsubscribeLinkYes','click',function(e){$.account.unsubscribeConfirmationAction(e);}).delegate('select#level','change',function(e){var $this=$(this);$.account.changeLevelAction($this.val());});$('#popupToU').click(function(e){e.preventDefault();window.open($('#popupToU').attr('href'),$.account.langs[$data.common.lang].ACCOUNT_TERMOFUSE_MODAL_TITLE,'width=1000,height=600,scrollbars=yes,status=no,titlebar=no,toolbar=no');return false;});},initForm:function()
{$($data.ccmcms.services.account.selector).submit($.account.sendForm);$.account.initMaxLength();},initFormInfo:function()
{$($data.ccmcms.services.account.selector+'[data-type="editInfo"]').submit($.account.sendForm);$.account.initMaxLength();},initFormPassword:function()
{$($data.ccmcms.services.account.selector+'[data-type="editPassword"]').submit($.account.sendForm);},initUpload:function()
{$(document).bind('fileUploadLoaded',$.account.plugUpload);},initMaxLength:function()
{function updateCounter()
{nbRemainingChars=$textarea.attr('maxlength')-$textarea.val().length;$textarea.next('.jCounter').children('.counter_nb').html(nbRemainingChars);if(nbRemainingChars>1)
{$textarea.nextAll('.jCounter').children('.counter_txt').html($.account.langs[$data.common.lang].ACCOUNT_REMAINING_CHARS);}else{$textarea.nextAll('.jCounter').children('.counter_txt').html($.account.langs[$data.common.lang].ACCOUNT_REMAINING_CHAR);}};$('textarea[maxlength]').maxLength();$textarea=$($data.ccmcms.services.account.selector+' textarea[maxlength]');if($textarea.length>0){$textarea.bind('warnlengthin',function(){$(this).next('.jCounter').children('.counter_nb').css('color','red');}).bind('warnlengthout',function(){$(this).next('.jCounter').children('.counter_nb').css('color','green');}).bind('updated',function(){updateCounter();});updateCounter();}},plugUpload:function()
{var
$fileUpload=$('div#fileupload'),$lastPreview,url='/account/_xhr_media?xhr=plaintext';$('#form_media_submit').hide();if($data.ccmcms.editUser!=undefined&&$data.ccmcms.editUser.id!=undefined)
{url+='&uid='+$data.ccmcms.editUser.id;}
$fileUpload.length>0&&typeof $.fn.fileupload=='function'&&$fileUpload.fileupload({autoUpload:true,url:url,acceptFileTypes:/(\.|\/)(gif|jpg|png)$/i,previewMaxWidth:180,previewMaxHeight:180,maxFileSize:8388608}).bind('fileuploadsend',function(e,data){$fileUpload.spin();}).bind('fileuploadfail',function(e,data){$($data.ccmcms.services.account.selector).find('input[type=file]').showInputError($.account.langs[$data.common.lang].ACCOUNT_MESSAGE_FAILED_UPLOAD);}).bind('fileuploaddone',function(e,data){$fileUpload.spin();if(data.textStatus=='success'&&typeof data.result.error=='undefined')
{if(typeof data.result.messageGeneral!='undefined')
{$('#messageGeneral').empty();for(indexMessage in data.result.messageGeneral)
{if(data.result.messageGeneral.hasOwnProperty(indexMessage))
{$('#messageGeneral').append('<p class="ccmcss_form__line grid_line ccmcss_form__line--no_col ccmcss_form__line--valid">'+data.result.messageGeneral[indexMessage]+'</p>');}}}
$currentPreview=$('<div style="width:180px;height:180px;overflow:hidden;display:none;">').appendTo($fileUpload).append($('<img style="max-width:none;">').attr({src:data.result.media.file}).show().croppable({nav:{label:$.account.langs[$data.common.lang].ACCOUNT_CROP_LABEL},dialog:{options:{title:$.account.langs[$data.common.lang].ACCOUNT_CROP_LABEL,close:function(){}},saveLabel:$.account.langs[$data.common.lang].ACCOUNT_CROP_APPLY,cancelLabel:$.account.langs[$data.common.lang].ACCOUNT_CROP_CANCEL},img:{src:data.result.file,jcrop:{setSelect:[0,0,150,150]}},save:function(relativeCrop,relativeBounds,crop,bounds)
{$lastPreview&&$lastPreview.remove(),$('.cropNav').remove();$fileUpload.spin();$.fn.croppable.updatePreview.call(this,crop,bounds);$('#media_x1').val(crop.x);$('#media_y1').val(crop.y);$('#media_x2').val(crop.x2);$('#media_y2').val(crop.y2);$('#media_file').val(data.result.media.file);if($($data.ccmcms.services.account.selector).data('type')!='signup')
{$('#mediaCurrent').hide();$.ajax({type:'POST',url:url,dataType:'json',data:{media_file:data.result.media.file,media_x1:crop.x,media_y1:crop.y,media_x2:crop.x2,media_y2:crop.y2},success:function(dataSave){$fileUpload.spin();$currentPreview.show();if(typeof dataSave.error!='undefined'&&typeof dataSave.error.media!='undefined')
{$($data.ccmcms.services.account.selector).find('input[type=file]').showInputError(dataSave.error.media);return;}else if(typeof dataSave.messageGeneral!='undefined'){for(indexMessage in dataSave.messageGeneral)
{if(dataSave.messageGeneral.hasOwnProperty(indexMessage))
{$('#messageGeneral').append('<p class="ccmcss_form__line grid_line ccmcss_form__line--no_col ccmcss_form__line--valid">'+dataSave.messageGeneral[indexMessage]+'</p>');}}}
$lastPreview.remove(),$('.cropNav').remove();if($data.ccmcms.editUser!=undefined&&$data.ccmcms.editUser.id!=undefined&&$data.ccmcms.user!=undefined&&$data.ccmcms.user.id!=undefined&&$data.ccmcms.user.id==$data.ccmcms.editUser.id)
{$('.jHeaderAvatar').css('background-image','url('+dataSave.media.thumb_url+')');}
$lastPreview=$('<div style="width:180px;height:180px;">').appendTo($fileUpload).append($('<img style="max-width:none;">').attr({src:dataSave.media.medium_url}));}});}else
{$fileUpload.spin();$currentPreview.show();}
$lastPreview=$currentPreview;}}));$currentPreview.find('img').trigger('showCrop');return;}
$(this).find('input[type=file]').showInputError($.account.langs[$data.common.lang].ACCOUNT_MESSAGE_ERROR_UPLOAD);});},validateForm:function()
{$this=$(this);var _resultValidate=true;$this.find('.inputRequired').each(function()
{if($.trim($(this).val())=='')
{$(this).showInputError($.account.langs[$data.common.lang].ACCOUNT_MESSAGE_FIELD_REQUIRED);_resultValidate=false;}});if($this.find('#password1').val()!=''&&$this.find('#password2').val()!=''&&$this.find('#password1').val()!=$this.find('#password2').val())
{$this.find('#password2').showInputError($.account.langs[$data.common.lang].ACCOUNT_MESSAGE_ERROR_PASSWORD_MATCH)
_resultValidate=false;}
if($('#ToUAcceptation').length>0&&!$('#ToUAcceptation').attr('checked'))
{$this.find('#ToUAcceptation').showInputError($.account.langs[$data.common.lang].ACCOUNT_MESSAGE_ERROR_TOU)
_resultValidate=false;}
return _resultValidate;},sendForm:function(e)
{$this=$(e.target);$this.spin();$this.hideFormError();$('#messageGeneral',$this).empty();$('#errorGeneral',$this).empty();if(!$.account.validateForm.call(this))
{$('#errorGeneral',$this).html('<div class="ccmcss_form__line ccmcss_form__line--no_col"><p class="ccmcss_msg--error">'+$.account.langs[$data.common.lang].ACCOUNT_MESSAGE_ERROR+'</p></div>');$.scrollTo(0,200);$this.spin();return false;}
var dataInput={};$this.find('.inputSend').each(function()
{dataInput[$(this).attr('id')]=$(this).val();});$.ajax({type:'POST',url:$this.data('ajaxurl'),dataType:'json',data:dataInput,success:function(json){if(typeof json.error!='undefined'||(typeof json.errorGeneral!='undefined'&&json.errorGeneral.length!=0))
{for(field in json.error)
{if(json.error.hasOwnProperty(field))
{$this.find('#'+field).showInputError(json.error[field]);}}
if(typeof json.errorGeneral!='undefined')
{for(indexError in json.errorGeneral)
{if(json.errorGeneral.hasOwnProperty(indexError))
{$('#errorGeneral',$this).append('<div class="ccmcss_form__line ccmcss_form__line--no_col"><p class="ccmcss_msg--error">'+json.errorGeneral[indexError]+'</p></div>');}}}
$.scrollTo(0,200);}else{_gaq.push(['_trackEvent',$this.data('trackevent'),'OK']);if($this.data('type')=='signup'&&$this.data('redirect')==null)
{$this.data('redirect','/');}
if($this.data('redirect')!='')
{window.location=$this.data('redirect');}
if(($this.data('type')=='editInfo'||$this.data('type')=='editPassword')&&typeof json.messageGeneral!='undefined')
{for(indexMessage in json.messageGeneral)
{if(json.messageGeneral.hasOwnProperty(indexMessage))
{$('#messageGeneral',$this).append('<div class="ccmcss_form__line ccmcss_form__line--no_col"><p class="ccmcss_msg--valid">'+json.messageGeneral[indexMessage]+'</p></div>');}}
var $form=$('.tabEdit form'),firstname=$form.find('#firstname')[0],lastname=$form.find('#lastname')[0];if(typeof firstname!=='undefined'||typeof lastname!=='undefined'){var label=firstname.value+' '+lastname.value;$('.jHeaderLabel').html(label);}
if($this.data('type')=='editPassword'){$('#messageGeneral',$this).append('<div class="ccmcss_form__line ccmcss_form__line--no_col"><p class="ccmcss_msg--valid">Merci de vous reconnecter</p></div>');}
$.scrollTo(0,200);}}
$this.spin();}});return false;},unsubscribeConfirmationMessage:function(e)
{$('<div id="unsubscribeMessage" title="'+$.account.langs[$data.common.lang].ACCOUNT_MESSAGE_UNSUBSCRIBE_CONFIRMATION+'"></div>').html('<div> En supprimant votre compte, vous perdrez l\'ensemble de vos informations.<br /><br />'+$.account.langs[$data.common.lang].ACCOUNT_MESSAGE_UNSUBSCRIBE_CONFIRMATION_YES+$.account.langs[$data.common.lang].ACCOUNT_MESSAGE_UNSUBSCRIBE_CONFIRMATION_NO+'</div>').dialog({width:'600px',resizable:false,position:['center','center'],modal:true});},unsubscribeConfirmationAction:function(e)
{location.href='/account/unsubscribe?uid='+$data.ccmcms.editUser.id;},changeLevelAction:function(level)
{$('#messageGeneral').empty();$.ajax({type:'POST',url:'/account/_xhr_level/',dataType:'json',data:{level:level,uid:$data.ccmcms.editUser.id},success:function(json)
{if(typeof json.messageGeneral!='undefined')
{for(indexMessage in json.messageGeneral)
{if(json.messageGeneral.hasOwnProperty(indexMessage))
{$('#messageGeneral').html('<div class="ccmcss_form__line ccmcss_form__line--no_col"><p class="ccmcss_msg--valid">'+json.messageGeneral[indexMessage]+'</p></div>');}}}}});}};$.extend($.account,$.microTemplate);if($data.ccmcms.services.account.start===true){$(document).start(function(){$.account.init();});}})(jQuery);(function($){$.extend(true,$.account.langs,{'FR':{'ACCOUNT_MESSAGE_ERROR_UPLOAD':'Une erreur s\'est produite lors du téléchargement de la photo, merci de réessayer','ACCOUNT_MESSAGE_FAILED_UPLOAD':'L\'envoi de votre photo a échoué. Elle doit être au format jpg, png ou gif et faire moins de 8 Mo','ACCOUNT_MESSAGE_FIELD_REQUIRED':'Ce champ est obligatoire','ACCOUNT_MESSAGE_ERROR':'Vos modifications n\'ont pas pu être sauvegardées, merci de corriger les erreurs ci-dessous','ACCOUNT_MESSAGE_ERROR_PASSWORD_MATCH':'Votre confirmation du mot de passe ne correspond pas','ACCOUNT_MESSAGE_ERROR_TOU':'Vous devez accepter les conditions d\'utilisation','ACCOUNT_MESSAGE_UNSUBSCRIBE_CONFIRMATION':'<div>Etes-vous sur de vouloir vous désinscrire ?</div>','ACCOUNT_MESSAGE_UNSUBSCRIBE_CONFIRMATION_YES':'<a class=\"unsubscribeLinkYes a_hover\">Oui</a> ','ACCOUNT_MESSAGE_UNSUBSCRIBE_CONFIRMATION_NO':'<a class=\"unsubscribeLinkNo app_btn_2\">Non, je souhaite conserver mon compte</a>','ACCOUNT_TERMOFUSE_MODAL_TITLE':'Conditions d\'utilisation','ACCOUNT_CROP_LABEL':'Couper','ACCOUNT_CROP_CANCEL':'Annuler','ACCOUNT_CROP_APPLY':'Appliquer','ACCOUNT_REMAINING_CHARS':'caractères restants','ACCOUNT_REMAINING_CHAR':'caractère restant'}});})(jQuery);(function($)
{'use strict';$.fn.laCentrale=function(options)
{options=$.extend({},$.fn.laCentrale.defaultOptions,options);return this.each(function()
{var $this=$(this),modeleList={},modeleFind='',marqueSelected='',loadModele=function(marque){var listModele=modeleList[marque],listOptions=[],optionDefaut=$('<option>').attr('value','').html('Modèles');for(var key in listModele){if(!listModele.hasOwnProperty(key)){continue;}
var option=$('<option>').attr('value',listModele[key]).html(listModele[key]);if(typeof(modeleFind)!='undefined'&&modeleFind.length>0&&modeleFind==listModele[key]){option.attr('selected','selected');}
listOptions[key]=option[0];}
$('#jSelectModele').empty().append(optionDefaut[0]).append(listOptions);};$.ajax({url:options.hostUrl+options.pathUrl+'?type='+options.type+'&str='+encodeURI($.trim($('h1:first').text()).replace(/  /g,'').replace(/[\t\n\r\b]/g,' ')),dataType:'jsonp',callback:'laCentrale',success:function(data){$this.html(data.html);if(options.type=='col_centrale_formulaire'){modeleList=data.modeles;modeleFind=data.modeleFind;marqueSelected=$('#jSelectMarque').val();if(typeof(marqueSelected)!='undefined'&&marqueSelected.length>0){loadModele(marqueSelected);}
$('#jPubLaCentraleSlider').sudoSlider({pause:'5000',auto:true,continuous:true,autoheight:false,autowidth:false,slideCount:2,moveCount:2,ease:'linear',prevHtml:'<a href="#" class="app_button_nav_prev"><span class="icon-btn_nav_l" aria-hidden="true"></span></a>',nextHtml:'<a href="#" class="app_button_nav_next"><span class="icon-btn_nav_r" aria-hidden="true"></span></a>'});$this.on('change','#jSelectMarque',function()
{var marque=$(this+':selected').attr('value');loadModele(marque);});}}});$this.on('click','.jPubLaCentraleMiddle a',function(){_gaq.push(['_trackEvent','ccmcms/colmiddle','blockLaCentraleV2','click']);});});};$.fn.laCentrale.defaultOptions={type:'col_centrale_formulaire',hostUrl:'https://www.linternaute.com',pathUrl:'/api/lacentrale'};}(jQuery));(function($)
{'use strict';$.fn.kelkoo=function(options)
{options=$.extend({},$.fn.kelkoo.defaultOptions,options);return this.each(function()
{var $this=$(this);$.ajax({url:options.hostUrl+options.pathUrl+'?type='+options.type+'&str='+encodeURI($.trim($('h1:first').text()).replace(/  /g,'').replace(/[\t\n\r\b]/g,' ')),dataType:'jsonp',callback:'kelkoo',success:function(data){$this.html(data.html);}});$this.on('click','.jPubKelkoo a',function(){_gaq.push(['_trackEvent','ccmcms/colmiddle','blockKelkoo','click']);});});};$.fn.kelkoo.defaultOptions={type:'col_middle',hostUrl:'https://www.linternaute.com',pathUrl:'/api/kelkoo'};}(jQuery));(function($)
{$.registrationWall={defaultOptions:{cookieName:'ccmbgrw',domain:'domain.com',countMaxVisit:2,template:'<div id="dialog_auth">'+'<p class="app_dialog_alert__txt">${innerText}</p>'+'<div class="grid_line gutter grid--norwd">'+' <div class="grid_left">'+'  <a href="#" class="jSubscribe app_btn_2">Créer mon compte</a>'+' </div> '+' <div class="grid_last">'+'  <a href="#" class="jLogin app_btn_2">Me connecter</a>'+' </div> '+'</div>  '+'<a href="${linkNoThx}" class="a_hover">'+' <small>Non merci, je ne souhaite pas me créer de compte</small>'+'</a>'+'</div>',expires:30,innerText:'Sample text',title:'Sample title',linkNoThx:'domain.com',excludeDomainReferer:['google.fr','google.com','bing.com','yahoo.com']},init:function(options){options=$.extend(true,{},$.registrationWall.defaultOptions,options);var domainArray=document.location.hostname.split('.'),cookieDomain=domainArray.slice(-2).join('.'),domainReferrer=null;if(typeof document.referrer!=='undefined'&&document.referrer!==''){domainReferrer=document.referrer.split('/')[2].split('.').splice(-2).join('.');}
var cookie=$.cookie(options.cookieName),idContentStore=cookie?JSON.parse(cookie):{};if(options.excludeDomainReferer.indexOf(domainReferrer)==-1){var idContent=$('meta[property="ccmbg:parent_id"]').attr('content');idContentStore[idContent]=1;$.cookie(options.cookieName,JSON.stringify(idContentStore),{expires:options.expires,path:'/',domain:cookieDomain});if(Object.keys(idContentStore).length>=options.countMaxVisit){var $node=new $.Template(options.template,true).getNode({innerText:options.innerText,linkNoThx:options.linkNoThx}).dialog({title:options.title,width:400,modal:true,resizable:false,position:['center','center'],dialogClass:'app_dialog_auth app_dialog_auth--alert',closeOnEscape:false,draggable:false,open:function(event,ui){$('.ui-dialog').css('z-index',12001);$('.ui-widget-overlay').css('z-index',12000);$('.entry').addClass('app_dialog_blur');$('body').css('overflow','hidden');},close:function(event,ui){$('.entry').removeClass('app_dialog_blur');}}).trigger('registrationwall.activated');$('.jLogin').loginDialog({dialog:{modal:true,resizable:false,position:['center','center'],dialogClass:'app_dialog_auth app_dialog_login app_dialog_auth--form ccmcss_form',draggable:false,width:650,open:function(event,ui){$('.ui-dialog').css('z-index',12001);$('.ui-widget-overlay').css('z-index',12000);$('.entry').addClass('app_dialog_blur');},close:function(event,ui){$('.entry').removeClass('app_dialog_blur');}}});$('.jSubscribe').subscribeDialog();}}}};})(jQuery);(function($)
{$.loginDialog={init:function(){this.microTemplateInit();}};$.fn.loginDialog=function(options)
{options=$.extend({},$.fn.loginDialog.defaultOptions,options);this.on('click',function(e){e.preventDefault();var $this=$(this),txtUrl=$this.attr('data-url'),loginActionUrl=$this.data('login-action')||'',redirectionUrl=$this.attr('data-redirection-url')||document.location.href,paramTxtUrl=txtUrl!==''?'?txtUrl='+txtUrl:'';$divModal=$('<div id="divModal" title="'+$.loginDialog.langs[$.loginDialog.lang].LOGIN_CONNEXION+'"></div>').html($.loginDialog.getTemplate('<div class="grid_row">'
+'<div class="grid_col w60">'
+'<h2>$l{LOGIN_MESSAGE_WITH_YOUR_ACCOUNT}</h2>'
+'<form method="post" action="'+loginActionUrl+'" role="log">'
+'<fieldset>'
+'<legend>$l{LOGIN_MESSAGE}</legend>'
+'<div class="ccmcss_form__line grid_line">'
+'<div class="grid_left w30">'
+'<label for="txtMail">$l{LOGIN_EMAIL}</label>'
+'</div>'
+'<div class="grid_last">'
+'<input type="text" value="" name="txtMail" id="txtMail" tabindex="11">'
+'</div>'
+'</div>'
+'<div class="ccmcss_form__line grid_line">'
+'<div class="grid_left w30">'
+'<label for="txtMail">$l{LOGIN_PASSWORD}</label>'
+'<p><a href="/account/forgot_password/">$l{LOGIN_PASSWORD_FORGOT}</a></p>'
+'</div>'
+'<div class="grid_last">'
+'<input type="password" name="pwdPassAuth" id="pwdPassAuth" tabindex="12">'
+'</div>'
+'</div>'
+'<div class="action">'
+'<input type="hidden" value="'+(typeof txtUrl!='undefined'?txtUrl:'')+'" name="txtUrl" id="txtUrl" />'
+'<button name="login" type="submit" tabindex="13">$l{LOGIN_CONNEXION}</button>'
+'<p>$l{LOGIN_NO_ACCOUNT},<br/><a href="/account/signup'+paramTxtUrl+'">$l{LOGIN_JOIN_IN}</a></p>'
+'</div>'
+'</fieldset>'
+'</form>'
+'</div>'
+'<div class="grid_col w30">'
+'<h2>$l{LOGIN_MESSAGE_WITH_YOUR_FB_ACCOUNT}</h2>'
+'<a href="javascript:void(0);" class="app_btn_facebook fbLogin"><span></span>$l{LOGIN_CONNEXION}</a>'
+'</div>'
+'</div>')).dialog(options.dialog);});return this;};$.fn.loginDialog.defaultOptions={dialog:{width:650,resizable:false,dialogClass:'ccmcss_form app_dialog_login',position:['center','center'],modal:true}};$.extend($.loginDialog,$.microTemplate);$(document).start(function(){$.loginDialog.init();},{name:'loginDialogInit'});})(jQuery);(function($){$.extend(true,$.loginDialog.langs,{'FR':{'LOGIN_MESSAGE_AUTHENTIFICATION':'Vous devez être identifié pour faire cette action','LOGIN_MESSAGE_WITH_YOUR_FB_ACCOUNT':'Avec votre compte Facebook','LOGIN_MESSAGE_WITH_YOUR_ACCOUNT':'Avez votre compte','LOGIN_EMAIL':'Email','LOGIN_PASSWORD':'Mot de passe','LOGIN_PASSWORD_FORGOT':'Perdu ?','LOGIN_NO_ACCOUNT':'Pas encore inscrit','LOGIN_JOIN_IN':'S\'inscrire','LOGIN_REMEMBER_ME':'Se souvenir de moi','LOGIN_INSCRIPTION':'S\'inscrire','LOGIN_CONNEXION':'Connexion','LOGIN_MESSAGE':'S\'identifier sur le site'}});})(jQuery);(function($){$.extend(true,$.loginDialog.langs,{'FR':{'LOGIN_MESSAGE_WITH_YOUR_ACCOUNT':'Avec votre compte Linternaute.com','LOGIN_MESSAGE':'S\'identifier sur Linternaute.com'}});})(jQuery);(function($)
{$.subscribeDialog={init:function(){this.microTemplateInit();},validateForm:function()
{$this=$(this);var _resultValidate=true;$this.find('.inputRequired').each(function()
{if($.trim($(this).val())=='')
{$(this).showInputError($.account.langs[$data.common.lang].ACCOUNT_MESSAGE_FIELD_REQUIRED);_resultValidate=false;}});if($this.find('#password1').val()!=''&&$this.find('#password2').val()!=''&&$this.find('#password1').val()!=$this.find('#password2').val())
{$this.find('#password2').showInputError($.account.langs[$data.common.lang].ACCOUNT_MESSAGE_ERROR_PASSWORD_MATCH)
_resultValidate=false;}
if($('#ToUAcceptation').length>0&&!$('#ToUAcceptation').attr('checked'))
{$this.find('#ToUAcceptation').showInputError($.account.langs[$data.common.lang].ACCOUNT_MESSAGE_ERROR_TOU)
_resultValidate=false;}
return _resultValidate;}};$.fn.subscribeDialog=function(options)
{options=$.extend({},$.fn.subscribeDialog.defaultOptions,options);this.on('click',function(e){e.preventDefault();var $this=$(this),$divModal=$('<div id="divModal" title="'+$.subscribeDialog.langs[$.subscribeDialog.lang].SUBSCRIBE_CREATE_ACCOUNT+'"></div>').html($.subscribeDialog.getTemplate('<div id="dialog_form">'
+'            <form method="post" >'
+'                <legend>S\'authentifier sur le JDN</legend> '
+'                <div id="errorGeneral" class="ccmcss_msg_error"></div>'
+'                <div id="messageGeneral" class="ccmcss_msg_error"></div>'
+'                <fieldset>'
+'                    <div class="grid_row">'
+'                        <div class="grid_col w50">'
+'                            <div class="ccmcss_form__line grid_line jFormLine">'
+'                                <div class="grid_left w35">'
+'                                    <label for="firstname">'
+'                                        $l{SUBSCRIBE_FIRSTNAME} *'
+'                                    </label>'
+'                                </div>'
+'                                <div class="grid_left w65">'
+'                                    <input x-autocompletetype="given-name" id="firstname" name="firstname" class="inputSend inputRequired" placeholder="" type="text" tabindex="1" required/>'
+'           <div class="jMsg"></div>'
+'                                </div>'
+'                            </div>'
+'                            <div class="ccmcss_form__line grid_line jFormLine">'
+'                                <div class="grid_left w35">'
+'                                    <label for="email">'
+'                                        Email *'
+'                                    </label>'
+'                                </div>'
+'                                <div class="grid_left w65">'
+'                                    <input autocomplete="email" x-autocompletetype="email" id="email" name="email" class="inputSend inputRequired" placeholder="" type="email" tabindex="3" required/>'
+'           <div class="jMsg"></div>'
+'                                </div>'
+'                            </div>'
+'                            <div class="ccmcss_form__line grid_line jFormLine">'
+'                                <div class="grid_left w35">'
+'                                    <label for="password1">'
+'                                        $l{SUBSCRIBE_PASSWORD} *'
+'                                    </label>'
+'                                </div>'
+'                                <div class="grid_left w65">'
+'                                    <input type="password" id="password1" name="password1" class="inputSend inputRequired" placeholder="" type="password" tabindex="5" required/>'
+'           <div class="jMsg"></div>'
+'                                </div>'
+'                            </div>'
+'                            <div class="ccmcss_form__line grid_line">'
+'                                <div class="grid_left w35">'
+'                                    <label for="business" class="label_l">'
+'                                       $l{SUBSCRIBE_BUSINESS} *'
+'                                    </label>'
+'                                </div>'
+'                                <div class="grid_left w65">'
+'                                    <select class="value inputSend" id="business" name="business" tabindex="7" required>'
+'           <option value="">$l{SUBSCRIBE_CHOICE_OPTION}</option>'
+'           <option value="Administration Publique">Administration Publique</option>'
+'                                         <option value="Agriculture, pêche, sylviculture">Agriculture, pêche, sylviculture</option>'
+'           <option value="Banque, Assurance et activités financières">Banque, Assurance et activités financières</option>'
+'           <option value="Bâtiment">Bâtiment</option>'
+'           <option value="Commerce, distribution">Commerce, distribution</option>'
+'           <option value="Communication / Media / Information">Communication / Media / Information</option>'
+'           <option value="Culture">Culture</option>'
+'           <option value="Energie, eau, environnement">Energie, eau, environnement</option>'
+'           <option value="Enseignement">Enseignement</option>'
+'           <option value="Hébergement / restauration">Hébergement / restauration</option>'
+'           <option value="Industrie manufacturière">Industrie manufacturière</option>'
+'           <option value="Immobilier">Immobilier</option>'
+'           <option value="Sans emploi">Sans emploi</option>'
+'           <option value="Santé">Santé</option>'
+'           <option value="Services aux entreprises, conseil">Services aux entreprises, conseil</option>'
+'           <option value="Transport / logisitique">Transport / logisitique</option>'
+'           <option value="Autres">Autres</option>'
+'                                    </select>'
+'                                </div>'
+'                            </div>'
+'                        </div>'
+'                        <div class="grid_col w50">'
+'                            <div class="ccmcss_form__line grid_line jFormLine">'
+'                                <div class="grid_left w35">'
+'                                    <label for="lastname">'
+'                                        $l{SUBSCRIBE_LASTNAME} *'
+'                                    </label>'
+'                                </div>'
+'                                <div class="grid_left w65 ">'
+'                                    <input x-autocompletetype="family-name" id="lastname" name="lastname" class="inputSend inputRequired" placeholder="" type="text" tabindex="2" required/>'
+'           <div class="jMsg"></div>'
+'                                </div>'
+'                            </div>'
+'                            <div class="ccmcss_form__line grid_line jFormLine">'
+'                                <div class="grid_left w35">'
+'                                    <label for="zipcode">'
+'                                        $l{SUBSCRIBE_ZIPCODE} *'
+'                                    </label>'
+'                                </div>'
+'                                <div class="grid_left w65">'
+'                                    <input id="zipcode" name="zipcode" placeholder="" class="inputSend inputRequired" type="text" tabindex="4" required/>'
+'           <div class="jMsg"></div>'
+'                                </div>'
+'                            </div>'
+'                            <div class="ccmcss_form__line grid_line jFormLine">'
+'                                <div class="grid_left w35">'
+'                                    <label for="password2">'
+'                                        $l{SUBSCRIBE_PASSWORD} *'
+'                                    </label>'
+'                                </div>'
+'                                <div class="grid_left w65">'
+'                                    <input type="password" id="password2" name="password2" class="inputSend inputRequired" placeholder="" type="password" tabindex="6" required/>'
+'           <div class="jMsg"></div>'
+'                                </div>'
+'                            </div>'
+'                            <div class="ccmcss_form__line grid_line">'
+'                                <div class="grid_left w35">'
+'                                    <label for="job">'
+'                                        $l{SUBSCRIBE_FUNCTION} *'
+'                                    </label>'
+'                                </div>'
+'                                <div class="grid_left w65">'
+'                                    <select class="value inputSend" id="job" name="job" tabindex="8" required>'
+'            <option value="">$l{SUBSCRIBE_CHOICE_OPTION}</option>'
+'            <option value="Chef d\'entreprise / Directeur Général / gérant">Chef d\'entreprise / Directeur Général / gérant</option>'
+'            <option value="Direction commerciale : administration des ventes, assistant">Direction commerciale : administration des ventes, assistant</option>'
+'            <option value="Direction commerciale : commercial, responsable clientèle, conseil">Direction commerciale : commercial, responsable clientèle, conseil</option>'
+'            <option value="Direction commerciale : directeur, directrice">Direction commerciale : directeur, directrice</option>'
+'            <option value="Direction des ressources humaines : chargé RH">Direction des ressources humaines : chargé RH</option>'
+'            <option value="Direction des ressources humaines : directeur, directrice">Direction des ressources humaines : directeur, directrice</option>'
+'            <option value="Direction financière et administrative : contrôle de gestion, audit, fiscal">Direction financière et administrative : contrôle de gestion, audit, fiscal</option>'
+'            <option value="Direction financière et administrative : comptabilité, recouvrement, services généraux">Direction financière et administrative : comptabilité, recouvrement, services généraux</option>'
+'            <option value="Direction financière et administrative : directeur, directrice">Direction financière et administrative : directeur, directrice</option>'
+'            <option value="Direction marketing / communication : chef produit, responsable étude, analyste, responsable portefeuille">Direction marketing / communication : chef produit, responsable étude, analyste, responsable portefeuille</option>'
+'            <option value="Direction marketing / communication : directeur, directrice">Direction  marketing / communication : directeur, directrice</option>'
+'            <option value="Direction Production : directeur">Direction Production : directeur</option>'
+'            <option value="Direction Production : ingénieur, responsable qualité">Direction Production : ingénieur, responsable qualité</option>'
+'            <option value="Direction Production : ouvrier, responsable d\'atelier">Direction Production : ouvrier, responsable d\'atelier</option>'
+'            <option value="Direction Technique / Système d\'information  : chef projet / développeur / responsable R&D">Direction Technique / Système d\'information  : chef projet / développeur / responsable R&D</option>'
+'            <option value="Direction Technique / Système d\'information  : directeur">Direction Technique / Système d\'information  : directeur</option>'
+'            <option value="Fonction publique : cadre / enseignant">Fonction publique : cadre / enseignant</option>'
+'            <option value="Fonction publique : employé, agent, ouvrier">Fonction publique : employé, agent, ouvrier</option>'
+'            <option value="Profession libérale">Profession libérale</option>'
+'            <option value="Autre">Autre</option>'
+'                                    </select>'
+'                                </div>'
+'                            </div>'
+'                        </div>'
+'                    </div>'
+'                    <div class="grid_row">'
+'                        <div class="grid_col w15">&nbsp;</div>'
+'                        <div class="grid_col">'
+'                            <div class="grid_row grid--norwd ccmcss_form__line--checkbox jFormLine">'
+'                                <div class="grid_col">'
+'                                    <input type="checkbox" id="ToUAcceptation" name="ToUAcceptation"  class="inputSend" tabindex="9" required>'
+'           <div class="jMsg"></div>'
+'                                </div>'
+'                                <div class="grid_col">'
+'                                    <label for="ToUAcceptation">'
+'                                        J\'ai lu et j\'accepte <a href="https://www.ccmbenchmark.com/corporate/cgv?f_mode=popup" class="a_hover" id="popupToU" target="_blank">les conditions d\'utilisation</a>                                </label>                        '
+'                                </div>'
+'                            </div>'
+'                        </div>'
+'                        <div class="grid_col">'
+'                            <footer>'
+'                                <div class="grid_row grid--norwd">'
+'                                    <div class="grid_col">'
+'                                        <a href="javascript:window.location.reload();" class="a_hover">$l{SUBSCRIBE_CANCEL}</a>'
+'                                    </div>'
+'                                    <div class="grid_col">'
+'                                        <input id="signinForm_submit" type="submit" value="$l{SUBSCRIBE_SUBSCRIBTION}">'
+'                                    </div>'
+'                                </div>'
+'                            </footer>'
+'                        </div>'
+'                    </div>'
+'                    <span class="ccmcss_form__msg">$l{SUBSCRIBE_COMPULSORY}</span>'
+'                </fieldset>'
+'            </form>'
+'        </div>')).dialog(options);$('form',$divModal).submit(function(){event.preventDefault();if(!$.subscribeDialog.validateForm.call(this))
{$('#errorGeneral',$this).html('<div class="ccmcss_form__line ccmcss_form__line--no_col">'+'<p class="ccmcss_msg--error">'+$.subscribeDialog.langs[$.subscribeDialog.lang].ACCOUNT_MESSAGE_ERROR+'</p></div>');return false;}
var dataInput={};$divModal.find('.inputSend').hideInputError().each(function()
{dataInput[$(this).attr('id')]=$(this).val();});$.ajax({type:'POST',url:'/account/signup',dataType:'json',data:dataInput,success:function(json){if(typeof json.error!='undefined'||(typeof json.errorGeneral!='undefined'&&json.errorGeneral.length!=0))
{for(var field in json.error)
{if(json.error.hasOwnProperty(field))
{$divModal.find('#'+field).showInputError(json.error[field]);}}
if(typeof json.errorGeneral!='undefined')
{for(var indexError in json.errorGeneral)
{if(json.errorGeneral.hasOwnProperty(indexError))
{$('#errorGeneral').html('<div class="ccmcss_form__line ccmcss_form__line--no_col"><p class="ccmcss_msg--error">'+json.errorGeneral[indexError]+'</p></div>');}}}}else{window.location.reload();}}});})});return this;};$.fn.subscribeDialog.defaultOptions={width:750,resizable:false,dialogClass:'app_dialog_auth app_dialog_auth--form ccmcss_form',position:['center','center'],modal:true,draggable:false,open:function(event,ui){$('.ui-dialog').css('z-index',12001);$('.ui-widget-overlay').css('z-index',12000);}};$.extend($.subscribeDialog,$.microTemplate);$(document).start(function(){$.subscribeDialog.init();},{name:'subscribeDialogInit'});})(jQuery);(function($){$.extend(true,$.subscribeDialog.langs,{'FR':{'SUBSCRIBE_CREATE_ACCOUNT':'Créez votre compte','SUBSCRIBE_LASTNAME':'Nom','SUBSCRIBE_FIRSTNAME':'Prénom','SUBSCRIBE_ZIPCODE':'Code postal','SUBSCRIBE_BUSINESS':'Secteur d\'activité','SUBSCRIBE_PASSWORD':'Mot de passe','SUBSCRIBE_FUNCTION':'Fonction','SUBSCRIBE_SUBSCRIBTION':'Inscription','SUBSCRIBE_COMPULSORY':'* Champs obligatoires','SUBSCRIBE_CANCEL':'Annuler','SUBSCRIBE_MESSAGE_ERROR':'Vos modifications n\'ont pas pu être sauvegardées, merci de corriger les erreurs ci-dessous','SUBSCRIBE_CHOICE_OPTION':'Choisissez une option'}});})(jQuery);(function($)
{if(_$('$data.ccmcms.services.newsletterdialog')._.start)
{$.newsLetterDialog={init:function(){this.microTemplateInit();this.show();},show:function(options){options=$.extend({},$.newsLetterDialog.defaultOptions,options);var txtUrl=$(this).attr('data-url');var paramTxtUrl='';if(txtUrl!=''){paramTxtUrl='?txtUrl='+txtUrl;}
if($data.ccmcms.newsletters!='undefined')
{$('<div id="divModal" title="NEWSLETTERS"></div>').html($.newsLetterDialog.getTemplate('<h2 class="app_dialog_newsletter__title">$l{NEWSLETTER_DIALOG_TITLE}</h2>')).append(function(){var self=$(this);$.each($data.ccmcms.newsletters,function(i,newsletter){self.append($('<div class="grid_row gutter">').html($('<div class="grid_col w70">').html($('<h3 class="app_dialog_newsletter__itemtitle">').html(newsletter.title)).append($('<p>').html(newsletter.description)).append($('<small>').html(newsletter.periodicity))).append($('<div class="grid_col">').attr('id','xhr_mab_'+newsletter.libelleListe).html('<button name="MAB['+newsletter.libelleListe+']" type="submit" onclick="$().registerML(\''+newsletter.libelleListe+'\')">'+$.newsLetterDialog.langs[$data.common.lang].NEWSLETTER_DIALOG_SUBSCRIBE+'</button>')))})}).dialog(options.dialog);}
return this;}};$.newsLetterDialog.defaultOptions={dialog:{width:650,resizable:false,dialogClass:'app_dialog_newsletter',position:['center','center'],modal:true}};$.fn.registerML=function(mab){$('#xhr_mab_'+mab+' button').hide();$('#xhr_mab_'+mab).append('<img id="mab_load_'+mab+'" src="'+$data.common.staticDomain+'/img/ajax-loader.gif" alt="Chargement" />');try{$.ajax({type:'POST',dataType:"json",url:'/account/_xhr_registerML',data:{'MAB':mab},success:function(response)
{if(response.result==200){$('#xhr_mab_'+mab+'.button').hide();$('#mab_load_'+mab).remove();$('#xhr_mab_'+mab).append('<span style="color:#161">&#x2713;</span>');}},error:function(response)
{$('#xhr_mab_'+mab+' button').show();$('#mab_load_'+mab).remove();}});}catch(e){alert(e);}};$.extend($.newsLetterDialog,$.microTemplate);$(document).start(function(){$.newsLetterDialog.init();},{name:'newsLetterDialog'});}})(jQuery);(function($){if($.newsLetterDialog)
{$.extend(true,$.newsLetterDialog.langs,{'FR':{'NEWSLETTER_DIALOG_TITLE':'Nous vous proposons de vous abonner à ces newsletters','NEWSLETTER_DIALOG_SUBSCRIBE':'S\'inscrire'}});}})(jQuery);(function($){if($.newsLetterDialog)
{$.extend(true,$.newsLetterDialog.langs,{'FR':{'NEWSLETTER_DIALOG_TITLE':'Linternaute.com vous propose de vous abonner à ses newsletters'}});}})(jQuery);(function($)
{$.fn.displayHeaderContents=function(data,options)
{options=$.extend(true,{},$.fn.displayHeaderContents.defaultOptions,options);this.each(function(){var $this=$(this)
key=$this.attr(options.dataKey);if(typeof data[key]!='undefined')
{$this.html($('<h2>').html(data.formatedLabel)).append($('<ul>').html(function()
{for(i=0,m=data[key].length;i<m;++i)
{$(this).append($(' <li> ').html($('<h3>').html('<a href="'+data[key][i].url+'">'+data[key][i].formatedLabel+'</a>')).append($('<ul class="tags">').html(function()
{for(j=0,n=data[key][i].tags.length;j<n;++j)
{$(this).append($(' <li> ').html(' <a href="'+data[key][i].tags[j].url+'">'+data[key][i].tags[j].formatedLabel+'</a> '));}})));}}));}});}
$.fn.displayHeaderContents.defaultOptions={dataKey:'data-channelId'};})(jQuery);(function($)
{'use strict';$.fn.autoPlay=function(options)
{if(!$.fn.autoPlay.langInitialized){$.fn.autoPlay.microTemplateInit();$.fn.autoPlay.langInitialized=true;}
options=$.extend({},$.fn.autoPlay.defaultOptions,options);return this.each(function()
{var $this=$(this);if($this.length>0){var timeout=0,getDuration=function(){if($('.jDiaporamaLegend').attr('data-length')>=options.legendLength){return options.durationLegendLength;}else{return options.duration;}},startTimeOut=function(){$this.attr('data-state','play');if($this.hasClass('ccmcss_cms_figure__playpause')==true){$this.find('.icon-play').addClass('icon-pause').removeClass('icon-play');$this.find('.jAutoPlayText').html($.fn.autoPlay.getTemplate('$l{AUTOPLAY_PAUSE}'));}else{$this.attr('data-icon','2');$this.html(' '+$.fn.autoPlay.getTemplate('$l{AUTOPLAY_PAUSE}'));}
$.cookie('stopAutoPlay',0,{expires:60,path:'/'});timeout=setTimeout(function(){var nextLink=$('.jTopNextButton').attr('href');if(nextLink.length>0){_gaq.push(['_trackEvent','ccmcms/contents','autoplayNext','click']);window.location=nextLink;}},getDuration());},stopTimeOut=function(){clearTimeout(timeout);$this.attr('data-state','pause');if($this.hasClass('ccmcss_cms_figure__playpause')==true){$this.find('.icon-pause').addClass('icon-play').removeClass('icon-pause');$this.find('.jAutoPlayText').html($.fn.autoPlay.getTemplate('$l{AUTOPLAY_PLAY}'));}else{$this.attr('data-icon','%');$this.html($.fn.autoPlay.getTemplate(' '+'$l{AUTOPLAY_PLAY}'));}},stopAutoPlay=function(){$.cookie('stopAutoPlay',1,{expires:60,path:'/'});},nbVideoPlayer=$('.jccmPlayer').length;$.cookie('stopAutoPlay')=="1"&&stopTimeOut();($.cookie('stopAutoPlay')=="0"||$.cookie('stopAutoPlay')==undefined)&&startTimeOut();$('iframe').each(function(){if($(this).attr('src')!=undefined&&$(this).attr('src').match('https://p.ccmbg.com/media')!=null){nbVideoPlayer++;}});if($this.attr('data-state')=='play'&&nbVideoPlayer!=0){stopTimeOut();}
$this.bind('stop',function(){stopTimeOut();stopAutoPlay();}).bind('pause',stopTimeOut).bind('resume',function()
{if($.cookie('stopAutoPlay')!="1"){$this.trigger('play');}}).bind('play',startTimeOut).bind('toggle click',function()
{if($this.attr('data-state')=='play'){$this.trigger('stop');}
else{$this.trigger('play');}});}});};$.extend($.fn.autoPlay,$.microTemplate);$.fn.autoPlay.defaultOptions={duration:3e4,legendLength:2e3,durationLegendLength:3e4};}(jQuery));(function($){$.extend(true,$.fn.autoPlay.langs,{'FR':{'AUTOPLAY_PLAY':'Lecture','AUTOPLAY_STOP':'Stop','AUTOPLAY_PAUSE':'Pause'}});})(jQuery);(function($)
{'use strict';$.fn.foldToggle=function(options)
{options=$.extend({},$.fn.foldToggle.defaultOptions,options);return this.each(function()
{$(this).on(options.events,options.selector,function(){var $this=$(this),$elementDisplay=options.getTarget.call($this),mode=$elementDisplay.is(':visible')?'hide':'show';$elementDisplay[mode]();options.handler.call($this,mode);});});};$.fn.foldToggle.defaultOptions={selector:'.jActionFoldToggle',selectorTarget:'.jTargetFoldToggle',events:'click',symbolOpen:'&',symbolClose:'.',getTarget:function(){return this.closest('tr').next($.fn.foldToggle.defaultOptions['selectorTarget']);},handler:function(mode){(mode=='hide')?$(this).attr('data-icon',$.fn.foldToggle.defaultOptions['symbolOpen']).trigger("refresh"):$(this).attr('data-icon',$.fn.foldToggle.defaultOptions['symbolClose']).trigger("refresh");}};}(jQuery));(function($)
{'use strict';$.fn.editJsonContentConf=function(options)
{options=$.extend({},$.fn.editJsonContentConf.defaultOptions,options);this.on('click',function(e){e.preventDefault();var contentId=$('meta[property="ccmbg:parent_id"]').attr('content');$.ajax({url:'/api/contentconf/'+contentId,type:'get',dataType:'json',success:function(data){var jsondata='';if(data.jsonconf!=''){jsondata=JSON.stringify(data.jsonconf,null,"\t");}
var $dialog=new $.Template('<form><p>Configuration personalisée du contenu pour ops. (format json)</p><br><textarea rows="10" style="width:100%" class="jsoncontentconf" name="jsoncontentconf" class="inputSend" maxlength="1000" warnlength="950">${test}</textarea></form>',true).getNode({test:jsondata}).dialog({modale:true,width:400,title:"Configuration OPS",buttons:[{text:"Annuler",click:function(){$(this).dialog("close");}},{text:"Sauvegarder",click:function(){$(this).dialog("close");var valueJson=$dialog.find('.jsoncontentconf').val();$.ajax({url:'/api/contentconf/'+contentId,type:'post',dataType:'json',data:({jsonconf:valueJson}),success:function(data){$dialog.dialog("destroy");var $dialogConfirm=new $.Template('<div>${msg}</div>',true).getNode({msg:data.msg}).dialog({modal:true,buttons:[{text:"Ok",click:function(){$(this).dialog("close");}}]});}});}}]});}});});};$.fn.editJsonContentConf.defaultOptions={duration:3e4,legendLength:2e3,durationLegendLength:3e4};$(document).start(function(){$('#editjson').editJsonContentConf();},{name:'editJsonContentConf'});}(jQuery));(function($)
{'use strict';$.fn.editJsonTagConf=function(options)
{options=$.extend({},$.fn.editJsonTagConf.defaultOptions,options);this.on('click',function(e){e.preventDefault();var tagId=$('meta[property="ccmbg:tag_id"]').attr('content');$.ajax({url:'/api/tagconf/'+tagId+'?type=news',type:'get',dataType:'json',success:function(data){var jsondata='';if(data.jsonconf!=''){jsondata=JSON.stringify(data.jsonconf,null,"\t");}
var $dialog=new $.Template('<form><p>Configuration personalisée du tag. (format json)</p><br><textarea rows="10" style="width:100%" class="jsontagconf" name="jsontagconf" class="inputSend" maxlength="1000" warnlength="950">${test}</textarea></form>',true).getNode({test:jsondata}).dialog({modale:true,width:400,title:"Configuration Avancée",buttons:[{text:"Annuler",click:function(){$(this).dialog("close");}},{text:"Sauvegarder",click:function(){$(this).dialog("close");var valueJson=$dialog.find('.jsontagconf').val();$.ajax({url:'/api/tagconf/'+tagId+'?type=news',type:'post',dataType:'json',data:({jsonconf:valueJson,type:'news'}),success:function(data){$dialog.dialog("destroy");var $dialogConfirm=new $.Template('<div>${msg}</div>',true).getNode({msg:data.msg}).dialog({modal:true,buttons:[{text:"Ok",click:function(){$(this).dialog("close");}}]});}});}}]});}});});};$.fn.editJsonTagConf.defaultOptions={duration:3e4,legendLength:2e3,durationLegendLength:3e4};$(document).start(function(){$('#editjsontag').editJsonTagConf();},{name:'editJsonTagConf'});}(jQuery));(function($){$.loading={defaultOptions:{padding:10,label:'LOADING',speedFadeIn:'slow',speedFadeOut:'slow',template:'<div id="loading"></div>',dataName:'loadingNode',timeout:100,css:{opacity:1,backgroundColor:'none',backgroundPosition:'50% 50%',backgroundRepeat:'no-repeat',zindex:1000}}};$.fn.loading=function(action,config,dimension,handler){action=action||'on';config=config||{};dimension=dimension||null;handler=handler||function(){};config=$.extend(true,{},$.loading.defaultOptions,config);var $lastNode=this;this.each(function(){var $this=$(this),position,isInit=typeof $this.data(config.dataName)!='undefined',data=(isInit?$this.data(config.dataName):{$loading:$(config.template).appendTo($this),counter:[]});switch(action.toLowerCase()){case'on':position=$this.position();data.$spin=data.$loading.css($.extend({height:$this.height()+config.padding,width:$this.width()+config.padding,position:'absolute',top:position.top-(config.padding/2),left:position.left-(config.padding/2)},config.css)).fadeIn(config.speedFadeIn).spin();data.counter++;$lastNode=data.$loading;break;case'update':if(dimension!==null)
{var paramAnim={};if(typeof dimension.diffWidth!='undefined'){paramAnim.width=(dimension.diffWidth>0?"+="+(dimension.diffWidth+config.padding)+"px":"-="+-(dimension.diffWidth+config.padding)+"px");}
if(typeof dimension.diffHeight!='undefined'){paramAnim.height=(dimension.diffHeight>0?"+="+(dimension.diffHeight+config.padding)+"px":"-="+-(dimension.diffHeight+config.padding)+"px");}
$lastNode=data.$loading.animate(paramAnim,{complete:handler});}
break;case'off':data.counter--;data.counter<0&&console.warn('haven\'t you missed something ? (off before on)');setTimeout(function(){data.counter===0&&data.$loading.fadeOut(config.speedFadeOut).spin();},config.timeout);break;}
$this.data(config.dataName,data);});return $lastNode;};})(jQuery);(function($)
{typeof $.jet=='undefined'&&($.jet={services:{}});var $nodeCancel={};$.jet.facebook={utils:{reload:{mobile:function(){window.location=window.location.href+(window.location.href.indexOf('?')==-1?'?1':'&1');},desktop:function(){location.reload(true);}}},init:function()
{$.jet.facebook.microTemplateInit();var optionsInit={appId:$.jet.facebook.options.appId,status:true,cookie:true,xfbml:true,oauth:true};if(typeof $.jet.facebook.options.version!=='undefined'||$.jet.facebook.options.version!==null){optionsInit.version=$.jet.facebook.options.version;}
FB.init(optionsInit);$.jet.facebook.verifHashTag();FB.Event.subscribe('comment.create',$.jet.facebook.options.commentCreateListener);FB.Event.subscribe('comment.remove',$.jet.facebook.options.commentRemoveListener);$.jet.facebook.options.GATrack=$.jet.facebook.options.GATrack&&(typeof $.jet.facebook.options.GAName!='undefined')&&(typeof $.jet.facebook.options.GANameError!='undefined')&&(typeof $.jet.facebook.options.GANameTmp!='undefined');$('body').delegate($.jet.facebook.options.separateSelector,'click',function(e)
{$.jet.facebook.separateAccount.call(this,{defineRights:true,hideShowDiv:true});}).delegate($.jet.facebook.options.associateSelector,'click',function(e)
{$.jet.facebook.associateAccount.call(this,{defineRights:true,hideShowDiv:true});}).delegate($.jet.facebook.options.createSelector,'click',$.jet.facebook.createAccount).delegate($.jet.facebook.options.cancelActionSelector,'click',$.jet.facebook.cancelOGAction);$(document).delegate($.jet.facebook.options.updateOGRights,'click',$.jet.facebook.updateOGRights).bind('FBOpenGraphSend',function(e,actions,object,id,options)
{$.jet.facebook.actionAfterOpenGraph(e,actions,object,id,options);}).trigger('jet.services.facebook.init');$.jet.facebook.delayUnBuffer();FB.Event.subscribe('auth.authResponseChange',function(response){if(response.status=='connected'&&$.jet.facebook.options.subServices)
{var i;for(i in $.jet.facebook.subServices)
{if($.jet.facebook.subServices.hasOwnProperty(i))
{$.jet.facebook.subServices[i].init.call($.jet.facebook);}}}});},options:{separateSelector:'a.separateAccount',associateSelector:'.associateAccount',createSelector:'a.createAccount',cancelActionSelector:'a.cancelFBAction',updateOGRights:'input[type=checkbox].oGRights',scopeList:'email, user_birthday, user_hometown, publish_actions, user_likes',GAName:$data.common.api.facebook.ga_name,GANameError:$data.common.api.facebook.ga_name_error,GANameTmp:$data.common.api.facebook.ga_name_tmp,GATrack:typeof _gaq!='undefined',apiController:'/apifacebook',notifications:$data.common.api.facebook.notifications,uidLinked:$data.common.api.facebook.uid,appId:$data.common.api.facebook.app_id,appName:$data.common.api.facebook.application,userConnected:$data.common.connected,urlPreference:'/p/edit/?type=privacy',statusCodePage:$data.common.status_code,reloadFunction:function(){},commentCreateListener:function(){},commentRemoveListener:function(){},version:typeof $data.common.api.facebook.version!='undefined'?$data.common.api.facebook.version:null},updateOGRights:function()
{var $this=$(this),idAction=$this.attr('data-id'),posAction=$this.attr('data-pos'),value=$this.prop('checked');if(typeof idAction!='undefined')
{$.ajax({type:'post',dataType:'json',url:$.jet.facebook.options.apiController+'/_xhr_updateBinaryRights',data:({'xhr':'xhr','binary':idAction,'pos':posAction,'value':value}),success:function(response)
{$.note.info($.jet.facebook.getTemplate($.jet.facebook.langs[$.jet.facebook.lang].FACEBOOK_OG_RIGHTS_UPDATE),{delay:5000});},complete:function()
{$(document).trigger('ajaxFacebookStop');}});}},cancelOGAction:function()
{var idAction=$(this).attr('data-id');if(typeof idAction!='undefined')
{$.jet.facebook.deleteOpenGraph(idAction,{'callback':function()
{!$.isEmptyObject($nodeCancel)&&$nodeCancel.find('div.ui-pnotify-text').html($.jet.facebook.getTemplate($.jet.facebook.langs[$.jet.facebook.lang].FACEBOOK_ACTION_DONE_MANAGE_RULES,$.extend({},{urlPreference:$.jet.facebook.options.urlPreference})));}});}
else{!$.isEmptyObject($nodeCancel)&&$nodeCancel.remove();}},actionAfterOpenGraph:function(event,action,object,id,options)
{if(typeof options.binary!='undefined'&&($.jet.facebook.options.notifications==0||($.jet.facebook.options.notifications&options.binary)==0))
{$(document).trigger('ajaxFacebookStart',['actionAfterOpenGraph',action,object,id,options]);$.ajax($.extend({params:{idAction:id}},$.jet.facebook.actionAfterOpenGraph.ajaxOptions,{type:'post',dataType:'json',data:{xhr:'xhr',binary:options.binary},complete:function()
{$(document).trigger('ajaxFacebookStop');}}));}},openGraph:function(action,params,object,options)
{var OGAction=function(action,params,object,authToken,options)
{options=options||{};var $nodeOG=$.note.flash($.jet.facebook.langs[$data.common.lang.toUpperCase()].FACEBOOK_CONNECT);$(document).trigger('ajaxFacebookStart',['openGraph',action,params,object,authToken,options]);$.ajax($.extend({params:{action:action,object:object,options:options}},$.jet.facebook.openGraph.ajaxOptions,{type:'POST',url:'https://graph.facebook.com/me/'+(options.application?options.application:$data.common.api.facebook.application+':')+action,dataType:'json',data:$.extend(params,{access_token:authToken}),complete:function()
{$nodeOG.remove();typeof options.callback=='function'&&options.callback();$(document).trigger('ajaxFacebookStop');}}));};if($.jet.facebook.options.uidLinked!=0)
{FB.getLoginStatus(function(response)
{response.status=='connected'&&response.authResponse.userID==$.jet.facebook.options.uidLinked&&OGAction(action,params,object,response.authResponse.accessToken,options);});}},deleteOpenGraph:function(id,options)
{var OGAction=function(id,options)
{options=options||{};$(document).trigger('ajaxFacebookStart',['deleteOpenGraph',id,options]);FB.api(id,'delete',function(response)
{if(response&&!response.error&&typeof options.callback=='function')
{options.callback();}!$.isEmptyObject($nodeCancel)&&$nodeCancel.remove();$(document).trigger('ajaxFacebookStop');});};if($.jet.facebook.options.uidLinked!=0)
{FB.getLoginStatus(function(response)
{response.status=='connected'&&response.authResponse.userID==$.jet.facebook.options.uidLinked&&OGAction(id,options);});}},verifHashTag:function()
{if(window.location.hash&&window.location.hash.substring(1,13)=='access_token')
{$.jet.facebook.login();}},createAccount:function()
{$(document).trigger('ajaxFacebookStart',['createAccount']);$.ajax($.extend({},$.jet.facebook.createAccount.ajaxOptions,{type:'post',dataType:'json',success:function(response)
{$.jet.facebook.options.uidLinked=response.uid;var callback=function()
{$(document).trigger('ajaxStart');$.jet.facebook.options.reloadFunction();};if(typeof response.FBdata!=='undefined')
{$(document).trigger('FBaccountCreated',[response.FBdata,callback]);}else{callback();}},complete:function()
{$(document).trigger('ajaxFacebookStop');}}));},separateAccount:function(options)
{var $actionFacebook=$('.actionFacebook');$(document).trigger('ajaxFacebookStart',['separateAccount',options]);$.ajax({type:'post',dataType:'json',url:$.jet.facebook.options.apiController+'/_xhr_separateAccount',data:({xhr:'xhr'}),complete:function()
{$(document).trigger('ajaxFacebookStop');},success:function(response)
{$.jet.facebook.options.uidLinked=0;if(typeof options.hideShowDiv!='undefined')
{$actionFacebook.find('.FBAccountOn').hide();$actionFacebook.find('.FBAccountOff').show();}
if(typeof options.defineRights!='undefined')
{$actionFacebook.closest('fieldset').find('div.actionFBList').hide();}
$(document).trigger('ajaxFacebookStop');FB.logout(function()
{typeof options.callback=='function'&&options.callback()});}});},autoConnect:function()
{if($.jet.facebook.options.statusCodePage=='200'&&$.jet.facebook.options.userConnected==false)
{FB.getLoginStatus(function(response)
{if(response.status==='connected')
{$(document).trigger('ajaxFacebookStart',['autoConnect',response]);$.ajax({type:'post',dataType:'json',url:$.jet.facebook.options.apiController+'/_xhr_autoConnect',data:({token:response.authResponse.accessToken,uid:response.authResponse.userID,xhr:'xhr'}),success:function(response)
{if(typeof response.autoconnect!='undefined'&&response.autoconnect)
{$.note.flash($.jet.facebook.langs[$data.common.lang.toUpperCase()].FACEBOOK_AUTOCONNECT);$.jet.facebook.options.reloadFunction();}},complete:function()
{$(document).trigger('ajaxFacebookStop');}});}});}},associateAccount:function(options)
{var $actionFacebook=$('.actionFacebook'),actionJs=function(token,uid)
{$(document).trigger('ajaxFacebookStart',['associateAccount',token,uid]);$.ajax({type:'post',dataType:'json',url:$.jet.facebook.options.apiController+'/_xhr_associateAccount',data:({token:token,uid:uid,xhr:'xhr'}),complete:function()
{typeof options.callback=='function'&&options.callback();$(document).trigger('ajaxFacebookStop');},success:function(response)
{if(typeof response.error!=='undefined')
{$.note&&$.note.error(response.error);return;}
$.jet.facebook.options.uidLinked=uid;if(typeof options.hideShowDiv!='undefined')
{$actionFacebook.find('.FBAccountOn').show();$actionFacebook.find('.FBAccountOff').hide();}
if(typeof options.defineRights!='undefined')
{$actionFacebook.closest('fieldset').find('div.actionFBList').find("input[type='checkbox']").attr('checked',true).closest('div.actionFBList').show();}
typeof response.FBdata!=='undefined'&&$(document).trigger('FBaccountAssociated',[response.FBdata]);}});};FB.getLoginStatus(function(response)
{switch(response.status)
{case'unknown':FB.login(function(response){response.status=='connected'&&actionJs(response.authResponse.accessToken,response.authResponse.userID);},{scope:$.jet.facebook.options.scopeList});break;case'connected':actionJs(response.authResponse.accessToken,response.authResponse.userID);break;case'not_authorized':FB.login(function(response){response.status=='connected'&&actionJs(response.authResponse.accessToken,response.authResponse.userID);},{scope:$.jet.facebook.options.scopeList});break;}});},logout:function(url)
{var redirect=function(url)
{typeof url!=='undefined'&&window.location.replace(url);};if($.jet.facebook.options.userConnected!=true)
{redirect(url);}
FB.getLoginStatus(function(response)
{if(response.status==='connected')
{FB.logout(redirect(url));}
else
{redirect(url);}});},actionLogin:function(token,uid)
{var $nodeLogin=$.note.flash($.jet.facebook.langs[$data.common.lang.toUpperCase()].FACEBOOK_CONNECT);$(document).trigger('ajaxFacebookStart',['actionLogin',token,uid]);$.ajax({type:'post',dataType:'json',url:$.jet.facebook.options.apiController+'/_xhr_apiCheck',data:({token:token,uid:uid,xhr:'xhr'}),complete:function()
{$nodeLogin.remove();$(document).trigger('ajaxFacebookStop');},success:function(response)
{if(typeof response.error!=='undefined')
{$.jet.facebook.options.GATrack&&_gaq.push(['_trackEvent',$.jet.facebook.options.GANameError,'errors_facebook_actionLogin',response.error]);$.note&&$.note.error(response.error);return;}
typeof $.jet.facebook.actionLogin.extraTraitments!='undefined'&&$.jet.facebook.actionLogin.extraTraitments(response);$.jet.facebook.options.uidLinked=uid;var callback=function(){};if(typeof response.reload!=='undefined')
{callback=function()
{$.jet.facebook.options.GATrack&&_gaq.push(['_trackEvent',$.jet.facebook.options.GAName,'connect']);$.jet.facebook.options.reloadFunction();};}
if(typeof response.FBaccountCreated!=='undefined'&&response.FBaccountCreated&&typeof response.FBdata!=='undefined')
{$(document).trigger('FBaccountCreated',[response.FBdata,callback]);}else{callback();return;}}});},delay:function(){$.jet.facebook.delayBuffer.push(arguments);},delayBuffer:[],delayUnBuffer:function()
{var m=$.jet.facebook.delayBuffer.length,i=0,curBuf,n=0,j=0,FBContainer;if(typeof FB=='object')
{for(;i<m;++i)
{curBuf=$.jet.facebook.delayBuffer[i];FBContainer=FB;for(j=0,n=curBuf[0].length;j<n;++j)
{FBContainer=FBContainer[curBuf[0][j]];}
var o=curBuf.length,k=1,args=[];for(;k<o;++k){args.push(curBuf[k]);}
FBContainer.apply(FBContainer,args);}}
else{console.warn('FB is not ready to unbuffer delayed actions');}},login:function()
{FB.getLoginStatus(function(response)
{if(response.status=='connected'&&$.jet.facebook.options.uidLinked==response.authResponse.userID)
{return;}
switch(response.status)
{case'unknown':FB.login(function(response){response.status=='connected'&&$.jet.facebook.actionLogin(response.authResponse.accessToken,response.authResponse.userID);},{scope:$.jet.facebook.options.scopeList});break;case'connected':$.jet.facebook.actionLogin(response.authResponse.accessToken,response.authResponse.userID);break;case'not_authorized':FB.login(function(response){response.status=='connected'&&$.jet.facebook.actionLogin(response.authResponse.accessToken,response.authResponse.userID);},{scope:$.jet.facebook.options.scopeList});break;}});}};$.extend($.jet.facebook,$.microTemplate);$.jet.facebook.openGraph.ajaxOptions={success:function(response)
{if($.jet.facebook.options.GATrack)
{var GAObject=(typeof this.params.options.GAObject!='undefined')?this.params.options.GAObject:this.params.object,GAAction=(typeof this.params.options.GAAction!='undefined')?this.params.options.GAAction:this.params.action;_gaq.push(['_trackEvent',$.jet.facebook.options.GAName,GAObject,GAAction]);}
$(document).trigger('FBOpenGraphSend',[this.params.action,this.params.object,response.id,this.params.options]);}};$.jet.facebook.createAccount.ajaxOptions={url:$.jet.facebook.options.apiController+'/_xhr_createAccount',data:{xhr:'xhr',type:1}};$.jet.facebook.actionAfterOpenGraph.ajaxOptions={url:$.jet.facebook.options.apiController+'/_xhr_updateBinaryNotifications',success:function(response)
{$.jet.facebook.options.notifications=response;$nodeCancel=$.note.info($.jet.facebook.getTemplate($.jet.facebook.langs[$.jet.facebook.lang].FACEBOOK_ACTION_DONE_CANCEL,$.extend({},{idAction:this.params.idAction})),{delay:500000});}};$.jet.facebook.subServices={};$.jet.services.facebook={start:false,options:{subServices:false,reloadFunction:$.jet.facebook.utils.reload.desktop},init:function()
{$.extend($.jet.facebook.options,$.evalOptions(this.options));window.fbAsyncInit=$.jet.facebook.init;}};})(jQuery);(function($){$.extend(true,$.jet.facebook.langs,{'FR':{'PROPOSITIONS_ACCOUNT_FB_TITLE':'Nous avons trouvé les comptes suivants','ERROR_FACEBOOK_OPENGRAPH':'Une erreur est survenue pendant la soumission','FACEBOOK_CONNECT':'Connexion Facebook en cours','FACEBOOK_AUTOCONNECT':'Un compte Facebook a été détecté. Nous allons vous connecter.','FACEBOOK_ACTION_DONE_CANCEL':'Cette action a été synchronisée sur votre mur facebook. (<a href="javascript:void(0);" class="cancelFBAction" data-id="${idAction}">annuler</a>)','FACEBOOK_ACTION_DONE_MANAGE_RULES':'Action annulée. Réglez vos paramètres de synchronisation sur <a href="${urlPreference}">la page gestion de compte</a>.','FACEBOOK_OG_RIGHTS_UPDATE':'Les modifications ont bien été enregistrées<div>&nbsp;</div>'}});})(jQuery);(function($)
{"use strict";typeof $.ccmcms=='undefined'&&($.ccmcms={});$.ccmcms.facebook={actionAjaxInProgress:false,init:function(params)
{if(params&&(params.disableAutoconnect===true)){return;}
$('body').delegate('a.fbLogin','click',$.jet.facebook.login).delegate('a.fbAssociate','click',function(e)
{$.jet.facebook.associateAccount.call(this,{hideShowDiv:true,callback:window.location.reload});}).delegate('a.fbDissociate','click',function(e)
{$.jet.facebook.separateAccount.call(this,{hideShowDiv:true,callback:window.location.reload});});$(document).bind('ajaxFacebookStart',function(e){$.ccmcms.facebook.actionAjaxInProgress=true;$('.fbLogin').parent().spin();}).bind('ajaxFacebookStop',function(e){$.ccmcms.facebook.actionAjaxInProgress=false;$('.fbLogin').parent().spin(0);});$.jet.facebook.autoConnect();}};$.jet.facebook.subServices.loadFriends={init:function()
{var $friendsFeeds=$('#friendsFeeds');$friendsFeeds.loading('On');$.ajax({type:'POST',url:'/apifacebook/_xhr_getIdFriendsList/',dataType:'json',success:function(response)
{if(typeof response.result!='undefined'&&response.result==true)
{if(typeof response.html!='undefined')
{$friendsFeeds.loading('Off');$friendsFeeds.html(response.html);$.ccmcms.feeds.initSlider();}}
else{$('#topColRight').remove();}}});}};})(jQuery);(function($)
{"use strict";typeof $.ccmcms=='undefined'&&($.ccmcms={});$.ccmcms.feeds={slider:{},init:function()
{$('body').delegate('input#remindAddActivity','click',$.ccmcms.feeds.remindAddActivity).delegate('a.deleteFeed','click',$.ccmcms.feeds.deleteFeed).delegate('a.cancelFeed','click',$.ccmcms.feeds.cancel).delegate('.activityFeed','click',$.ccmcms.feeds.modifActivityRight).delegate('.activityFeedReminder','click',$.ccmcms.feeds.modifActivityReminderRight);if(typeof $data.ccmcms.services.feeds.action!='undefined')
{$(document).bind('jet.services.facebook.init',function()
{$.ccmcms.feeds[$data.ccmcms.services.feeds.action]($data.ccmcms.services.feeds.id);});}
$.ccmcms.feeds.microTemplateInit();$.ccmcms.feeds.initSlider();},remindAddActivity:function()
{$.ajax({type:'POST',url:'/account/_xhr_modifyDisplayAddActivity/',dataType:'json',data:{'disabled':$(this).is(':checked')?0:1}});},modifActivityReminderRight:function()
{var $this=$(this),$activeChoose=$this.find('span.fb_feeds:visible'),$inactiveChoose=$this.find('span.fb_feeds:hidden');$.ajax({type:'POST',url:'/account/_xhr_modifyDisplayAddActivity/',dataType:'json',data:{'disabled':($activeChoose.attr('id')=='disabledFeedsOn')?0:1},success:function(response)
{if(response.result==true)
{$activeChoose.hide();$inactiveChoose.show();}}});},modifActivityRight:function()
{var $this=$(this),$activeChoose=$this.find('span.fb_feeds:visible'),$inactiveChoose=$this.find('span.fb_feeds:hidden'),$allActiveChoose=$('.activityFeed span.fb_feeds:visible'),$allInactiveChoose=$('.activityFeed span.fb_feeds:hidden');$.ajax({type:'POST',url:'/account/_xhr_modifyActivity/',dataType:'json',data:{'disabled':($activeChoose.attr('id')=='disabledFeedsOn')?1:0},success:function(response)
{if(response.result==true)
{$allActiveChoose.hide();$allInactiveChoose.show();}}});},initSlider:function()
{var $slider=$('#jFacebookFriendsFeeds');if($slider.find('li').length>0)
{$.ccmcms.feeds.slider=$slider.sudoSlider({numeric:false,pause:'5000',auto:$data.ccmcms.services.feeds.sliderAuto,continuous:true,autoheight:false,ease:'linear',prevHtml:'<a href="#" class="prevBtn"></a>',nextHtml:'<a href="#" class="nextBtn"></a>'});}},readArticle:function(articleId)
{var callback=function(ogId)
{$.ajax({type:'POST',url:'/feeds/_xhr_readArticle/',dataType:'json',data:(typeof ogId=='undefined')?{articleId:articleId}:{articleId:articleId,ogId:ogId},success:function(response)
{if(response.result==true)
{_gaq.push(['_trackEvent','journaldunet','article','read']);if(response.enableFeeds==true&&response.enableWindow==true)
{$.tour.start({template:'<div class="hd"><a class="cancel tipsy-cancel" href="javascript:void(0);">X</a>'
+'<div class="title">'+$.ccmcms.feeds.langs[$data.common.lang].FEEDS_READARTICLE_TITLE+'</div>'
+'<div>'+((typeof ogId=='undefined')?$.ccmcms.feeds.langs[$data.common.lang].FEEDS_READARTICLE_SUBTITLE_WITHOUT_FB:$.ccmcms.feeds.langs[$data.common.lang].FEEDS_READARTICLE_SUBTITLE_WITH_FB)+'</div>'
+'${content}'
+'</div>'
+'<div class="ct">'
+'<a class="tipsy-btn ${classNext}" href="javascript:void(0);" >${nextLabel}</a>'
+'<a class="cancelFeed" data-id="'+response.idFeed+'">'+$.ccmcms.feeds.langs[$data.common.lang].FEEDS_READARTICLE_CANCELFEED+'</a>'
+'<span class="cancelledFeed" style="display:none;">'+$.ccmcms.feeds.langs[$data.common.lang].FEEDS_READARTICLE_FEEDCANCELLED+'</span>'
+'</div>'
+'<div class="bt">'
+'<input type="checkbox" value="1" id="remindAddActivity" checked> '
+$.ccmcms.feeds.langs[$data.common.lang].FEEDS_READARTICLE_REMINDME
+'</div>',items:[{selector:'.jHeaderConnected',content:'&nbsp;',nextLabel:'OK',scroll:false}]});}}}});};FB.getLoginStatus(function(response)
{if(window.document.URL.match(/facebookTest/i)!==null&&response.status=='connected')
{setTimeout(function()
{$.jet.facebook.openGraph('reads',{article:$data.ccmcms.services.feeds.url},'article',{application:'news.'})},10000);$(document).bind('FBOpenGraphSend',function(e,action,object,id)
{callback(id);});}
else{callback();}});},cancel:function()
{var
$this=$(this),feedId=$this.attr('data-id');typeof feedId!==undefined&&$.ajax({type:'POST',url:'/feeds/_xhr_deleteFeed/',dataType:'json',data:{feedId:feedId},success:function(response)
{if(response.result==true)
{if(typeof response.ogid!='undefined')
{$.jet.facebook.deleteOpenGraph(response.ogid);}
$this.hide();$this.parent('div').find('span.cancelledFeed').show();}}});},deleteFeed:function()
{var $container=$(this).parent('article'),feedId=$container.attr('data-id');typeof feedId!==undefined&&$.ajax({type:'POST',url:'/feeds/_xhr_deleteFeed/',dataType:'json',data:{feedId:feedId},success:function(response)
{if(response.result==true)
{if(typeof response.ogid!='undefined')
{$.jet.facebook.deleteOpenGraph(response.ogid);}
$container.hide();}}});}}
$.extend($.ccmcms.feeds,$.microTemplate);if($data.ccmcms.services.feeds.start===true)
{$(document).start($.ccmcms.feeds.init);}})(jQuery);(function($)
{$.extend(true,$.ccmcms.feeds.langs,{'FR':{'FEEDS_READARTICLE_TITLE':'Votre activité sur le site','FEEDS_READARTICLE_SUBTITLE_WITH_FB':'Vos amis Facebook peuvent maintenant voir que vous avez lu cet article.','FEEDS_READARTICLE_SUBTITLE_WITHOUT_FB':'Vos amis peuvent maintenant voir que vous avez lu cet article.','FEEDS_READARTICLE_CANCELFEED':'Supprimer cette activité','FEEDS_READARTICLE_FEEDCANCELLED':'Activité supprimée','FEEDS_READARTICLE_REMINDME':'Me rappeler pour chaque activité ajoutée'}});})(jQuery);(function($)
{$.extend(true,$.ccmcms.feeds.langs,{'FR':{'FEEDS_READARTICLE_TITLE':'Votre activité sur JDF','FEEDS_READARTICLE_SUBTITLE_WITH_FB':'Vos amis Facebook et JDF peuvent maintenant voir que vous avez lu cet article.','FEEDS_READARTICLE_SUBTITLE_WITHOUT_FB':'Vos amis JDF peuvent maintenant voir que vous avez lu cet article.'}});})(jQuery);(function($)
{"use strict";typeof $.ccmcms=='undefined'&&($.ccmcms={});var _isInternal=typeof $data!='undefined'&&typeof $data.ccmcms!='undefined';var $jNavSubCollapse=$(".jNavSubCollapse");if(!$jNavSubCollapse.hasClass('jNavSubInitialized'))
{$jNavSubCollapse.on('click',function(event){var $target=$(event.target);var closed=$target.hasClass("app_nav__sub--collapse--plus");$jNavSubCollapse.addClass("app_nav__sub--collapse--plus");if(closed){$target.removeClass("app_nav__sub--collapse--plus");}
event.stopPropagation();}).addClass('jNavSubInitialized');;$(":not(.nav_selected)>.jNavSubCollapse").addClass("app_nav__sub--collapse--plus");}
$.ccmcms.header={init:function()
{$('.dropdownbtnheader').dropDownBtn({anim_duration:$.jet.defaultStartOptions.animDuration,ddselector:$('.dropdownlistheader')});_isInternal&&(function($){var loaded=[];$('nav[role=navigation] li.jHeaderContent').bind('mouseover',function(e){var self=$(this),target=self.find('.last_posts'),id=target.data('channelid'),data={},conf=$data.ccmcms.services.header.nav.sub;if(target.length==0)return;if(id==null)return;if(loaded[id]!=null)return;loaded[id]=true;target.spin({length:8,width:2,radius:6}).css({margin:'50px'});(conf.limit!=null)&&(data.l=conf.limit);(conf.viewmode!=null)&&(data.v=conf.viewmode);$.ajax({url:'https://'+conf.domain+'/api/tag/'+id+'/getLastContents',data:data,dataType:'jsonp',jsonpCallback:'_'+id,cache:true,storageName:'headerTabs',success:function(data){if(!data.list){target.html('');return;}
data.conf.label&&target.html($('<h2 class="last_posts__title">').html(data.conf.label));data.list&&target.append($('<ul class="grid_line gutter">').html(function()
{for(var i=0,m=data.list.length;i<m;++i)
{$(this).append($('<li class="grid_left w50">').html('<a class="last_posts_content__img" href="'+data.list[i].url+'">'
+(data.list[i].img!=null?'<span style="background-image:url('+data.list[i].img+')"></span>':'')
+'</a>').append($('<h3 class="last_posts_content__title">').html('<a href="'+data.list[i].url+'">'
+data.list[i].formatedLabel
+'</a>')).append($('<ul class="tags">').html(function()
{for(var j=0,n=Math.min(data.list[i].tags.length,5);j<n;++j)
{$(this).append($(' <li> ').html(' <a href="'
+data.list[i].tags[j].url
+'">'
+data.list[i].tags[j].formatedLabel+'</a> '));}})));}}));}});});})(jQuery);var timeout;$('nav[role=navigation] ul:first').bind('mouseenter',function(){var $this=$(this);timeout=setTimeout(function(){$this.addClass('hover');},500);}).bind('mouseleave',function(){clearTimeout(timeout);$(this).removeClass('hover');});}}
if(_isInternal&&_$('$data.ccmcms.services.header')._.start)
{$(document).start($.ccmcms.header.init);}})(jQuery);(function($)
{if($data.ccmcms.services.authorlayer.start===true)
{var timeoutId,mouseInside=false;$('#jNavNews a').click(function(){typeof _gaq!='undefined'&&_gaq.push(['_trackEvent','ccmcms/news','colLeftLink','click']);});$('#jSimili a').click(function(){if(typeof _gaq!='undefined'){var version=$("#jSimili").attr('data-version');var nameBloc='similiLink';if(version!=undefined){nameBloc=nameBloc+'v'+version}
var thislink=$(this).attr("href");var dataIcon=$(this).attr("data-icon");var eventValue="click";if(dataIcon=="!"){eventValue+='_afs';}
_gaq.push(['_set','hitCallback',function(){window.location=thislink;}]);_gaq.push(['_trackEvent','ccmcms/contents',nameBloc,eventValue]);return false;}});$(".app_author_box .content").on("mouseenter",'.app_author_box__img',function(){var
$this=$(this).closest('.vcard'),$boxAuthor=$this.parent(),$infosBloc=false,delay=500;mouseInside=true;if($boxAuthor.find('.details').length==0)
{var start=new Date().getTime();$.ajax({type:'post',url:'/content/_xhr_getAuthorInfosBloc',dataType:'json',data:({userId:$boxAuthor.attr("data-user-id")}),success:function(data)
{$infosBloc=$(data.html).appendTo($this);var position=$boxAuthor.position(),top=position.top+$boxAuthor.outerHeight(),width=$(".app_author_box .grid_line").width,time=new Date().getTime()-start;$infosBloc.css({'width':width+'px'});if(time>delay)
{mouseInside&&$boxAuthor.addClass("hover");}
else
{timeoutId=setTimeout(function(){mouseInside&&$boxAuthor.addClass("hover");},delay-time);}}});}
else
{timeoutId=setTimeout(function()
{$boxAuthor.addClass("hover");},delay);}}).on("mouseleave",'img,[rel=author]',function(){mouseInside=false;clearTimeout(timeoutId);}).on("mouseleave",function(){$(this).closest('.vcard').parent().removeClass("hover");});}})(jQuery);(function($){$('.jDisplayMode').change(function(){$.ajax({url:document.location.href,dataType:'json',data:{place:$(this).attr('data-place'),displayMode:$(this).val()},success:function(){location.reload();}});});})(jQuery);(function($)
{if(_$('$data.ccmcms.services.registrationwall')._.start){$(document).bind('registrationwall.activated',function(e){$('.jAutoPlayText').trigger('pause');});$(document).start(function(){$.registrationWall.init($data.ccmcms.services.registrationwall.options);});}})(jQuery);(function($)
{$.mosaiccover={init:function(){$('.jMosaicCoverOpen').click($.mosaiccover.open);},open:function(){typeof _gaq!='undefined'&&_gaq.push(['_trackEvent','ccmcms','mosaiccover','show']);var $content=$('<div>').attr({id:'jMosaicCoverContent'}).addClass('clearfix');$('#jScrollContent .jItem').each(function(){var $this=$(this),$itemImage=$this.find('.jImagePile'),imageSrc=$itemImage.data('mosaiccover');$content.append($('<figure>').addClass('app_entry_coverflow__item').append($('<a>').attr({href:$this.find('a').attr('href')}).append($('<span>').addClass('app_entry_coverflow__img').append($('<img>').attr('data-src',imageSrc))).append($('<figcaption>').html($this.find('figcaption').html()))));imagePile.add(imageSrc,{},function(event,cached){$('#jMosaicCover img[data-src="'+imageSrc+'"]').attr({src:this.src}).animate({opacity:1},1000);});});var maxScale=1000,lastMouseDownTarget={},$overlay=$('<div>').addClass('app_entry_coverflow__overlay'),$mosaicCover=$('<div>').bind('close',function(){$(this).remove();}).attr({id:'jMosaicCover'}).addClass('app_entry_coverflow').append($overlay,$('<div>').addClass('app_entry_coverflow__wrapper').append($('<header>').attr({id:'jMosaicCoverHead'}).append($('<h1>').addClass('app_entry_coverflow__title').html($('article h1 span').html()||$('article h1').html()),$('<a>').addClass('jMosaicCoverClose ico--bg1').attr('data-icon','\"').attr('aria-hidden','true').attr('href','javascript:void()').click(function(){$('#jMosaicCover').trigger('close');})),$('<div>').attr({id:'jMosaicCoverPane'}).addClass('app_entry_coverflow__content').append($content),$('<div>').addClass('jMosaicCoverSlider').addClass('app_slider_ui').addClass('app_slider_ui--vertical'))).bind('mouseup',function(e){$overlay[0]==lastMouseDownTarget&&$(this).trigger('close');}).bind('mousedown',function(e){lastMouseDownTarget=e.target;}).appendTo('body'),$scrollContent=$('#jMosaicCoverContent'),$scrollPane=$('#jMosaicCoverPane'),contentHeight=$scrollContent.height(),paneHeight=$scrollPane.height(),onMosaicSlideFct=function(e,ui)
{if(contentHeight>paneHeight)
{$scrollContent.css('margin-top',Math.round((maxScale-ui.value)/maxScale*($scrollPane.height()-contentHeight))+'px');}else{$scrollContent.css('margin-top',0);}},$slider=$('.jMosaicCoverSlider').slider({slide:onMosaicSlideFct,orientation:'vertical',max:maxScale,value:maxScale});if(contentHeight-20<=paneHeight)
{$('.jMosaicCoverSlider').remove();}
imagePile.depile();$mosaicCover.mousewheel(function(event,delta){var newSliderValue=Math.min(maxScale,Math.max(0,$slider.slider('value')+(delta*maxScale/10)));$slider.slider('value',newSliderValue);onMosaicSlideFct(event,{value:newSliderValue});event.preventDefault();event.stopPropagation();});$(document).keypress(function(event){(event.charCode===0)&&($('#jMosaicCover').trigger('close'));});}}
if($data.ccmcms.services.mosaiccover.start){$(document).start(function(){$.mosaiccover.init();});}}(jQuery));(function($)
{'use strict';$.thumbslider={init:function(){if(typeof $data.ccmcms.services.thumbslider.tracking!='undefined'&&$data.ccmcms.services.thumbslider.tracking)
{if(typeof($data.ccmcms.abtest_campaign)=='undefined')
{var abtest_campaign='/normal';}else{var abtest_campaign='/AB:'+$data.ccmcms.abtest_campaign;}
$('.jTopPreviousButton').click(function(){typeof _gaq!='undefined'&&_gaq.push(['_trackEvent','ccmcms','topPreviousButton','click'+abtest_campaign]);});$('.jTopNextButton').click(function(){typeof _gaq!='undefined'&&_gaq.push(['_trackEvent','ccmcms','topNextButton','click'+abtest_campaign]);});$('.jMiddlePreviousZone').click(function(){typeof _gaq!='undefined'&&_gaq.push(['_trackEvent','ccmcms','middlePreviousZone','click'+abtest_campaign]);});$('.jMiddleNextZone').click(function(){typeof _gaq!='undefined'&&_gaq.push(['_trackEvent','ccmcms','middleNextZone','click'+abtest_campaign]);});$('.jMiddlePreviousButton').click(function(){typeof _gaq!='undefined'&&_gaq.push(['_trackEvent','ccmcms','middlePreviousButton','click'+abtest_campaign]);});$('.jMiddleNextButton').click(function(){typeof _gaq!='undefined'&&_gaq.push(['_trackEvent','ccmcms','middleNextButton','click'+abtest_campaign]);});$('.jPaginationPoint').click(function(){typeof _gaq!='undefined'&&_gaq.push(['_trackEvent','ccmcms','paginationPoint','click'+abtest_campaign]);});$('.jPaginationNumber').click(function(){typeof _gaq!='undefined'&&_gaq.push(['_trackEvent','ccmcms','paginationNumber','click'+abtest_campaign]);});$('.jPaginationNext').click(function(){typeof _gaq!='undefined'&&_gaq.push(['_trackEvent','ccmcms','paginationNext','click'+abtest_campaign]);});$('.jPaginationPrevious').click(function(){typeof _gaq!='undefined'&&_gaq.push(['_trackEvent','ccmcms','paginationPrevious','click'+abtest_campaign]);});$('.jBottomThumb').click(function(){typeof _gaq!='undefined'&&_gaq.push(['_trackEvent','ccmcms','bottomThumb','click'+abtest_campaign]);});}
var $scrollContent=$('#jScrollContent'),$itemList=$scrollContent.find('.jItem'),$currentItem=$itemList.filter('.current'),$scrollPane=$('#jScrollPane'),maxScale=1000,alreadyScroll=false,$currentItemIndex=$itemList.index($currentItem),initialSliderPosition=Math.round(Math.max(0,Math.min(1,($currentItemIndex-1)/($itemList.length-5)))*maxScale),$itemFirst=$('.jItemWrapper:first'),$itemLast=$('.jItemWrapper:last'),itemBorder=Math.max($itemFirst.outerWidth()-$itemFirst.innerWidth(),$itemLast.outerWidth()-$itemLast.innerWidth()),contentWidth=($itemFirst.innerWidth()+itemBorder)*$itemList.length-itemBorder,paneWidth=$scrollPane.width(),onSlideFct=function(e,ui)
{if(contentWidth>paneWidth)
{$scrollContent.css('margin-left',Math.round(ui.value/maxScale*(paneWidth-contentWidth))+'px');}else{$scrollContent.css('margin-left',0);}},$scrollBar=$('#jScrollBar').slider({slide:onSlideFct,start:function(event,ui){!alreadyScroll&&typeof _gaq!='undefined'&&_gaq.push(['_trackEvent','ccmcms','thumbslider','startslide']);alreadyScroll=true;},value:initialSliderPosition,max:maxScale});if(contentWidth<=paneWidth)
{$('#jScrollBarWrapper').css({"visibility":"hidden"});}
$scrollContent.width(contentWidth);onSlideFct(null,{value:initialSliderPosition});$itemList.each(function()
{var priority=0,$this=$(this),$itemIndex=$itemList.index($this),$itemImage=$this.find('.jImagePile');if($this.hasClass('current')){priority=1;}else{priority=Math.abs($itemIndex-$currentItemIndex)+1;}
imagePile.add($itemImage.data('background'),{node:$itemImage},function(event,cached){this.data.node.css('background-image','url('+this.src+')').animate({opacity:1},1000);},priority);});$scrollPane.css('height','auto');imagePile.depile();}};if($data.ccmcms.services.thumbslider.start){$(document).start(function(){$.thumbslider.init();});}}(jQuery));(function($)
{'use strict';$.diaporama={init:function(){var $legend=$('.jDiaporamaLegend'),$endText=$legend.find('.jDiaporamaEndText'),$readMore=$legend.find('.jDiaporamaReadMore'),$readLess=$legend.find('.jDiaporamaReadLess');if($endText&&$readMore&&$readLess)
{$endText.css('display','inline');$endText.hide();var toogleReadMore=function(){$endText.toggle();$readMore.toggle();$readLess.toggle();}
$readMore.click(toogleReadMore);$readLess.click(toogleReadMore);}
$('.jZoomDiapo').bind('click',function(){if(typeof _gaq!='undefined'){_gaq.push(['_trackEvent','ccmcms','zoomImageDiapo','click']);}});$("body").keydown(function(event){switch(event.which){case 39:if($('.jTopNextButton').length>0){var urlNext=$('.jTopNextButton').attr('href');if(typeof _gaq!='undefined'){_gaq.push(['_set','hitCallback',function(){window.location=urlNext;}]);_gaq.push(['_trackEvent','ccmcms','keyboard','hitNext']);}}
break
case 37:if($('.jTopPreviousButton').length>0){var urlPrevious=$('.jTopPreviousButton').attr('href');if(typeof _gaq!='undefined'){_gaq.push(['_set','hitCallback',function(){window.location=urlPrevious;}]);_gaq.push(['_trackEvent','ccmcms','keyboard','hitPrevious']);}}
break;}});}};if($data.ccmcms.services.diaporama.start){$(document).start(function(){$.diaporama.init();});}}(jQuery));(function($)
{'use strict';$.playlist={options:{host:null,adDomain:null,firstVideo:false},playVideo:function($previewItem){var currentId=$previewItem.attr('data-id'),currentKey=$previewItem.attr('data-key'),$player=$('.jccmPlayer');$player.data('player').destroy(function(){$('.jPlaylistPreviewItem').each(function($i,item){var $item=$(item);if($item.hasClass('current')){$item.removeClass('current');}});$player.attr({'data-id':currentId,'data-key':currentKey,'data-site':$.playlist.options.adDomain+'_wd','data-ap':1,'data-ad':1}).css({width:$player.css('width'),height:$player.css('height'),position:$player.css('position')}).videoOnScroll();$previewItem.addClass('current');$('.jPlaylistPreviewContainer').animate({scrollTop:$previewItem.position().top},600);});},init:function(){$('.jPlaylistPreviewItem').on('click',function(){$.playlist.playVideo($(this));});$(document).bind('eventFromVideo',function(e,data){switch(data.type){case'played':var $nextVideo=$('.jPlaylistPreviewItem.current').next('.jPlaylistPreviewItem');if($nextVideo.length==0){$nextVideo=$('.jPlaylistPreviewItem:first');}
$.playlist.playVideo($nextVideo);break;default:}});}};if($data.ccmcms.services.playlist.start){$(document).start(function(){$.extend(true,$.playlist.options,$data.ccmcms.services.playlist.options);$.playlist.init();});}}(jQuery));if(_$('$data.ccmcms.services.autoplay')._.start)
{$(document).start(function(){if(window.screen.width>480){var $autoButton=$('#jAutoPlay').autoPlay({duration:15e3,legendLength:220,durationLegendLength:3e4});$(document).on('click','.fancy, .jMosaicCoverOpen',function()
{$autoButton.trigger('pause');}).on('click','.jHideButtonVideoDiaporama',function()
{$autoButton.trigger('resume');}).delegate('#jMosaicCover','close',function(){$autoButton.trigger('resume');}).on("videoDiaporama",function(event,action){switch(action){case'open':$autoButton.trigger('pause');break;case'close':$autoButton.trigger('resume');break;}});$('.fancy').bind('fancybox-cleanup',function()
{$autoButton.trigger('resume');});}});}
(function($)
{"use strict";$.election={init:function()
{$('.elections_table').foldToggle();}};if($data.ccmcms.services.election.start){$(document).start($.election.init());}})(jQuery);(function($){var types=['DOMMouseScroll','mousewheel'];if($.event.fixHooks){for(var i=types.length;i;){$.event.fixHooks[types[--i]]=$.event.mouseHooks;}}
$.event.special.mousewheel={setup:function(){if(this.addEventListener){for(var i=types.length;i;){this.addEventListener(types[--i],handler,false);}}else{this.onmousewheel=handler;}},teardown:function(){if(this.removeEventListener){for(var i=types.length;i;){this.removeEventListener(types[--i],handler,false);}}else{this.onmousewheel=null;}}};$.fn.extend({mousewheel:function(fn){return fn?this.bind("mousewheel",fn):this.trigger("mousewheel");},unmousewheel:function(fn){return this.unbind("mousewheel",fn);}});function handler(event){var orgEvent=event||window.event,args=[].slice.call(arguments,1),delta=0,returnValue=true,deltaX=0,deltaY=0;event=$.event.fix(orgEvent);event.type="mousewheel";if(orgEvent.wheelDelta){delta=orgEvent.wheelDelta/120;}
if(orgEvent.detail){delta=-orgEvent.detail/3;}
deltaY=delta;if(orgEvent.axis!==undefined&&orgEvent.axis===orgEvent.HORIZONTAL_AXIS){deltaY=0;deltaX=-1*delta;}
if(orgEvent.wheelDeltaY!==undefined){deltaY=orgEvent.wheelDeltaY/120;}
if(orgEvent.wheelDeltaX!==undefined){deltaX=-1*orgEvent.wheelDeltaX/120;}
args.unshift(event,delta,deltaX,deltaY);return($.event.dispatch||$.event.handle).apply(this,args);}})(jQuery);(function($)
{"use strict";$.linkedin={followButton:{init:function(){$('<script>').attr('type','text/javascript').attr('src','//platform.linkedin.com/in.js').html('secure: 1').appendTo('head');}}}
if(typeof $data.ccmcms.services.linkedin!='undefined'&&typeof $data.ccmcms.services.linkedin.followButton!='undefined'&&typeof $data.ccmcms.services.linkedin.followButton.start!='undefined'&&$data.ccmcms.services.linkedin.followButton.start){$(document).start(function(){$.linkedin.followButton.init();});}})(jQuery);(function($)
{'use strict';if(typeof $data.ccmcms.services.nativeAdsMoreDialog!='undefined'&&$data.ccmcms.services.nativeAdsMoreDialog.start){$.jet.started?$('.jNativeAdsMoreDialog').nativeAdsMoreDialog():$(document).start(function(){$('.jNativeAdsMoreDialog').nativeAdsMoreDialog();});}}(jQuery));(function($)
{'use strict';$.trackevent={init:function(){$('body .jTrackEvent').click(function(e){var $target=$(e.target).closest('a');console.log($target,_gaq,$target.data('trackevent-label'),$target.data('trackevent-value'));typeof _gaq!='undefined'&&_gaq.push(['_trackEvent','ccmcms',$target.data('trackevent-label'),$target.data('trackevent-value')]);});}};if($data.ccmcms.services.trackevent.start){$(document).start(function(){$.trackevent.init();});}}(jQuery));(function($)
{'use strict';$.fn.nativeAds=function(options)
{options=$.extend({},$.fn.nativeAds.defaultOptions,options);return this.each(function()
{var $this=$(this);$.ajax({url:'/index/_xhr_display_nativeads',type:'post',dataType:'json',data:({partner:options.partner}),success:function(data){$this.html(data.html).find('.jNativeAdsMoreDialog').nativeAdsMoreDialog();}});});};$.fn.nativeAds.defaultOptions={partner:''};}(jQuery));(function($)
{$.nativeAdsMoreDialog={init:function(){this.microTemplateInit();}};$.fn.nativeAdsMoreDialog=function(options)
{options=$.extend({},$.fn.nativeAdsMoreDialog.defaultOptions,options);this.on('click',function(e){e.preventDefault();$divModal=$('<div title="'+$.nativeAdsMoreDialog.langs[$.nativeAdsMoreDialog.lang].TITLE+'"></div>').html($.nativeAdsMoreDialog.getTemplate('<div class="app_dialog_infos grid_row">'
+'<div class="grid_col w60">'
+'$l{TEXT}'
+'</div>'
+'</div>')).dialog(options.dialog);});return this;};$.fn.nativeAdsMoreDialog.defaultOptions={dialog:{width:650,resizable:false,dialogClass:'',position:['center','center'],modal:true}};$.extend($.nativeAdsMoreDialog,$.microTemplate);$.jet.started?$.nativeAdsMoreDialog.init():$(document).start(function(){$.nativeAdsMoreDialog.init();},{name:'nativeAdsMoreDialogInit'});})(jQuery);(function($){$.extend(true,$.nativeAdsMoreDialog.langs,{'FR':{'TITLE':'On Air','TEXT':'<p>On Air permet aux marques de s\'adresser directement aux lecteurs, en utilisant les même formats éditoriaux que ceux utilisés par la rédaction.</p><p>Les lecteurs peuvent ainsi accéder aux informations apportées par les marques dans un format qu\'ils apprécient, tout en identifiant facilement et rapidement que les contenus proviennent d\'une marque qui est identifiée par son nom en signature et le logo On Air.</p><p>Pour les marques, ce format garantit de pouvoir partager des informations de qualité avec les lecteurs au sein même de ce qui fait le succès du site : le contenu. Pour en savoir plus sur On Air ou nous faire part de vos remarques, vous pouvez nous contacter à l\'adresse <a href=\"mailto:redac.jdn@ccmbenchmark.com\">redac.jdn@ccmbenchmark.com</a></p>'}});})(jQuery);(function($){'use strict';$.googleAnalyticsEvents=function(options)
{options=$.extend({},$.googleAnalyticsEvents.defaultOptions,options);var eventName='',data='',dataObject=_$(options.pathGAEvents)._,i=0,l=0,targets=[],uaObject=options.uaObject;dataObject=$.evalOptions(dataObject);for(eventName in dataObject)
{targets=[];if(typeof dataObject[eventName].length!=='undefined')
{for(i=0,l=dataObject[eventName].length;i<l;++i){typeof dataObject[eventName][i].target!='undefined'&&targets.push(dataObject[eventName][i].target);}}else
{typeof dataObject[eventName].target!='undefined'&&targets.push(dataObject[eventName].target);}
$(document).on(eventName,targets.join(','),function(e)
{var $target=$(e.target),push=function(eventName,conf)
{var etype=function(e){return e.type+'';};conf=$.extend({category:etype,action:etype,label:etype,value:0,noninteraction:false,complete:null,preventDefault:false,type:'ga'},conf);if(typeof conf.complete=='function')
{var callBackDone=0,callBackNeeded=($.isArray(conf.type)?conf.type.length:1),callBackResponded=false,allBackFunction=function(target,e)
{callBackDone++;if(callBackDone==callBackNeeded)
{!callBackResponded&&conf.complete.call(target,e);callBackResponded=true;}};setTimeout(function()
{!callBackResponded&&conf.complete.call(e.target,e);},options.timeout);}
if(conf.type=='ga'||($.isArray(conf.type)&&conf.type.indexOf('ga')!=-1))
{if(typeof _gaq!=='undefined')
{if(typeof conf.complete=='function')
{_gaq.push(['_set','hitCallback',function()
{allBackFunction(e.target,e);}]);}else
{_gaq.push(['_set','hitCallback',false]);}
_gaq.push([eventName,(typeof conf.category=='function'?conf.category.call(e.target,e,conf):conf.category).toString(),(typeof conf.action=='function'?conf.action.call(e.target,e,conf):conf.action).toString(),(typeof conf.label=='function'?conf.label.call(e.target,e,conf):conf.label).toString(),parseInt((typeof conf.value=='function'?conf.value.call(e.target,e,conf):conf.value),10),!!(typeof conf.noninteraction=='function'?conf.noninteraction.call(e.target,e,conf):conf.noninteraction)]);conf.preventDefault&&e.preventDefault();}}
if(conf.type=='ua'||($.isArray(conf.type)&&conf.type.indexOf('ua')!=-1))
{if(typeof uaObject=='function')
{uaObject('send','event',(typeof conf.category=='function'?conf.category.call(e.target,e,conf):conf.category).toString(),(typeof conf.action=='function'?conf.action.call(e.target,e,conf):conf.action).toString(),(typeof conf.label=='function'?conf.label.call(e.target,e,conf):conf.label).toString(),parseInt((typeof conf.value=='function'?conf.value.call(e.target,e,conf):conf.value),10),(typeof conf.complete=='function'?{'hitCallback':function(){allBackFunction(e.target,e);}}:conf.noninteraction));conf.preventDefault&&e.preventDefault();}}};for(i=0,l=dataObject[e.type].length;i<l;++i)
{if($target.is(dataObject[e.type][i].target))
{push('_trackEvent',dataObject[e.type][i]);if((typeof ua_supp)!='undefined')
{for(var key in ua_supp)
{ua_supp.hasOwnProperty(key)&&push(key+'._trackEvent',dataObject[e.type][i]);}}}}});}};$.googleAnalyticsEvents.defaultOptions={pathGAEvents:'$data.common.GAEvents',uaObject:undefined,timeout:2e3};}(jQuery));(function($){'use strict';$.fn.expander=function(options){options=$.extend({},$.fn.expander.defaultOptions,options);return this.each(function(){var $this=$(this);if($this.hasClass('js-no-expand')){return false;}
var hasBeenClosed=false,enterTimer=0,oDim={w:$this.width(),h:$this.height()},oDimImg={w:$this.find('img').width(),h:$this.find('img').height()},oPos=$this.position(),closeHandler=function(e){if($(this).parents('.jExpander-expand').length==0){$clone.trigger('hide');}
e.stopPropagation();return false;},$closingButton=$('<a href="javascript:void(0);" class="'+options.closingButtonClass+'"></a>'),$clone=$this.clone(true,true).css({position:'absolute',top:oPos.top,left:oPos.left,width:oDim.w,height:oDim.h,zIndex:250000}).appendTo($this.parent()).hide().bind('show',function(){var pos=$this.position();$(this).css({top:pos.top,left:pos.left,'z-index':2147483647});if(hasBeenClosed==false){var ratioImg=options.offset.imgW/oDimImg.w,heightImg=Math.ceil(oDimImg.h*ratioImg),heightBox=Math.ceil(heightImg+90);$clone.addClass('jExpander-expand').css({opacity:1}).show().animate({height:heightBox+'px',width:options.offset.w+'px',left:(pos.left+oDim.w)-options.offset.w+'px',top:(pos.top+oDim.h)-options.offset.h+'px',borderWidth:"7px",borderColor:"#E1E1E1",fontSize:"22px"},options.animationTime).find('img').attr('width',options.offset.imgW).attr('height',heightImg);$closingButton.css({'float':'right'}).prependTo($clone).show().click(function(){$clone.trigger('hide');});$('html').delegate('*',"click",closeHandler);$this.trigger('expand');}}).bind('hide',function(){if(hasBeenClosed==false){hasBeenClosed=true;$('html').undelegate('*',"click",closeHandler);$this.css('opacity','1');$clone.removeClass('jExpander-expand').fadeOut('slow',function(){$(this).css({height:oDim.h+'px',width:oDim.w+'px',left:oPos.left+'px',top:oPos.top+'px'}).find('img').attr('width',oDimImg.w).attr('height',oDimImg.h);$(this).find('.icoClose').hide();$this.trigger('restore');});}});$this.bind('mouseenter',function(e){$this.mouseIsOver=true;clearTimeout(enterTimer);enterTimer=setTimeout(function(){if($this.mouseIsOver){$clone.trigger('show');}},options.enterTimeout);});$this.bind('mouseleave',function(e){$this.mouseIsOver=false;});});};$.fn.expander.defaultOptions={enterTimeout:200,animationTime:200,offset:{w:700,imgW:700},closingButtonClass:'icon-remove'};}(jQuery));(function($){"use strict";$.videoExpander={options:{host:null},init:function(){$('body').on('click','.videoContainer',function(e){var $this=$(e.target);if($this.hasClass('icon_play'))
{$this=$this.parent().find('img');}
$.videoExpander.displayVideo($this,$this.attr('data-ressourceid'),$this.attr('data-ressourcekey'),$this.attr('height'),$this.attr('width'));});if(window.innerWidth<768){$('.jExpander').addClass('js-no-expand');}
$('.jExpander').expander({closingButtonClass:'icon-cancel'}).bind('restore',function(e){$(this).find('iframe').remove();$(this).find('.videoContainer').show();});},displayVideo:function($element,rId,rKey,rHeight,rWidth){if(typeof rId=='undefined'||typeof rKey=='undefined'||typeof rHeight=='undefined'||typeof rWidth=='undefined')
{return;}
$element.closest('.videoContainer').hide().after($('<iframe/>').attr({'width':rWidth,'height':rHeight,'display':'block','frameborder':0,'src':$.videoExpander.options.host+'?rid='+rId+'&rkey='+rKey+'&if=1&site='+$.videoExpander.options.adDomain+'&ap=1&na=2'}));}};$(document).start(function(){if($data.ccmcms.services.videoexpander.start)
{$.extend(true,$.videoExpander.options,$data.ccmcms.services.videoexpander.options);$.videoExpander.init();}},{name:'main',priority:0});}(jQuery));(function($){var blockCineTv={blocks:['Cine','Tv'],init:function(){this.addEvents();},addEvents:function(){$('.jtoggleProg').on('click',function(){var $this=$(this);if($this.data('target')=='progCine'){blockCineTv.display('Cine');}
else{blockCineTv.display('Tv');}});},display:function(block){for(idx in this.blocks){$('.jTitleProg'+this.blocks[idx]).hide();$('#prog'+this.blocks[idx]).hide();$('.jProg'+this.blocks[idx]).removeClass('active');}
$('.jTitleProg'+block).show();$('#prog'+block).show();$('.jProg'+block).addClass('active');}};$(document).start(function(){blockCineTv.init();var today=new Date();if(today.getDay()==3){blockCineTv.display('Cine');}});})(jQuery);(function(micro){(function(µ){var header=µ('header'),cookiePrefix=µ(header[1]).attr('data-cookie-prefix');cookiePrefix=(cookiePrefix==null)?'':cookiePrefix;var ulabel=µ.cookie(cookiePrefix+'ulabel'),uimage=µ.cookie(cookiePrefix+'uimage'),logged=ulabel!=null;if(logged){var µlogged=µ('.jHeaderConnected');if(µlogged.length>0){µ('.jHeaderDisconnected').hide();µlogged.each(function(){this.style.display='table';});var µimg=header.find('.jHeaderAvatar');(ulabel=ulabel.replace('+',' '));µlogged.find('.jHeaderLabel').html(ulabel);if(µimg.length>0){µimg.attr('data-icomoon','');if(uimage!=null){if(uimage.substring(0,7)!="https://"){uimage=µimg.attr('data-baseurl')+'/'+µimg.attr('data-size')+'/'+uimage+(uimage.match(/\./)!==null?'':'.jpg');}
µimg.attr('style','background-image:url("'+uimage+'")');}else{var staticDomain=null;if(typeof $data!='undefined'){staticDomain=$data.common.staticDomain;}else{var staticUrl=µimg.attr('data-staticurl');if(staticUrl){staticDomain=staticUrl;}else{staticDomain='https://static.ccmbg.com/'+location.host;}}
µimg.attr('style','background-image:url("'+staticDomain+'/img/default/user.png")');}}}}}(micro));(function(µ){var cookiePrefix=µ(µ('header')[1]).attr('data-cookie-prefix');cookiePrefix=(cookiePrefix==null)?'':cookiePrefix;if(µ.cookie(cookiePrefix+'ulabel')!=null){µ('.jHeaderAvatarLink').addClass('linter_header_connected');}
var $jNavSubCollapse=µ(".jNavSubCollapse");if(!$jNavSubCollapse.hasClass('jNavSubInitialized')){$jNavSubCollapse.bind('click',function(event){var $target=µ(event.target);var closed=$target.hasClass("app_nav__sub--collapse--plus");$jNavSubCollapse.addClass("app_nav__sub--collapse--plus");if(closed){$target.removeClass("app_nav__sub--collapse--plus");}
event.stopPropagation();}).addClass('app_nav__sub--collapse--plus jNavSubInitialized');;µ(".nav_selected").find('.jNavSubCollapse').removeClass("app_nav__sub--collapse--plus");}
var jHeader=µ('#jHeader'),searchLoginBox=jHeader.find('.jDropBox');searchLoginBox.bind('click',function(event){var target=event.target,$target=µ(target);if(target.tagName==='A'||target.tagName==='SPAN'){µ('.'+$target.attr('data-target')).show();}
event.preventDefault();event.stopPropagation();});jHeader.find('.icon-cancel').bind('click',function(){µ('.'+µ(this).attr('data-target')).hide();});if(jHeader.find('.jSelectedHeaderMenu').length===0){var currentHref=window.location.href.split('#')[0].split('?')[0],elementHref,matchedLevel=0,countSlash,selectedMenu=null;jHeader.find('.linter_header_nav').find('li').find('a').each(function(){elementHref=µ(this).attr('href').replace('\?','\\\?');if(elementHref===''){return;}
if(currentHref.match(elementHref)!==null){countSlash=elementHref.match(/\//g).length;if(countSlash>matchedLevel){matchedLevel=countSlash;selectedMenu=µ(this).closest('.jHeaderContent');}}});if(selectedMenu!==null){if(µ(document.body).hasClass('template-light')===false&&selectedMenu.find('.jSubNav').length>0){jHeader.addClass('channel_header');}
µ('.jHeaderContent').removeClass('nav_selected');µ(selectedMenu).addClass('nav_selected');}}}(micro));}(jQuery));'use strict';function setHiddenResponse(val){document.getElementById("reponse_question").value=val;window.parent.document.formquiz.submit();}(function($)
{'use strict';if(document.getElementById('jNavNews')!==null){var documentBody=document.documentElement||document.body,article=$('.app_entry_news'),nav=$('#jNavNews'),offsetup=nav.offset().top-10,navheight=nav.outerHeight(true),offsetdown=article.next().offset().top-navheight-30;$(window).scroll(function(){var scrollY=$(documentBody).scrollTop();if((scrollY>=offsetup)&&(scrollY<=offsetdown)){nav.removeClass("app_list_2--abs").addClass("app_list_2--fixed");}
if(scrollY>=offsetdown){nav.removeClass("app_list_2--fixed").addClass("app_list_2--abs");}
if(scrollY<offsetup){nav.removeClass("app_list_2--fixed");}});}
var $appNavTab3=$('.app_nav_tab_3');if($appNavTab3.length){$appNavTab3.addClass("ui-tabs-vertical ui-helper-clearfix");$appNavTab3.find('li').removeClass("ui-corner-top").addClass("ui-corner-left");}
$(document).start(function(){if(!$.support.placeholder){vow($data.common.staticDomain+'/asset/js?m=polyfills').then(function(){$('input, textarea').placeholder();}).catch(function(error){if(console&&console.warn){console.warn(error);}});}},{name:'placeholderpolyfill',priority:0}).start(function(){var sharerContainer=document.getElementById('jSharer');if(sharerContainer!==null){$(sharerContainer.getElementsByTagName('a')).on('click',function(event){var target=event.currentTarget;if(target.tagName==='A'&&target.className!=='app_btn_share app_btn_share--email'){window.open(target.href,'partage','width=500,height=450,resizable,status=0');return false;}});}
$('.login').loginDialog();if(window.screen.width<=640){$('.ccmcss_breadcrumb').breadCrumbResizer();}
typeof $.fn.moreResults!='undefined'&&$('a.more').moreResults();$('.ui-nav').parent().ccmUITabs();$('#jPlayController').click(function(){if(typeof _gaq!='undefined'){_gaq.push(['_trackEvent','ccmcms/contents','jPlayController','click']);}});$('#jForumColRight a').click(function(){if(typeof _gaq!='undefined'){var thislink=$(this).attr("href");_gaq.push(['_set','hitCallback',function(){window.location=thislink;}]);_gaq.push(['_trackEvent','ccmcms/colright','blockForum','click']);return false;}});$('#jChroniclesColRight a').click(function(){var version=$("#jChroniclesColRight").attr('data-version');var nameBloc='blockChronicles';if(version!=undefined){nameBloc=nameBloc+'v'+version;}
if(typeof _gaq!='undefined'){var thislink=$(this).attr("href");_gaq.push(['_set','hitCallback',function(){window.location=thislink;}]);_gaq.push(['_trackEvent','ccmcms/colright',nameBloc,'click']);return false;}});$('#jNewsColMiddle a').click(function(){if(typeof _gaq!='undefined'){var thislink=$(this).attr("href");_gaq.push(['_set','hitCallback',function(){window.location=thislink;}]);_gaq.push(['_trackEvent','ccmcms/contents','newsBottom','click']);return false;}});var $tabNews=$('#tabNews');if($tabNews.length>0)
{var ts=$tabNews.attr('data-ts');if(typeof(ts)!='undefined')
{var threshold=1800;if(Math.round(new Date().getTime()/1000)-ts>threshold)
{$tabNews.ccmTabs('load',$tabNews.ccmTabs('getPositionByDataKey',$tabNews.find('li.ui-tabs-selected a').attr('data-key')));}}}
if(_$('$data.ccmcms.services')._.reducedTxt){$('.jReducedTxt').one('click',function(){$(this).removeClass('bu_cuisine_multiline_ellipsis');});}
if(typeof(setHiddenResponse)=='undefined')
{var setHiddenResponse=function(val)
{$("#reponse_question").val(val);$("form[name='formquiz']").submit();}}
$('.jDropdown').bind('click',function(){$('.app_menu_1__content',this).css("position","absolute").slideToggle(50);$('.app_menu_1__title span',this).toggleClass('icomoon-arrow-up3 icomoon-arrow-down3');});},{name:'main',priority:0}).start(function(){$(document).bind('jet.services.facebook.init',function(){$.ccmcms.facebook.init(_$('$data.services.facebook')._);});$(document).bind('hammerLoaded',function(){var diapoContent=$('.app_entry_diapo__content');diapoContent.fakeSlide({moveElement:diapoContent,nextButton:$('.jMiddleNextButton'),previousButton:$('.jMiddlePreviousButton')});});},{name:'facebook',priority:0}).trigger('start',[$.extend(true,{},{services:{hammer:{start:$data.ccmcms.services.hammer.start},facebook:{start:$data.ccmcms.services.facebook.start,options:$data.ccmcms.services.facebook.options},tipsy:{start:false},coverflow:{start:$data.ccmcms.services.coverflow.start,options:$data.ccmcms.services.coverflow.options},inputDefault:{start:true},socialButtons:{start:$data.ccmcms.services.socialbuttons.start,options:$data.ccmcms.services.socialbuttons.options},dropDownBtn:{start:false},ajaxStartNote:{start:true,options:{show:function(){return!$.ccmcms.facebook.actionAjaxInProgress;}}},shortCutManager:{start:true},goTop:{start:true},ccmUIEvent:{start:false},autoResize:{start:false},fancybox:{start:$data.ccmcms.services.fancybox.start},newsletterdialog:{start:$data.ccmcms.services.newsletterdialog.start},contents:{start:true,summary:{start:false}},fileUpload:{start:$data.ccmcms.services.fileUpload.start},croppable:{start:$data.ccmcms.services.croppable.start},history:{start:true},maxLength:{start:$data.ccmcms.services.account.start},election:{start:$data.ccmcms.services.election.start},weborama:{start:$data.ccmcms.services.weborama.start,options:$data.common.weborama.options},odeditor:(typeof $data!='undefined'&&typeof $data.services!='undefined'&&typeof $data.services.odeditor!='undefined'?$data.services.odeditor:{start:false}),mapstraction:(typeof $data!='undefined'&&typeof $data.services!='undefined'&&typeof $data.services.mapstraction!='undefined'?$data.services.mapstraction:{start:false}),rating:(typeof $data!='undefined'&&typeof $data.services!='undefined'&&typeof $data.services.rating!='undefined'?$data.services.rating:{start:false}),cabestanRetargeting:{start:$data.ccmcms.services.cabestanRetargeting.start,options:_$('$data.services.cabestanRetargeting')._.options},ckeditor:typeof $data.services.ckeditor!=='undefined'?$data.services.ckeditor:{start:$data.ccmcms.services.ckeditor.start,options:$data.ccmcms.services.ckeditor.options},ciminternetgemius:{start:$data.ccmcms.services.ciminternetgemius.start}}},$data.ccmcms.startOptions),$('[name=f_cle]').val(Math.round(Math.random()*1e12))]);}(jQuery));