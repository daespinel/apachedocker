!function(e){e.idleTimer=function(i,t){var n;"object"==typeof i?(n=i,i=null):"number"==typeof i&&(n={timeout:i},i=null),t=t||document,n=e.extend({idle:!1,timeout:3e4,events:"mousemove keydown wheel DOMMouseScroll mousewheel mousedown touchstart touchmove MSPointerDown MSPointerMove"},n);var r=e(t),a=r.data("idleTimerObj")||{},d=function(i){var n=e.data(t,"idleTimerObj")||{};n.idle=!n.idle,n.olddate=+new Date;var r=e.Event((n.idle?"idle":"active")+".idleTimer");e(t).trigger(r,[t,e.extend({},n),i])},l=function(i){var n=e.data(t,"idleTimerObj")||{};if(null==n.remaining){if("mousemove"===i.type){if(i.pageX===n.pageX&&i.pageY===n.pageY)return;if("undefined"==typeof i.pageX&&"undefined"==typeof i.pageY)return;var r=+new Date-n.olddate;if(200>r)return}clearTimeout(n.tId),n.idle&&d(i),n.lastActive=+new Date,n.pageX=i.pageX,n.pageY=i.pageY,n.tId=setTimeout(d,n.timeout)}},u=function(){var i=e.data(t,"idleTimerObj")||{};i.idle=i.idleBackup,i.olddate=+new Date,i.lastActive=i.olddate,i.remaining=null,clearTimeout(i.tId),i.idle||(i.tId=setTimeout(d,i.timeout))},o=function(){var i=e.data(t,"idleTimerObj")||{};null==i.remaining&&(i.remaining=i.timeout-(+new Date-i.olddate),clearTimeout(i.tId))},c=function(){var i=e.data(t,"idleTimerObj")||{};null!=i.remaining&&(i.idle||(i.tId=setTimeout(d,i.remaining)),i.remaining=null)},s=function(){var i=e.data(t,"idleTimerObj")||{};clearTimeout(i.tId),r.removeData("idleTimerObj"),r.off("._idleTimer")},f=function(){var i=e.data(t,"idleTimerObj")||{};if(i.idle)return 0;if(null!=i.remaining)return i.remaining;var n=i.timeout-(+new Date-i.lastActive);return 0>n&&(n=0),n};if(null===i&&"undefined"!=typeof a.idle)return u(),r;if(null===i);else{if(null!==i&&"undefined"==typeof a.idle)return!1;if("destroy"===i)return s(),r;if("pause"===i)return o(),r;if("resume"===i)return c(),r;if("reset"===i)return u(),r;if("getRemainingTime"===i)return f();if("getElapsedTime"===i)return+new Date-a.olddate;if("getLastActiveTime"===i)return a.lastActive;if("isIdle"===i)return a.idle}return r.on(e.trim((n.events+" ").split(" ").join("._idleTimer ")),function(e){l(e)}),a=e.extend({},{olddate:+new Date,lastActive:+new Date,idle:n.idle,idleBackup:n.idle,timeout:n.timeout,remaining:null,tId:null,pageX:null,pageY:null}),a.idle||(a.tId=setTimeout(d,a.timeout)),e.data(t,"idleTimerObj",a),r},e.fn.idleTimer=function(i){return this[0]?e.idleTimer(i,this[0]):this}}(jQuery),!function(e){"use strict";var i=function(i){return i!=e},t=window.Visibility={onVisible:function(e){if(!t.isSupported()||!t.hidden())return e(),t.isSupported();var i=t.change(function(){t.hidden()||(t.unbind(i),e())});return i},change:function(e){if(!t.isSupported())return!1;t._lastCallback+=1;var i=t._lastCallback;return t._callbacks[i]=e,t._setListener(),i},unbind:function(e){delete t._callbacks[e]},afterPrerendering:function(e){if(!t.isSupported()||"prerender"!=t.state())return e(),t.isSupported();var i=t.change(function(n,r){"prerender"!=r&&(t.unbind(i),e())});return i},hidden:function(){return t._prop("hidden",!1)},state:function(){return t._prop("visibilityState","visible")},isSupported:function(){return i(t._prefix())},_doc:window.document,_chechedPrefix:null,_listening:!1,_lastCallback:-1,_callbacks:{},_hiddenBefore:!1,_init:function(){t._hiddenBefore=t.hidden()},_prefix:function(){return null!==t._chechedPrefix?t._chechedPrefix:i(t._doc.visibilityState)?t._chechedPrefix="":i(t._doc.webkitVisibilityState)?t._chechedPrefix="webkit":void 0},_name:function(e){var i=t._prefix();return""==i?e:i+e.substr(0,1).toUpperCase()+e.substr(1)},_prop:function(e,i){return t.isSupported()?t._doc[t._name(e)]:i},_onChange:function(e){var i=t.state();for(var n in t._callbacks)t._callbacks[n].call(t._doc,e,i);t._hiddenBefore=t.hidden()},_setListener:function(){if(!t._listening){var e=t._prefix()+"visibilitychange",i=function(){t._onChange.apply(Visibility,arguments)};t._doc.addEventListener?t._doc.addEventListener(e,i,!1):t._doc.attachEvent(e,i),t._listening=!0,t._hiddenBefore=t.hidden()}}};t._init();var n={every:function(e,n,r){t._initTimers(),i(r)||(r=n,n=null),t._lastTimer+=1;var a=t._lastTimer;return t._timers[a]={interval:e,hiddenInterval:n,callback:r},t._runTimer(a,!1),t.isSupported()&&t._setListener(),a},stop:function(e){var n=t._timers[e];return i(n)?(t._stopTimer(e),delete t._timers[e],n):!1},_lastTimer:-1,_timers:{},_timersInitialized:!1,_initTimers:function(){t._timersInitialized||(t._timersInitialized=!0,t.change(function(){t._timersStopRun()}))},_setInterval:function(e,i){return setInterval(e,i)},_runTimer:function(e,i){var n,r=t._timers[e];if(t.hidden()){if(null===r.hiddenInterval)return;n=r.hiddenInterval}else n=r.interval;i&&r.callback.call(window),r.id=t._setInterval(r.callback,n)},_stopTimer:function(e){var i=t._timers[e];clearInterval(i.id),delete i.id},_timersStopRun:function(){var e=t.hidden(),i=t._hiddenBefore;if(e&&!i||!e&&i)for(var n in t._timers)t._stopTimer(n),t._runTimer(n,!e)}};for(var r in n)Visibility[r]=n[r]}();