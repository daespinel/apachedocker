/*! front 2015-10-18 */

AC.define("AC.data",["AC.helpers.error","AC.context"],function(a,b){function c(){d($(".j_entities"))}function d(a){$.each(a,function(a,b){var c,d,e,f;if(c=$(b).data("entities"))if($.isArray(c))for(v=v.concat(c),f=c.length;f--;)e=c[f],d=g([e.entityType]),d[e.entityId]=e;else v.push(c),d=g([c.entityType]),d[c.entityId]=c})}function e(a){var b,c=f(a),d={entity:c};return a&&a.service?(b=$.extend(!0,{},u[a.service]||{name:a.service},{originalService:a.service},{parameters:$.extend(!0,{entityType:c.entityType,entityId:c.entityId},a.parameters)},{queryInfo:a.queryInfo}),b.propertyName=b.propertyName||b.name,$.extend(!0,d,{service:b})):d}function f(a){var b,c,d=a&&a.entityType,e=a&&a.entityId;return d&&e||!v.length||(d=v[0].entityType,e=v[0].entityId),b=g([d,e]),c=$.isEmptyObject(b),c&&d&&e?(b.entityType=d,b.entityId=e):d&&!e&&(b=$.extend({},{entityType:d})),$.extend({},b)}function g(a){var c,d=b.data;for(c=0;c<a.length&&a[c];c++)d[a[c]]=d[a[c]]||{},d=d[a[c]];return d}function h(a){var b,c,d=$.extend({},a);for(b in d)c=d[b],d[b]=$.isPlainObject(c)?{}:$.isArray(c)?[]:void 0;return d}function i(a,b){var c=b.result;c=$.isPlainObject(c)?$.extend({},c):c,a.resolve(c)}function j(a,b){var c,d,e,f;if(a&&a.success)switch(c=a.request,f=a.result,d=c.parameters,e=c.type,c.type){case"GET":case"POST":case"PUT":l(d,b,f);break;case"DELETE":k(a)}}function k(){}function l(a,c,d){var e,f,i,j,k,l=a.entityType,m=a.entityId,n=d.items,o={My:{}};if(b.data[l]=b.data[l]||{},n){for(f=g([l]),k=n.length;k--;)j=n[k],j.My={},j.My[c]=$.extend({},j[c]),j.entityType=j.entityType||j.My[c].entityType,j.entityId=j.entityId||j.My[c].entityId,e=g([j.entityType,j.entityId]),$.extend(e,j),delete j[c],b.data[l][j.id]=$.extend({},j);n.length>0?(i=n[0],o.My=h(i.My)):o.My[c]={}}else e=g([l,m,"My"]),e[c]=d}function m(a,b,c){return t("append",a,b,c)}function n(a,b){return p("get",a,b)}function o(a,b){return p("list",a,b)}function p(b,c,d){var f,h,k,l,m,n,o,p,q,r=$.Deferred();return c=e(c),c.service?(f=c.service,k=f.name,h=AC.api.my[k],h||a.write("Service "+k+" cannot be found"),q=f.propertyName,o=f.parameters,p=f.queryInfo,l=o.entityType,m=o.entityId,n=g([l,m,"My"]),n[q]?i(r,{result:n[q]}):h[b](o,p,d).done(function(a){j(a,q),i(r,a)}).fail(r.reject),r.promise()):(r.resolve(c.entity),r.promise())}function q(a,b){return t("remove",a,null,b)}function r(a,b,c){return t("removeItem",a,b,c)}function s(a,b,c){return t("set",a,b,c)}function t(a,b,c,d){var f,g,h,k,l,m,n,o,p=$.Deferred();if(b=e(b),!b.service)return p.reject(),p.promise();if(f=b.service,h=f.name,g=AC.api.my[h],!g)throw new Error("Service "+h+" cannot be found");return o=f.propertyName,m=f.parameters,n=f.queryInfo,k=m.entityType,l=m.entityId,$.extend(m,c),g[a](m,d).done(function(a){j(a,o),i(p,a)}).fail(p.reject),p.promise()}var u={socialAction:{name:"socialAction",propertyName:"SocialActions"}},v=[];return c(),{append:m,get:n,getEntity:f,getFromCache:g,list:o,set:s,read:p,remove:q,removeItem:r}}),AC.define("AC.environmentOverride",["AC.assets.environment"],function(a){function b(){c=$.extend({},a,$("body").data("envoverride"))}var c={};return b(),{contextEnvironment:c}}),AC.define("AC.event",function(){function a(a,b,c,d){for(var e=0,g=f[a].length;g>e;e++)if(f[a][e].fn===b&&f[a][e].context===d)return!0;return!1}function b(){return{subscribed:f,published:g}}function c(a,b){var c,d,e,h,i;if(!f||!f[a])return!1;for(i=f[a].length;i--;)c=f[a][i],g.push({topic:a,event:c}),d=$.extend({},c.args,b),e=c.context,h=c.fn,e?h.call(e,d):h(d);return!0}function d(b,c,d,e){var g;if(f.hasOwnProperty(b)||(f[b]=[]),"function"!=typeof c)throw new Error("argument fn must be a function.");return g={fn:c,args:d?$.extend({},d):void 0,context:e},a(b,c,d,e)?!1:(f[b].push(g),f[b])}function e(a,b){var c,d=0;if(!f||!f[a])return!1;for(c=f[a].length;c>d;d++)if(f[a][d].fn===b)return f[a].splice(d,1),0===f[a].length&&delete f[a],!0;return!1}var f={},g=[];return{list:b,publish:c,subscribe:d,unsubscribe:e}}),AC.define("AC.log",["AC.data","AC.social.user","AC.helpers.cookie"],function(a,b,c){function d(){b.doOnConnection(f)}function e(a){var b;for(b in a)g[b](a[b])}function f(){if(b.isOn()&&!c.read("ACXTUC")){var a=new Date;a.setDate(a.getDate()+1),a.setHours(0,0,0,0),c.write({name:"ACXTUC",value:1,expires:{day:a}})}}var g={ga:function(a){var b;(a.network||a.socialAction)&&(b=["_trackSocial",a.network,a.socialAction],a.target&&b.push(a.target),a.pagePath&&b.push(a.pagePath),window._gaq.push(b))}};return d(),{track:e,user:f}}),AC.define("AC.request",["AC.event","AC.helpers.cookie","AC.helpers.json","AC.helpers.string"],function(a,b,c,d){function e(){var a;return l?l:(a=m.hostnames.secure+"/Scripts/3rdParty/easyXDM/",l=new easyXDM.Rpc({local:"../name.html",swf:a+"easyxdm.swf",remote:a+"cors/",remoteHelper:a+"name.html"},{remote:{request:{}}}))}function f(a,d,e,f,g){if(e&&"object"!==$.type(e))throw new Error('"ajaxOptions" must be an object.');var h=m.secureApiVersion,i=$.extend(e,{method:a,url:(h?"/"+h:"")+d,data:"GET"!==a?JSON.stringify(f,c.stringifyJsonToWcf):null,headers:{"Content-type":"application/json; charset=utf-8"}});return g&&(i.headers["X-AC-TOKEN"]=b.read("ACCT")),i}function g(a,b,c){var e,f=[];if(a=d.replace(a,b),c){for(e in c)c.hasOwnProperty(e)&&f.push(e+"="+encodeURI(c[e]));f.length&&(a+=a.indexOf("?")>0?f.join("&"):"?"+f.join("&"))}return a}function h(a,c){var d,e,h,j=$.Deferred(),k=a.type.toUpperCase()||"GET",l=a.parameters||{},n=$.extend({},a.queryInfo,{partner:m.secureSitePartnerKey});if(l&&-1==="object|array".indexOf($.type(l)))throw new Error('"parameter" must be an object or an array.');if(c&&!b.read("ACCT"))throw new Error("User unknown.");return e=g(a.uri,l,n),d=f(k,e,a.ajaxOptions,l,c),h={type:k,uri:e,parameters:l,queryInfo:n,ajaxOptions:d},i(d,h,j),j.promise()}function i(a,b,c){e().request(a,function(a){j(a,b,c)},function(a){k(a,b,c)})}function j(a,b,d){var e=a.data,f=a.headers["Content-Type"],g=e&&f&&f.toLowerCase().indexOf("application/json")>-1;d.resolve({success:!0,request:b,result:g?JSON.parse(e,c.parseJsonWithWcfDate):e})}function k(a,b,d){var e=a.data,f=e&&e.errorInfos&&c.isJsonString(e.errorInfos);d.reject({success:!1,request:b,result:f?JSON.parse(a.data.errorInfos):null})}var l,m=AC.assets.environment;return{execute:h}}),AC.define("AC.validation",["AC.validators"],function(a){function b(a){g=a,h=[],i=[],$.each(g.find(".j_validator"),d)}function c(){for(var a=i.length,b=[];a--;)b.push(i[a].message);g.find(b.join(",")).addClass("hide"),g.find(h.join(",")).removeClass("hide")}function d(){var a=$(this),b=a.data("validator"),c=0,d=b.length;for(i||(i=[]),b.$element=a;d>c;c++)b[c].$element=a,i.push(b[c])}function e(){return 0===h.length}function f(b){var d,f=i.length,g=0,j=$.Deferred(),k=function(a,b){var d=b||i[f];a||h.push(d.message),g++,g===i.length&&(c(),j.resolve(e()),e()?j.resolve():j.reject())};for(h=[];f--;)d=a[i[f].name](i[f],b),d.promise&&"function"==typeof d.promise?d.done(k):k(d);return j.promise()}var g,h,i;return{init:b,validate:f}}),AC.define("AC.validators",["AC.api.my.validation","AC.helpers.string"],function(a,b){function c(a){var b=a.$element.parents(".j_entity_container").find(".j_entity").data("entity");return b?!!b[a.value]:!1}function d(a,b){return b?parseInt(b[a.value],10)>parseInt(a.valueToCompare,10):!1}function e(a){return a.$element.val()>a.valueToCompare}function f(a){return b.trim(a.$element.val()).length}function g(a){return a.$element.val().length<=a.valueToCompare}function h(a){return b.trim(a.$element.val()).length>=a.valueToCompare}function i(a){var b=new RegExp(a.valueToCompare);return!f(a)||b.test(a.$element.val())}function j(b){var c=$.Deferred(),d={validatorName:b.type,fieldValue:b.$element.val()};return a.isFieldValid(d).done(function(a){c.resolve(a.result.isValid,b)}),c.promise()}return{isEntityDataRequired:c,isEntityDataGreaterThan:d,isGreaterThan:e,isMaximumLength:g,isMinimumLength:h,isMandatory:f,isRegexValid:i,ajaxFieldValidation:j}}),AC.define("AC.api.account",["AC.request"],function(a){function b(b,c,d){var e={type:"GET",uri:"/api/account/{userId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!1)}function c(b,c,d){var e={type:"GET",uri:"/api/account/private/{userId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!1)}function d(b,c,d){var e={type:"POST",uri:"/api/private/user/search",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!1)}function e(b,c,d){var e={type:"PUT",uri:"/api/private/user/{userId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!1)}function f(b,c,d){var e={type:"POST",uri:"/api/account/register",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!1)}function g(b,c,d){var e={type:"POST",uri:"/api/account/forgottenpassword",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!1)}function h(b,c,d){var e={type:"POST",uri:"/api/account/connect",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!1)}function i(b,c,d){var e={type:"POST",uri:"/api/account/connect/facebook",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!1)}function j(b,c,d){var e={type:"POST",uri:"/api/account/connect/google",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!1)}function k(b,c,d){var e={type:"POST",uri:"/api/account/connect/twitter",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!1)}function l(b,c,d){var e={type:"POST",uri:"/api/utils/validateRegistration",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!1)}function m(b,c,d){var e={type:"POST",uri:"/api/utils/CheckFieldValidity",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!1)}function n(b,c,d){var e={type:"POST",uri:"/api/utils/CheckNickNameValidity",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!1)}function o(b,c){var d={type:"GET",uri:"/api/account/facebook/subscription",queryInfo:b,ajaxOptions:c};return a.execute(d,!1)}function p(b,c,d){var e={type:"POST",uri:"/api/account/facebook/subscription",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!1)}function q(b,c,d){var e={type:"POST",uri:"/api/account/acceptNewConditionsOfUse",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!1)}return{getPublicUserProfile:b,getUserPrivateProfile:c,search:d,set:e,register:f,forgottenPassword:g,connect:h,connectWithFacebook:i,connectWithGoogle:j,connectWithTwitter:k,validateRegistration:l,checkFieldValidity:m,checkNickNameValidity:n,verifyGetSubscription:o,processSubscription:p,acceptNewConditionsOfUse:q}}),AC.define("AC.api.api",["AC.request"],function(a){return{}}),AC.define("AC.api.awards",["AC.request"],function(a){function b(b,c,d){var e={type:"GET",uri:"/api/my/awards/{entityType}/{categoryId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function c(b,c,d){var e={type:"PUT",uri:"/api/my/awards/vote/{itemId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function d(b,c){var d={type:"PUT",uri:"/api/my/awards/newsletter_cn/",queryInfo:b,ajaxOptions:c};return a.execute(d,!0)}function e(b,c){var d={type:"PUT",uri:"/api/my/awards/newsletter_next/",queryInfo:b,ajaxOptions:c};return a.execute(d,!0)}function f(b,c){var d={type:"DELETE",uri:"/api/my/awards/newsletter_cn/",queryInfo:b,ajaxOptions:c};return a.execute(d,!0)}function g(b,c){var d={type:"DELETE",uri:"/api/my/awards/newsletter_next/",queryInfo:b,ajaxOptions:c};return a.execute(d,!0)}return{get:b,setVote:c,setCarteNoireNewsletter:d,setNextNewsletter:e,removeCarteNoireNewsletter:f,removeNextNewsletter:g}}),AC.define("AC.api.emsNewsletter",["AC.request"],function(a){function b(b,c,d){var e={type:"PUT",uri:"/account/subscribetoems",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!1)}function c(b,c,d){var e={type:"DELETE",uri:"/account/emsnewsletter",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!1)}function d(b,c){var d={type:"PUT",uri:"/account/emsnewsletter",queryInfo:b,ajaxOptions:c};return a.execute(d,!1)}return{subscribeToEmsNewsletters:b,removeUserFromEmsNewsletters:c,updateUserFromEmsNewsletters:d}}),AC.define("AC.api.entityClash",["AC.request"],function(a){function b(b,c,d){var e={type:"PUT",uri:"/api/entityclash/vote/{entityClashId}/{videoId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!1)}return{addVote:b}}),AC.define("AC.api.feedBack",["AC.request"],function(a){function b(b,c,d){var e={type:"PUT",uri:"/api/feedback/",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!1)}return{saveFeedBack:b}}),AC.define("AC.api.my.activity",["AC.request"],function(a){function b(b,c){var d={type:"GET",uri:"/api/my/activity",queryInfo:b,ajaxOptions:c};return a.execute(d,!0)}function c(b,c){var d={type:"GET",uri:"/api/my/activity/friends",queryInfo:b,ajaxOptions:c};return a.execute(d,!0)}function d(b,c,d){var e={type:"GET",uri:"/api/my/activity/friends/{friendId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function e(b,c,d){var e={type:"GET",uri:"/api/my/activity/{entityType}/{entityId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}return{loadUserActivity:b,loadUserFriendsActivity:c,loadUserFriendActivity:d,entityInfo:e}}),AC.define("AC.api.my.address",["AC.request"],function(a){function b(b,c,d){var e={type:"GET",uri:"/api/my/addresses/{addressType}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function c(b,c){var d={type:"GET",uri:"/api/my/billingaddress",queryInfo:b,ajaxOptions:c};return a.execute(d,!0)}function d(b,c,d){var e={type:"POST",uri:"/api/my/billingaddress/{addressId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function e(b,c,d){var e={type:"GET",uri:"/api/my/addresses/{addressId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function f(b,c,d){var e={type:"POST",uri:"/api/my/addresses",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function g(b,c,d){var e={type:"PUT",uri:"/api/my/addresses/{addressId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function h(b,c,d){var e={type:"DELETE",uri:"/api/my/addresses/{addressId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}return{list:b,getBillingAddress:c,setBillingAddress:d,get:e,create:f,set:g,remove:h}}),AC.define("AC.api.my.avatar",["AC.request"],function(a){return{}}),AC.define("AC.api.my.disqus",["AC.request"],function(a){function b(b,c){var d={type:"GET",uri:"/api/disqus/mytoken",queryInfo:b,ajaxOptions:c};return a.execute(d,!0)}function c(b,c){var d={type:"GET",uri:"/api/disqus/emptytoken",queryInfo:b,ajaxOptions:c};return a.execute(d,!1)}return{createDisqusToken:b,createEmpyDisqusToken:c}}),AC.define("AC.api.my.favorite",["AC.request"],function(a){function b(b,c){var d={type:"GET",uri:"/api/my/favorite/movie",queryInfo:b,ajaxOptions:c};return a.execute(d,!0)}function c(b,c){var d={type:"GET",uri:"/api/my/favorite/person",queryInfo:b,ajaxOptions:c};return a.execute(d,!0)}function d(b,c){var d={type:"GET",uri:"/api/my/favorite/series",queryInfo:b,ajaxOptions:c};return a.execute(d,!0)}function e(b,c){var d={type:"GET",uri:"/api/my/favorite/tvChannel",queryInfo:b,ajaxOptions:c};return a.execute(d,!0)}function f(b,c,d){var e={type:"GET",uri:"/api/my/favorite/movie/{entityId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function g(b,c,d){var e={type:"GET",uri:"/api/my/favorite/person/{entityId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function h(b,c,d){var e={type:"GET",uri:"/api/my/favorite/series/{entityId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function i(b,c,d){var e={type:"GET",uri:"/api/my/favorite/tvChannel/{entityId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function j(b,c,d){var e={type:"POST",uri:"/api/my/favorite/movie/{entityId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function k(b,c,d){var e={type:"POST",uri:"/api/my/favorite/person/{entityId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function l(b,c,d){var e={type:"POST",uri:"/api/my/favorite/series/{entityId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function m(b,c,d){var e={type:"POST",uri:"/api/my/favorite/tvChannel/{entityId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function n(b,c,d){var e={type:"DELETE",uri:"/api/my/favorite/movie/{entityId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function o(b,c,d){var e={type:"DELETE",uri:"/api/my/favorite/person/{entityId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function p(b,c,d){var e={type:"DELETE",uri:"/api/my/favorite/series/{entityId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function q(b,c,d){var e={type:"DELETE",uri:"/api/my/favorite/tvChannel/{entityId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}return{listByMovie:b,listByPerson:c,listBySeries:d,listByTvChannel:e,isFavoriteMovie:f,isFavoritePerson:g,isFavoriteSeries:h,isFavoriteTvChannel:i,addFavoriteMovie:j,addFavoritePerson:k,addFavoriteSeries:l,addFavoriteTvChannel:m,removeFavoriteMovie:n,removeFavoritePerson:o,removeFavoriteSeries:p,removeFavoriteTvChannel:q}}),AC.define("AC.api.my.game",["AC.request"],function(a){function b(b,c,d){var e={type:"POST",uri:"/api/my/game/email",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}return{sendGameEmail:b}}),AC.define("AC.api.my.list",["AC.request"],function(a){function b(b,c){var d={type:"GET",uri:"/api/my/lists",queryInfo:b,ajaxOptions:c};return a.execute(d,!0)}function c(b,c,d){var e={type:"GET",uri:"/api/my/lists/{entityListType}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function d(b,c,d){var e={type:"POST",uri:"/api/my/lists/{entityListType}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function e(b,c,d){var e={type:"GET",uri:"/api/my/lists/{entityListType}/{listId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function f(b,c,d){var e={type:"GET",uri:"/api/my/lists/movie/{listId}/items",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function g(b,c){var d={type:"GET",uri:"/api/my/lists/movie/items",queryInfo:b,ajaxOptions:c};return a.execute(d,!0)}function h(b,c){var d={type:"GET",uri:"/api/my/lists/person/items",queryInfo:b,ajaxOptions:c};return a.execute(d,!0)}function i(b,c){var d={type:"GET",uri:"/api/my/lists/series/items",queryInfo:b,ajaxOptions:c};return a.execute(d,!0)}function j(b,c){var d={type:"GET",uri:"/api/my/lists/seriesepisode/items",queryInfo:b,ajaxOptions:c};return a.execute(d,!0)}function k(b,c){var d={type:"GET",uri:"/api/my/lists/seriesseason/items",queryInfo:b,ajaxOptions:c};return a.execute(d,!0)}return{getLists:b,indexByEntityListType:c,createList:d,readList:e,readMovieListItems:f,readMovieItems:g,readPersonItems:h,readSeriesItems:i,readSeriesEpisodeItems:j,readSeriesSeasonItems:k}}),AC.define("AC.api.my.opinion",["AC.request"],function(a){function b(b,c,d){var e={type:"GET",uri:"/api/my/opinion/{entityType}/{entityId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function c(b,c,d){var e={type:"GET",uri:"/api/my/opinion/{entityType}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function d(b,c,d){var e={type:"PUT",uri:"/api/my/opinion/{entityType}/{entityId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function e(b,c,d){var e={type:"DELETE",uri:"/api/my/opinion/{entityType}/{entityId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function f(b,c,d){var e={type:"POST",uri:"/api/my/opinion/{entityType}/reportabuse",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function g(b,c){var d={type:"GET",uri:"/api/my/opinion/statistics",queryInfo:b,ajaxOptions:c};return a.execute(d,!0)}function h(b,c){var d={type:"GET",uri:"/api/my/opinion/speedRatingFeed",queryInfo:b,ajaxOptions:c};return a.execute(d,!0)}return{get:b,list:c,set:d,remove:e,reportAbuse:f,getOpinionStatistics:g,getSpeedRatingFeed:h}}),AC.define("AC.api.my.profile",["AC.request"],function(a){function b(b,c){var d={type:"GET",uri:"/api/my/profile",queryInfo:b,ajaxOptions:c};return a.execute(d,!0)}function c(b,c){var d={type:"GET",uri:"/api/my/profile/extended",queryInfo:b,ajaxOptions:c};return a.execute(d,!0)}return{get:b,getExtended:c}}),AC.define("AC.api.my.recommendation",["AC.request"],function(a){function b(b,c,d){var e={type:"GET",uri:"/api/my/recommendations/{entityType}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function c(b,c,d){var e={type:"GET",uri:"/api/my/recommendations/blacklist/{itemType}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function d(b,c,d){var e={type:"GET",uri:"/api/my/recommendations/blacklist/{itemType}/{itemId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function e(b,c,d){var e={type:"POST",uri:"/api/my/recommendations/blacklist/{itemType}/{itemId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function f(b,c,d){var e={type:"DELETE",uri:"/api/my/recommendations/blacklist/{itemType}/{itemId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function g(b,c,d){var e={type:"GET",uri:"/api/my/recommendations/nexttoreview/{entityType}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}return{list:b,loadBlackList:c,isBlackListed:d,addBlackListItem:e,removeBlackListItem:f,getNextToReview:g}}),AC.define("AC.api.my.relationship",["AC.request"],function(a){function b(b,c){var d={type:"GET",uri:"/api/my/followers",queryInfo:b,ajaxOptions:c};return a.execute(d,!0)}function c(b,c,d){var e={type:"GET",uri:"/api/my/followers/{source}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function d(b,c,d){var e={type:"GET",uri:"/api/my/followers/{followerId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function e(b,c){var d={type:"GET",uri:"/api/my/followers/coached",queryInfo:b,ajaxOptions:c};return a.execute(d,!0)}function f(b,c){var d={type:"GET",uri:"/api/my/followers/blocked",queryInfo:b,ajaxOptions:c};return a.execute(d,!0)}function g(b,c,d){var e={type:"PUT",uri:"/api/my/followers/blocked/{followerId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function h(b,c,d){var e={type:"DELETE",uri:"/api/my/followers/blocked/{followerId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function i(b,c){var d={type:"GET",uri:"/api/my/Followees",queryInfo:b,ajaxOptions:c};return a.execute(d,!0)}function j(b,c,d){var e={type:"GET",uri:"/api/my/Followees/{source}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function k(b,c){var d={type:"GET",uri:"/api/my/Followees/coaches",queryInfo:b,ajaxOptions:c};return a.execute(d,!0)}function l(b,c){var d={type:"GET",uri:"/api/my/Followees/ignored",queryInfo:b,ajaxOptions:c};return a.execute(d,!0)}function m(b,c,d){var e={type:"GET",uri:"/api/my/Followees/{followeeId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function n(b,c,d){var e={type:"PUT",uri:"/api/my/Followees/{followeeId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function o(b,c,d){var e={type:"DELETE",uri:"/api/my/Followees/{followeeId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function p(b,c,d){var e={type:"PUT",uri:"/api/my/Followees/coaches/{followeeId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function q(b,c,d){var e={type:"DELETE",uri:"/api/my/Followees/coaches/{followeeId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function r(b,c,d){var e={type:"PUT",uri:"/api/my/Followees/ignored/{followeeId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function s(b,c,d){var e={type:"DELETE",uri:"/api/my/Followees/ignored/{followeeId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function t(b,c,d){var e={type:"GET",uri:"/api/my/followees/feelings/{entityType}/{entityId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}return{followers:b,followersBySource:c,follower:d,coachedFollowers:e,blockedFollowers:f,blockFollower:g,unBlockFollower:h,followees:i,followeesBySource:j,coaches:k,ignoredFollowees:l,followee:m,follow:n,unFollow:o,setCoach:p,deleteCoach:q,ignoreFollowee:r,unIgnoreFollowee:s,loadFolloweesFeelings:t}}),AC.define("AC.api.my.socialAction",["AC.request"],function(a){function b(b,c,d){var e={type:"GET",uri:"/api/my/socialaction/{actionType}/{entityType}/{entityId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function c(b,c,d){var e={type:"GET",uri:"/api/my/socialaction/{actionType}/TvShowSeason/{entityId}/episodes",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function d(b,c,d){var e={type:"GET",uri:"/api/my/socialaction/{actionType}/SeriesSeason/{entityId}/episodes",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function e(b,c,d){var e={type:"GET",uri:"/api/my/socialaction/{actionType}/ProgramSeason/{entityId}/episodes",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function f(b,c,d){var e={type:"GET",uri:"/api/my/socialaction/{actionType}/{entityType}/{entityId}/{subEntityType}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function g(b,c,d){var e={type:"PUT",uri:"/api/my/socialaction/{actionType}/{entityType}/{entityId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function h(b,c,d){var e={type:"DELETE",uri:"/api/my/socialaction/{actionType}/{entityType}/{entityId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function i(b,c,d){var e={type:"GET",uri:"/api/my/socialaction/{entityType}/{entityId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function j(b,c,d){var e={type:"GET",uri:"/api/my/socialaction/{entityType}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}return{get:b,listByTvShowSeason:c,listBySeriesSeason:d,listByProgramSeason:e,getList:f,set:g,remove:h,list:i,listByEntityType:j}}),AC.define("AC.api.my.theaterList",["AC.request"],function(a){function b(b,c){var d={type:"GET",uri:"/api/my/theater",queryInfo:b,ajaxOptions:c};return a.execute(d,!0)}function c(b,c,d){var e={type:"POST",uri:"/api/my/theater/append",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function d(b,c,d){var e={type:"POST",uri:"/api/my/theater/remove",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function e(b,c,d){var e={type:"POST",uri:"/api/my/theater/actions",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function f(b,c,d){var e={type:"GET",uri:"/api/my/theater/showtimes",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}return{list:b,append:c,remove:d,batch:e,getShowtimes:f}}),AC.define("AC.api.my.validation",["AC.request"],function(a){function b(b,c,d){var e={type:"POST",uri:"/api/my/validation/blacklist/url",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function c(b,c,d){var e={type:"POST",uri:"/api/my/validation/fields",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function d(b,c,d){var e={type:"POST",uri:"/api/my/validation/field",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}return{isBlacklistedUrl:b,isFieldsValid:c,isFieldValid:d}}),AC.define("AC.api.private.privateOpinion",["AC.request"],function(a){function b(b,c,d){var e={type:"GET",uri:"/api/private/reportabuse/opinion/workflow/{currentStatus}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!1)}function c(b,c){var d={type:"GET",uri:"/api/private/reportabuse/opinion",queryInfo:b,ajaxOptions:c};return a.execute(d,!1)}function d(b,c,d){var e={type:"POST",uri:"/api/private/reportabuse/opinion/search",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!1)}function e(b,c,d){var e={type:"GET",uri:"/api/private/reportabuse/opinion/{entityType}/{entityId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!1)}function f(b,c,d){var e={type:"GET",uri:"/api/private/reportabuse/opinion/{entityType}/{entityId}/{userId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!1)}function g(b,c,d){var e={type:"PUT",uri:"/api/private/reportabuse/opinion/{entityType}/{entityId}/{userId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!1)}return{listPossibleReviewStatus:b,list:c,search:d,listOnEntity:e,get:f,set:g}}),AC.define("AC.api.spotifyawards",["AC.request"],function(a){function b(b,c,d){var e={type:"GET",uri:"/api/spotifyawards/vote/{userSession}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!1)}function c(b,c,d){var e={type:"GET",uri:"/api/spotifyawards/participate/",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function d(b,c,d){var e={type:"PUT",uri:"/api/spotifyawards/vote/{userSession}/{refCategory}/{refSpotifyPollId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!1)}function e(b,c,d){var e={type:"PUT",uri:"/api/spotifyawards/participate",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}return{setVote:d,getUserVote:b,setParticipation:e,getUserParticipation:c}}),AC.define("AC.api.systemTools",["AC.request"],function(a){function b(b,c,d){var e={type:"POST",uri:"/api/UrlBuilder/GetUrl",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!1)}return{getUrl:b}});var P;!function(a){function b(){return new n}function c(a){return b().resolve(a).promise()}function d(a){return b().reject(a).promise()}function e(a,c){var d=b(),e=new Array;return f(e,d,a,c),d.promise()}function f(a,b,c,d){var e=c(d);if(!e)return void b.resolve(a);for(;e.next&&2==e.promise.status;)if(a.push(e.promise.result),e=c(e.next),!e)return void b.resolve(a);e.promise.done(function(d){a.push(d),e.next?f(a,b,c,e.next):b.resolve(a)}).fail(function(a){b.reject(a)})}function g(){for(var a=[],c=0;c<arguments.length-0;c++)a[c]=arguments[c+0];var d=b();if(!a.length)return d.resolve([]),d.promise();var e=0,f=[];return a.forEach(function(b,c){b.done(function(b){f[c]=b,++e,e===a.length&&1!==d.status&&d.resolve(f)}).fail(function(a){1!==d.status&&d.reject(new Error("when: one or more promises were rejected"))})}),d.promise()}function h(a){return function(){return i(a())}}function i(a){return new o(a)}function j(a,c){var d=b();return k(d,a(),c),d.promise()}function k(a,b,c){b.advance().done(function(d){return d?(c(b.current),void k(a,b,c)):void a.resolve({})}).fail(function(b){return a.reject(b)})}function l(a){return"undefined"==typeof a}a.defer=b,a.resolve=c,a.reject=d,a.unfold=e,function(a){a[a.Unfulfilled=0]="Unfulfilled",a[a.Rejected=1]="Rejected",a[a.Resolved=2]="Resolved"}(a.Status||(a.Status={}));a.Status;a.when=g;var m=function(){function a(a){this.deferred=a}return Object.defineProperty(a.prototype,"status",{get:function(){return this.deferred.status},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"result",{get:function(){return this.deferred.result},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"error",{get:function(){return this.deferred.error},enumerable:!0,configurable:!0}),a.prototype.done=function(a){return this.deferred.done(a),this},a.prototype.fail=function(a){return this.deferred.fail(a),this},a.prototype.always=function(a){return this.deferred.always(a),this},a.prototype.then=function(a){return this.deferred.then(a)},a}(),n=function(){function a(){this._resolved=function(a){},this._rejected=function(a){},this._status=0,this._error={message:""},this._promise=new m(this)}return a.prototype.promise=function(){return this._promise},Object.defineProperty(a.prototype,"status",{get:function(){return this._status},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"result",{get:function(){if(2!=this._status)throw new Error("Promise: result not available");return this._result},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"error",{get:function(){if(1!=this._status)throw new Error("Promise: rejection reason not available");return this._error},enumerable:!0,configurable:!0}),a.prototype.then=function(a){var c=b();return this.done(function(b){var d=a(b);if(d instanceof m){var e=d;return e.done(function(a){return c.resolve(a)}).fail(function(a){
return c.reject(a)}),e}c.resolve(d)}).fail(function(a){return c.reject(a)}),c.promise()},a.prototype.done=function(a){if(2===this.status)return a(this._result),this;if(0!==this.status)return this;var b=this._resolved;return this._resolved=function(c){b(c),a(c)},this},a.prototype.fail=function(a){if(1===this.status)return a(this._error),this;if(0!==this.status)return this;var b=this._rejected;return this._rejected=function(c){b(c),a(c)},this},a.prototype.always=function(a){return this.done(function(b){return a(b)}).fail(function(b){return a(null,b)}),this},a.prototype.resolve=function(a){if(0!==this._status)throw new Error("tried to resolve a fulfilled promise");return this._result=a,this._status=2,this._resolved(a),this.detach(),this},a.prototype.reject=function(a){if(0!==this._status)throw new Error("tried to reject a fulfilled promise");return this._error=a,this._status=1,this._rejected(a),this.detach(),this},a.prototype.detach=function(){this._resolved=function(a){},this._rejected=function(a){}},a}();a.generator=h,a.iterator=i;var o=function(){function a(a){this.f=a,this.current=void 0}return a.prototype.advance=function(){var a=this,b=this.f();return b.then(function(b){return l(b)?!1:(a.current=b,!0)})},a}();a.each=j,a.isUndefined=l}(P||(P={}));var AC;!function(a){!function(a){function b(a){if("undefined"==typeof a)return"";if("string"==typeof a){var b=a.toString();return-1===b.indexOf("s",b.length-1)&&(b+="s"),b}return"object"==typeof a?f(a):void 0}function c(a){var b="";return a.targetType&&a.targetType.length>0&&(b=b.concat("type["),b=b.concat(a.targetType.join(",")),b=b.concat("]")),a.genres&&a.genres.length>0&&(a.targetType&&a.targetType.length>0&&(b=b.concat(",")),a.genresExcluded&&(b=b.concat("!")),b=b.concat("genre["),b=b.concat(a.genres.join(",")),b=b.concat("]")),b}function d(a){var b="";return a.actions&&a.actions.length>0&&(b=b.concat("actions["),b=b.concat(a.actions.join(",")),b=b.concat("]")),b}function e(a){var b="",c=0;if(a.values&&a.values.length>0&&(b=b.concat("value["),b=b.concat(a.values.join(",")),b=b.concat("]")),a.rangeValues&&a.rangeValues.length>0){b.length>0&&(b=b.concat(",")),b=b.concat("value[");for(var d in a.rangeValues)b=b.concat(a.rangeValues[d].minValue+"-"+a.rangeValues[d].maxValue),c<a.rangeValues.length-1&&(b=b.concat(",")),c++;b=b.concat("]")}return b.length>0&&"undefined"!=typeof a.review&&(b=b.concat(",")),"undefined"!=typeof a.review&&(b=b.concat(a.review?"review":"!review")),b}function f(a){var b=[];if(a.pageSize&&b.push("pageSize="+a.pageSize.toString()),a.page&&b.push("page="+a.page.toString()),a.imgProc&&b.push("imgProc="+a.imgProc),a.sslForImages&&b.push("sslimages=1"),a.paginateOn&&b.push("pageOn",a.paginateOn.toString()),a.filters){var f=[],g={target:c,collection:d,opinion:e};for(var h in a.filters)g.hasOwnProperty(h)&&f.push(h+"("+g[h](a.filters[h])+")");f.length>0&&b.push("filters="+f.join(","))}if(a.options){var i=[];for(var j in a.options){var k=[];for(var l in a.options[j])a.options[j][l]&&k.push(l);l.length>0&&i.push(j+"("+k.join(",")+")")}i.length>0&&b.push("options="+i.join(","))}return b.length>0?b.join("&"):""}function g(a){var b,c,d=a.targets,e=a.actions;if(!d)return a;d[a.me]&&(a.me=d[a.me]);for(var f in d)c=d[f],c.parentEntity=c.parentEntityKey&&d[c.parentEntityKey],d[f]=c;for(var f in e){if(b=e[f],b.source=b.source||b.sourceKey&&d[b.sourceKey],b.target=b.target||b.targetKey&&d[b.targetKey],b.targetKeys){for(var g=[],h=0,i=b.targetKeys.length;i--;)c=d[b.targetKeys[i]],c&&(g[h]=c,h++);b.targets=g}e[f]=b}return a}a.toQueryString=b,a.denormalize=g}(a.social||(a.social={}));a.social}(AC||(AC={}));var AC;!function(a){!function(a){function b(a){var b=document.createElement("a");b.href=a.baseAddr,c=a,c.host=b.host,c.protocol=b.protocol}a.defer=P.defer,a.when=P.when;var c,d="\r\n",e="ACCT",f="X-AC-TOKEN",g="Content-Type",h="Accept",i="Host",j="application/http",k="application/json",l="HTTP/1.1";a.init=b;var m=function(){function b(){}return b.parseCookies=function(){for(var a,b,c=document.cookie.split("; "),d={},e=c.length;e--;)a=c[e].substring(0,c[e].indexOf("=")),b=c[e].substring(c[e].indexOf("=")+1),d[a]=b;return d},b.readCookie=function(a){var c=b.parseCookies();return c[a]?c[a]:void 0},b.parseJSON=function(a){try{return JSON.parse(a)}catch(b){return a}},b.startBatch=function(){b.batchMode=!0},b.endBatch=function(){b.batchMode&&(b.batchMode=!1,b.batch.length>0&&(b.executeBatch(b.batch),b.batch=[]))},b.executeBatch=function(a){var e,h=new XMLHttpRequest,i="",j=a[0].headers[f];h.open("POST",c.baseAddr+"/batch",!0),h.setRequestHeader(g,"multipart/mixed; boundary=batch");for(var k=1;k<a.length;k++)if(e=a[k],j!=e.headers[f]){j=void 0;break}j&&h.setRequestHeader(f,j);for(var k=0;k<a.length;k++)e=a[k],j&&delete e.headers[f],i=b.appendBatchRequest(i,e);i+="--batch--"+d,h.onreadystatechange=function(){4===h.readyState&&b.handleBatchResponse(h,a)},h.send(i)},b.appendBatchRequest=function(a,b){var e=b.method,f=b.url,h=b.parameter,i=b.headers,k=c.baseAddr,m=k.length;c.host;a+="--batch".concat(d),a+=g.concat(": ",j,"; msgtype=request",d,d),a+=e.concat(" ",f.substring(m,f.length)," ",l,d);for(var n in i)a+=n.concat(": ",i[n],d);return a+=h?d.concat(JSON.stringify(h),d):d.concat(d)},b.handleBatchResponse=function(a,c){var e,f,h=a.status,i=a.responseText,k=h>=200&&400>h,m=k?i.split(d):void 0,n="separator",o="content type",p="empty line",q="http",r="headers",s="response body",t="",u=n,v=0,w=function(a,b,c){throw"Error parsing multipart/mixed response. Expected : ".concat(c,d,"Line ",a.toString(),": ",b)};if(k)for(var x=0;x<m.length;x++)switch(u){case n:""===t?t=m[x]:0===m[x].indexOf(t+"--")?x=m.length+1:0!==m[x].indexOf(t)&&w(x,m[x],u),u=o;break;case o:m[x]!==g+": "+j+"; msgtype=response"&&w(x,m[x],u),u=p;break;case p:""!==m[x]&&w(x,m[x],u),u=q;break;case q:0!==m[x].indexOf(l)&&w(x,m[x],u),e=parseInt(m[x].substr(l.length,4),10),u=r;break;case r:""===m[x]&&(u=s);break;case s:f=c[v],e>=200&&400>e?f.defer.resolve(b.parseJSON(m[x])):f.defer.reject(b.parseJSON(m[x])),v++,u=n}else for(var y in c)c[y].defer.reject(b.parseJSON(i))},b.prototype.send=function(d,j,l){var m,n=a.defer(),o={};if(!c)throw"Options have not been set. Cannot continue.";return 0!=j.indexOf(c.protocol)&&(j.indexOf("/")&&(j="/".concat(j)),j=c.baseAddr.concat(j)),c.partner&&(j+=-1===j.indexOf("?")?"?":"&",j+="partner="+c.partner),o[i]=c.host,o[f]=b.readCookie(e),o[g]=k,o[h]=k,m={defer:n,headers:o,method:d,url:j,parameter:l},b.batchMode?b.batch.push(m):this.execute(m,n),n.promise()},b.prototype.execute=function(a,c){var d=a.method,e=a.url,f=a.parameter,g=a.headers,h=new XMLHttpRequest;h.open(d,e,!0);for(var j in g)j!==i&&h.setRequestHeader(j,g[j]);h.onreadystatechange=function(){var a=h.status,d=h.responseText;4==h.readyState&&(a>=200&&400>a?c.resolve(b.parseJSON(d)):c.reject(b.parseJSON(d)))},f?h.send(JSON.stringify(f)):h.send()},b.prototype["delete"]=function(a,b){return this.send("DELETE",a,b)},b.prototype.get=function(a){return this.send("GET",a)},b.prototype.patch=function(a,b){return this.send("PATCH",a,b)},b.prototype.post=function(a,b){return this.send("POST",a,b)},b.prototype.put=function(a,b){return this.send("PUT",a,b)},b.batchMode=!1,b.batch=[],b}();a.HttpClient=m,window&&"function"==typeof window.acSocialInit&&window.acSocialInit()}(a.social||(a.social={}));a.social}(AC||(AC={}));var AC;!function(a){!function(a){!function(a){a[a.None=0]="None",a[a.Abuse=1]="Abuse",a[a.Broadcast=2]="Broadcast",a[a.Opinion=3]="Opinion",a[a.SocialAction=4]="SocialAction",a[a.Relationship=5]="Relationship",a[a.Subscription=6]="Subscription",a[a.UserTheater=7]="UserTheater"}(a.ActionType||(a.ActionType={}));a.ActionType;!function(a){a[a.None=0]="None",a[a.Fan=1]="Fan",a[a.SeenIt=2]="SeenIt",a[a.FacebookLike=3]="FacebookLike",a[a.GoogleLike=4]="GoogleLike",a[a.Tweeter=5]="Tweeter",a[a.Helpful=6]="Helpful",a[a.Unhelpful=7]="Unhelpful"}(a.SocialActionType||(a.SocialActionType={}));a.SocialActionType;!function(a){a[a.None=0]="None",a[a.Movie=1]="Movie",a[a.Opinion=2]="Opinion",a[a.Person=3]="Person",a[a.Program=4]="Program",a[a.ProgramEpisode=5]="ProgramEpisode",a[a.ProgramSeason=6]="ProgramSeason",a[a.Publication=7]="Publication",a[a.Series=8]="Series",a[a.SeriesEpisode=9]="SeriesEpisode",a[a.SeriesSeason=10]="SeriesSeason",a[a.Theater=11]="Theater",a[a.TvChannel=12]="TvChannel",a[a.TvShow=13]="TvShow",a[a.TvShowEpisode=14]="TvShowEpisode",a[a.TvShowSeason=15]="TvShowSeason",a[a.User=16]="User",a[a.Video=17]="Video"}(a.TargetType||(a.TargetType={}));a.TargetType;!function(a){a[a.NoOpinion=-30]="NoOpinion",a[a.NotInterested=-20]="NotInterested",a[a.WantToSee=-10]="WantToSee",a[a.Rating_0=0]="Rating_0",a[a.Rating_0_5=5]="Rating_0_5",a[a.Rating_1=10]="Rating_1",a[a.Rating_1_5=15]="Rating_1_5",a[a.Rating_2=20]="Rating_2",a[a.Rating_2_5=25]="Rating_2_5",a[a.Rating_3=30]="Rating_3",a[a.Rating_3_5=35]="Rating_3_5",a[a.Rating_4=40]="Rating_4",a[a.Rating_4_5=45]="Rating_4_5",a[a.Rating_5=50]="Rating_5"}(a.OpinionValue||(a.OpinionValue={}));a.OpinionValue;!function(a){a[a.None=0]="None",a[a.Published=149001]="Published",a[a.Reported=149002]="Reported",a[a.Pending=149003]="Pending",a[a.Denied=149004]="Denied",a[a.Accepted=149005]="Accepted",a[a.Blocked=149006]="Blocked",a[a.MustBeChecked=149007]="MustBeChecked",a[a.BeingChecked=149008]="BeingChecked"}(a.ReviewStatus||(a.ReviewStatus={}));a.ReviewStatus;!function(a){}(a.SocialNetworkType||(a.SocialNetworkType={}));a.SocialNetworkType}(a.social||(a.social={}));a.social}(AC||(AC={}));var AC;!function(a){!function(a){!function(a){a[a.actions=0]="actions",a[a.targets=1]="targets"}(a.PaginateOn||(a.PaginateOn={}));a.PaginateOn;!function(a){a[a.targets=0]="targets",a[a.sources=1]="sources"}(a.GroupBy||(a.GroupBy={}));a.GroupBy}(a.social||(a.social={}));a.social}(AC||(AC={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},AC;!function(a){!function(a){function b(b,c){var d=new a.HttpClient,e=a.toQueryString(c);return e.length>0&&(e="?"+e),d.get(b.join("/")+e)}function c(b,c){var d=new a.HttpClient;return d.post(b.join("/"),c)}function d(b){var c=new a.HttpClient;return c.put(b.url,b)}function e(b){var c=new a.HttpClient;return c.patch(b.url,b)}function f(b,c){var d=new a.HttpClient;return d.post(b.join("/"),c)}function g(b){var c=new a.HttpClient;return c["delete"](b.url,b)}var h=function(){function a(){}return a}();a.SocialService=h;var i=function(c){function d(){c.apply(this,arguments),this.entryPoint="activity",this.user="my"}return __extends(d,c),d.prototype.get=function(b,c){if(b.targetType&&b.user)return b.targetId?this.getByTarget(b.user,{type:b.targetType,id:b.targetId},c):this.getByTargetType(b.user,b.targetType,c);if(b.user)return this.getAll(b.user,c);var d=a.defer();return d.reject({message:"Invalid parameters"}),d.promise()},d.prototype.getAll=function(a,c){return b([a,this.entryPoint],c)},d.prototype.getByTarget=function(c,d,e){return b([c,this.entryPoint,a.toQueryString(d.type),d.id],e)},d.prototype.getByTargetType=function(c,d,e){return b([c,this.entryPoint,a.toQueryString(d)],e)},d.prototype.getFriendsActivity=function(a,b){return a.targetType?a.targetId?this.getFriendsActivityByTarget({type:a.targetType,id:a.targetId},b):this.getFriendsActivityByTargetType(a.targetType,b):this.getFriendsActivityAll(b)},d.prototype.getFriendsActivityAll=function(a){return b([this.user,"followees",this.entryPoint],a)},d.prototype.getFriendsActivityByTarget=function(c,d){return b([this.user,"followees",this.entryPoint,a.toQueryString(c.type),c.id],d)},d.prototype.getFriendsActivityByTargetType=function(c,d){return b([this.user,"followees",this.entryPoint,a.toQueryString(c)],d)},d.prototype.getFriendsActivityAverage=function(a,b){return this.getFriendsActivityAverageByTarget({type:a.targetType,id:a.targetId},b)},d.prototype.getFriendsActivityAverageByTarget=function(c,d){return b([this.user,"followees",this.entryPoint,a.toQueryString(c.type),c.id,"average"],d)},d}(h);a.ActivityService=i;var j=function(c){function d(){c.apply(this,arguments),this.entryPoint="collections"}return __extends(d,c),d.prototype.get=function(b,c){if(b.targetType&&b.user)return b.targetId?this.getByTarget(b.user,{type:b.targetType,id:b.targetId},c):this.getByTargetType(b.user,b.targetType,c);if(b.user)return this.getAll(b.user,c);var d=a.defer();return d.reject({message:"Invalid parameters"}),d.promise()},d.prototype.getAll=function(a,c){return b([a,this.entryPoint],c)},d.prototype.getByTarget=function(c,d,e){return b([c,this.entryPoint,a.toQueryString(d.type),d.id],e)},d.prototype.getByTargetType=function(c,d,e){return b([c,this.entryPoint,a.toQueryString(d)],e)},d}(h);a.CollectionService=j;var k=function(a){function c(){a.apply(this,arguments),this.entryPoint="speednoter"}return __extends(c,a),c.prototype.init=function(a,c){return b([a,this.entryPoint,"init"],c)},c}(h);a.SpeednoterService=k;var l=function(e){function f(){e.apply(this,arguments),this.entryPoint="followees"}return __extends(f,e),f.prototype.get=function(b,c){if(b.user)return b.followeeId?this.getByTarget(b.user,b.followeeId,c):this.getAll(b.user,c);if(b.id)return this.getById(b.id,c);var d=a.defer();return d.reject({message:"Invalid parameters"}),d.promise()},f.prototype.getAll=function(a,c){return b([a,this.entryPoint],c)},f.prototype.getById=function(a,c){return b([this.entryPoint,a],c)},f.prototype.getByTarget=function(a,c,d){return b([a,this.entryPoint,c],d)},f.prototype.create=function(a){return c(["my",this.entryPoint],a)},f.prototype["delete"]=function(a){return g(a)},f.prototype.update=function(a){return d(a)},f}(h);a.FolloweeService=l;var m=function(c){function d(){c.apply(this,arguments),this.entryPoint="followers"}return __extends(d,c),d.prototype.get=function(b,c){if(b.user)return b.followeeId?this.getByTarget(b.user,b.followeeId,c):this.getAll(b.user,c);var d=a.defer();return d.reject({message:"Invalid parameters"}),d.promise()},d.prototype.getAll=function(a,c){return b([a,this.entryPoint],c)},d.prototype.getByTarget=function(a,c,d){return b([a,this.entryPoint,c],d)},d}(h);a.FollowerService=m;var n=function(d){function h(){d.apply(this,arguments),this.entryPoint="opinions"}return __extends(h,d),h.prototype.get=function(b,c){if(b.targetType&&b.user)return b.targetId?this.getByTarget(b.user,{type:b.targetType,id:b.targetId},c):this.getByTargetType(b.user,b.targetType,c);if(b.id)return this.getById(b.id,c);if(b.user)return this.getAll(b.user,c);var d=a.defer();return d.reject({message:"Invalid parameters"}),d.promise()},h.prototype.getAll=function(a,c){return b([a,this.entryPoint],c)},h.prototype.getById=function(a,c){return b([this.entryPoint,a],c)},h.prototype.getByTarget=function(c,d,e){return b([c,this.entryPoint,a.toQueryString(d.type),d.id],e)},h.prototype.getByTargetType=function(c,d,e){return b([c,this.entryPoint,a.toQueryString(d)],e)},h.prototype.create=function(a){return c(["my",this.entryPoint],a)},h.prototype["delete"]=function(a){return g(a)},h.prototype.update=function(a){return e(a)},h.prototype.report=function(a,b){return f([this.entryPoint,a,"report"],b)},h}(h);a.OpinionService=n;var o=function(d){function e(){d.apply(this,arguments)}return __extends(e,d),e.prototype.get=function(b,c){if(b.targetType&&b.user)return b.targetId?this.getByTarget(b.user,b.type,{type:b.targetType,id:b.targetId},c):this.getByTargetType(b.user,b.type,b.targetType,c);if(b.id)return this.getById(b.type,b.id,c);if(b.user)return this.getAll(b.user,b.type,c);var d=a.defer();return d.reject({message:"Invalid parameters"}),d.promise()},e.prototype.getAll=function(c,d,e){return b([c,a.toQueryString(d)],e)},e.prototype.getById=function(c,d,e){return b([a.toQueryString(c),d],e)},e.prototype.getByTarget=function(c,d,e,f){return b([c,a.toQueryString(d),a.toQueryString(e.type),e.id],f)},e.prototype.getByTargetType=function(c,d,e,f){return b([c,a.toQueryString(d),a.toQueryString(e)],f)},e.prototype.create=function(b){return c(["my",a.toQueryString(b.type)],b)},e.prototype["delete"]=function(a){return g(a)},e}(h);a.SocialActionService=o;var p=function(a){function c(){a.apply(this,arguments),this.entryPoint="users"}return __extends(c,a),c.prototype.get=function(a,c){return b([this.entryPoint,a.user],c)},c.prototype.update=function(a){return e(a)},c}(h);a.UserService=p;var q=function(d){function f(){d.apply(this,arguments),this.entryPoint="theaters",this.user="my"}return __extends(f,d),f.prototype.get=function(b,c){if(b){if("number"==typeof b)return this.getById(b,c);if("string"==typeof b)return this.getByTarget(b,c);var d=a.defer();return d.reject({message:"Invalid parameters"}),d.promise()}return this.getAll(c)},f.prototype.getShowtimes=function(a,b){return a?"number"==typeof a?this.getShowtimesByTarget(a,b):void 0:this.getAllShowtimes(b)},f.prototype.getAllShowtimes=function(a){return b([this.user,this.entryPoint,"broadcasts/movies"],a)},f.prototype.getShowtimesByTarget=function(a,c){return b([this.user,this.entryPoint,"broadcasts/movies",a],c)},f.prototype.getAll=function(a){return b([this.user,this.entryPoint],a)},f.prototype.getById=function(a,c){return b([this.entryPoint,a],c)},f.prototype.getByTarget=function(a,c){return b([this.user,this.entryPoint,a],c)},f.prototype.create=function(a){return c([this.user,this.entryPoint],a)},f.prototype.update=function(a){return e(a)},f.prototype["delete"]=function(a){return g(a)},f}(h);a.UserTheaterService=q}(a.social||(a.social={}));a.social}(AC||(AC={})),AC.define("AC.thirdParty.disqus",["AC.assets.environment","AC.resources.thirdParty.disqus","AC.thirdParty","AC.helpers.cookie","AC.helpers.review","AC.helpers.string","AC.event","AC.social.connect","AC.social.user","AC.social.path","AC.comp.modal","AC.api.my.disqus"],function(a,b,c,d,e,f,g,h,i,j,k,l){function m(){var a=$.Deferred();return t=this,r=$(u),$(function(){return g.subscribe("connect.reset",function(){d.remove(w)}),r.length?void i.doOnConnection(function(){n(a),q(),g.subscribe("content.reload",n,a)}):(a.resolve(),a.promise())}),a.promise()}function n(b){var d,e=$('script[src*="disqus.com"]');s=r.data("ac-load"),s&&s.threadId&&(window.disqus_identifier=s.threadId),window.disqus_url="https://"+a.hostnames.main+window.location.pathname+window.location.search,window.disqus_developer=v.developer,window.disqus_shortname=v.shortname,s.category&&(window.disqus_category_id=s.category),e.length?(d=$.Deferred(),e.remove(),DISQUS=null,d.done(function(){c.reload(t,s)}),o(d)):o(b)}function o(a){i.isOn()?(l.createDisqusToken().always(p,a.resolve),$(".j_disqus_login").hide()):(p(),a.resolve())}function p(c){window.disqus_config=function(){c&&c.success&&(this.page.remote_auth_s3=c.result),this.page.api_key=v.apiKey,this.sso={name:a.siteName,button:b.IMG,url:a.paths.logonPopup,logout:j.logoff,width:"676",height:"361"}}}function q(){"FR"===a.siteKey&&s&&s.threadId&&s.category&&$.get("/ws_v7/update_disqus_category.ashx",{threadIdent:s.threadId,newCategory:s.category})}var r,s,t,u="#disqus_thread",v=a.thirdParty.disqus,w="ACDT";return{source:"https://"+v.shortname+".disqus.com/embed.js",type:"widget",setup:m}}),AC.define("AC.thirdParty.facebook",["AC.assets.environment","AC.resources.thirdParty.facebook","AC.data","AC.event","AC.log","AC.social.connect","AC.context.my","AC.social.user","AC.social.SocialActionService"],function(a,b,c,d,e,f,g,h,i){function j(){u=p(x.entityType),o()}function k(a,b){m(a,b,!0)}function l(a,b){m(a,b,!1)}function m(a,b,e){var f=b._iframeName,g=$('iframe[name="'+f+'"]'),h=g&&g.attr("id"),i={id:h,action:"FacebookLike",value:e,entity:c.getEntity()};h&&d.publish("postAction",i)}function n(){var b=$.Deferred();return FB.login(function(a){var c=a.authResponse,d=c&&c.accessToken;d?b.resolve({token:d}):b.reject()},{scope:a.thirdParty.facebook.permissions}),b.promise()}function o(){$("#facebookInvitations").on("click",function(){FB.ui({method:"apprequests",message:b.INVITE_MESSAGE,filters:["app_non_users"]})})}function p(a){return"Review"===a?"Opinion":"MediaVideo"===a?"Video":a}function q(){var a=$.Deferred();return v.get({user:"my",type:w,targetType:u,targetId:x.entityId}).done(a.resolve).fail(a.reject),a.promise()}function r(a){var b=$.Deferred();return"save"===a?v.create({type:w,targetKey:u+"_"+x.entityId}).done(b.resolve).fail(b.reject):"remove"===a&&q().done(s,b.resolve).fail(b.reject),b.promise()}function s(a){var b=$.Deferred();return v["delete"](a).done(b.resolve).fail(b.reject),b.promise()}function t(){window.fbAsyncInit=function(){FB.init({appId:a.thirdParty.facebook.appId,version:a.thirdParty.facebook.version,status:!0,cookie:!0,xfbml:!0,oauth:!0}),FB.Event.subscribe("auth.statusChange",y.resolve),f.hasToken()&&FB.getLoginStatus(function(a){$.extend(AC.context.connect,{FB:{status:a.status}}),"connected"===a.status&&f.isFromSocialNetwork("FB")?h.get("FB"):(f.progress("FB"),f.isFromSocialNetwork("FB")&&f.reset())}),FB.Event.subscribe("edge.create",function(a){var b={ga:{network:"facebook",socialAction:"like",target:a}};e.track(b),h.isOn()&&r("save")}),FB.Event.subscribe("edge.create",k),FB.Event.subscribe("edge.remove",function(a){var b={ga:{network:"facebook",socialAction:"unlike",target:a}};e.track(b),h.isOn()&&r("remove")}),FB.Event.subscribe("edge.remove",l),d.subscribe("connect.reset",function(){FB.getLoginStatus(function(a){"connected"===a.status&&f.reload()})})}}var u,v=new i,w="FacebookLike",x=c.getEntity(),y=$.Deferred(),z=y.promise();return j(),{source:"//connect.facebook.net/"+a.languageCode.replace("-","_")+"/sdk.js",type:"common",xdPath:"/community/xd_receiver.htm",connect:n,setup:t,done:z.done}}),AC.define("AC.thirdParty.feedbackify",["AC.helpers.json"],function(a){function b(b){b&&b.fbyArgs&&a.isJsonString(b.fbyArgs)&&window.FBY.showTab(JSON.parse(b.fbyArgs))}return{source:"//fby.s3.amazonaws.com/fby.js",type:"widget",callback:b,objectToCheck:"FBY"}}),AC.define("AC.thirdParty.gmap",["AC.assets.environment"],function(a){return{source:"//maps.googleapis.com/maps/api/js?sensor=false&language="+a.siteKey,type:"widget"}}),AC.define("AC.thirdParty.google",["AC.assets.environment","AC.data","AC.event","AC.log","AC.social.connect","AC.helpers.cookie"],function(a,b,c,d,e,f){function g(){var a=$.Deferred();return gapi.auth.authorize({client_id:l,scope:n,immediate:!1},function(b){var d;clearTimeout(o),b?(d=h(b),d?a.resolve({token:d,IsbyAcces:!0}):a.reject()):c.publish("google.auth.request",a)}),a.promise()}function h(a){return a&&!a.error?a.access_token:void 0}function i(a){c.unsubscribe("google.auth.request"),gapi.auth.authorize({client_id:l,scope:n,immediate:!1},function(b){b&&!b.error?a.resolve({token:b.access_token,IsbyAcces:!0}):a.reject()})}function j(){l=a.thirdParty.google.appId,m=a.thirdParty.google.apiKey,n=a.thirdParty.google.permissions,k(),e.hasToken()&&(e.isFromSocialNetwork("GG")&&(f.read("ACSP")&&f.read("ACCT")?c.publish("connect.succeed",{provider:"GG"}):f.read("ACCT")?c.publish("connect.failed"):c.publish("connect.done")),e.progress("GG"))}function k(){c.subscribe("connect.reset.providerGG",function(){e.reload()}),c.subscribe("google.auth.request",i)}var l,m,n,o;return{source:"https://apis.google.com/js/client.js",type:"common",connect:g,setup:j}}),AC.define("AC.thirdParty.googlePlusOne",["AC.assets.environment","AC.data","AC.log","AC.social.user"],function(a,b,c,d){function e(){window.___gcfg={lang:a.languageCode},window.gplus_callback=function(a){"on"===a.state?d.isOn()&&b.set("googleLike"):"off"===a.state&&d.isOn()&&b.remove("googleLike")}}return{source:"//apis.google.com/js/plusone.js",type:"widget",setup:e}}),AC.define("AC.thirdParty.outbrain",function(){return{source:"//widgets.outbrain.com/outbrain.js",type:"widget"}}),AC.define("AC.thirdParty.push",["AC.thirdParty"],function(){function a(){AC.define("AC.thirdParty.push.loaded",function(){return{}}),AC.widget.load()}return{source:"https://cdn.sockjs.org/sockjs-0.3.js",objectToCheck:"SockJS",callback:a,type:"common"}}),AC.define("AC.thirdParty.taboola",function(){function a(a){window._taboola=window._taboola||[],"article"===a.contextName?window._taboola.push({article:"auto"}):"video"===a.contextName&&window._taboola.push({video:a.videoId}),window._taboola.push({mode:a.topMode,container:"taboola-"+a.topMode}),window._taboola.push({mode:a.bottomMode,container:"taboola-"+a.bottomMode})}return{source:"//cdn.taboolasyndication.com/libtrc/allocine/loader.js",type:"widget",setup:a}}),AC.define("AC.thirdParty.twitter",["AC.log","AC.helpers.url"],function(a,b){function c(){window.twttr=window.twttr||(t={_e:[],ready:function(a){t._e.push(a)}})}function d(){window.twttr.ready(e)}function e(a){a.events.bind("tweet",f),a.events.bind("click",f)}function f(c){var d,e;c&&(c.target&&"IFRAME"===c.target.nodeName&&(d=b.parse(c.target.src),d=b.parseQueryString(d.hash).url),e={ga:{network:"twitter",socialAction:"tweet",target:d}},a.track(e))}return{source:"//platform.twitter.com/widgets.js",type:"common",setup:c,callback:d,objectToCheck:"twttr"}}),AC.define("AC.thirdParty.twitterWidget",["AC.resources.thirdParty.twitter"],function(a){function b(b){var c,d={id:"jui_twitter_widget",version:2,interval:3e4,title:"",subject:"",width:290,height:300,theme:{shell:{background:"#ffffff",color:"#000000"},tweets:{background:"#ffffff",color:"#000000",links:"#1985b5"}},features:{scrollbar:!1,loop:!1,live:!0,behavior:"all"},ready:function(){var c=function(){var a=$(".twtr-tweet").length,c=0;a&&($(".jtp.twt_box").find(".j_header").text(g),$(".jtp.twt_box").removeClass("hide"),5>a&&b.search&&($(".twtr-tweet").each(function(a,b){c+=$(b).height()}),$(".jtp.twt_box").find(".twtr-timeline").height(c)),clearInterval(f))},e=function(){clearInterval(f)},f=setInterval(c,100),g="search"===d.type?b.isSeries?a.SERIES_FEED:a.FEED:b.isSeries?a.SERIES_OFFICIAL_ACCOUNT:a.OFFICIAL_ACCOUNT;setTimeout(e,2e3)}};b.rpp&&(d.rpp=b.rpp),b.search&&(d.type="search",d.search=b.search,c=new TWTR.Widget(d).render().start()),b.account&&(d.type="profile",c=new TWTR.Widget(d).render().setUser(b.account).start()),c.footerText=a.FOOTER_TEXT}return{source:"//widgets.twimg.com/j/2/widget.js",type:"widget",callback:b,objectToCheck:"TWTR"}}),AC.define("AC.widget",["AC.helpers.date","AC.helpers.error","AC.helpers.string","AC.helpers.url","AC.event","AC.context.widgets"],function(a,b,c,d,e,f){function g(){h(2,AC),i(),j.load()}function h(a,b){var c;if(a){a--;for(c in b)"widget"===c?n.push(b[c]):$.isPlainObject(b[c])&&h(a,b[c])}}function i(){e.subscribe("modal.on",j.load),e.subscribe("modal.off",j.unload),e.subscribe("infopanel.on",j.load),e.subscribe("infopanel.off",j.unload),e.subscribe("rating.delete",j.unload)}var j,k,l=".j_w",m=".",n=[],o={};return j=function(){function c(a,b){o[a]||(o[a]=[]),o[a].push(b)}function d(a,b,d,e){for(var f,g=n.length;g--;)"function"==typeof n[g][b]&&(f=n[g][b]($(a),e),d&&c(d,f))}function g(a,b){return!!(a&&f[b]&&f[b][a])}function h(c,f){var h,i;"object"===$.type(c)&&c.jquery?(h=c.find(f||l),h.length&&(i=[a.timestamp(),c[0].className].join("-"),c.data("cacheKey",i))):h=$(l),h.each(function(a,c){var e,f=$(c),h=f.data("w");if(h||(c.id?b.write("no data-w found for element id: "+c.id):b.write("no data-w found for element class attribute: "+c.className)),"string"==typeof h)g(c.id,h)||d(f,h,i);else if("object"==typeof h)for(e in h)g(c.id,e)||d(f,e,i,$.isEmptyObject(h[e])?null:h[e])}),e.publish("widget.done")}function i(a){var b,c=a.data("cacheKey"),d=o[c];if(c&&d){for(b=d.length;b--;)delete f[d[b].name][d[b].id];delete o[c]}}return{load:h,unload:i}}(),k=function(){function a(a,e,f){if("string"==typeof a&&"object"===$.type(e)){for(var g,h,i=c(a,e),j=a.indexOf(m)>-1?a.split(m)[1]:a,k=i.length;k--;)if(h=d(i[k]),h&&h[j]){g=h[j];break}return g||b.write("extension called "+a+" not found.",arguments),g(e,f)}}function c(a,c){function d(){var a;for(h.push(g+m+c.name);j--;)if(k.indexOf(m+i[j]+m)>-1||k.indexOf("generic")>-1){a=g.replace("widget",i[j]+".widget"),h.push(a+".common"),h.push(a+m+c.name);break}return h}function e(){var a;for(f(g);j--;)a=g.replace("widget",i[j]+".widget"),h.push(a+".common"),f(a);return h}function f(b){var c=a.indexOf(m)>-1&&a.indexOf("common.")>-1;c||h.push(b+m+a.split(m)[0])}var g="AC.widget.ext",h=[g+".common"],i=["social","secure"],j=i.length,k=c.namespace,l=k.indexOf("generic")>-1;return l&&-1===a.indexOf(m)&&b.write("extensions for generic widgets should be prefixed by their parent name.",arguments),l?e():d()}function d(a){var b=a.split(m),c=window,d=0;for(d;d<b.length&&c[b[d]];d++)c=c[b[d]];return c}return{extend:a}}(),$.extend({init:g},j,k)}),AC.define("AC.social.connect",["AC.assets.environment","AC.resources","AC.event","AC.api.account","AC.helpers.cookie","AC.helpers.url","AC.comp.modal","AC.social.path"],function(a,b,c,d,e,f,g,h){function i(a){var e=a.provider,f="FB"===e?"connectWithFacebook":"GG"===e?"connectWithGoogle":"connect",h=b.thirdParty.facebook;return delete a.provider,d[f](a).done(function(b){return b.result.socialNetworkAccountLinkedToOtherUserId?void g.feedback(h.SocialAccountLinkedToOtherUserAccount,{timer:1e4,title:h.SocialAccountLinkedToOtherUserAccountTitle}):b.result.token?void(b.result.isEmailValid?(s(a,e,b),c.publish("connect.succeed",{provider:e})):j(e,b)):void c.publish("connect.done")}).fail(function(){c.publish("connect.failed")}).always(function(){p(e)})}function j(a,b){var c,d;c=document.createElement("form"),c.setAttribute("method","post"),c.setAttribute("action",u[a].webController+"?returnUrl="+window.location.href),d=document.createElement("input"),d.setAttribute("type","hidden"),d.setAttribute("name","facebookCode"),d.setAttribute("value",b.result.token),c.appendChild(d),document.body.appendChild(c),c.submit()}function k(){var a,b=!0;for(a in t)if(!t[a]){b=!1;break}return b}function l(a){return a?e.read("ACSP")===a:!!e.read("ACSP")}function m(a){var b=a.name||a,c=a.entity,d=a.value,e={entity:c&&c.label};switch(c&&(c.seasonNumber&&(e.seasonNumber=c.seasonNumber),c.gender&&(e.gender=c.gender)),b){case"opinion":e.title="WantToSee"===d?"WantToSee":"NotInterested"===d?"NotInterested":"number"==typeof d?"Rating":"",e.value=d;break;case"socialAction":e.title=a.settings.action;break;case"addTheater":e.title="Theater";break;case"comment":e.title="Comment";break;case"review":e.title="Review";break;case"game":e.title="Game";break;case"followee":e.title="Followee";break;case"awardsvotes":e.title="Awards";break;default:e.title=""}return e}function n(){return!!e.read("ACCT")}function o(a){c.publish("modal.request.dialog",{content:"connection",settings:{query:a?m(a)||"":{}}})}function p(a){t[a]=!0,k()&&c.publish("connect.done",{status:n(),connectionWay:a})}function q(){var b=window.location,c=h.logoff;a.logonRequired&&(c=c.replace(b.href,a.paths.home)),b.href=c}function r(){var a=l(),b=l("GG");e.remove("ACCT"),e.remove("ACSP"),e.remove("ACID"),e.remove("ACXTUC"),c.publish("connect.reset"),b&&c.publish("connect.reset.providerGG"),a||q()}function s(a,b,c){var d={name:"ACCT",value:c.result.token};a.persist&&(d.expires={days:365}),e.write(d),"AC"!==b&&e.write({name:"ACSP",value:b})}var t={AC:!1,FB:!1,GG:!1},u={FB:{apiController:"connectWithFacebook",webController:a.hostnames.secure+"/account/logonwithfacebook"},GG:{apiController:"connectWithGoogle",webController:a.hostnames.secure+"/account/logonwithgoogle"}};return{execute:i,hasToken:n,isDone:k,isFromSocialNetwork:l,open:o,progress:p,reload:q,reset:r}}),AC.define("AC.social.path",["AC.assets.environment.hostnames","AC.helpers.string"],function(a,b){var c=[a.secure,"/account/{0}?returnUrl=",encodeURIComponent(window.location.href)].join("");return{logon:b.replace(c,"logon"),logoff:b.replace(c,"logoff"),registration:b.replace(c,"registrationmethod")}}),AC.define("AC.social.user",["AC.assets.environment","AC.resources.message","AC.helpers.cookie","AC.helpers.dom","AC.helpers.string","AC.helpers.url","AC.event","AC.social.connect","AC.social.path","AC.social.UserService","AC.social.HttpClient"],function(a,b,c,d,e,f,g,h,i,j,k){function l(){m(),AC.social.init({baseAddr:a.hostnames.secureApi,partner:a.secureSitePartnerKey
}),h.hasToken()?h.isFromSocialNetwork()||w("AC"):(h.progress("AC"),h.progress("FB"),h.progress("GG"),E())}function m(){var a=$(".j_login_required"),b=function(){t()||g.publish("user.done",{isOn:!1})};g.subscribe("connect.reset",E),g.subscribe("connect.succeed",function(a){g.unsubscribe("connect.done",b),w(a.provider)}),g.subscribe("connect.done",b),g.subscribe("user.done",C),g.subscribe("user.request.execute",function(a){p({},function(){a.action.apply(this,a.args)})}),a.length&&a.on("click",x)}function n(c){var d=a.hostnames.secure+a.paths.activation+"?returnUrl="+window.location.href;g.publish("modal.request.dialog",{content:b.activation[c].replace("(activationurl)",d)})}function o(a,b){return function(c){var d="function"==typeof b?b(c):null;d&&d.promise?d.done(a.resolve).fail(a.reject):a.resolve()}}function p(){var a=arguments,b=2===a.length?a[0]:null,c=2===a.length?a[1]:a[0],d=$.Deferred(),e=o(d,c);return t()?e():(g.subscribe("user.on",e),g.subscribe("modal.off",function(){t()||d.reject()}),h.open(b)),d.promise()}function q(a){var b=$.Deferred(),c=o(b,a);return h.isDone()&&c(),g.subscribe("user.done",c),b.promise()}function r(a,b){var c=$.Deferred(),d=o(c,b);return t()?t()&&!s()?n(a):d():p(a,function(){r(a,b)}),c.promise()}function s(){return G}function t(){return h.hasToken()&&y()}function u(a){return a===AC.context.my.id}function v(a){var b=$.Deferred(),c=o(b,a);return t()?c():g.subscribe("user.on",c),b.promise()}function w(b){var c=function(){h.progress("AC"),h.progress("FB"),h.progress("GG")};h.hasToken()&&(H.get({user:"my"}).done(F).done(A).fail(D).fail(A).always(function(a){g.publish("user.done",{isOn:"undefined"!=typeof a,connectionWay:b,userId:AC.context.my.id}),k.endBatch()}).done(c),"1"===a.secureApiBatchEnabled&&k.startBatch())}function x(){var a=$(this);return p({name:a.data("connection"),entity:AC.data.getEntity()},function(){B(a.attr("href"))}),!1}function y(){var a=AC.context.my;return!!a&&!$.isEmptyObject(a)}function z(){return h.reset(),!1}function A(a){var b="object"==typeof a&&a.hasOwnProperty("id");g.publish(b?"user.on":"user.off")}function B(a){a&&(window.location.href=a)}function C(b){b.isOn||!a.logonRequired&&!window.environmentLogonRequired||B(i.logon)}function D(){AC.context.my={}}function E(){D(),A(!1)}function F(a){if("undefined"!=typeof a){var b,d=c.read("ACID");$.extend(AC.context.my,a),b=AC.context.my.id,G=a.isEmailValidated,d&&b===d||(c.remove("ACID"),c.write({name:"ACID",value:b}))}}var G=!1,H=new j;return l(),{activate:n,doOnAction:p,doOnConnection:q,doOnVerifiedAction:r,isActive:s,isMe:u,isOn:t,get:w,getOnConnection:v,logout:z}}),AC.define("AC.social.widget.ext.actionBar.facebookLike",["AC.thirdParty.facebook","AC.social.user","AC.social.connect","AC.widget","AC.resources.actionBar.Messages"],function(a,b,c,d,e,f){function g(a){var c=$(j),d=a.action,g=a.entity,h=e[d];b.isOn()||(h=h&&h[g.entityType],h=g.isCommingSoon?h.soon:h.normal,"string"==typeof h?c.find(".j_label").append(h):c=void 0,i(c),$(".panel-control").before(c),f.animate("down"))}function h(b){var d=$(b.currentTarget),e=d.data("provider");return a.connect().done(function(a){$.extend(a,{provider:e}),c.execute(a)}),!1}function i(a){a.on("click",k,h)}var j='<div class="panel-fb-action hide"><i class="icon-fb icon-xlarge">&nbsp;</i><div class="panel-inner"><p class="fs11 j_label"></p></div><div class="breaker"></div></div>',k=".j_connect";return g}),AC.define("AC.social.widget.ext.actionBar.fan",["AC.widget","AC.resources.actionBar.Messages.fan"],function(a,b,c){function d(a){var d=$(e),f=a.entity,g=a.value,h=f.entityType,i=b[h];"string"==typeof i&&"on"===g?d.find(".j_label").append(i):d=void 0,$(".panel-control").before(d),c.animate("down")}var e='<div class="panel-write-review hide"><i class="icon-heart icon-xlarge">&nbsp;</i><div class="panel-inner"><p class="share fs11"></p><p class="fs11 j_label"></p></div><div class="breaker" /></div>';return d}),AC.define("AC.social.widget.ext.actionBar.followees",["AC.assets.environment","AC.resources.actionBar.Messages.followees","AC.helpers.string","AC.event","AC.widget","AC.social.user","AC.social.path","AC.api.my.relationship","AC.comp.spinner"],function(a,b,c,d,e,f,g,h,i,j,k){function l(){$("body").append($(B)),"inline"===x.mode?f.getOnConnection(n):f.isOn()?n():(p(),e.load($(".module-discoverfbc")))}function m(){$(".carousel_inner").find(".img_avatar").on("mouseover",t).on("mouseout",function(){$(".insert_simpletooltip .simple_tooltip").hide()})}function n(){var a,b,c=$.extend({},{entityType:w.entityType,entityId:w.entityId}),d=$.extend({},{ImgProc:"c_33_33"});return h.loadFolloweesFeelings(c,d).done(function(c){b=c.result.followeesFeelings.length,c.result.followeesCount>0?b>0?("inline"===x.mode?(a=s(c.result.followeesFeelings.splice(0,7)),v=$(E.replace("{followee}",a)),$(".carousel_inner").append(v),$(".carousel_inner").removeClass("hide")):(a=q(c.result.followeesFeelings),v=$(A.replace("{slide}",a)),$(".panel-control").before(v),j.animate("down"),$(".panel-close-tab").addClass("hide"),e.load($(".module-actionbar-panels"))),m()):v="inline"!==x.mode?o(w,"None",1):"":o(w,"Empty",3)}).fail(function(){v="inline"!==x.mode?o(w,"None",1):""}),v}function o(d,e,f){for(var h,i=1,k=g.logon,l={None:c.replace(b[d.entityType].None,d),Empty:b.Empty,Connect:b[d.entityType].Connect.replace("{url}",k)},m='<li><span><img src="'+a.emptyAvatar+'"></span></li>';f>=i;)z=z.replace("{li}",m),i++;h=$(z.replace("{msg_empty}",l[e])),$(".panel-control").before(h),j.animate("down"),$(".panel-close-tab").addClass("hide")}function p(){var a,c=b[w.entityType].Connect,d='<span class="button btn-fb btn-large margin_10b j_connect" data-provider="FB"><i class="icon-fb"></i> '+AC.resources.actionBar.Messages.DiscoverBtn+"</span>";y=y.replace("{btnFB}",d),a=$(y.replace("{msg}",c)),$(".j_actionbar").prepend(a)}function q(a){for(var b=0,c="current",d="";a.length;)d+=r(C.replace("{class}",c).replace("{pos}",b++),a.splice(0,13)),c="";return d}function r(a,b){var c;return c=s(b),a.replace("{followee}",c)}function s(b){var c,d="",e="";return $.each(b,function(b,f){var g=f.followee,h=a.paths.USER_HOME.replace("{0}",g.userId);e=g.badges?$.map(g.badges,function(a){return a.label.replace("Club 300",'Club<em class="acy">300</em>')}).join(", "):"","Review"===f.feeling.type&&(h=a.paths.review[w.entityType].replace("{userId}",g.userId).replace("{entityId}",w.entityId)),c={badge:e,pseudo:g.nickName},d+=D.replace("{img_avatar}",g.avatar).replace("{url}",h).replace("{tooltip}",JSON.stringify(c)).replace("{feelings}",u(f.feeling,g.userId))}),d}function t(a){var b,c,d,e,f,g=$(a.currentTarget);e=g.offset(),b=e.top-33,d=e.left+16,f=g.data("tooltip"),$(".insert_simpletooltip").find(".j_text").html(f.badge?f.pseudo+"- "+f.badge:f.pseudo),c=$(".insert_simpletooltip .simple_tooltip").outerWidth(),$(".insert_simpletooltip .simple_tooltip").css({left:d+"px",top:b+"px",bottom:"auto","margin-left":-(c/2)+"px"}).show()}function u(b,c){var d,e={ReviewRate:'<p><a href="{url}" class="child_vam"><i class="icon-small-pen">&nbsp;</i> <span>{note}</span></a></p>',OpinionRate:'<p class="child_vam"><i class="icon-small-star">&nbsp;</i> <span>{note}</span></p>',OpinionUp:'<p><i class="icon-small-thumbs-up">&nbsp;</i> &nbsp;</p>',OpinionDown:'<p><i class="icon-small-thumbs-down">&nbsp;</i> &nbsp;</p>',Fan:'<p><i class="icon-small-heart">&nbsp;</i> &nbsp;</p>',FacebookLike:'<p><i class="icon-small-fb">&nbsp;</i> &nbsp;</p>'},f="";return"slide"===x.mode&&("Opinion"===b.type||"Review"===b.type?"-1"===b.value?f=e.OpinionDown:"-2"===b.value?f=e.OpinionUp:(d=a.paths.review[w.entityType].replace("{userId}",c).replace("{entityId}",w.entityId),f=e[b.type+"Rate"],f=f.replace("{note}",b.value).replace("{url}",d)):f=e[b.type]),f}var v,w=j.entity,x=$.extend({},k,j.settings),y='<div class="module-discoverfbc hide"><div class="module-discoverfbc-inner j_w" data-w="login"><div class="close"></div><p>{msg}</p>{btnFB}</div></div>',z='<div class="panel-content panel-list-users hide"><ul class="fl margin_20r">{li}</ul><div><p class="lighten_hl fs11">{msg_empty}</p></div></div>',A='<div class="panel-content hide panel-friends j_w" data-w="carousel" data-carousel=\'{"pagerMode" : "bullet", "isCircular" : false, "hideDisabledNav" : true }\'><div class="prev"><span class="prev">previous</span></div><div class="next"><span >next</span></div><div class="carousel_inner pos_rel"><div class="slider pos_rel">{slide}</div></div><ul class="slide-pos j_page"></ul></div>',B='<div class="insert_simpletooltip"><span class="simple_tooltip st_arrow_b"><span></span><b class="j_text"></b></span></div>',C='<div class="slide j_goto {class}" data-goto=\'{"slide":{pos} }\'><ul>{followee}</ul></div>',D='<li class="lighten_hl"><a href="{url}" ><img src="{img_avatar}" class="img_avatar" data-tooltip=\'{tooltip}\' /></a>{feelings}</li>',E='<ul class="list-avatar-users">{followee}</ul>';return"inline"===x.mode&&l(),l}),AC.define("AC.social.widget.ext.actionBar.notInterested",["AC.social.user","AC.widget","AC.resources.actionBar.Messages"],function(a,b,c,d){function e(a){var b=$(f),e=a.action,g=a.entity,h=a.value,i=c[e];i=i&&i[g.entityType],"on"===h?b.find(".j_label").append(i):b=void 0,$(".panel-control").before(b),d.animate("down")}var f='<div class="panel-write-review hide"><i class="icon-thumbs-down icon-xlarge">&nbsp;</i><div class="panel-inner"><p class="share fs11"></p><p class="fs11 j_label"></p></div><div class="breaker"></div></div>';return e}),AC.define("AC.social.widget.ext.actionBar.rating",["AC.social.user","AC.widget","AC.resources.actionBar.Messages.rating","AC.assets.environment.paths.writeReview","AC.helpers.string"],function(a,b,c,d,e,f){function g(a){var b,g,i,j,k=a.value,l=a.entity,m=l.entityType,n=0,o=c.length,p=d[m];if(!k)return void 0;for(;o>n;n++)if(j=c[n],k<=j.value){g=j.text,i=j.icon;break}"string"==typeof g&&"string"==typeof p?(g=g.replace("{url}",e.replace(p,l)),b=$(h.replace("{icon}",i)),b.find(".j_label").append(g)):b=void 0,$(".panel-control").before(b),f.animate("down")}var h='<div class="panel-write-review hide"><i class="{icon} icon-xlarge">&nbsp;</i><div class="panel-inner"><p class="share fs11"></p><p class="fs11 j_label"></p></div><div class="breaker"></div></div>';return g}),AC.define("AC.social.widget.ext.actionBar.wantToSee",["AC.social.user","AC.widget","AC.resources.actionBar.Messages","AC.assets.environment.paths.wantToSee"],function(a,b,c,d,e){function f(a){var b=$(g),f=a.action,h=a.entity,i=a.value,j=c[f];j=j&&j[h.entityType],j=j.replace("{url}",d[h.entityType]),"string"==typeof j&&"on"===i?b.find(".j_label").append(j):b=void 0,$(".panel-control").before(b),e.animate("down")}var g='<div class="panel-write-review hide"><i class="icon-thumbs-up icon-xlarge">&nbsp;</i><div class="panel-inner"><p class="share fs11"></p><p class="fs11 j_label"></p></div><div class="breaker"></div></div>';return f}),AC.define("AC.widget.ext.common.button",["AC.ui","AC.event","AC.social.user","AC.widget","AC.comp.spinner"],function(a,b,c,d,e,f,g){function h(){u=z.value,t={on:{func:m,tooltip:"alternateLabel"},off:{func:o,tooltip:"label"},disabled:{func:k,tooltip:null}},y.is(A)||(y=f.$widget.find(A)),i(),z.display&&(r=d.extend("button"+z.display,f,z))}function i(){y.off("click").on("click",q)}function j(a,b,c){if(s=a,"function"!=typeof t[s].func)throw new Error('Wrong action argument, should be "on", "off", or "disabled".');t[s].func(b),b&&y.find(".j_label").text(b),r&&r.render(s,b),n(c||t[s].tooltip)}function k(){y.removeClass(v).addClass(w).off("click",q)}function l(){return u}function m(){i(),y.removeClass(w).addClass(v)}function n(b){a.tooltip(y.find(".simple_tooltip"),b)}function o(){y.removeClass(v+" "+w),i()}function p(a){b.publish(a,{id:f.id,action:u,value:s,entity:f.entity})}function q(){var a=e(y);return c.doOnAction(f,function(){return p("preAction"),f.save(u,s)}).always(function(){a.hide()}).done(function(){p("postAction")}),!1}var r,s,t,u,v="btn-on",w="btn-disabled",x=".btn-social,.btn-link,.btn-useful-y,.btn-useful-n,.btn-primary",y=f.$widget,z=$.extend({id:"",value:""},g),A=z.baseSelector||x;return h(),{render:j,getValue:l}}),AC.define("AC.widget.ext.common.buttonCount",["AC.event","AC.widget","AC.helpers.string"],function(a,b,c,d,e){function f(a){var b=0;k[l+"Count"]||(k[l+"Count"]=0),"disabled"!==a&&m!==a&&(b="on"===a?1:"on"===m?-1:0,k[l+"Count"]+=b,m=a)}function g(a){f(a),i.empty().append(k[l+"Count"].toFixed().toLocaleString()),"disabled"!==a?j.removeClass("hide"):j.addClass("hide")}var h="span.j_label",i=d.$widget.find(h),j=d.$widget.find(".simple_tooltip"),k=d.entity,l=c.toLowerCamelCase(e.value),m="off";return{render:g}}),AC.define("AC.widget.ext.common.filters",["AC.resources","AC.context"],function(a,b,c,d){function e(b){var c="";$(d.noResultSelector).length>0&&(b>0?$(d.noResultSelector).addClass("hide"):$(d.noResultSelector).removeClass("hide")),"undefined"!=typeof $("[data-results-count]",h)&&(c=$("[data-results-count]",h).data("results-count"),"undefined"!=typeof a.social.collection[c+(b>1?"Plural":"Singular")]&&$("[data-results-count]",h).text(b+" "+a.social.collection[c+(b>1?"Plural":"Singular")]))}function f(){g=this,h=$(d.widgetSelector),g.values={},g.hasFilter=!1,h.on("refreshFilters",function(){i.refreshFilters()}),$(".myacEraseCriteria .trash").on("click",function(){g.hasFilter===!0&&($("[data-filter-name]",h).each(function(){$("[data-filter-name="+$(this).data("filter-name")+"]").trigger("delete",!0)}),i.refreshFilters())})}var g,h,i={getValues:function(){var a={};return $("[data-filter-name]",h).each(function(){"undefined"!=typeof $(this)&&"undefined"!=typeof $(this).data("value")&&(a[$(this).data("filter-name")]=$(this).data("value"))}),a},refreshFilters:function(){var a,b;g.values={},g.hasFilter=!1,g.filterCount=0,"undefined"!=typeof d.listSelector&&(a=$(d.listSelector),a.html(""),$("[data-filter-name]",h).each(function(){"undefined"!=typeof $(this).data("text")&&null!==$(this).data("text")&&(b=$(this).data("value"),b.constructor==={}.constructor?$.each(b,function(a,b){g.values[a]=b}):g.values[$(this).data("filter-name")]=b,g.hasFilter=!0,g.filterCount++,$(".myacEraseCriteria .trash").removeClass("hide"),a.append('<span class="button btn-rounded btn-deselect btn-medium"><span>'+$(this).data("text")+'</span><b data-filter-delete="'+$(this).data("filter-name")+'"><i class="icon-cross"></i></b></span>'))}),g.filterCount<=1&&$(".myacEraseCriteria .trash").addClass("hide"),h.attr("data-nofilters",!g.hasFilter),$("[data-filter-delete]",a).on("click",function(){$("[data-filter-name="+$(this).data("filter-delete")+"]").trigger("delete")}),"undefined"!=typeof d.parentSelector&&c.loadList(g.values,!0))}};return f(),{resultCount:e}}),AC.define("AC.widget.ext.common.infinitescroll",["AC.event"],function(a,b,c){function d(){r.off("scroll",j)}function e(a){o.append(a)}function f(a){switch(v=a){case t:p.is(":visible")||p.removeClass("hide");break;case u:p.is(":visible")&&p.addClass("hide")}}function g(a){"undefined"!=typeof x.url&&(f(t),$.getJSON(x.url,a,function(a){a&&"undefined"!=typeof a.html&&a.html&&"undefined"!=typeof a.count?(e(a.html),f(u),b.resultCount(a.count)):(d(),f(u),a&&"undefined"!=typeof a.count?b.resultCount(a.count):b.resultCount(0))}).fail(function(){f(u),d(),b.resultCount(0)}))}function h(a,b){var c;return b&&(y=0,o.empty(),w=null,k()),x.page=++y,a&&(w=a),c=w?$.extend(w,x):x,g(c)}function i(){l=this,n=b.$widget,m=n.find("[data-infinitescroll]"),o=m.find("ul"),p=m.find(".infiniteloader"),x=$.extend(x,c),q="undefined"!=typeof c.threshold?c.threshold:100,k()}function j(){o.length>0&&o.offset().top+o.outerHeight()-r.innerHeight()-r.scrollTop()<=q&&(v===s||v===u)&&h()}function k(){$(window).on("scroll",j)}var l,m,n,o,p,q,r=$(window),s=0,t=1,u=2,v=s,w=null,x={page:1},y=1;return i(),{loadMore:h}}),AC.define("AC.social.widget.ext.common.share",["AC.assets.environment","AC.resources.share","AC.helpers.string","AC.helpers.url","AC.social.user","AC.social.widget.shareOnTwitter","AC.comp.modal","AC.thirdParty.facebook","AC.log"],function(a,b,c,d,e,f,g,h,i,j,k){function l(){var a;$.extend(G,k),A=G.args,a=G.shareUrlArgs,B=G.entity||j.entity,C=G.entity||j.entities,z=G.sharingMode,E=G.$content,E?E.find(".share").append(K):E=j.$widget,y=B&&B.userId?e.isOn()&&e.isMe(B.userId)?b.my:b.his:b.my,F=E.find(".j_gen_post"),o(),a&&a.needConnectedUser?e.getOnConnection(function(){p(a,C)}):p(a,C),x(),m()}function m(){E.off("click touchstart",".fb_post").on("click touchstart",".fb_post",r).off("click touchstart",".twt_post").on("click touchstart",".twt_post",t).off("click touchstart",".gg_post").on("click touchstart",".gg_post",u).off("click touchstart",".j_gen_select").on("click touchstart",".j_gen_select",v)}function n(a){D=a}function o(){for(var a=[],b=0;C&&b<C.length;b++)a[C[b].entityType]=C[b];D=$.extend({value:A.value},a)}function p(a,b){a.directUrl?G.shareUrl=a.directUrl:a.route&&(G.shareUrl=d.getUrl(a.route,b,!0)),a.sharePic&&(G.sharePic=a.sharePic),F.length&&F.val(G.shareUrl)}function q(a){for(var b="",c=0;C&&c<C.length;c++)if(b=a[C[c].entityType])return b;return b}function r(){var a,b=D&&D.Value?D.Value:0;return E.find(H).length>0?a=E.find(H).val():y[A.action]&&(a=y[A.action].facebook.plural?b>1?c.replace(q(y[A.action].facebook.plural),D):c.replace(q(y[A.action].facebook.singular),D):c.replace(q(y[A.action].facebook),D)),FB.getLoginStatus(function(a){"connected"===a.status?s():"unknown"===a.status&&FB.login(function(){s()})}),!1}function s(){var c=G.shareUrl,d={method:"feed",link:c,caption:a.hostnames.main};FB.ui(d,function(a){a&&(g.feedback(b.post,{title:b.postTitle}),w())})}function t(){var a,b=G.shareUrl;return E.find(H).length>0?a=E.find(H).val():y[A.action]&&(a=D.value&&y[A.action].twitter.plural?D.value>1?c.replace(q(y[A.action].twitter.plural),$.extend({url:b},D)):c.replace(q(y[A.action].twitter.singular),$.extend({url:b},D)):c.replace(q(y[A.action].twitter),$.extend({url:b},D))),a&&a.indexOf(b)>-1?f({text:a}).share():f({text:a,url:b}).share(),!1}function u(){var a,b,c=G.shareUrl,d=window.screen.width,e=$(document).screenX,f=d>e?(d-500)/2:d+(d-500)/2,g=(window.screen.height-250)/2;return a=J+encodeURIComponent(c),b="resizable=yes,width=500, scrollbars=yes, height=250, left="+f+",top="+g,window.open(a,"google",b),!1}function v(){F.select()}function w(){var a={ga:{network:"facebook",socialAction:"share",target:window.location.href}};i.track(a)}function x(){var a=E.find(I);a.length>0&&h.done(function(){FB.api("/","get",{id:G.shareUrl},function(c){var d=c&&c.share,e=d&&d.share_count||0,f=e>1?b.shareCount.plural:b.shareCount.singular;e>0?a.html(e+" "+f).show():a.hide()})})}var y,z,A,B,C,D,E,F,G={args:{action:"",value:""},shareUrl:window.location.protocol+"//"+window.location.href.substring(window.location.href.indexOf(a.hostnames.main),window.location.href.length),shareUrlArgs:{route:"",args:[],needConnectedUser:!0},$content:void 0},H=".j_share-message",I=".j_share-count",J="https://plus.google.com/share?url=",K=AC.resources.actionBar.shareBtn+'<a href="#" class="lighten_hl margin_10h e_over fb_post"><i class="btn_fb_2 margin_5r">&nbsp;</i>Facebook</a><a href="#" class="lighten_hl margin_10h e_over twt_post"><i class="btn_twt_2 margin_5r">&nbsp;</i>Twitter</a><a href="#" class="lighten_hl margin_10h e_over gg_post"><i class="btn_gg_2 margin_5r">&nbsp;</i>Google</a>';return l(),{init:l,setShareMessageArgs:n,setShareUrl:p}}),AC.define("AC.widget.ext.itemlist.mycollection",["AC.helpers.string","AC.helpers.xiti","AC.helpers.url","AC.resources","AC.event","AC.context.my","AC.ui.tooltip"],function(a,b,c,d,e,f,g,h,i){function j(c){var d,e={profile:c.profile,entitytype:"movies",child:"",filter:""},f=!1;switch(c.routeName){case"myuserspace_collection":case"community_profile":e.entitytype="movies";break;case"myuserspace_collection_series":case"public_collection_series":e.entitytype="series";break;case"myuserspace_collection_star":case"public_collection_star":e.entitytype="stars";break;case"myuserspace_collection_video":case"public_collection_video":e.entitytype="shows";break;default:e.entitytype="movies"}"1"===c.child&&(e.child+="_seasons"),"undefined"!=typeof c.wantToSee&&(e.filter+="by_want_to_see",f=!0),c.minRate&&c.maxRate&&(e.filter+=f?"_":"",e.filter+="by_one_rating",f=!0),c.review&&(e.filter+=f?"_":"",e.filter+="by_review",f=!0),c.fan&&(e.filter+=f?"_":"",e.filter+="by_fan",f=!0),c.sort&&1===c.sort&&(e.filter+=f?"_":"",e.filter+="by_date",f=!0),c.sort&&3===c.sort&&(e.filter+=f?"_":"",e.filter+="by_ratings"),""===e.filter&&(e.filter="main_page"),d=a.replace(A,e),window.xtparam&&b.refreshTraficTags(d)}function k(a){var b,c,d=t.find(".j_itemlist_container li.collectionitem:not(.childrenitem)").index(a);"undefined"!=typeof y.page&&"undefined"!=typeof x[y.page].hits&&1===z&&(b=x[y.page].hits[d],b&&(c=a.parent(".posterList").next(".inlay"),c.find(".parentactivity").html(a.find(".parentactivity").html()),c.find(".parentname").text(a.find(".parentname").text()),c.find(".parentlink").attr("href",a.find(".parentlink").attr("href")),b.childrenHtml&&c.find(".childPosterList").html(b.childrenHtml)))}function l(a){a.addClass("ready"),setTimeout(function(){a.parents(".posterList").next(".inlay").slideDown(300)},100),setTimeout(function(){a.parents(".posterList").next(".inlay").addClass("ready")},100)}function m(a){a.parent(".posterList").next(".inlay").removeClass("ready"),setTimeout(function(){a.parents(".posterList").next(".inlay").slideUp(300)},100),setTimeout(function(){a.removeClass("ready")},300)}function n(){t.on("click",".acfilter",function(){var a=$(this).find(".subfilterdrop");return a.is(":visible")?(a.addClass("hide"),a.hide()):(a.show(),a.removeClass("hide")),!1}).on("click",".subfilterdrop li",function(){return $(".selecttext",t).text($(this).text()),$(this).parents(".subfilterdrop").hide(),!1}).on("slide",".slider-handles",function(){var a,b,c,e,f,g,h,i;if(void 0===$(this).attr("disabled"))for($(this).addClass("noUi-selected"),a=$(this).val(),b=parseFloat(a[0]),c=parseFloat(a[1]),e=Math.ceil(a[0]),f=Math.floor(a[1]),u.find("b").text(d.rating.labels[b]),v.find("b").text(d.rating.labels[c]),g=4*e,h=20-4*f,$(".noUi-pips .noUi-value").removeClass("active"),i=0;20>i;i++)$(".noUi-pips > div:nth-child(n+"+g+"):nth-last-child(n+"+h+")").addClass("active")}).on("set",".slider-handles",function(){var a=parseFloat($(this).val()[0]),b=parseFloat($(this).val()[1]);$(this).data("value",{minRate:10*a,maxRate:10*b}),a===b?$(this).data("text",d.social.collection.filtersFixStars.replace("#minRange",a).replace("#maxRange",b)):$(this).data("text",d.social.collection.filtersBetweenStars.replace("#minRange",a).replace("#maxRange",b)),$(this).hasClass("noUi-selected")&&$("[data-w=filters]",t).trigger("refreshFilters")}).on("delete",".slider-handles",function(a,b){$(this).removeClass("noUi-selected").val([.5,5]).data("text",null).data("value",null).find(".noUi-pips .noUi-value").removeClass("active"),u.find("b").text(d.rating.labels[.5]),v.find("b").text(d.rating.labels[5]),b!==!0&&$("[data-w=filters]",t).trigger("refreshFilters"),a.stopPropagation()}).on("delete","[data-filter-name=review]",function(a){$(this).find(".selecttext").text($(this).find("[data-radio-option]").first().text()),a.stopPropagation()}).on("click",".posterList > li.piled a",function(a){var b=$(this).parents("li.piled"),c=b.offset(),d=b.width(),e=$(".cover-sheet").offset(),f=24,g=c.left-e.left+d/2-f/2;$(window).width()<B||(a.preventDefault(),1===z?(b.hasClass("ready")?(m(b),z=0):(m($(".profile-box .posterList > li")),setTimeout(function(){b.parent(".posterList").next(".inlay").find("b").css("left",g+"px"),l(b)},400),z=1),setTimeout(function(){k(b)},400)):(b.parents(".posterList").next(".inlay").find("b").css("left",g+"px"),l(b),z=1,k(b)))}).on("click",".inlay .close",function(){m($(".posterList > li.collectionitem.ready",t)),z=0}).on("click",".sort_panel a",function(){var a,b=$(this),c=b.parents("ul").find("li"),d=$(this).data("sort");return a=w.data&&("0"===w.data.order||"0"!==w.data.order&&d!==w.data.sort&&0===$(this).data("sort-order"))?"1":"0",c.removeClass("active"),b.parent("li").addClass("active"),b.removeClass("sort_down sort_up").addClass("1"===a?"sort_down":"sort_up"),w.data.order=a,w.data.sort=d,h.manageLoader("display"),s(void 0,{sort:d,order:a,cursor:""},!0),!1}).on("click",".activity-ribbon",function(){location.href=$(this).next(".poster").find("a").attr("href")})}function o(){var a,b;t=h.$widget,"function"==typeof $("div").noUiSlider&&(a=$(".slider-handles",t).noUiSlider({start:[.5,5],range:{min:.5,"11.11%":1,"22.22%":1.5,"33.33%":2,"44.44%":2.5,"55.55%":3,"66.66%":3.5,"77.77%":4,"88.88%":4.5,max:5},step:1,connect:!0,snap:!0}),b=a.prev(".jui.simple_tooltip").css("margin-left","-30px"),b.length>0&&(a.find(".noUi-handle").addClass("e_over").prepend(b),u=a.find(".noUi-handle.noUi-handle-lower .jui.simple_tooltip"),v=a.find(".noUi-handle.noUi-handle-upper .jui.simple_tooltip"),u.find("b").text(d.rating.labels[.5]),v.find("b").text(d.rating.labels[5]),a.prev(".jui.simple_tooltip").remove())),"function"==typeof $("div").noUiSlider_pips&&($(".slider-handles",t).noUiSlider_pips({mode:"range",density:10}),$(".slider-handles .noUi-base").append($(".slider-handles .noUi-pips"))),n()}function p(a,b){x[b]=a,!a.cursor||""===a.cursor||y.cursor&&y.cursor===a.cursor||(y.cursor=a.cursor)}function q(a,b){"undefined"==typeof b?h.initDataDone(a):h.changePageDone(a)}function r(a){var b=$(".noresultalert",t);a&&("private"===a.profile||"public"===a.profile&&f.id.toLowerCase()===a.userId.toLowerCase())&&b.hasClass("hide")&&b.removeClass("hide")}function s(a,b,c){$("html,body").animate({scrollTop:t.offset().top-60},"fast"),"undefined"==typeof a&&(x=[],("undefined"==typeof c||c!==!0)&&(y=$.extend(!0,{},w.data))),y.page=a?a:1,"undefined"==typeof x[a]?"undefined"!=typeof y.routeName&&"undefined"!=typeof y.userId&&"undefined"!=typeof y.profile&&"undefined"!=typeof y.url&&(b&&(y=$.extend(y,b)),j(y),""===y.sort&&""===y.order&&($(".sort_panel li:first",t).addClass("active"),$(".sort_panel li:first a",t).addClass("sort_down")),$.getJSON(y.url,y,function(b){$(".noresultalert",t).hasClass("hide")||$(".noresultalert",t).addClass("hide"),"undefined"==typeof b.total&&(b.total=0,e.subscribe("user.done",function(){r(y)}),r(y)),b.total>1&&($("#myAcFilterTrigger",t).removeClass("hide"),$(".sort_panel",t).removeClass("hide")),p(b,y.page),q(b,a),g(".jsu")})):q(x[a],a)}var t,u,v,w=$.extend({},i,h.settings),x=[],y={page:1},z=0,A="my_website::my_library_{profile}::{entitytype}::{filter}_{entitytype}{child}_my_library",B=768;return o(),{getData:s}}),AC.define("AC.widget.ext.itemlist.pager",["AC.template"],function(a,b,c){function d(){h=b.$widget,i=j.container,o=$.extend(o,j),"undefined"!=typeof o.nbtotal&&"undefined"!=typeof o.itemperpage&&(o.pagetotal=Math.floor(o.nbtotal/o.itemperpage)+(o.nbtotal%o.itemperpage>0?1:0)),g(),f()}function e(){o.pageindex<=1?$(m,h).addClass("btn-disabled"):o.pageindex>=o.pagetotal?$(l,h).addClass("btn-disabled"):($(m,h).removeClass("btn-disabled"),$(l,h).removeClass("btn-disabled"))}function f(){h.on("click",n,function(){return o.pageindex=parseInt($(this).data("index"),10),b.changePage(o.pageindex),g(),!1}).on("click",m,function(){return o.pageindex=o.pageindex-1,b.changePage(o.pageindex),g(),!1}).on("click",l,function(){return o.pageindex=o.pageindex+1,b.changePage(o.pageindex),g(),!1})}function g(){"undefined"!=typeof j.pagertemplatename&&(k=a.setup(j.pagertemplatename)),null!==k&&o.pageindex<=o.pagetotal&&o.pagetotal>1?(i.show(),i.html(k(o)),e()):o.pagetotal<=1&&i.hide()}var h,i,j=$.extend({},c,b.settings),k=null,l=".j_pager_next:not(.btn-disabled)",m=".j_pager_prev:not(.btn-disabled)",n=".pagerbtn",o={pageindex:1,pagetotal:0};return d(),{}}),AC.define("AC.widget.ext.itemlist.speednoter",["AC.event","AC.assets.environment"],function(a,b,c,d){function e(){j=c.$widget,k=new ACLight.Url(b.paths.esSearch),k.qs.q=l.term,k.qs.include="person",k.qs.nosponso=1,k.qs.from=0,k.qs.withtotal=1,k.qs.size=l.itemperpage}function f(a,b){"undefined"==typeof m[b]&&(m[b]=a)}function g(a,b){"undefined"==typeof b?c.initDataDone(a):c.changePageDone(a)}function h(a){var b;if("undefined"!=typeof a&&"undefined"!=typeof a.hit)for(b=0;b<a.hit.length;++b)"undefined"==typeof a.hit[b].poster&&(a.hit[b].poster=l.emptyposter);return a}function i(a){"undefined"!=typeof a&&(k.qs.from=l.itemperpage*(a-1)),"undefined"==typeof m[k.qs.from]?$.getJSON(k.toString(),function(b){var c=h(b);f(c,k.qs.from),g(c,a)}):g(m[k.qs.from],a)}var j,k,l=$.extend({},d,c.settings),m=[];return e(),{getData:i}}),AC.define("AC.widget.ext.itemlist.theater",["AC.event","AC.assets.environment"],function(a,b,c,d){function e(){k=c.$widget,l=new ACLight.Url(b.paths.esSearch),l.qs.q=m.term,l.qs.include="theater",l.qs.nosponso=1,l.qs.from=0,l.qs.withtotal=1,l.qs.size=m.itemperpage,"undefined"!=typeof m.refreshEvent&&a.subscribe(m.refreshEvent,function(a){i(a.term)})}function f(a,b){"undefined"==typeof n[b]&&(n[b]=a)}function g(a,b){"undefined"==typeof b?c.initDataDone(a):c.changePageDone(a)}function h(a){return a}function i(a){c.changeTerm(a),l.qs.q=a,j()}function j(a){"undefined"!=typeof a&&(l.qs.from=m.itemperpage*(a-1)),"undefined"==typeof n[l.toString()]?$.getJSON(l.toString(),function(b){var c=h(b);f(c,l.toString()),g(c,a)}):g(n[l.toString()],a)}var k,l,m=$.extend({},d,c.settings),n=[];return e(),{getData:j,refreshData:i}}),AC.define("AC.social.widget.ext.login.ac",["AC.assets.environment","AC.helpers.url","AC.event","AC.validation","AC.social.path"],function(a,b,c,d,e,f){function g(){i(),d.init(m),j(),l()}function h(){var a=$.Deferred(),b={email:$("#email_id").val(),password:$("#pass_id").val(),persistent:$("#stay_connected_id").is(":checked")};return m.find(q).addClass("hide"),d.validate(b).done(function(c){c?a.resolve(b):a.reject()}),a.promise()}function i(){var a,b=$(o);b.each(function(b,c){a=$(c),a.css({top:a.prevAll(p).position().top+"px"})})}function j(){n.title&&m.find(s).html(n.title),m.find(r).attr("href",e.registration)}function k(){m.find(q).removeClass("hide")}function l(){"modal"===n.source&&c.subscribe("user.on",function(){c.publish("modal.request.close")})}var m=f.$widget,n=f.settings,o=".field-validation-error",p=".form_line",q=".validation-summary-errors",r=".j_no_account",s=".j_title";return g(),{connect:h,renderError:k}}),AC.define("AC.social.widget.ext.login.fb",["AC.context.connect","AC.event","AC.thirdParty.facebook"],function(a,b,c,d){function e(){a.FB&&"not_authorized"===a.FB.status&&(h.find(".check_list").remove(),FB.XFBML.parse(h[0]))}function f(){return g(),c.connect()}function g(){d.settings.shouldReload&&b.subscribe("user.on",function(){window.location.reload()})}var h=d.$widget;return e(),{connect:f,renderError:function(){}}}),AC.define("AC.social.widget.ext.login.gg",["AC.thirdParty.google"],function(a){function b(){return a.connect()}return{connect:b,renderError:function(){}}}),AC.define("AC.social.widget.ext.modal.reportAbuse",["AC.resources.global","AC.event","AC.social.user","AC.social.OpinionService"],function(a,b,c,d){function e(){$("#reason").val(""),f()}function f(){$("#submitReport").click(i)}function g(){$(".overlay_errordetailcheckbox").each(function(){$(this).removeClass("overlay_errordetailcheckbox")}),h()}function h(a){a?$("#overlay_error_content > div.olconfirmactionzone").html(a).parent().removeClass("hide"):$("#overlay_error_content > div.olconfirmactionzone").parent().addClass("hide")}function i(){return c.doOnAction(function(){var c=$.Deferred(),d=$("#abuse").data("type"),e=$("#abuse").data("entity"),f=$("#abuse").data("opinion"),i=$("#reason").val(),m=i?i.length<j?a.validation.TOO_SHORT.replace("$min",j):i.length>k?a.validation.TOO_LONG.replace("$max",k):"":a.validation.EMPTY;return g(),m?(h(m),!1):(l.report(f,{targetType:d,targetId:e,value:i}).done(function(){c.resolve(),window.setTimeout(function(){b.publish("modal.request.close")},1e3)}).fail(function(){c.reject(),h(a.ERR_DEFAULT)}),c.promise())}),!1}var j=10,k=100,l=new d;return e(),{}}),AC.define("AC.social.widget.ext.myList.episode",["AC.assets.environment","AC.helpers.string","AC.resources.list","AC.api.my.socialAction","AC.api.my.opinion"],function(a,b,c,d,e,f,g){
function h(){n=f.$widget,$(r).template(s),o=q[p.entityType]}function i(a){var b=a.pageIndex;return d.listByEntityType({entityType:o},a).done(function(a){k(a.result.items,b)}).fail()}function j(a){return d.remove({actionType:"SeenIt",entityType:"SeriesEpisode",entityId:a})}function k(a,d){var e=n.find(".j_items:first"),f=[],g=[],h=a.length;for(n.find(".j_items").find('.j_pagedlist_item[data-page="'+d+'"]').each(function(a,b){f.push(b.id)});h--;)f.length&&-1!==$.inArray(a[h].entityId,f)||(g[h]=$.extend(a[h],{pageIndex:d,url:l(a[h][o])}),g[h][o].picture=g[h][o].picture.replace("i_w_h","r_75_x"),g[h][o].name=b.replace(c.title[o.toUpperCase()],g[h][o]));$.tmpl(s,g).appendTo(e)}function l(b){var c=a.paths[o.toUpperCase()+"_HOME"];return"SeriesEpisode"===o?c.replace("(cseriesepisode)",b.id).replace("(cseriesseason)",b.parentSeason).replace("(cseries)",b.parentSeries):""}function m(){AC.context.widgets.opinion=null}var n,o,p=$.extend({},g),q={seriesepisode:"SeriesEpisode"},r="#episodesTemplate",s="body";return h(),{get:i,remove:j,reset:m}}),AC.define("AC.social.widget.ext.myList.filter",["AC.helpers.url"],function(a,b){function c(){p=b.$widget.find(".j_filters"),e(),m(),a.parse().params.stars&&p.find(".j_filterbyrate").length>0&&g(a.parse().params.stars),k(p.find(".j_sortorder").val()),b.setOrderAndFilter(s,d())}function d(){return q?r?q+","+r:q:r}function e(){if(p.find(".j_filterbyrate").length>0){var a,b,c=[];for(a in AC.resources.review.ratingLabels)"0"!==a&&(b=AC.resources.review.ratingLabels[a],c.push('<option value="'+a.replace(".","_")+'">'+b+"</option>"));p.find(".j_filterbyrate").append(c.sort().reverse().join(""))}}function f(a){var c=a.currentTarget.value;g(c),b.setOrderAndFilter(s,d())}function g(a){var b,c="";a&&(c="rated:"+(isNaN(a.replace("_",""))?a:"rating_"+a),b=p.find(".j_filterbyrate"),""===b.val()&&b.find("option").filter('[value="'+a+'"]').attr("selected",!0)),l(c,r)}function h(a){var c=a.currentTarget.value;i(c),b.setOrderAndFilter(s,d())}function i(a){l(q,a)}function j(a){var c=a.currentTarget.value;k(c),b.setOrderAndFilter(s,d())}function k(a){var b=p.find(".j_filterbyrate");"RATING"===a?b.length>0&&(b.prop("disabled",!0).find("option:first").prop("selected",!0),q=b.val()):b.removeAttr("disabled"),s=a}function l(a,b){q=a,r=b}function m(){p.find(".j_sortorder").on("change",j),p.find(".j_filterbyrate").on("change",f),p.find(".j_filterbyreview").on("change",h)}function n(){p.addClass("hide")}function o(){p.removeClass("hide")}var p,q="",r="",s="";return c(),{init:c,hide:n,show:o}}),AC.define("AC.social.widget.ext.myList.movie",["AC.assets.environment","AC.data","AC.template","AC.ui","AC.social.widget.opinion","AC.context.widgets","AC.helpers.string","AC.helpers.review"],function(a,b,c,d,e,f,g,h,i){function j(){p=i.$widget,q=c.setup("myMovie")}function k(a){var c=a.pageIndex;return $.extend(a,{options:"review"}),b.list({service:"opinion",entityType:"Movie",queryInfo:$.extend(a,{options:"review"})}).done(function(a){m(a.items,c)}).fail()}function l(a){var c=$.Deferred();return c.resolve(),b.remove({service:"opinion",entityType:"Movie",entityId:a})}function m(b,c){var d,e=p.find(".j_items:first"),f=[],g=b.length;for(p.find(".j_items").find('.j_pagedlist_item[data-page="'+c+'"]');g--;)f[g]=$.extend(b[g],{pageIndex:c,url:a.paths.MOVIE_HOME.replace("(cmovie)",b[g].id)}),f[g].poster=f[g].poster.replace("i_w_h","r_75_x"),d=f[g].My.opinion,d.review&&(d.review=h.formatReview(d.review));e.append(q(f)),o(),setTimeout(n,200)}function n(){$("[data-w=opinion]").each(function(a,b){var c=$(b).find(".j_btn_review"),g=b.id,h="#"+g,i=decodeURI(c.attr("href")).indexOf("cmovie_ail")>-1?"{cmovie_ail}":"{cmovie}";f[g]||(c.attr("href",decodeURI(c.attr("href")).replace(i,g)),e(h,{requestType:"list"}),d.tooltip(h))})}function o(){AC.context.widgets.opinion=null}var p,q;return j(),{get:k,remove:l,reset:o}}),AC.define("AC.social.widget.ext.myList.person",["AC.assets.environment","AC.template","AC.api.my.socialAction"],function(a,b,c,d){function e(){j=d.$widget,k=b.setup("myPerson")}function f(a){var b=a.pageIndex;return c.listByEntityType({entityType:"Person"},a).done(function(a){h(a.result.items,b)}).fail()}function g(a){return c.remove({actionType:"fan",entityType:"Person",entityId:a})}function h(b,c){var d=j.find(".j_items:first"),e=[],f=b.length;for(j.find(".j_items").find('.j_pagedlist_item[data-page="'+c+'"]');f--;)e[f]=$.extend(b[f],{pageIndex:c,url:a.paths.PERSON_HOME.replace("(cperson)",b[f].entityId)}),e[f].Person.picture=e[f].Person.picture.replace("i_w_h","r_75_x");d.append(k(e))}function i(){AC.context.widgets.opinion=null}var j,k;return e(),{get:f,remove:g,reset:i}}),AC.define("AC.social.widget.ext.myList.relationship",["AC.assets.environment","AC.template","AC.api.my.relationship","AC.helpers.date"],function(a,b,c,d,e,f){function g(){l=e.$widget,m=b.setup("myRelationship")}function h(a){var b=a.pageIndex;return c[n.relationWay+"s"](a).done(function(a){j(a.result.items,b)}).fail()}function i(a){return c.unFollow({followeeId:a})}function j(b,c){var e=l.find(".j_items:first"),f=[],g=b.length,h="followee"===n.relationWay,i=new Date;for(l.find(".j_items").find('.j_pagedlist_item[data-page="'+c+'"]');g--;)f[g]=$.extend(b[g],{pageIndex:c,url:a.paths.USER_HOME.replace("{0}",b[g].userId),canRemove:h,daysBeetweenCreation:d.getDurationInDay(b[g].accountCreationDate,i)}),f[g].avatar=f[g].avatar.replace("i_w_h","c_75_75");e.append(m(f))}function k(){}var l,m,n=$.extend({},f);return g(),{get:h,remove:i,reset:k}}),AC.define("AC.social.widget.ext.myList.series",["AC.assets.environment","AC.data","AC.template","AC.ui","AC.social.widget.opinion","AC.context.widgets","AC.helpers.review","AC.helpers.string","AC.resources.list"],function(a,b,c,d,e,f,g,h,i,j,k){function l(){s=j.$widget,u=c.setup("mySeries"),t=w[v.entityType]}function m(a){var c=a.pageIndex;return $.extend(a,{options:"review"}),b.list({service:"opinion",entityType:t,queryInfo:$.extend(a,{options:"review"})}).done(function(a){o(a.items,c)}).fail()}function n(a){var c=$.Deferred();return c.resolve(),b.remove({service:"opinion",entityType:t,entityId:a})}function o(a,b){var c,d=s.find(".j_items:first"),e=[],f=a.length;for(s.find(".j_items").find('.j_pagedlist_item[data-page="'+b+'"]');f--;)e[f]=$.extend(a[f],{pageIndex:b,url:p(a[f])}),e[f].picture=e[f].picture.replace("i_w_h","r_75_x"),e[f].seasonNumber&&(e[f].title=h.replace(i.title[t.toUpperCase()],e[f])),x[t]&&(e[f].postReviewUrl=h.replace(decodeURI(x[t]),e[f])),c=e[f].My.opinion,c.review&&(c.review=g.formatReview(c.review));d.append(u(e)),r(),setTimeout(q,200)}function p(b){var c=a.paths[t.toUpperCase()+"_HOME"];return"series"===t?c.replace("(cseries)",b.id):"seriesSeason"===t?c.replace("(cseriesseason)",b.id).replace("(cseries)",b.parentSeries):""}function q(){$("[data-w=opinion]").each(function(a,b){var c=$(b).find(".j_btn_review"),g=b.id,h="#"+g;f[g]||(c.attr("href",decodeURI(c.attr("href")).replace("{cseries}",g)),e(h,{requestType:"list"}),d.tooltip(h))})}function r(){AC.context.widgets.opinion=null}var s,t,u,v=$.extend({},k),w={series:"series",seriesseason:"seriesSeason"},x=v.postReviewUrls;return l(),{get:m,remove:n,reset:r}}),AC.define("AC.social.widget.ext.myList.theater",["AC.assets.environment","AC.template","AC.api.my.theaterList"],function(a,b,c,d){function e(){j=d.$widget,k=b.setup("myTheater")}function f(a){var b=a.pageIndex;return c.list(a).done(function(a){h(a.result.items,b)}).fail()}function g(a){return c.remove({items:a})}function h(b,c){var d=j.find(".j_items:first"),e=[],f=b.length;for(j.find(".j_items").find('.j_pagedlist_item[data-page="'+c+'"]');f--;)e[f]=$.extend(b[f],{pageIndex:c,url:a.paths.THEATER_HOME.replace("(ctheaterac)",b[f].id)});d.append(k(e))}function i(){}var j,k;return e(),{get:f,remove:g,reset:i}}),AC.define("AC.social.widget.ext.opinion.feedback",["AC.resources.review.abuse","AC.helpers.date","AC.helpers.string","AC.comp.alert"],function(a,b,c,d,e){function f(){return!!k.find("[data-feedback]").length}function g(){return!!e.review}function h(){var b=e.entity.isCommingSoon?'[data-feedback="soon"]':'[data-feedback="now"]';e.isReported("Pending")?d.error("label","#"+e.id,a.Pending):k.find(b).removeClass("hide")}function i(){var f=b.split(e.value.reviewModificationDate),h=c.replace(a[e.value.reviewStatus],{dd:f.monthDay,mm:f.month,yyyy:f.year,title:e.entity.label,url:g()?"#":k.find(".j_btn_review").attr("href")});d.error("label","#"+e.id,h),k.find(".w-feedback").removeClass("hide")}function j(){f()?h():e.isReported()&&i()}var k=e.$widget;return{render:j}}),AC.define("AC.social.widget.ext.opinion.interest",["AC.resources.interest","AC.helpers.string","AC.widget"],function(a,b,c,d){function e(){f()}function f(){k.find(p).length&&(i=c.extend("button",d,{baseSelector:p,value:"WantToSee",display:d.settings.display})),k.find(q).length&&(j=c.extend("button",d,{baseSelector:q,value:"NotInterested",display:d.settings.display}))}function g(){var a,c,e=d.value&&d.value.rating,f=e?"disabled":"enabled";"disabled"===f&&"text"===l.disabledDisplayMode?(a=e>1?m:n,c=e?b.replace(b.replace(o,a),e):"",k.empty().append(c)):(h(i),h(j))}function h(a){if(a){var b=d.value,c=b&&d.value.rating,e=a.getValue(),f=(b&&d.value.value)===e?"on":c?"disabled":"off";a.render(f)}}var i,j,k=d.$widget.find(".w-interest"),l=d.settings,m=a[d.entity.entityType]&&a[d.entity.entityType].ratedLabelPlural,n=a[d.entity.entityType]&&a[d.entity.entityType].ratedLabelSingular,o='<span class="j_disabled_label">{0}</span>',p=".j_interest_yes",q=".j_interest_no";return e(),{render:g,$widget:k}}),AC.define("AC.social.widget.ext.opinion.rating",["AC.resources.global","AC.event","AC.social.user","AC.widget","AC.comp.spinner"],function(a,b,c,d,e,f,g){function h(){x.isEraseEnabled||$(".j_rate_cancel").addClass("hide"),x.isZeroEnabled||$(".rate_null_on").addClass("hide"),j()}function i(){return window.matchMedia&&window.matchMedia("(min-width: 240px) and (max-width: 1024px) ").matches}function j(){i()||w.on("mouseleave",".rating_module",o).on("mouseenter",".star",l),w.on("touchstart click",".star",v).on("touchstart click",".j_rate_cancel",{rating:null},v).on("touchstart click",".rate_null_on",{rating:0},v)}function k(){var a=f.value&&f.value.rating||null,b=parseFloat(a),c="number"==typeof b?2*(b-.5):null,d=null!==a&&b>=0,e=0!==b,g=f.value&&f.value.hasReview;n(d),m(e),p(g),w.find(".rating_module").removeClass("hide"),!isNaN(b)&&b>=0?b>0?q(c):0===b&&r():s()}function l(){var a=$(this),b=a.index(".star")%2===0;a.prevAll(".star").addBack().filter(":even").removeClass("rated_off_l rated_g_l").addClass("rated_b_l").end().filter(":odd").removeClass("rated_off_r rated_g_r").addClass("rated_b_r"),a.nextAll(".star").filter(b?".star:odd":".star:even").removeClass("rated_b_l rated_g_l").addClass("rated_off_l").end().filter(b?".star:even":".star:odd").removeClass("rated_b_r rated_g_r").addClass("rated_off_r")}function m(a){a?w.find(".rate_null_off").removeClass("rate_null_off").addClass("rate_null_on"):w.find(".rate_null_on").removeClass("rate_null_on").addClass("rate_null_off")}function n(a){w.find(".j_rate_cancel").length&&(a?w.find(".j_rate_cancel").removeClass("hidden"):w.find(".j_rate_cancel").addClass("hidden"))}function o(){w.find(".rating_module").hasClass("hide")||k()}function p(a){var b=a?"addClass":"removeClass";w.find(".j_btn_review")[b]("btn-on")}function q(a){var b=a%2===0;w.find(".star").eq(a).prevAll(".star").addBack().removeClass("rated_g_l rated_g_r rated_off_l rated_off_r").filter(":even").addClass("rated_b_l").end().filter(":odd").addClass("rated_b_r"),w.find(".star").eq(a).nextAll(".star").removeClass("rated_b_l rated_b_r rated_off_l rated_off_r").filter(b?":odd":":even").addClass("rated_g_l").end().filter(b?":even":":odd").addClass("rated_g_r")}function r(){w.find(".star").removeClass("rated_b_l rated_b_r rated_off_l rated_off_r").filter(":even").addClass("rated_g_l").end().filter(":odd").addClass("rated_g_r")}function s(){w.find(".star").removeClass("rated_b_l rated_b_r rated_g_l rated_g_r").filter(":even").addClass("rated_off_l").end().filter(":odd").addClass("rated_off_r")}function t(a){return $(".star",a.parents(".rating_module")).index(a)}function u(a,c){b.publish(a,{id:f.id,action:"rating",value:c,entity:f.entity})}function v(b){var d=b.data?b.data.rating:(t($(b.target))+1)/2,g=e(w.find(".rating_module"),{labelDone:"null"===$.type(d)?a.deleted:""});return c.doOnAction($.extend({},f,{value:d}),function(){return u("preAction",d),f.save(d)}).done(function(){g.hide(""),u("postAction",d)}).fail(function(){g.hide("")}),!1}var w=f.$widget.find(".w-rating"),x=$.extend({isEraseEnabled:!0,isZeroEnabled:!1},g);return h(),{render:k,$widget:w}}),AC.define("AC.social.widget.ext.opinion.review",["AC.assets.environment.paths.confirmReview","AC.resources","AC.helpers.dom","AC.event","AC.social.user","AC.helpers.string","AC.helpers.review","AC.validation","AC.comp.modal"],function(a,b,c,d,e,f,g,h,i,j,k){function l(){h.init(P),m()}function m(){var a=c.hasEventSupport("input","textarea")?"input":c.hasEventSupport("propertychange","textarea")?"propertychange":"";P.on("click",".j_spoiler",A).on("click",".j_edit_button",function(){return D("form"),!1}).on("click",ba,o).on("click",".j_preview_button",function(){return h.validate(j.value).done(function(a){a&&D("preview")}),!1}).on("click",".j_cancel_button",function(){return na=!1,w(),x(),D("preview"),!1}).on("click",".j_post_button",function(){return e.doOnVerifiedAction("review",function(){N("update")}),oa=!0,!1}),ca.on("change",M).on("keyup focus",n),a&&ca.on(a,n),ha.on("change",M).on("focus blur",H),ma.on("click","span",function(){return N("remove"),!1}),$("#reviewForm").on("submit",function(){return!1})}function n(){var a=ca.val().replace(V,"").length,b=a>1?T:S;P.find(".j_counter").removeClass("hidden").text(f.replace(b,a)),a>=50&&!P.find(".j_vm_minimumlength").hasClass("hide")&&P.find(".j_vm_minimumlength").addClass("hide")}function o(a){var b=$(a.currentTarget),c=b.attr("href")||b.find("a").attr("href");return c&&na?(i.confirm(W,{title:X,display:{button:"basic"},callback:{yes:function(){document.location.href=c}}}),!1):void 0}function p(){throw oa=!1,new Error("An error occured.")}function q(){var a=j.value.rating,b=U[a].split(/[=-]+/)[1],c=ea;c.removeClass(z(c)).addClass(function(){var b=10*a;return 10>b?"n0"+b:"n"+b}).next().text(a).next().text("- "+b)}function r(){var a="addClass",b="removeClass",c=B()?a:b;P.find(_).find(".j_cancel_button")[c]("hide")}function s(){var a="",b=$(".j_entities").children("a");"Movie"!==j.entity.entityType?(b.each(function(){""!==a&&(a+=" - "),a+=$(this)[0].outerHTML}),ga.html(" - "+Y.replace("{0}",a)),ga.children("a").addClass("no_underline")):ga.addClass("hide")}function t(){da.html(g.formatReview(ca.val()))}function u(){var a=B()?g.formatAddedDate():g.formatAddedDate(j.value.review.date);fa.html(a)}function v(){var a=ha.val();"https://"!==a?ia.attr("href",a).text(a.length>50?a.substring(0,50)+"...":a).show():ia.hide()}function w(){var a=!B()&&j.value.review?j.value.review.value:"";na||y(a)}function x(){j.review.userUrl&&!na&&ha.val(j.value.review.userUrl)}function y(a){ca.val(a),n(),d.publish("textarea.filled")}function z(a){var b,c,d=0,e=10;if(a.hasClass("null"))return"null";for(;e>=d;d++)if(b=5*d,c=5===b?"n0"+b:"n"+b,a.hasClass(c))return c}function A(){var a=c.getSelection(ca.get(0)),b=ca.val(),d=b.slice(0,a.start),e=b.slice(a.start,a.end),f=b.slice(a.end,ca.val().length),g="[spoiler]"+e+"[/spoiler]",h=a.end+(g.length-e.length);return(a.start||a.end)&&(g=d+g+f),ca.val(g),a.start=h,a.end=h,a.length=0,c.setSelection(ca.get(0),a),!1}function B(){return!j.value||j.value&&!j.value.hasReview}function C(){R.isRedirected&&(document.location.href=f.replace(a[j.entity.entityType],j.entity))}function D(a){return P.find(Z).removeClass("hide"),j.isReported("Blocked")?void E():void(B()?"preview"===a?(J(),G(),L(),I()):(F(),G(),L(),I()):"form"===a?(F(),G(),L(),I()):oa?C():(J(!na),L(!0),K()))}function E(){P.find(aa).remove(),P.find(_).remove(),ka.remove(),la.remove(),ma.remove(),P.next().remove()}function F(){P.find(aa).addClass("hide"),P.find(_).removeClass("hide"),w(),x(),n(),r()}function G(){ka.removeClass("hide"),ja.hasClass("hide")||ja.addClass("hide")}function H(a){var b,c,d=$(this);"focus"===a.type?(b=d.val()!==d.prop("defaultValue")?d.val():"",c="#000"):"blur"===a.type&&(b=d.val()||d.prop("defaultValue"),c=d.val()?"#000":"#888"),d.css({color:c}).val(b)}function I(){la.removeClass("hide"),ma.addClass("hide")}function J(a){var b="addClass",c="removeClass",d=j.value&&j.value.hasReview&&!na?b:c;w(),x(),t(),v(),s(),u(),q(),P.find(_).addClass("hide"),P.find(aa).removeClass("hide").find(".j_post_button")[d]("hide").next("span")[d]("hide"),P.find(aa).find(".j_preview_title")[a?c:b]("hide")}function K(){na||(la.addClass("hide"),ma.removeClass("hide"))}function L(a){var b=!a||na||j.isReported()?"addClass":"removeClass",c=!a||na||j.isReported()?"removeClass":"addClass";ja[b]("hide"),ka[c]("hide")}function M(){na=!0}function N(a){"remove"===a?j.save(null):h.validate(j.value).done(function(a){a&&j.save({review:O(ca.val()),url:"https://"!==ha.val()?ha.val():""}).fail(p)})}function O(a){return a.replace(/(?:[(\n\r)\n\r]\s*?){3,}/g,"\n\n")}var P=j.$widget,Q=b.review,R=$.extend({isRedirected:!0},k),S=Q.counterSingular,T=Q.counterPlural,U=Q.ratingLabels,V=/\[spoiler\]|\[\/spoiler\]/gi,W=Q.seasonDirtyWarning,X=Q.seasonDirtyWarningTitle,Y=Q.about,Z=".j_review",_=".j_edit",aa=".j_preview",ba=".j_review_dirty_warning",ca=P.find("textarea"),da=P.find(".j_review_block"),ea=P.find(".stareval").find(".stars"),fa=P.find(".j_review_date"),ga=P.find(".j_review_about"),ha=P.find("#externalLink"),ia=P.find(".j_review_link"),ja=$(".j_review_sharing"),ka=$(".j_review_rules"),la=$(".j_review_policy"),ma=$(".j_review_delete_zone"),na=!1,oa=!1;return l(),{render:D}}),AC.define("AC.social.widget.ext.relationship.followee",["AC.assets.environment.thirdParty","AC.resources.social.buttons.followee","AC.event","AC.social.user"],function(a,b,c,d,e){function f(){var a=k.find(".profile-user");i=!(!a.length||!a.find(j).length),d.doOnConnection(g)}function g(){i&&k.find(".user-follow").addClass("ready")}function h(a,b){m&&m.toggleClass("disabled","off"===a),b&&"Facebook"===b.socialNetwork&&(e.$widget.parent().empty(),delete AC.context.widgets.relationship[e.id]),g()}var i,j=e.$widget,k=j.parents(".j_entity_container"),l=k.find("[data-disable]"),m=l.length?l.find("a"):null;return f(),h}),AC.define("AC.social.widget.ext.relationship.follower",function(a){function b(){c.hasClass("btn-on")?d.removeClass("icon-micro").addClass("icon-micro-off"):d.removeClass("icon-micro-off").addClass("icon-micro")}var c=a.$widget,d=c.find("i");return b}),AC.define("AC.social.widget.ext.relationship.friend",function(a){function b(){c.hasClass("btn-on")?d.removeClass("icon-speaker").addClass("icon-speaker-off"):d.removeClass("icon-speaker-off").addClass("icon-speaker")}var c=a.$widget,d=c.find("i");return b}),AC.define("AC.comp.spinner",["AC.resources.spinner","AC.helpers.string"],function(a,b){function c(){var a=arguments;return function(){for(var b=arguments,c=a.length,d=0;c>d;d++)b=[a[d].apply(this,b)];return b[0]}}function d(a,b){var d,j,k=e(a),l=$.extend({tag:"div"},m,b);return k.length?(d=k.map(function(a,b){return c(f,g)({$target:$(b),settings:l})}),j=h(k,l),{$spinner:d,hide:function(a){clearTimeout(j),"undefined"!=typeof a&&(l.labelDone=a),i(d,l)}}):null}function e(a){var b,c=a.filter(":visible"),d=[];for(b=c.length;b--;)d.push(c.eq(b));return c}function f(b){return b.settings=$.extend({},b.settings,b.$target.data("spinner"),{tag:b.$target.is("span")?"span":"div",css:b.$target.hasClass("fr")?" fr":""}),b.settings.img=a.images[b.settings.img],b}function g(a){var c=$(b.replace(l,a.settings));return a.$target.after(c),c.css({width:a.$target.outerWidth(!0),height:(k+a.$target.outerHeight(!0))/2,marginTop:(a.$target.outerHeight(!0)-k)/2,display:"none"}),c[0]}function h(a,b){function c(){a.hide().next().show(),d&&clearTimeout(d)}var d;return b.delayShow?d=setTimeout(c,b.delayShow):c(),d}function i(a,b){function c(){a.hide().prev().show(),a.remove(),d&&clearTimeout(d)}if(a.prev().length){var d,e=a.prev();b.labelDone?(e.hide(),a.text(b.labelDone),a.show(),d=setTimeout(c,b.delayHide)):c()}}var j="spinner",k=18,l='<{tag} class="'+j+'{css}"><img alt="" src="{img}" class="vam" /> {labelDoing}</{tag}>',m={delayShow:500,delayHide:1700,labelDoing:"",labelDone:"",img:"blue"};return d}),AC.define("AC.comp.modal",["AC.resources.confirm","AC.helpers.string","AC.helpers.func","AC.helpers.cookie","AC.event"],function(a,b,c,d,e){function f(){g(),h(),i()}function g(){B={base:{display:{align:"align_c",overlay:!0,close:!0,width:"g_mw400_640",modalCss:""},content:{body:""},timer:0},confirm:{conf:{display:{close:!1,button:"remove"},callback:{yes:null,no:null}},method:m},dialog:{conf:{display:{align:"",width:"g_w640"},body:"",query:null},method:n},feedback:{conf:{display:{overlay:!0},timer:5e3},method:l}}}function h(){var a;for(a in B)"base"!==a&&e.subscribe("modal.request."+a,j,{modalType:a});e.subscribe("modal.request.close",A)}function i(){$(".j_m").filter("[data-comp]").length&&($("body").on("click",".j_m[data-comp]",function(a){var b=$(a.currentTarget),c=b.data("comp"),d=b.data("right");return"loginRequired"===d?e.publish("user.request.execute",{action:function(){k(c.type,c.content,c.settings)}}):k(c.type,c.content,c.settings),!1}),$(".j_m[data-comp]").each(function(){var a=$(this).data("comp"),b=null;"undefined"!=typeof a&&null!==a&&"undefined"!=typeof a.settings&&null!==a.settings&&"undefined"!=typeof a.settings.onLoad&&a.settings.onLoad===!0&&("undefined"!=typeof a.settings.onLoadCookie&&(b=a.settings.onLoadCookie),(null===b||"true"!==d.read(b))&&($(this).click(),null!==b&&d.write({name:b,value:!0,expires:{days:9999}})))}))}function j(a){k(a.modalType,a.content,a.settings)}function k(a,b,c){var d=$.extend(!0,{},B.base,B[a].conf,{tpl:C.base,content:{body:b}});"object"===$.type(c)&&$.extend(!0,d,c),A(),B[a].method(d)}function l(a){c.compose(o,q,r,s,t,v,w)(a)}function m(a){c.compose(o,p,q,r,s,t,u,v)(a)}function n(a){var d=c.compose(q,r,s,t,v),e=a.content.body;0===e.indexOf("#")?d(a.useHtml===!0?$.extend(a,{content:{body:$(e).html()}}):$.extend(a,{content:{body:$(e).text()}})):b.hasHtml(e)?d(a):$.get("/content/loader.ashx?type=modal&name="+e,a.query).done(function(b){d($.extend(a,{content:{body:b}}))})}function o(a){return a.tpl=a.tpl.replace("{title_wrapper}",C.titleWrapper.replace("{title}",a.title)),a}function p(c){var d=c.display.button,e={basic:{cssClass:"btn01"},remove:{cssClass:"btn10"}};return c.tpl=c.tpl.replace("{confirm}",C.confirm),c.tpl=b.replace(c.tpl,$.extend({},e[d],a[d])),c}function q(a){var c,d,e,f=a.tpl.replace("{confirm}","").replace("{title_wrapper}",""),g=a.display;for(d in g)c=g[d],e="boolean"==typeof c&&c?C[d]:"string"==typeof c?c:"",f=f.replace("{"+d+"}",e);return f=b.replace(f,a.content),$.extend({},a,{$modal:$(f)})}function r(a){var b=a.$modal;return a.display.overlay&&x(b),a}function s(a){return a.$modal.find(".modal-inner > .data-content").prepend(a.content.body),a}function t(a){var b=a.$modal,d=$(window);return d.on("resize.modal",c.partial(x,b)),a.display.close&&(a.closeOnOverlayClick===!0&&b.filter(".modal_overlay").on("click",c.partial(A,b)),b.on("click",".close",c.partial(A,b)),d.on("keyup.modal",function(a){27===a.keyCode&&A(b)})),a}function u(a){var b=a.$modal,c=a.callback;return $.each(c,function(a,c){var d;d="function"===$.type(c)?function(){c(),A(b)}:function(){A(b)},b.on("click","."+a,d)}),a}function v(a){var b=a.$modal;return $("body").append(b),y(b),setTimeout(function(){y(b)},300),e.publish("modal.on",b),a}function w(a){a.timer&&setTimeout(c.partial(A,a.$modal),a.timer)}function x(a){a.filter(".modal_overlay").css({height:$("#wrapper,.ac_context").height()||0,width:"100%"}),z(a)}function y(a){a.filter(".modal").css({marginTop:"-"+a.outerHeight()/2+"px",marginLeft:"-"+a.outerWidth()/2+"px"})}function z(a){y(a),$(document).scrollTop(10)}function A(){var a=$(".modal,.modal_overlay");a.length&&(e.publish("modal.off",a),a.remove(),$(window).off("resize.modal").off("keyup.modal"))}var B,C={base:'<div class="modal {modalCss}"> {close}<div class="modal-inner {align}">{title_wrapper}<div class="data-content {width}">{confirm}</div></div><!--/modal_inner--></div>{overlay}',close:'<span class="close">&nbsp;</span>',overlay:'<div class="modal_overlay"></div>',confirm:'<div class="margin_10t"><span class="button btn-default margin_10r no">{no}</span><span class="button {cssClass} margin_10r yes">{yes}</span></div>',titleWrapper:'<div class="modal_banner">{title}</div>'};return f(),{feedback:c.partial(k,"feedback"),confirm:c.partial(k,"confirm"),dialog:c.partial(k,"dialog")}}),AC.define("AC.comp.infoPanel",["AC.helpers.cookie","AC.helpers.date","AC.helpers.dom","AC.helpers.func","AC.event"],function(a,b,c,d,e){function f(){var a,b,e;n.length&&c.hasLocalStorageSupport()&&(a=h(),(!a.flag||d.exec(a.flag))&&(b=localStorage["AC.ip"],e=b?i(b,a.id):g(a.id),1!==e&&$.get("/content/loader.ashx?type=panel&name="+a.id).done(function(c){l(b,a.id,c),m(b,a.id)})))}function g(a){var b={},c=new Date;return b[a]=c.setDate(c.getDate()+28),j(b),b[a]}function h(){var a={},b=n.data("ip");return"string"==typeof b?a.id=b:$.extend(a,b),a}function i(a,c,d){if(a){var e,f="closed"===d;return a=JSON.parse(a),e=a[c]>1&&b.getDurationInDay(a[c],new Date)>28,(e||f)&&(a[c]=1,j(a)),a[c]}}function j(a){localStorage.setItem("AC.ip",JSON.stringify(a))}function k(a,b){i(a,b,"closed"),n.slideUp("fast",function(){n.remove(),e.publish("infopanel.off")})}function l(a,b,c){n.append(c),n.hide().removeClass("hide").slideDown("slow",function(){e.publish("infopanel.on",{$modal:n})})}function m(a,b){n.on("click",".close",function(){k(a,b)}),e.subscribe("connect.succeed",function(){k(a,b)})}var n=$("[data-ip]");return f(),{}}),AC.define("AC.comp.alert",["AC.helpers.func"],function(a){function b(){$(this).parent().animate({opacity:0,height:0}).promise().done(function(){$(this).remove()})}function c(a,c,d,e){var f,g=$(d).find(".j_aph"),h='<div class="alert {box} alert-{type} j_aph">{close}<i class="icon-{type}">&nbsp;</i>{content}</div>',i=["error","success","warn","info"],j=["box","label"];if(!g.length)throw new Error("AC.comp.message : didn't find the placeholder in $( '"+d+"' )");if(-1===$.inArray(a,i))throw new Error('AC.comp.message : the type "'+a+"\" doesn't exist.");if(-1===$.inArray(c,j))throw new Error('AC.comp.message : the display "'+c+"\" doesn't exist.");h=h.replace("{box}","box"===c?"alert-wrap":"").replace(/\{type\}/gi,a).replace("{close}","box"===c?'<span class="btn button-link close">×</span>':"").replace("{content}",e),f=$(h).one("click",".close",b),g.replaceWith(f)}return{error:a.partial(c,"error"),warn:a.partial(c,"warn"),ok:a.partial(c,"success"),info:a.partial(c,"info")}}),AC.define("AC.social.widget.actionBar",["AC.resources.actionBar","AC.helpers.string","AC.event","AC.widget","AC.social.user"],function(a,b,c,d,e){function f(a){a.action=b.toLowerCamelCase(a.action);var c,e,f=$(p);n.after(f),e=d.extend(a.action,m)(a),f.find(".share").length&&(c={args:a,$content:f},d.extend("share",m,c))}function g(){m=this,n=m.$widget,m.settings=$.extend(o,{mode:"slide"}),j()}function h(a){i("up").done(function(){f(a)})}function i(a){var b=$(".module-actionbar-panels"),c=$.Deferred();return"down"===a?(b.slideDown().on("click",".panel-close-tab",k).removeClass("hide").find("div").removeClass("hide"),$(".panel-close-tab").removeClass("hide"),c.resolve()):b.length?b.slideUp(function(){b.remove(),c.resolve()}):c.resolve(),c.promise()}function j(){c.subscribe("postAction",function(a){"off"===a.value||"null"===$.type(a.value)?l():n.find("#"+a.id).length>0&&h(a)}),e.doOnConnection(l)}function k(){i("up").done(function(){l()})}function l(){h({action:"followees",entity:m.entity,mode:"slide"})}var m,n,o,p='<div class="module-actionbar-panels hide"><div class="panel-control "><span class="panel-close-tab hide"><i class="icon-arrow-w-t vam margin_5r">&nbsp;</i> '+a.close+"</span></div></div>";return{init:g,animate:i}}),AC.define("AC.social.widget.addTheater",["AC.event","AC.social.user","AC.social.UserTheaterService","AC.log","AC.helpers.string","AC.widget"],function(a,b,c,d,e,f){function g(){o=this,p=o.$widget,q=o.settings,r=o.entity,h(),s=e.replace(t,r),i(),b.getOnConnection(k)}function h(){"legacy"!==q.display&&(o.button=f.extend("button",o))}function i(){a.subscribe(s,l),"legacy"===q.display&&p.on("click",function(){return b.doOnAction(m),!1})}function j(b){a.publish(s,b)}function k(){var a=$.Deferred();return u.get(r.entityId).done(a.resolve).fail(a.reject),a.always(j),a.promise()}function l(a){o.value=a&&a.id?a:void 0,n()}function m(){var a,b=$.Deferred();return a=o.value?u["delete"](o.value):u.create({targetKey:r.entityType+"_"+r.entityId}),a.done(b.resolve).fail(b.reject),b.always(j),b.promise()}function n(){var a=o.value?"on":"off",b="on"===a&&q.labelOff?q.labelOff:q.label;"legacy"===q.display?p.find(".j_label").empty().append(b):o.button.render(a,b)}var o,p,q,r,s,t="theater.received_{entityId}",u=new c;return{init:g,save:m,render:n}}),AC.define("AC.social.widget.cgu_accept",["AC.social.user","AC.social.UserService","AC.environmentOverride","AC.assets.environment","AC.resources.cguModal"],function(a,b,c,d,e){function f(){var b='<div class="modal_overlay hide"></div><div id="modalCGU" class="modal hide" style="margin-top: -147.5px; margin-left: -340px;"><div class="modal-inner"><div id="validate_cgu"><div class="g_w640"><div class="modal_banner">'+e.cguUpdated+'</div><p class="margin_20b">'+e.dearUsername+' <strong class="jmy" data-item="nickName"></strong></p><p>'+e.informWeUpdated+' <a href="'+d.paths.generalConditions+'" target="_blank">'+e.CGU+'</a></p><p class="margin_20b">'+e.beforeContinue+" "+e.termsOfUse+' <a href="'+d.paths.generalConditions+'" target="_blank">'+e.here+"</a>"+e.andAcceptThem+'</p><form action="#" method="get"><fieldset><input type="checkbox" id="valid_cgu01_id" name=""><label for="valid_cgu01_id"> '+e.readAndAgreed+'<a href="'+d.paths.generalConditions+'" target="_blank"> '+e.generalConditions+'</a><span class="insist italic">'+e.mandatory+'</span></label></fieldset></form><div class="margin_20t align_r"><a href="'+d.paths.logOff+"?returnUrl="+encodeURIComponent(window.location.href)+'" data-action-button="refuse" class="button btn-default margin_10t btn-medium">'+e.refuse+'</a><span data-action-button="accept" class="button btn-primary margin_10t btn-medium btn-disabled">'+e.accept+"</span></div></div></div></div></div>";l=this,m=l.$widget,l.checkboxChecked=!1,n=$("body").append(b),g(),a.doOnConnection(h)}function g(){n.on("click",r,j),n.on("click",s,i)}function h(a){var b=AC.context,c=b.my,d=$("body").height();a&&a.isOn&&c.id&&!c.gtuValidated&&($(q).removeClass("hide").height(d),$(p).removeClass("hide"))}function i(){k(),$(q).addClass("hide"),$(p).addClass("hide")}function j(){l.checkboxChecked=!l.checkboxChecked,l.checkboxChecked!==!0?n.find(s).addClass("btn-disabled"):n.find(s).removeClass("btn-disabled")}function k(){var a=$.Deferred(),b=AC.context,c=b.my;return c.gtuValidated=!0,o.update(c).done(a.resolve).fail(a.reject),a.promise()}var l,m,n,o=new b,p="#modalCGU",q=".modal_overlay",r="#valid_cgu01_id",s="[data-action-button=accept]";return{init:f}}),AC.define("AC.social.widget.feedback",["AC.api.feedBack"],function(a){function b(){i.find("[data-page="+j+"]").toggleClass("hide"),j++,i.find("[data-page="+j+"]").toggleClass("hide")}function c(a){var b=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return b.test(a)}function d(){for(var a="",b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",c=0;15>c;c++)a+=b.charAt(Math.floor(Math.random()*b.length));return a+(new Date).getTime()}function e(b){var c=$.extend(k,b);a.saveFeedBack(c).fail(function(){$(".sumbiterror",i).removeClass("hide"),setTimeout(function(){
$(".sumbiterror",i).addClass("hide")},2e3)})}function f(){h=this,i=h.$widget,k.sessionId=d()}function g(){i.on("click",".notes-button-list a",function(){var a=$(this).data("note");return e({note:a}),$(this).parent().siblings().find("a").removeClass("btn-active"),$(this).addClass("btn-active"),!1}).on("mouseleave",".filterdrop",function(){var a=$(this).find(".subfilterdrop");a.is(":visible")&&a.slideUp()}).on("click",".filterdrop",function(){var a=$(this).find(".subfilterdrop");return a.is(":visible")?a.slideUp():a.slideDown(),!1}).on("click",".submit-message",function(){return"undefined"==typeof l.messageType||-1===l.messageType?(i.find(".field-validation-error").removeClass("hide"),!1):(i.find(".field-validation-error").addClass("hide"),l.message=i.find(".box_user_content textarea").val(),e(l),b(),!1)}).on("click",".submit-email",function(){var a=$(this).parent(".form_line"),b=$(this).prev("input:text").val();return c(b)&&e({email:b}),a.addClass("hide"),a.next(".submitdone").removeClass("hide"),!1}),$(".subfilterdrop li a",i).on("click",function(){var a=$(this),b=a.text();return l.messageType=a.data("messagetype"),i.find(".field-validation-error").addClass("hide"),a.parents(".subfilterdrop").slideUp().prev("a").find("span").text(b),!1})}var h,i,j=1,k={},l={messageType:-1,message:""};return{init:f,initEvents:g}}),AC.define("AC.social.widget.followeesOpinion",["AC.social.user","AC.social.connect","AC.social.ActivityService","AC.resources.followeesOpinion"],function(a,b,c,d){function e(){l=this,m=l.$widget,n=l.entity,a.getOnConnection(f)}function f(){var a=$.Deferred(),b={};return o.getFriendsActivityAverage({targetType:n.entityType,targetId:n.entityId},b).done(a.resolve).fail(a.reject),a.done(k),a.promise()}function g(a,b,c){var e=5*Math.round(2*a),f=$("#averagefriendsopinionstars"),g=b>1?d.notes:d.note;c>0&&(g+=" "+(c>1?d.reviews:d.review)),f.removeClass("hide"),f.find(".stars").addClass("n"+(10>e?"0"+e:e)),f.find(".note").attr("content",e),f.find(".note").text((Math.round(10*a)/10).toString().replace(".",",")),f.find(p).html(g),f.find('span[data-prop="ratingCount"]').text(b),f.find('span[data-prop="reviewCount"]').text(c),j()}function h(a,b){var c=$("#myfriendaveragefriendsopinionswanttosee");c.find('span[data-prop="do_not_want_to_see"]').text(b),c.find('span[data-prop="want_to_see"]').text(a+" "+(a>1?d.manyWantToSee:d.oneWantToSee)),c.removeClass("hide"),j()}function i(){var a=$("#averagefriendsopinionsnoactions");a.removeClass("hide"),j()}function j(){var a=$("#averagefriendsopinionsnofriends");a.addClass("hide")}function k(a){var b,c,d,e,f=a.values,j=f&&f.length;j||i();for(var k=0;j>k;k++)e=f[k],isNaN(parseInt(e.value,10))?"WantToSee"===e?c=e:"NotInterested"===e&&(d=e):b=e;b?g(b.value,b.count,b.reviewCount):(c||d)&&h(c&&c.count,d&&d.count)}var l,m,n,o=new c,p=".j_rating-text";return{init:e}}),AC.define("AC.social.widget.game",["AC.data","AC.event","AC.social.user","AC.comp.modal"],function(a,b,c,d){function e(){l=this,m=l.$widget,n=l.settings,f(),c.getOnConnection(function(){k(n)})}function f(){$(n.idDivBtnActive).click(g),b.subscribe("addressValidation.success",h)}function g(){c.doOnVerifiedAction("game",function(){d.dialog("address_validation")})}function h(){var a=$("label#ccompetition").attr("title"),b=j(),c=[],e="";c.push("cCompetition="+a),b.radioBoxAnswers.length>0&&c.push("values="+i(b.radioBoxAnswers)),"1"===b.shareWithPartners&&c.push("shareWithPartners=1"),b.textAnswers.length>0&&c.push("typedAnswers="+b.textAnswers.join(";")),e=c.join("&"),$.get("/ws/CompetitionAnswersHandler.ashx",e,function(a){d.dialog("#result_overlay_content",{content:{body:a}})})}function i(a){var b,c,d,e,f=function(a,b){return b>a?-1:a>b?1:0},g=$.isArray(a)&&a.length?[]:"",h=a.length,i=[],j={};if(a=a||[],h>0){for(b=0;h>b;b++)c=a[b].split(":",2),d=parseInt(c[0],10),e=parseInt(c[1],10),d in j?j[d].push(e):(i.push(d),j[d]=[e]);for(i=i.sort(f),h=i.length,b=0;h>b;b++)d=i[b],e=j[d].sort(f),g.push(d+":"+e.join("+"));g=g.join(";")}return g}function j(){var a={shareWithPartners:"",radioBoxAnswers:[],textAnswers:[]};return m.find("input:radio:checked").each(function(){a.radioBoxAnswers.push(this.id)}),m.find("input:checkbox:checked").each(function(){"shareWithPartners"===this.name&&(a.shareWithPartners="1")}),m.find("input:text:enabled").each(function(){a.textAnswers.push(this.value)}),a}function k(a){var b={ccompetition:0,idDivBtnActive:"",idDivBtnInactive:""},c=$.extend({},b,a);c.ccompetition=$("#ccompetition").data("competition"),0!==c.ccompetition&&$.get("/ws/CompetitionUserCanParticipate.ashx",{ccompetition:c.ccompetition},function(a){"0"===a&&($(c.idDivBtnActive).addClass("hide"),$(c.idDivBtnInactive).removeClass("hide"))})}var l,m,n;return{init:e,competitionUserCanParticipate:k}}),AC.define("AC.social.widget.gameValidation",["AC.assets.environment","AC.data","AC.event","AC.validation","AC.social.user","AC.social.path","AC.context.my","AC.api.my.address","AC.helpers.error"],function(a,b,c,d,e,f,g,h,i){function j(){t=this,u=t.$widget,d.init(u),k(),o()}function k(){$("#valid_address").click(m),c.subscribe("modale.close",l)}function l(){c.unsubscribe("addressValidation.success")}function m(){return d.validate().done(function(a){a&&(r()&&(q(),s()),c.publish("modal.request.close"),c.publish("addressValidation.success"))}),!1}function n(){u.find("#familyName").val(v.familyName),u.find("#givenName").val(v.givenName),u.find("#street").val(v.street),u.find("#zipCode").val(v.zipCode),u.find("#city").val(v.city),u.find("#phone").val(v.phone),u.find("#CountryDropDownList").val(v.countryCode)}function o(){p().done(n)}function p(){var a=$.Deferred();return e.isOn()?h.getBillingAddress().done(function(b){if(b.success){var c=b.result;v.id=c.id,v.familyName=c.familyName,v.givenName=c.givenName,v.street=c.street,v.zipCode=c.zipCode,v.city=c.city,v.phone=(c.phoneMobile||c.phone).toString(),v.countryCode=c.country.code.toString(),a.resolve()}}).fail(function(){a.reject()}):window.location.href=g.logon,a.promise()}function q(){v.familyName=u.find("#familyName").val(),v.givenName=u.find("#givenName").val(),v.street=u.find("#street").val(),v.zipCode=u.find("#zipCode").val(),v.city=u.find("#city").val(),v.phone=u.find("#phone").val(),v.countryCode=u.find("#CountryDropDownList").val()}function r(){return!(v.familyName===u.find("#familyName").val()&&v.givenName===u.find("#givenName").val()&&v.street===u.find("#street").val()&&v.zipCode===u.find("#zipCode").val()&&v.city===u.find("#city").val()&&v.phone===u.find("#phone").val()&&v.countryCode===u.find("#CountryDropDownList").val())}function s(){var a={code:"142001"},b={code:v.countryCode},c={id:v.id?v.id:0,userId:f.userId,addressType:a,addressTypeId:"142001",addressName:"Default",familyName:v.familyName,givenName:v.givenName,street:v.street,additionalField1:"",additionalField2:"",zipCode:v.zipCode,city:v.city,state:"",countryId:v.countryCode,country:b,phone:v.phone,phoneMobile:""};h.create(c).fail(function(a){i.writeServerValidationErrors(a)})}var t,u,v={id:"",familyName:"",givenName:"",street:"",zipCode:"",city:"",phone:"",countryCode:""};return{init:j}}),AC.define("AC.social.widget.itemlist",["AC.assets.environment","AC.event","AC.template","AC.widget"],function(a,b,c,d){function e(a){switch(a){case"display":p.hasClass("hide")||p.addClass("hide"),q.removeClass("hide");break;case"hide":q.hasClass("hide")||q.addClass("hide"),p.removeClass("hide");break;default:q.hasClass("hide")||q.addClass("hide"),p.removeClass("hide")}}function f(){n=this,o=n.$widget,p=$(s,o),q=$(v,o),r=n.settings,r.url=r.url||a.paths.esSearch,"undefined"!=typeof r.extname&&(n.extension=d.extend(r.extname,n,r.extsettings),"undefined"!=typeof n.extension&&"function"==typeof n.extension.getData&&n.extension.getData()),"undefined"!=typeof r.filters&&(n.filter=d.extend("filters",n,r.filters)),"undefined"!=typeof r.templatename&&(w=c.setup(r.templatename))}function g(a){return e("display"),"undefined"!=typeof n.extension?n.extension.getData(void 0,a):0}function h(a){m=$.extend(a,r),"undefined"!=typeof r.haspager&&r.haspager&&(n.pager=d.extend("pager",n,$.extend({container:$(t,o),nbtotal:m.total},r.pagersettings))),l(m)}function i(a){e("display"),"undefined"!=typeof n.extension&&"function"==typeof n.extension.getData&&n.extension.getData(a)}function j(a){m=$.extend(a,r),l(m)}function k(a){r.extsettings.term=a}function l(a){var c="";null!==w&&(c="undefined"!=typeof a.total?a.total:0,n.settings.resultPluralText&&n.settings.resultSingularText&&(c+=" "+(c>1?n.settings.resultPluralText.replace("($request)",a.extsettings.term):n.settings.resultSingularText.replace("($request)",a.extsettings.term))),$(u,o).text(c),p.html(w(a)),"undefined"!=typeof n.settings.eventOnRender&&b.publish(n.settings.eventOnRender)),e("hide")}var m,n,o,p,q,r,s=".j_itemlist_container",t=".j_itemlist_pager",u=".j_itemlist_nb_total",v=".j_itemlist_loader",w=null;return{init:f,initDataDone:h,changePageDone:j,changePage:i,renderItems:l,loadList:g,manageLoader:e,changeTerm:k}}),AC.define("AC.social.widget.login",["AC.assets.environment","AC.resources.spinner","AC.helpers.url","AC.comp.spinner","AC.widget","AC.event","AC.social.connect"],function(a,b,c,d,e,f,g){function h(){m=this,n=m.$widget,o=m.settings,k(),i(),l()}function i(){for(var a=p.length;a--;)q[p[a]]=e.extend(p[a].toLowerCase(),m)}function j(a){var c=$(a.currentTarget),e=c.attr("data-provider"),f=d(n.find(t),{labelDoing:b.LOAD});return q[e].connect().done(function(a){$.extend(a,{provider:e,shouldCreateAccount:!0}),g.execute(a).done(function(a){a.result.token||(f.hide(),q[e].renderError())}).fail(function(){f.hide(),q[e].renderError()})}).fail(function(){f.hide()}),!1}function k(){n.attr(r)?p=[n.attr(r)]:n.find(s).length&&n.find(s).each(function(a,b){p.push($(b).attr(r))})}function l(){n.attr(r)?n.on("click",j):n.find(s).length&&n.on("click",s,j)}var m,n,o,p=[],q={},r="data-provider",s=["[",r,"]"].join(""),t=".j_spin";return{init:h}}),AC.define("AC.social.widget.megatooltip",["AC.assets.environment","AC.resources.megatooltip","AC.widget","AC.social.user"],function(a,b,c,d){function e(){i=this,j=i.$widget,!ACAD.Manager.formatExists("interstitial")&&ACLight.Cookie.supported&&a.megatooltipActive&&!ACLight.Cookie.get("megatooltip")&&(h(),c.load($(".megatooltip")))}function f(){$(".megatooltip.modal.myfriends").css("top",$("#header").offset().top+$("#header").outerHeight()+"px"),$(".megatooltip").show()}function g(){$(".megatooltip").remove(),$("html, body").removeClass("mega_noscroll")}function h(){var a,c=$(".my_account_btn"),e=!!c.has("a").length,h=e?c.find("a"):c.find("div");ACLight.Cookie.set("megatooltip",1,{days:ACLight.Cookie.get("ACID")?365:60}),$("html, body").addClass("mega_noscroll"),$("body").append('<div class="megatooltip modal_overlay bg_black" style="height: 100%; display: none;"></div><div class="megatooltip modal myfriends" style="display: none"><span class="close">&nbsp;</span><div class="modal-inner"><div class="my_account_nav"><div class="my_account_btn"><div class="arrow">'+(e?'<a href="'+h.attr("data-url")+'">'+h.text()+"</a>":"<span>"+h.text()+"</span>")+'</div></div></div><div class="g_w640"><div class="fs30 social_color ffa margin_10b">'+b.title+'</div><p class="fs16 margin_40b">'+b.discoverFriendsLike+"<br>"+b.discoverFriendsOpinions+'</p><div class="j_w" data-w="login"><span class="button btn-fb btn-large margin_10b" data-provider="FB"><i class="icon-fb"></i> '+b.buttonLabel+"</span></div></div></div></div>"),$(window).on("scroll",g),$(".megatooltip .btn-fb").on("click",function(){a=!0}),$(".megatooltip .close").on("click",g),ACAD.Manager.formatExists(62)?$(window).on("interstitialStop",f):f(),d.doOnConnection(function(){ACLight.Cookie.set("megatooltip",1,{days:d.isOn()?365:60}),a&&g()})}var i,j;return{init:e}}),AC.define("AC.social.widget.myList",["AC.resources","AC.event","AC.social.user","AC.widget","AC.comp.modal","AC.comp.spinner"],function(a,b,c,d,e,f){function g(){r=this,s=r.$widget,x=r.settings,v=r.settings.myList,c.isOn()&&h(),i()}function h(){t=d.extend(v,r,x),s.find(".j_filters").length?w=d.extend("filter",r,x.queryConf):q(1,!0)}function i(){s.on("click",B,j),b.subscribe("user.on",h)}function j(b){function c(){return t.remove(g.data("refentity")).done(function(){l(g.parents(z))}),!1}var d=b.currentTarget,g=$(d),h=a.list.remove[v.toUpperCase()].replace("#"+v+"#",g.data("entityname")),i=f(g);return e.confirm(h,{callback:{yes:c,no:function(){i.hide()}}}),!1}function k(a){var b=a&&a.pageCount?a:a.result&&a.result.pageCount?a.result:null;return b?(x.pagerConf={pageCount:b.pageCount,pageIndex:b.pageIndex,pageSize:b.pageSize},x.pagerConf):b}function l(a){var b,c=a.data("page"),d=1===s.find(z+'[data-page="'+c+'"]').length,e=s.find(z);for(e.filter(function(a){return e.eq(a).data("page")>=c}).addClass(A.substr(1)),d&&c>1&&(c+=-1),b=C.length;b--&&C[b]>=c;b>=0)C.pop();q(c,!0)}function m(){var a=x.pagerConf,b=a.pageIndex,c=x.queryConf,e=$.extend({},a,c);delete e.pageCount,$.inArray(b,C)>-1?(o(b),u.render(a)):t.get(e).done(function(e){var f=e.items||e.result.items;0===f.length?n(!!c.filter):(s.find(y).addClass("hide"),s.find(A).remove(),C.push(b),C.sort(function(a,b){return a-b}),o(b)),u||(u=d.extend("pager",r,x.pagerConf)),a=k(e),u.render(a)})}function n(a){s.find(y).removeClass("hide"),s.find(z).addClass("hide"),!a&&w&&w.hide()}function o(a){w&&w.show(),s.find(z).addClass("hide").filter(function(){return $(this).data("page")===a}).removeClass("hide")}function p(a,b){$.extend(x.queryConf,{order:a,filter:b}),s.find(z).addClass(A.substr(1)),C=[],t.reset(),q(1,!0)}function q(a,b){var c=x.pagerConf;(c.pageIndex!==a||b)&&(c.pageIndex=a,m())}var r,s,t,u,v,w,x={myList:"",myFilters:"",entityType:"",pagerConf:{pageIndex:void 0,pageSize:10,pageCount:1},queryConf:{order:void 0,filter:void 0}},y=".j_no_data",z=".j_pagedlist_item",A=z+"_to_remove",B=".j_remove",C=[];return{init:g,settings:x,display:m,setOrderAndFilter:p,setPageIndex:q}}),AC.define("AC.social.widget.myTvChannelList",["AC.data","AC.event","AC.widget"],function(a,b,c){function d(){h=this,i=h.$widget,e()}function e(){var b={service:"socialAction",entityType:"TvChannel",parameters:{actionType:"fan",pageSize:100}};a.read("listByEntityType",b).done(f).fail(g)}function f(){c.load(i,".j_w_tvlistings")}function g(){}var h,i;return{init:d}}),AC.define("AC.social.widget.nextToReview",["AC.api.my","AC.event","AC.template","AC.social.user"],function(a,b,c,d){function e(){h=this,i={reviewCount:"",toReview:[]},j=h.entity,k=h.$widget,d.getOnConnection(f).done(function(a){var b,c=a.result,d=c.items;if(d.length){for(i.reviewCount=AC.context.my.statistics.reviewCount?AC.context.my.statistics.reviewCount+1:2,i.toReview=d.reverse(),b=i.toReview.length;b--;)i.toReview[b].image=i.toReview[b].image.replace("i_w_h","r_120_160");g()}})}function f(){return a.recommendation.getNextToReview({entityType:j.entityType},{pageSize:h.settings.count||3,options:"url"})}function g(){k.append(c.setup("nextToReview")(i))}var h,i,j,k;return{init:e,getData:f}}),AC.define("AC.social.widget.opinion",["AC.resources.opinion","AC.event","AC.social.user","AC.social.OpinionService","AC.log","AC.widget","AC.helpers.string","AC.helpers.url","AC.comp.modal"],function(a,b,c,d,e,f,g,h,i){function j(){w=this,x=w.$widget,y=w.entity,z=g.replace(C,y),l("review"),l("interest"),l("rating"),l("feedback"),l("share"),k(),r(),w.settings.skipRetrieve!==!0&&c.getOnConnection(n)}function k(){b.subscribe(z,u),b.subscribe(z,v)}function l(a){var b;if(x.find("."+D[a]).length)switch(a){case"interest":w.interest=f.extend("interest",w);break;case"rating":w.rating=f.extend("rating",w,{isEraseEnabled:!w.review});break;case"review":w.review=f.extend("review",w);break;case"feedback":w.feedback=f.extend("feedback",w);break;case"share":b={shareUrlArgs:{route:"review",args:[w.entity,"user"]},args:{action:w.settings.share}},w.share=f.extend("share",w,b)}}function m(a){var c=$.Deferred(),d="remove"===a.action?"delete":w.value.id?"update":"create";return B[d](w.value).done(c.resolve).fail(c.reject),"remove"===a.action&&c.done(function(){b.publish("opinion.removed")}),c.always(r),c.promise()}function n(){var a=$.Deferred(),b={};return w.review&&(b.options={opinion:{review:!0}}),B.get({user:"my",targetType:y.entityType,targetId:y.entityId},b).done(a.resolve).fail(a.reject),a.always(r),a.promise()}function o(a){var b,c={interest:void 0,rating:void 0};for(b=E.length;b--;)E[b]===a.value&&(c.interest=E[b]);for(b=F.length;b--;)F[b]===a.value&&(c.rating=b/2);return c.interest||c.rating||(c.rating=null),c.hasReview=a.reviewStatus&&"None"!==a.reviewStatus,c}function p(a,b,c){var d=a&&"string"==typeof a.review&&a.review.length>=50,e=null===a||c?"NoOpinion":d?F[2*parseFloat(w.value.rating)]:isNaN(parseFloat(a))?b?a:void 0:F[2*parseFloat(a)],f=$.extend(!0,{},w.value.review);if(!e)throw new Error("No opinion recognized.");return w.value.value=e,d&&(f.value=a.review,a.url&&(f.userUrl=a.url),w.value.review=f),w.value.targetKey=y.entityType+"_"+y.entityId,w.value}function q(a){var b=w.value;return b&&b.reviewStatus&&(a||"Blocked,Deleted,Denied,Pending,Reported").indexOf(b.reviewStatus)>-1}function r(a){a&&a.value?b.publish(z,$.extend({},a,o(a))):b.publish(z)}function s(){w.review&&w.review.render(),w.rating&&w.rating.render(),w.interest&&w.interest.render(),w.feedback&&w.feedback.render(),q("Blocked")&&x.find(".j_review_block").length&&x.find(".j_review_block").remove()}function t(b){var c=$.Deferred(),d="WantToSee|NotInterested".indexOf(b)>-1,e=d&&w.value&&b===w.value.interest,f=p(b,d,e),g=e||"NoOpinion"===f.value?"remove":"set",h={action:g,value:f};return"remove"===g&&w.value&&w.value.hasReview?i.confirm(a.warningRemove,{title:a.warningRemoveTitle,callback:{yes:function(){m(h).done(c.resolve)},no:c.reject}}):m(h).done(c.resolve),c.promise()}function u(a){w.value=a,s()}function v(a){w.share&&(w.share.setShareMessageArgs($.extend({},y,{value:a.rating})),w.share.setShareUrl({args:[w.entity,"user"],route:"review"},[w.entity,"user"]))}var w,x,y,z,A={requestType:"item",share:"rating"},B=new d,C="opinion.received_{entityType}_{entityId}",D={interest:"w-interest",rating:"w-rating",review:"w-review",feedback:"w-feedback",share:"w-share"},E=["NotInterested","WantToSee"],F=["Rating_0","Rating_0_5","Rating_1","Rating_1_5","Rating_2","Rating_2_5","Rating_3","Rating_3_5","Rating_4","Rating_4_5","Rating_5"];return{settings:A,init:j,isReported:q,entity:y,getOpinion:n,save:t}}),AC.define("AC.social.widget.postReview",["AC.data","AC.event","AC.social.user","AC.social.OpinionService"],function(a,b,c,d){function e(){i=this,k=i.$widget,j=!1,f(),c.getOnConnection(g).done(function(a){a.reviewStatus&&(j=a.reviewStatus?!0:!1)}).always(h)}function f(){b.subscribe("opinion.removed",function(){j=!1,h()})}function g(){var a=$.Deferred(),b={};return b.options={opinion:{review:!0}},l.get({user:"my",targetType:i.entity.entityType,targetId:i.entity.entityId},b).done(a.resolve).fail(a.reject),a.promise()}function h(){var a=j?"addClass":"removeClass";k[a]("btn-on")}var i,j,k,l=new d;return{init:e,getData:g}}),AC.define("AC.social.widget.profilecollection",["AC.widget"],function(a){function b(){"undefined"!=typeof g.settings.infiniscroll&&(g.infinitescroll=a.extend("infinitescroll",g,g.settings.infiniscroll),g.filters=a.extend("filters",g,g.settings.filters))}function c(a){g.filters.resultCount(a)}function d(a,b){var c=b?!0:!1;return"undefined"!=typeof g.infinitescroll?g.infinitescroll.loadMore(a,c):0}function e(){g=this,h=g.$widget,b()}function f(){}var g,h;return{loadList:d,resultCount:c,init:e,setEvent:f}}),AC.define("AC.social.widget.relationship",["AC.resources.social.buttons.followee","AC.widget","AC.event","AC.log","AC.helpers.string","AC.social.user","AC.social.FolloweeService","AC.social.FollowerService"],function(a,b,c,d,e,f,g,h){function i(){n=this,o=n.$widget,$.extend(t,n.settings),k(),r="follower"===t.relationshipType?new h:new g,s=new g,q=w[t.relationshipType],p=n.entity.entityId,f.getOnConnection(l).done(function(a){var b=!a||q.check&&!a[q.check]?v:u;n.value=a,j(b,a)}).fail(function(a){j(v,a)})}function j(a,b){var c=(a||v)===u&&t.alternateLabel?t.alternateLabel:t.label;n.button.render(a||v,c),n.renderExtended&&n.renderExtended(a,b),x=a}function k(){n.button=b.extend("button",n,{value:t.relationshipType}),n.renderExtended=b.extend(t.relationshipType,n)}function l(){var a=$.Deferred();return f.isMe(p)?void j("disabled"):(r.get({user:"my",followeeId:p}).done(a.resolve).fail(a.reject),a.promise())}function m(){if(!f.isMe(p)){var a,b,c,d=x===v?q.add:q.remove;return"followee"===t.relationshipType?(a=d===q.add?u:v,b=d===q.add?s.create({targetKey:n.entity.entityType+"_"+n.entity.entityId}):s["delete"](n.value)):(c=q.property,a=x===u?v:u,n.value[c]=a===u,b=s.update(n.value)),b.done(function(b){n.value=b,j(a)})}}var n,o,p,q,r,s,t={relationshipType:"followee",label:a.DEFAULT,alternateLabel:""},u="on",v="off",w={followee:{add:"create",remove:"delete",token:"followeeId",api:"followee",check:""},follower:{property:"ignored",token:"followerId",api:"follower",check:"blocked"},friend:{property:"blocked",token:"followeeId",api:"followee",check:"ignored"}},x=v;return{init:i,save:m}}),AC.define("AC.social.widget.shareOnGPlus",["AC.helpers.string","AC.assets.environment","AC.log"],function(a,b,c){function d(){f=this,g=f.$widget,h=f.settings}function e(){var d=a.replace(i,[encodeURIComponent(h.url),b.languageCode]),e=window.screen.width,f=$(document).screenX<e?(e-500)/2:e+(e-500)/2,g=(window.screen.height-250)/2,l=a.replace(j,[f,g]);window.open(d,k,l),c.track({ga:{network:k,socialAction:"share",target:encodeURI(h.url)}})}var f,g,h,i="https://plus.google.com/share?url={0}&hl={1}",j="resizable=yes,width=500,scrollbars=yes,height=250,left={0},top={1}",k="googleplus";return{init:d,share:e}}),AC.define("AC.social.widget.shareOnTwitter",["AC.log","AC.helpers.string"],function(a,b){function c(){f=this,g=f.$widget,h=f.settings,d()}function d(){g.on("click",e)}function e(c){c=c?c:g;var d=g.data("text")||h.text||document.title,e=g.data("url")||h.url,f=window.screen.width,l=c.screenX,m=f>l?(f-500)/2:f+(f-500)/2,n=(window.screen.height-250)/2,o=[encodeURIComponent(e),encodeURI(d),j,encodeURI(i.replace("é","e"))],p=b.replace(k,o),q="resizable=yes,width=500, height=250, left="+m+",top="+n;window.open(p,"twitter",q),a.track({ga:{network:"twitter",socialAction:"click",target:encodeURIComponent(e)}})}var f,g,h,i=$('[property="og:site_name"]').attr("content"),j=$('[httpEquiv="Content-Language"]').length?$('[httpEquiv="Content-Language"]').attr("content").toLowerCase():$('[http-equiv="Content-Language"]').attr("content").toLowerCase(),k="https://twitter.com/share?url={0}&text={1}&lang={2}&via={3}";return{init:c,share:e}}),AC.define("AC.social.widget.shareYourShowTime",["AC.resources.showtimes.share","AC.helpers.string","AC.event","AC.log","AC.comp.modal","AC.assets.environment"],function(a,b,c,d,e,f){function g(){G=this,H=G.$widget,I=H.has(".times em").length?H:H.next().is(".times")?H.next():H.next().is(".list_hours")?H.next():null,J=H.data("theater").lstcircuit,G.settings.isTicketing?null!==I&&(h(),j()):l()}function h(){I.find("em:not(.btn-disabled).cPointer").each(function(){0!==$(this).data("linkurl").indexOf("http")&&$(this).data("linkurl",acConcierged($(this).data("linkurl")))})}function i(){var a=new Date,b=Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds());G.settings.isTicketing&&null!==I&&null!==I.find("em")&&I.find("em").each(function(){var a=$(this).data("starttick");"undefined"!=typeof a&&b>=a&&$(this).addClass("btn-disabled")})}function j(){I.on("click","em:not(.btn-disabled)",function(){var a=$(this).data("linkurl"),b=$(this).data("gaclick");if("FR"===f.siteKey&&"showtimes_film_page"===b.trackerPositionName&&AC.data.getEntity().entityId===f.presaleRefMovie){var c,d,e=b.cTheaterGA.toLowerCase()+"-"+b.theaterNameGA,g=$(this).data("times")[0],h=$(this).parents('[data-w="showtimeTabs"]').find(".tabs-item.current span").data("day"),i=parseInt(g.slice(3,5),10),j=parseInt(g.slice(0,2),10),k=parseInt(h.split(" ")[0],10),l=AC.resources.locale.months.indexOf(h.split(" ")[1]),m=l>=9?2015:2016,n=new Date(m,l,k,j,i);4>j&&n.setDate(n.getDate()-1),c=n.getFullYear()+"-"+("0"+(n.getMonth()+1)).slice(-2)+"-"+("0"+n.getDate()).slice(-2)+"-"+j+"-"+i,d="bouton_reserver::fiche_film_star_wars::"+e+"::"+c,a=window.xtsd+".xiti.com/go.click?xts=565197&s2=2&p="+d+"&clic=S&type=click&url="+$(this).data("linkurl")}a&&(ga&&b&&ga("send","event","book_button",b.trackerPositionName,b.cTheaterGA+"-"+s(b.theaterNameGA)),window.open(a,"_blank"))}),("81002"===J||"81003"===J)&&c.subscribe("user.done",k)}function k(){if(AC.context.my.email){var a=encodeURIComponent(b.base64Encode(AC.context.my.email));I.find("em:not(.btn-disabled).cPointer").each(function(){$(this).data("linkurl",$(this).data("linkurl").replace("[email]",a))})}}function l(){null!==I&&I.on("click","em:not(.btn-disabled)",x).on("mouseover","em:not(.btn-disabled)",C).on("mouseout","em:not(.btn-disabled)",w)}function m(a){return a?a.parents(X).length?a.parents(X):a.parents(".times").prev().is(X)?a.parents(".times").prev():a.parents(".list_hours").prev().is(X)?a.parents(".list_hours").prev():!1:!1}function n(){var a=K.movie,c=b.replace,d={};return d.actions=[{name:c(R,Y),link:a.trailer}],d.caption=window.location.hostname,d.description=c(T,[K.theater.name,K.weekday+", "+K.day,K.times[0]]),d.method="feed",d.name=c(W,[a.title,a.year,Y]),d.picture=a.poster,d}function o(a){var b,c,d=a.split(":");return d.length<2?!1:(b=parseInt(d[0],10),c=parseInt(d[1],10),isNaN(b)||isNaN(c)?!1:!0)}function p(){var a,b,c,d=K.times,e=3===d.length?3:0,f=G.$tooltip,g=["#start_shareYourShowTimeTooltip","#filmstart_shareYourShowTimeTooltip","#end_shareYourShowTimeTooltip"];for(b=0;e>b;b++)c=o(d[b]),c&&(a=2===b?Q:"",f.find(g[b]+" strong").html(d[b]+" "+a)),f.find(g[b]).toggleClass("hide",!c)}function q(a){var c,d,e=$(a),f=m(e);K.routeName=$("body").attr("id"),K.$showtime=e,K.times=e.data("times"),K.movie=f.data("movie"),K.theater=f.data("theater"),e.parents(".showtimeszone").length?(c=".showtimeszone",d=".current a"):e.parents('[data-w="showtimeTabs"]').length&&(c='[data-w="showtimeTabs"]',d=".current span"),K.day=e.parents(c).find(d).data("day"),K.weekday=e.parents(c).find(d).data("weekday"),K.message=b.replace(S,[K.movie.title,K.theater.name,K.weekday+", "+K.day,K.times[0]])}function r(){var a,b=K.$showtime,c=G.$tooltip,d=c.find("span.open_detail_arrow"),e={};b.length&&c.length&&d.length&&(a=11+d.width()/2,e.top=b.offset().top+b.height()+d.height(),e.left=b.width()/2+b.offset().left-a,(e.top||e.left)&&c.css(e))}function s(a){return"undefined"!=typeof a&&null!==a?decodeURIComponent(a.replace(/\+/g," ")):""}function t(){var a,b=K.$showtime,c=G.$tooltip,d={},e=parseInt($("body").css("margin-top").replace("px",""),10);b.length&&c.length&&(a=100,d.top=b.offset().top+b.outerHeight()-e,d.left=b.width()/2+b.offset().left-a,(d.top||d.left)&&c.css(d))}function u(){var a=$.extend(!0,{},n());FB.ui(a,function(a){a&&a.post_id&&e.feedback(U,{title:V})})}function v(a){var c=window.screen.width,d=a.screenX,e=c>d?(c-500)/2:c+(c-500)/2,f=(window.screen.height-250)/2,g=[K.movie.page,K.message,Z,Y],h=encodeURI(b.replace(_,g)),i="resizable=yes, width=500, height=250, left="+e+",top="+f;window.open(h,"twitter",i)}function w(){return G.timerShowId&&"number"==typeof G.timerShowId&&(window.clearTimeout(G.timerShowId),delete G.timerShowId),z(),!1}function x(a){G.$tooltip?y():B(a)}function y(){return G.settings.isTicketing&&I.find("em.btn-on").removeClass("btn-on"),K={},$("#shareYourShowTimeTooltip").remove(),G.$tooltip=null,c.publish("shareyourshowtime.hidden"),!1}function z(){G.timerHideId=window.setTimeout(function(){y()},250)}function A(a){var b=$(a.target);return b.hasClass("link_fb")?u():b.hasClass("link_twt")&&v(a),!1}function B(a){var b=$(a.target);return y(),G.$tooltip=$(G.settings.isTicketing?E(a):F()).on("mouseenter",D).on("mouseleave",w).on("click",".close",y).on("click",".social_share",A),$("body").append(G.$tooltip),q(a.target),G.settings.isTicketing&&!b.hasClass("btn-on")&&b.addClass("btn-on"),K.times&&(p(),G.settings.isTicketing?t():r(),c.publish("shareyourshowtime.shown")),!1}function C(a){return G.timerShowId=window.setTimeout(function(){B(a)},500),!1}function D(){return G.timerHideId&&"number"==typeof G.timerHideId&&window.clearTimeout(G.timerHideId),!1}function E(a){var c=$(a.target),d=c.data("linkurl"),e=c.data("gaclick");return'<div id="shareYourShowTimeTooltip" class="tooltipHours"><p class="margin_10b">'+M+'<span id="start_shareYourShowTimeTooltip"><strong></strong><br></span><span id="filmstart_shareYourShowTimeTooltip">'+N+"<strong></strong><br></span>"+O+'<span id="end_shareYourShowTimeTooltip"><strong></strong></span></p>'+("undefined"!=typeof d?b.replace(aa,[d,e.trackerPositionName,e.cTheaterGA,s(e.theaterNameGA)]):"")+"</div>"}function F(){return'<div id="shareYourShowTimeTooltip" class="open_detail"><div class="open_detail_inner"><span class="open_detail_arrow"></span><a href="#" class="close">close</a><div class="film_bse"><div id="start_shareYourShowTimeTooltip"><span>'+M+'</span> <strong></strong></div><div id="filmstart_shareYourShowTimeTooltip"><span>'+N+'</span> <strong></strong></div><div id="end_shareYourShowTimeTooltip"><span>'+O+'</span> <strong></strong></div></div><div class="social_share">'+P+'&nbsp;<a href="#" class="link_fb">Facebook</a>&nbsp;<a href="#" class="link_twt">Twitter</a></div></div></div>'}var G,H,I,J,K={},L=a,M=L.CAPTION_SHAREYOURSHOWTIME_BEGINNING,N=L.CAPTION_SHAREYOURSHOWTIME_START,O=L.CAPTION_SHAREYOURSHOWTIME_END,P=L.CAPTION_SHAREYOURSHOWTIME_SHAREON,Q=L.CAPTION_SHAREYOURSHOWTIME_AROUND,R=L.CAPTION_SHAREYOURSHOWTIME_ACTION,S=L.CAPTION_SHAREYOURSHOWTIME_TO_POST_WITH_TITLE,T=L.CAPTION_SHAREYOURSHOWTIME_TO_POST_WITHOUT_TITLE,U=L.MESSAGE_SHAREYOURSHOWTIME_SUCCEED,V=L.MESSAGE_SHAREYOURSHOWTIME_SUCCEED_TITLE,W="{0} ({1}) - {2}",X='[data-w="shareYourShowTime"]',Y=$('[property="og:site_name"]').attr("content"),Z=$('[httpEquiv="Content-Language"]').length?$('[httpEquiv="Content-Language"]').attr("content").toLowerCase():$('[http-equiv="Content-Language"]').attr("content").toLowerCase(),_="https://twitter.com/share?url={0}&text={1}&lang={2}&via={3}",aa='<a href="{0}" '+("undefined"!=typeof ga?"onclick=\"ga('send', 'event', 'book_button', '{1}', '{2}-{3}');\"":"")+' class="button btn-primary btn-large">Reserver</a>';return{init:g,render:i}}),AC.define("AC.social.widget.showtimes",["AC.helpers.date","AC.assets.environment","AC.resources.showtimes","AC.resources.locale","AC.helpers.string","AC.template","AC.widget","AC.event"],function(a,b,c,d,e,f,g,h){function i(){z=this,A=z.$widget,B=z.settings,C=A.prev("article"),$.each($(N,A),function(a,b){I.push($(b).data("date"))}),D=a.createUTCDate(B.now.year,B.now.month,B.now.day,B.now.hour,B.now.minute),E=a.createUTCDate(B.firstDay.year,B.firstDay.month,B.firstDay.day),G="opinion.received_movie_"+C.data("entities").entityId,H=$("#showtimesTemplate").html(),j()}function j(){$.getJSON(B.url,function(a){F=a.feed.theaterShowtimes,k(),l(),m(),q(),r(),s()})}function k(){var c,d,e,f;$.each(F,function(g,h){c=h.place.theater,c.circuit=c.cinemaChain?c.cinemaChain.code:null,c.name=c.name.replace("'","’"),c.address&&(c.address=c.address.replace("'","’")),c.city&&(c.city=c.city.replace("'","’")),c.subway&&(c.subway=c.subway.replace("'","’")),$.each(h.movieShowtimes,function(c,g){for(var h=0;h<=I.length;h++)d=g.scr[h],e=a.getDay(a.createUTCDate(E.getFullYear(),E.getMonth()+1,E.getDate()+h)),d&&d.d===e||g.scr.splice(h,0,{d:e,t:[]});$.each(g.scr,function(c,d){d.bookable=!1,$.each(d.t,function(c,e){f=a.createUTCDate(d.d.slice(0,4),d.d.slice(5,7),d.d.slice(8,10),e.$.slice(0,2),e.$.slice(3,5)),e.past=D>f,f.setMinutes(f.getMinutes()+e.p),e.begin=a.getTime(f),g.onShow.movie.runtime&&(f.setSeconds(f.getSeconds()+g.onShow.movie.runtime),e.end=a.getTime(f)),e.booking="FR"===b.siteKey&&e.tk?e.tk:g.ticketing,!e.past&&e.booking&&(d.bookable=!0)})})})})}function l(){var a,b;$.each(F,function(c,d){
$.each(d.movieShowtimes,function(c,d){$.each(d.scr,function(c,e){if(a=d.scr[c-1],e.t)for(var f=e.t.length-1;f>=0;f--)b=e.t[f],parseInt(b.$,10)<4&&(a&&a.t.push(b),e.t.splice(f,1))})})})}function m(){n(),o()}function n(){var a,b,c;$.each(F,function(d,e){e.nextMovieShowtimes=[];for(var f=0;f<I.length;f++)e.nextMovieShowtimes[I[f]]={hasShowtimes:!1,next:[]};$.each(e.movieShowtimes,function(d,f){a={};for(var g=f.scr.length-1;g>=0;g--)b=f.scr[g],c=e.nextMovieShowtimes[b.d],b.t.length>0?(a.date=b.d,a.isPreview="true"===f.preview,a.isBookable=b.bookable,c&&(c.hasShowtimes=!0)):!c||c.hasShowtimes||$.isEmptyObject(a)||c.next.push($.extend({},a))})})}function o(){var a,b,c,d;$.each(F,function(e,f){for(var g in f.nextMovieShowtimes)if(f.nextMovieShowtimes.hasOwnProperty(g)){if(a=f.nextMovieShowtimes[g],a.hasShowtimes)delete f.nextMovieShowtimes[g];else if(a.next.length>1)for(b=a.next.length-2;b>=0;b--)JSON.stringify(a.next[b])===JSON.stringify(a.next[b+1])?a.next.splice(b,1):(c=new Date(a.next[b+1].date),d=new Date(a.next[b].date),c>d||d===c&&d.isPreview&&!c.isPreview||d===c&&d.isPreview===c.isPreview&&d.isBookable&&!c.isBookable?a.next.splice(b+1,1):a.next.splice(b,1));a.label=p(a.next)}})}function p(a){var b,f,g,h,i;return $.isEmptyObject(a)?b=c.NO_NEXT_SHOWTIME:(f=a[0],g=new Date(f.date),h=e.replace(c.DATE_FORMAT,[d.days[g.getDay()],g.getDate(),d.months[g.getMonth()]]),i=$.inArray(f.date,I)>-1,h=i?e.replace(L,[f.date,h]):h,b=f.isPreview&&f.isBookable&&i?e.replace(c.NEXT_BOOKABLE_PREVIEW_SHOWTIME,h):f.isPreview?e.replace(c.NEXT_PREVIEW_SHOWTIME,h):f.isBookable&&i?e.replace(c.NEXT_BOOKABLE_SHOWTIME,h):e.replace(c.NEXT_SHOWTIME,h)),b}function q(){$.each(F,function(a,b){$.each(b.movieShowtimes,function(a,b){for(var c=b.scr.length-1;c>=0;c--)-1===$.inArray(b.scr[c].d,I)&&b.scr.splice(c,1)})})}function r(){var c=f.setup(H,{partialTemplate:f.setup(null)}),d=$(c({theaterShowtimes:F}));1===B.theaterCount&&($(M,A).unwrap(),$('[class^="moreOrLess"]',A).remove()),d.insertAfter($(M,A)),u(a.getDay(E)),A.removeClass("hide"),"FR"!==b.siteKey&&g.load(A,P)}function s(){$(N+", "+Q+" a",A).on("click",t),h.subscribe(G,v),"FR"===b.siteKey&&($(S,A).on("click",w),$(S,A).on("mouseenter",x),$(S,A).on("mouseleave",y))}function t(a){var b=$(a.currentTarget).data("date");h.publish(J),$(O).removeClass("btn-on"),u(b,!0),$(N+'[data-date="'+b+'"] span').addClass("btn-on")}function u(a,b){var c=b?"body":A;$(Q,c).removeClass("first").addClass("hide"),$(Q+'[data-date="'+a+'"]',c).removeClass("hide"),$(".showtimes",c).find(Q+":not(.hide):first").addClass("first")}function v(a){"WantToSee"===a.value&&$(K).prependTo(C.find("figure")).hide().fadeIn()}function w(a){var b=$(a.currentTarget).data("showtime").booking,c=$(a.currentTarget).parents(".showtimes").data("theater").circuit;b&&(("81002"===c||"81003"===c&&AC.context.my.email)&&(b=b.replace("[email]",encodeURIComponent(e.base64Encode(AC.context.my.email)))),window.open(b))}function x(a){var b=$(a.currentTarget).find(R);b.removeClass("hide").css("margin-left","-"+b.outerWidth()/2+"px")}function y(a){$(a.currentTarget).find(R).addClass("hide")}var z,A,B,C,D,E,F,G,H,I=[],J="timelineDateChanged",K='<ul class="activity-ribbon"><li><i class="icon-thumbs-up"></i></li></ul>',L='<a data-date="{0}">{1}</a>',M=".weekShow",N=".weekShow li",O=".weekShow li span",P=".showtimesList",Q=".hours",R=".simple_tooltip",S=".hours .btn-hour:not(.btn-disabled)";return{init:i}}),AC.define("AC.social.widget.showtimesInlay",["AC.assets.environment","AC.resources.showtimes.share","AC.event","AC.template","AC.helpers.string","AC.comp.modal","AC.social.widget.shareOnTwitter","AC.social.widget.shareOnGPlus","AC.log"],function(a,b,c,d,e,f,g,h,i){function j(){u=this,v=u.$widget,w=$(".btn-hour:not(.btn-disabled)",v),x=$("#showtimesInlayTemplate").html(),k()}function k(){w.on("click",m),c.subscribe("timelineDateChanged",p),c.subscribe("showMoreBlockClosed",n)}function l(a){y.movie=v.parents("[data-showtimes]").prev("article").data("movie"),y.theater=a.parents(".showtimes").data("theater"),y.day=$(".btn-on",v.prev(".weekShow")).data("day"),y.showtime=a.data("showtime")}function m(a){var b=$(a.target),c=$(C).data("id")?$(C).data("id").toString():null,d=b.data("showtime").id;d===c?p():o(b)}function n(a){$(C,a).length&&p()}function o(a){p(),l(a),q(a)}function p(){y={},$(C).remove(),u.$inlay=null}function q(a){var b=a.parents(".hours"),c=d.setup(x,{partialTemplate:d.setup(null)}),e=$(c({showtime:y.showtime})),f=a.offset().left-b.offset().left+a.outerWidth()/2;$("b",e).css("left",f+"px"),e.insertAfter(b.find("ul")),u.$inlay=e.on("click",".close",p).on("click",'[class*="btn-share-"]',r)}function r(a){var c=$(a.target).attr("class"),d=e.replace(b.CAPTION_SHAREYOURSHOWTIME_TO_POST_WITH_TITLE,[y.movie.title,y.theater.name,y.day.weekDay+", "+y.day.monthDay,y.showtime.time]);switch(c){case"icon-fb":s(d);break;case"icon-tw":g({text:d,url:y.movie.url}).share();break;case"icon-gplus":h({url:y.movie.url}).share();break;case"icon-mail":t()}}function s(c){var d={method:"feed",link:y.movie.url,picture:y.movie.poster,name:e.replace(z,[y.movie.title,y.movie.year,a.siteName]),caption:window.location.hostname,description:c,actions:[{name:e.replace(b.CAPTION_SHAREYOURSHOWTIME_ACTION,a.siteName),link:y.movie.media}]};FB.ui(d),i.track({ga:{network:"facebook",socialAction:"share",target:encodeURI(y.movie.url)}})}function t(){var c,d=encodeURIComponent(e.replace(b.MAIL_SUBJECT,y.movie.title)),f=[],g="";y.theater.address&&f.push(encodeURIComponent(y.theater.address)),(y.theater.postalCode||y.theater.city)&&f.push(encodeURIComponent(y.theater.postalCode+" "+y.theater.city)),y.theater.subway&&f.push(encodeURIComponent(y.theater.subway)),y.movie.synopsis&&(g=encodeURIComponent(b.MAIL_SYNOPSIS+" "+y.movie.synopsis)+B),c=e.replace(b.MAIL_BODY,[encodeURIComponent(y.movie.title),encodeURIComponent(y.theater.name),f.join(B),encodeURIComponent(y.day.weekDay+", "+y.day.monthDay),encodeURIComponent(y.showtime.time),g,encodeURIComponent(y.movie.url),encodeURIComponent(a.paths.home)]),window.location.href=e.replace(A,[d,c])}var u,v,w,x,y={},z="{0} ({1}) - {2}",A="mailto:?subject={0}&body={1}",B="%0D",C="#showtimeInlay";return{init:j}}),AC.define("AC.social.widget.similar_stars_completion",["AC.social.user","AC.assets.environment"],function(a,b){function c(){d=this,e=d.$widget,a.getOnConnection(function(){f.loadCompletion(AC.context.my)})}var d,e,f={getFilmoCountUrl:function(a){return b.paths.esSpeednoter+"/filmocount?person=(person)".replace("(person)",a)},getFilmoUserRateUrl:function(a){return b.paths.esSpeednoter+"/filmo?person=(person)&userid=(userid)&from=(from)&size=(size)".replace("(person)",a).replace("(userid)",d.userid).replace("(from)",0).replace("(size)",0)},loadCompletion:function(a){d.userid=a.id.toUpperCase(),$.each($("[data-cperson]",e),function(a,b){var c=$(b),d=c.attr("data-cperson");$.ajax(f.getFilmoCountUrl(d)).done(function(a){0===a.total?($("[data-progression]",c).css("width","100%").html("<span>100%</span>"),$("[data-progression-wrapper]",c).removeClass("hide")):$.ajax(f.getFilmoUserRateUrl(d)).done(function(b){var d=((a.total-b.total)/a.total*100).toFixed(0);d=d>100?100:0>d?0:d,20>d&&$("[data-progression]",c).addClass("eval_bar_min"),$("[data-progression]",c).css("width",d+"%").html("<span>"+d+"%</span>"),$("[data-progression-wrapper]",c).removeClass("hide")})})})}};return{init:c}}),AC.define("AC.social.widget.socialAction",["AC.event","AC.social.user","AC.social.SocialActionService","AC.log","AC.helpers.string","AC.widget","AC.ui"],function(a,b,c,d,e,f,g){function h(){p=this,q=p.$widget,r=p.settings,s=r.action,v=r.warningMessage,t=p.entity,k(),u=e.replace(z,$.extend({},t,{action:s})),y[s]&&(w=e.replace(z,$.extend({},t,{action:y[s]}))),l(),p.settings.skipRetrieve!==!0&&b.getOnConnection(n).done(function(){g.tooltip("#"+p.id)})}function i(b){var c=b?"on":"off";x!==c&&(a.publish(u,{state:c,value:b,targetKey:p.entity.entityType+"_"+p.entity.entityId}),w&&a.publish(w,{state:"off",value:b,targetKey:p.entity.entityType+"_"+p.entity.entityId}))}function j(){p.button.render(x,r.label)}function k(){p.button=f.extend("button",p,{value:s,display:r.display})}function l(){a.subscribe(u,function(a){x=a.state,p.value=a.value,j(x)})}function m(a){return"Review"===a?"Opinion":"MediaVideo"===a?"Video":a}function n(){var a=$.Deferred(),b=m(t.entityType);return t.userId===AC.context.my.id&&(a.reject(),p.button.render("off",null,v)),A.get({user:"my",type:r.action,targetType:b,targetId:t.entityId}).done(a.resolve).fail(a.reject),a.done(i),a.promise()}function o(){var a,b=$.Deferred();if(t.userId!==AC.context.my.id)return a="off"===x?A.create({type:r.action,targetKey:m(t.entityType)+"_"+t.entityId}):A["delete"](p.value),a.done(b.resolve).fail(b.reject),b.done(i),b.promise()}var p,q,r,s,t,u,v,w,x="off",y={Helpful:"Unhelpful",Unhelpful:"Helpful"},z="socialAction.received_{entityType}_{entityId}_{action}",A=new c;return{init:h,save:o,getAction:n,render:j}}),AC.define("AC.social.widget.speednoter",["AC.widget","AC.template","AC.comp.spinner","AC.social.user","AC.resources.speednoter","AC.resources.social.collection","AC.assets.environment","AC.api.my.profile","AC.environmentOverride","AC.social.SpeednoterService","AC.helpers.xiti","AC.helpers.string","AC.helpers.url","AC.event"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(){p=this,q=p.$widget,p.isInitialised=!1,s.showSpinner(),d.getOnConnection(function(){s.initSpeedNoter(AC.context.my)})}var p,q,r="my_website::speednoter::{entitytype}::by_genre_{entitytype}_speednoter",s={showSpinner:function(){p.isLoading=!0,p.spinner=c(q)},hideSpinner:function(){p.isLoading=!1,p.callbackOnFinishLoading!==!1&&(p.callbackOnFinishLoading(),p.callbackOnFinishLoading=!1),p.spinner.hide()},showFilmoCountSpinner:function(){p.person.isLoading=!0,p.personSpinner=c($("#personFilmoSpinner"))},hideFilmoCountSpinner:function(){p.person.isLoading=!1,null!==p.personSpinner&&p.personSpinner.hide()},reinitSetCallback:function(a){p.reinitCallback=a},reinitIndexWaiting:function(a){a&&"function"==typeof a&&s.reinitSetCallback(a),p.isInitialisingElasticSearch=!0},reinitIndexDone:function(a){p.isInitialisingElasticSearch=!1,p.reinitCallback&&window.setTimeout(function(){p.reinitCallback(),p.reinitCallback=!1},Math.ceil(1500+(a?a/10:0)))},appendSlides:function(a){null!==a&&$.each(a,function(a,b){p.slides.push(b)})},getServiceUrl:function(a,b){switch(p.settings.entityType){case"movies":return("/movie?userid=(userid)&from=(from)&size=(size)"+(p.selectedGenre?"&genreid=(genre)":"")).replace("(userid)",p.userid).replace("(genre)",p.selectedGenre?p.selectedGenre.id:"").replace("(from)",a.movie<0?0:a.movie).replace("(size)",p.pageSize);case"series":return("/series?userid=(userid)&from=(from)&size=(size)"+(p.selectedGenre?"&genreid=(genre)":"")).replace("(userid)",p.userid).replace("(genre)",p.selectedGenre?p.selectedGenre.id:"").replace("(from)",a.serie<0?0:a.serie).replace("(size)",p.pageSize);case"persons":return"/filmo?person=(person)&userid=(userid)&from=(from)&size=(size)".replace("(person)",b).replace("(userid)",p.userid).replace("(from)",a.movie+a.serie<0?0:a.movie+a.serie).replace("(size)",p.pageSize);default:return[("/movie?userid=(userid)&from=(from)&size=(size)"+(p.selectedGenre?"&genreid=(genre)":"")).replace("(userid)",p.userid).replace("(genre)",p.selectedGenre?p.selectedGenre.id:"").replace("(from)",a.movie<0?0:a.movie).replace("(size)",Math.round(.7*p.pageSize)),("/series?userid=(userid)&from=(from)&size=(size)"+(p.selectedGenre?"&genreid=(genre)":"")).replace("(userid)",p.userid).replace("(genre)",p.selectedGenre?p.selectedGenre.id:"").replace("(from)",a.serie<0?0:a.serie).replace("(size)",p.pageSize-Math.round(.7*p.pageSize))]}},callReinitIndex:function(a){s.reinitIndexWaiting(a);var b=new j,c="options=user(statistics)",d=p.movieSessionCount,e=p.serieSessionCount,f=d+e;p.userStats.seriesRatingCount=0,p.userStats.moviesRatingCount=0,b.init("my",c).done(function(a){p.hasMovies=a.hasMovies===!0,p.hasSeries=a.hasSeries===!0,a.indexingCount>=0&&(p.esToRateCount-=f,p.sessionCount-=f,p.movieSessionCount-=d,p.serieSessionCount-=e),s.reinitIndexDone(a.indexingCount)}).fail(function(){s.reinitIndexDone(0)})},shuffle:function(a){var b,c,d,e;for(e=a.length;e;c=Math.floor(Math.random()*e),d=a[--e],a[e]=a[c],a[c]=d)b=42;return a},processResult:function(a,b){return p.esToRateCount=a.total,"persons"===p.settings.entityType&&p.person.isLoading&&s.hideFilmoCountSpinner(),a.hits.length<=0?(p.isLoading=!1,b&&b(null),s.hideSpinner()):(s.addEntitiesToSpeednoter(a.hits),p.nthElementTriggerGetNext=p.slides.length-p.nbElementBeforeReload,null!==p.genre||"movies"!==p.settings.entityType&&"series"!==p.settings.entityType||(p.genre=a.facets.genre,s.initGenreDropdown(a.facets.genre)),b&&b(a),s.hideSpinner())},merge:function(a,b){return{total:a.total+b.total,hits:s.shuffle($.merge(a.hits,b.hits)),facets:$.merge(a.facets,b.facets)}},callService:function(a,b){if(p.isInitialisingElasticSearch)return void s.reinitSetCallback(function(){window.setTimeout(function(){s.callService(a,b)},1e3)});p.isLoading=!0;var c,d,e,f=p.serieSkipped+p.serieSessionCount,h=p.movieSkipped+p.movieSessionCount;for(e=p.currentSlide+(b?1:0);e<p.slides.length;e++)"series"===p.slides[e].entitytype?f++:"movie"===p.slides[e].entitytype&&h++;c=s.getServiceUrl({movie:h,serie:f},p.person?p.person.id:0),d="string"==typeof c?c:c[0],$.ajax(g.paths.esSpeednoter+d).done(function(b){"string"!=typeof c?$.ajax(g.paths.esSpeednoter+c[1]).done(function(c){s.processResult(s.merge(b,c),a)}):s.processResult(b,a)}).fail(function(a){p.notUsedVar=a})},renderSummary:function(){var a=b.setup(p.summaryTemplate,{partialTemplate:b.setup(null)});q.find("[data-summary]").html($(a({hasMovies:p.hasMovies,hasSeries:p.hasSeries})))},getRatingHtml:function(a){var c,d,e,f=a.entitytype+"_"+a.id;return c=b.setup(p.ratingTemplate,{partialTemplate:b.setup(null)}),d=$(c(a)),d.attr("id","speednoter_opinion_"+f).removeClass("hide"),e=$('<div id="speednoter_target_'+f+'"></div>'),e.html(d),e},getEntityUrl:function(a){switch(a.entitytype){case"movie":return g.paths.MOVIE_HOME.replace("(cmovie)",a.id);case"series":return g.paths.SERIES_HOME.replace("(cseries)",a.id);default:return"/"}},processPeriod:function(a){a.productionperiod=a.yearstart+" - "+(a.yearend?a.yearend:e.today)+(a.productionstatuslabel?", "+a.productionstatuslabel:"")},processCasting:function(a){a.castingstar&&a.castingstar.length>0&&($.each(a.castingstar,function(b,c){c.id===""+p.settings.entityId&&(c.role?a.roles?a.roles.push(c.role):a.roles=[c.role]:a.activities?a.activities.push(c.activitylabel):a.activities=[c.activitylabel])}),a.roles?(a.roles=a.roles.join(", ").split(/,|\/| - +/).splice(0,5),a.rolesTitle=a.roles.length>1?1===p.settings.personGender?e.roles.manPlural:e.roles.womanPlural:1===p.settings.personGender?e.roles.manSingular:e.roles.womanSingular,a.roles=a.roles.join(", "),a.activities=""):a.activities&&(a.activities=a.activities.join(", ").split(/,|\/| - +/).splice(0,5),a.activitiesTitle=a.activities.length>1?1===p.settings.personGender?e.activities.manPlural:e.activities.womanPlural:1===p.settings.personGender?e.activities.manSingular:e.activities.womanSingular,a.activities=a.activities.join(", ")))},addEntitiesToSpeednoter:function(a){var c="";$.each(a,function(a,d){"persons"===p.settings.entityType&&s.processCasting(d),"series"===d.entitytype&&s.processPeriod(d),d.url=s.getEntityUrl(d),d.ratingHtml=s.getRatingHtml(d)[0].outerHTML;var e=b.setup(p.itemTemplate,{partialTemplate:b.setup(null)}),f=$(e(d));c+=f[0].outerHTML}),q.find("#speednoterLastSlide").before(c),s.appendSlides(a),q.find(".slider").width(790*(p.slides.length+1))},render:function(){var b=p.slides.length>0?p.slides[p.currentSlide]:!1,c=b!==!1?b.entitytype+"_"+b.id:"";b!==!1?($(".slider").animate({"margin-left":"-"+parseInt($(".slide",q).width(),10)*p.currentSlide+"px"},200),$("[data-slide-change=next]a").hasClass("disabled")&&$("[data-slide-change=next]a").removeClass("disabled"),p.currentSlide>0?$("[data-slide-change=prev]a").removeClass("disabled"):$("[data-slide-change=prev]a").hasClass("disabled")||$("[data-slide-change=prev]a").addClass("disabled"),b.hasAlreadyBeenDisplayed!==!0&&(b.hasAlreadyBeenDisplayed=!0,AC.ui.tooltip("#speednoter_opinion_"+c),a.load($("#speednoter_slide_"+c),".j_w_speednoter"))):p.isLoading===!1&&p.isInitialisingElasticSearch===!1&&s.renderLastSlide(),s.renderSummary(),s.renderPersonFilmoHeader()},renderLastSlide:function(){$("#speednoterLastSlide .carousel_end").removeClass("hide"),$("#speednoterLastSlide [data-msg]").text(s.getLastSlideMessage()),$(".slider").animate({"margin-left":"-"+parseInt($(".slide",q).width(),10)*p.slides.length+"px"},500),$("[data-slide-change=next]a").hasClass("disabled")||$("[data-slide-change=next]a").addClass("disabled"),s.renderSummary(),s.renderPersonFilmoHeader()},didJustValidate:function(a){var b=!1;0===a.indexOf("movie")?p.hasMovies=!0:0===a.indexOf("serie")&&(p.hasSeries=!0),$.each(p.slides,function(c,d){d.entitytype+"_"+d.id===a&&(d.isRated===!0&&(b=!0),d.isRated=!0)}),b===!1&&(0===a.indexOf("movie")&&(p.movieCount++,p.movieSessionCount++),0===a.indexOf("serie")&&(p.serieCount++,p.serieSessionCount++),p.sessionCount++),s.nextSlide(!0)},didJustRate:function(a){s.didJustValidate(a)},didJustCancelRate:function(a){var b=!1;$.each(p.slides,function(c,d){d.entitytype+"_"+d.id===a&&(d.isRated===!0&&(b=!0),d.isRated=!1)}),b===!0&&(0===a.indexOf("movie")&&(p.movieCount--,p.movieSessionCount--),0===a.indexOf("serie")&&(p.serieCount--,p.serieSessionCount--),p.sessionCount--),s.nextSlide(!1)},checkSkippedElement:function(a){var b=p.slides[p.currentSlide],c=b.entitytype+"_"+b.id,d=!1;b.isRated===!0&&(a=!0),$.each(p.skippedEntities,function(a,b){b===c&&(d=a)}),a!==!0&&d===!1?("movie"===b.entitytype?p.movieSkipped++:"series"===b.entitytype&&p.serieSkipped++,p.skippedEntities.push(c)):a===!0&&d!==!1&&("movie"===b.entitytype?p.movieSkipped--:"series"===b.entitytype&&p.serieSkipped--,p.skippedEntities.splice(d,1))},nextSlide:function(a){p.currentSlide>0&&p.currentSlide%p.nthElementTriggerGetNext===0&&(p.nthElementTriggerGetNext+=p.pageSize,s.callService(!1,a)),p.currentSlide+1<p.slides.length?(s.checkSkippedElement(a),p.currentSlide++,k.refreshTraficTags(),s.render()):p.isLoading||p.isInitialisingElasticSearch?p.callbackOnFinishLoading===!1&&(s.showSpinner(),p.callbackOnFinishLoading=function(){s.nextSlide(a)}):(p.currentSlide=p.slides.length,s.renderLastSlide())},prevSlide:function(){p.currentSlide>0&&(p.currentSlide--,k.refreshTraficTags(),s.render())},initSliderEvents:function(){$("body").on("keyup",function(a){37===a.which?s.prevSlide():39===a.which&&s.nextSlide()}),$("[data-slide-change]",q).on("click",function(){"prev"===$(this).attr("data-slide-change")?s.prevSlide():"next"===$(this).attr("data-slide-change")&&s.nextSlide()}),n.subscribe("preAction",function(a){var b=p.slides[p.currentSlide].entitytype+"_"+p.slides[p.currentSlide].id;"rating"===a.action&&a.value||"off"===a.value?s.didJustRate(b):s.didJustCancelRate(b)}),$(window).on("resize",function(){s.render()})},selectGenre:function(a,b){var c,d=$("#speednoterGenreSelection .w-subcontainer li");$("#speednoterGenreSelection a[data-title] span").text(a.text()),window.setTimeout(function(){$("#speednoterGenreSelection .w-subcontainer").addClass("hide")},100),k.refreshTraficTags(l.replace(r,{entitytype:p.settings.entityType})),c="0"===a.attr("data-genre-id")?void 0:{id:a.attr("data-genre-id"),name:a.text()},window.history.pushState&&window.history.pushState(null,"",window.location.protocol+"//"+m.parse().hostname+m.parse().pathname+(c?"?genre="+c.id:"")),d.removeClass("hide"),d.children("a[data-genre-id]").removeClass("hide"),d.has('a[data-genre-id="'+(c?c.id:0)+'"]').addClass("hide"),d.children('a[data-genre-id="'+(c?c.id:0)+'"]').addClass("hide"),s.callReinitIndex(function(){s.reloadSpeedNoter(c)}),b.preventDefault()},renderPersonFilmoHeader:function(){if(p.person){p.person.count>=0&&p.sessionCount>=0&&(p.person.progression=Math.round((p.person.count-p.esToRateCount+p.sessionCount)/p.person.count*100),p.person.progression=isNaN(p.person.progression)?100:p.person.progression);var a=b.setup($("#speednoterFilmoHeaderTemplate")[0].innerHTML,{partialTemplate:b.setup(null)});q.find("#speednoterFilmoHeader").html($(a({title:e.filmo.title+p.person.name,progression:p.person.progression}))),q.find("#speednoterFilmoHeader").removeClass("hide")}},callPersonFilmoCount:function(){p.person={id:p.settings.entityId,name:p.settings.personName,progression:0,count:0},s.showFilmoCountSpinner(),$.ajax(g.paths.esSpeednoter+"/filmocount?person="+p.person.id).done(function(a){p.person.count=a.total,s.renderPersonFilmoHeader(),s.hideFilmoCountSpinner()}).fail(function(){s.hideFilmoCountSpinner()})},reloadSpeedNoter:function(a){p.isLoading||s.showSpinner(),"persons"===p.settings.entityType&&"undefined"!=typeof p.settings.personName&&"undefined"!=typeof p.settings.entityId&&s.callPersonFilmoCount(),"undefined"!=typeof p.slides&&(p.selectedGenre=a),p.callbackOnFinishLoading=!1,p.sessionCount=0,p.movieSessionCount=0,p.serieSessionCount=0,p.esToRateCount=-1,p.movieSkipped=0,p.serieSkipped=0,p.notIndexedEntities=[],p.skippedEntities=[],p.slides&&p.slides.length>0&&$.each(p.slides,function(a,b){n.publish("rating.delete",$("#speednoter_slide_"+b.entitytype+"_"+b.id))}),p.slides=[],p.isLastPage=!1,p.currentSlide=0,$("#speednoter .slider .slide:not(#speednoterLastSlide)").remove(),window.setTimeout(function(){s.callService(s.render)},1e3),$("#speednoter").removeClass("hide")},initGenreDropdown:function(a){if(a.length>0){$.each(a,function(a,b){b.name="",$.each(g.genres,function(a,c){return c.key===b.id?(b.name=c.name,!0):void 0})}),a.unshift({count:0,id:0,name:e.tous});var c,d=b.setup($("#speednoterGenreSelectionTemplate")[0].innerHTML,{partialTemplate:b.setup(null)}),f=$(d({genres:a}));$("#speednoter",q).before(f),$("#speednoterGenreSelection .w-subcontainer li:first",q).addClass("hide"),$("#speednoterGenreSelection .w-subcontainer li:first a",q).addClass("hide"),$("a[data-genre-id]",q).on("click",function(a){s.selectGenre($(this),a)}),p.settings.selectedGenre&&(c=$("#speednoterGenreSelection .w-subcontainer li"),c.removeClass("hide"),c.has('a[data-genre-id="'+p.settings.selectedGenre+'"]').addClass("hide"),$("#speednoterGenreSelection a[data-title] span").text(c.find('a[data-genre-id="'+p.settings.selectedGenre+'"]').text())),AC.widget.load($("#speednoterGenreSelection"),".filterdrop"),AC.event.publish("tabsToSelect")}},initSpeedNoter:function(a){$("#speednoterLastSlide").removeClass("hide"),p.userid=a.id.toUpperCase(),p.isInitialised||(p.hasMovies=!1,p.hasSeries=!1,p.isInitialised=!0,p.userStats={moviesRatingCount:0,seriesRatingCount:0},p.movieCount=0,p.serieCount=0,p.esToRateCount=-1,p.sessionCount=0,p.movieSessionCount=0,p.serieSessionCount=0,p.pageSize=10,"undefined"!=typeof p.settings.selectedGenre&&(p.selectedGenre={id:p.settings.selectedGenre}),p.nthElementTriggerGetNext="undefined"!=typeof p.settings.nthElementTriggerLoadNext?p.settings.nthElementTriggerLoadNext:8,p.nbElementBeforeReload=p.pageSize-p.nthElementTriggerGetNext>0?p.pageSize-p.nthElementTriggerGetNext:1,p.genre=null,p.itemTemplate=$("#speednoterItemTemplate")[0].innerHTML,p.ratingTemplate=$("#speednoterRatingTemplate")[0].innerHTML,p.summaryTemplate=$("#speednoterSummaryTemplate")[0].innerHTML,s.initSliderEvents(),s.callReinitIndex(s.reloadSpeedNoter))},getLastSlideMessage:function(){var a="",b="",c=p.selectedGenre&&p.selectedGenre.name?p.selectedGenre.name.toLowerCase():"";return b="undefined"!=typeof p.settings.entityType?"movies"===p.settings.entityType?e.endSlideMessage.movie:"series"===p.settings.entityType?e.endSlideMessage.series:"persons"===p.settings.entityType?e.endSlideMessage.person:"":"",a=""!==b?"persons"===p.settings.entityType?p.skippedEntities.length>0?e.endSlideMessage.personAllBrowsed.replace("(person)",p.person.name):e.endSlideMessage.personAllRated.replace("(person)",p.person.name):p.skippedEntities.length>0?e.endSlideMessage.genreAllBrowsed.replace("(entitytype)",b.toLowerCase()).replace("(genre)",c):e.endSlideMessage.genreAllRated.replace("(entitytype)",b.toLowerCase()).replace("(genre)",c):p.skippedEntities.length>0?e.endSlideMessage.allBrowsed:e.endSlideMessage.allRated}};return{init:o}}),AC.define("AC.social.widget.spotifySlider",["AC.helpers.cookie","AC.event","AC.context.my","AC.api.spotifyawards","AC.social.user","AC.comp.modal"],function(a,b,c,d,e,f){function g(){e.doOnVerifiedAction("game",function(){f.dialog("address_validation")})}function h(a){switch(a){case"validation":xtpage="competitions::competition_page::best_of_bo::validation_best_of_bo";break;case"thanks":xtpage="competitions::competition_page::best_of_bo::end_votes_best_of_bo"}null!==window.xtparam?window.xtparam+=xt_multc+"&ac="+xt_ac+"&an="+xt_an:window.xtparam=xt_multc+"&ac="+xt_ac+"&an="+xt_an,function(){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src="https://"+xt_xtcpath,(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]||document.getElementsByTagName("script")[0].parentNode).insertBefore(a,null)}(),_comscore.push({c1:"2",c2:"6035191"}),function(){var a=document.createElement("script"),b=document.getElementsByTagName("script")[0];a.async=!0,a.src=("https:"===document.location.protocol?"https://sb":"https://b")+".scorecardresearch.com/beacon.js",b.parentNode.insertBefore(a,b)}()}function i(){for(var a="",b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",c=0;15>c;c++)a+=b.charAt(Math.floor(Math.random()*b.length));return a+(new Date).getTime()}function j(){var b=new Date;"undefined"==typeof a.read(z)&&a.write({name:z,value:i(),expires:{date:new Date(b.setMonth(b.getMonth()+1))}})}function k(){"undefined"==typeof c.id||A||d.getUserParticipation().done(function(a){a.success&&a.result&&(u.addClass("hide"),x.removeClass("hide"))})}function l(){d.getUserVote({userSession:a.read(z)}).done(function(a){a.success&&$.each(a.result,function(a,b){var c="#theme"+a+"_item"+b;$(c,t).parents(".choices").find(".choice-item").removeClass("is_active"),$(c,t).parent().addClass("is_active"),$(c,t).prop("checked",!0),o()}),t.find(".choice-item").removeClass("hide"),t.find(".spotifyloader").addClass("hide")})}function m(){var a;$(this).parents(".choices").find(".choice-item").removeClass("is_active"),$(this).is(":checked")&&($(this).parent().addClass("is_active"),a=p($(this).attr("id")),null!==a&&d.setVote(a),v.slickNext())}function n(){var a=t.find(".choices").eq(v.slickCurrentSlide()).find(".spotifyTrackList[data-attr-src]");a.each(function(){$(this).attr("src",$(this).attr("data-attr-src")),$(this).removeAttr("data-attr-src")})}function o(){0!==t.find(".choices").eq(v.slickCurrentSlide()).find(".choice-item.is_active").length||B?(v.slickSetOption("nextArrow",y,!0),v.slickSetOption("canSwipeLeft",!0,!0)):(v.slickSetOption("nextArrow","",!0),v.slickSetOption("canSwipeLeft",!1,!0))}function p(b){var c=/theme(\d+)_item(\d+)/g,d=[],e={refCategory:null,refSpotifyPollId:null,userSession:a.read(z)};return d=c.exec(b),3===d.length?(e.refCategory=d[1],e.refSpotifyPollId=d[2],e):null}function q(){s=this,t=s.$widget,w=t.find(".spotifyloader"),v=t.find(".s-slider"),u=t.find(".goregister"),x=t.find(".donereigster"),A="undefined"!=typeof s.settings.resultpage&&s.settings.resultpage,B="undefined"!=typeof s.settings.isclosed&&s.settings.isclosed,j(),v.slick({arrows:!0,infinite:!1,focusOnSelect:!1,onAfterChange:function(a,b){o(),n(),A||B||b!==$(".slick-slide",t).length-1||h(t.find(".goregister.hide").length?"thanks":"validation")},onInit:function(){$(".modal_overlay").hide()}}),A||l(),o()}function r(){A||t.on("click",".choice-item input",m),t.on("click",".submitaward",function(){return g(),!1}),b.subscribe("addressValidation.success",function(){d.setParticipation().done(function(a){a.success&&a.result>0&&(u.addClass("hide"),x.removeClass("hide"),h("thanks"))})}),b.subscribe("user.done",k)}var s,t,u,v,w,x,y='<button type="button" class="slick-next">Next</button>',z="ACSSPO",A=!1,B=!1;return{init:q,initEvents:r}}),AC.define("AC.social.widget.switchurl",["AC.social.user"],function(a){function b(){c=this,d=c.$widget,a.getOnConnection(function(){e.initSwitchUrl(AC.context.my)})}var c,d,e={initSwitchUrl:function(a){null===a&&d.attr("href")}};return{init:b}}),AC.define("AC.social.widget.theater_search",["AC.event","AC.social.user","AC.social.UserTheaterService","AC.template","AC.assets.environment","AC.resources.theater","AC.comp.spinner","AC.helpers.xiti"],function(a,b,c,d,e,f,g,h){function i(){D=this,D.nbTheater=0,E=D.$widget,F=D.settings,p(),G=D.settings.template&&$(D.settings.template).length?$(D.settings.template)[0].innerHTML:"",$(N,E).hide().removeClass("hide"),$(U,E).hide().removeClass("hide"),F.toHideWhenSearchResults=F.toHideWhenSearchResults?F.toHideWhenSearchResults:Q,y(0),q()&&u()}function j(){D.settings.spinnerSelector&&(D.spinner=g($(D.settings.spinnerSelector)))}function k(){D.spinner&&D.settings.spinnerSelector&&(D.spinner.hide(),D.spinner=null)}function l(){$(U).hide(),$(V).show()}function m(){$(U).show(),$(V).hide()}function n(){E.find(S).text(0===D.nbTheater?q()?"":f.MY.MODAL_NONE:1===D.nbTheater?f.MY.MODAL_SINGULAR:f.MY.MODAL_PLURAL.replace("{0}",D.nbTheater))}function o(a,b){var c=JSON.parse(a.attr("data-labels"));b===!0?a.attr("class",c.css).attr("data-on","false").html(c.icon+c.label):a.attr("class",c.cssOff).attr("data-on","true").html(c.iconOff+c.labelOff)}function p(){D.theaterData=[],D.theaterApiData=[],a.subscribe(L,function(){r()}),a.subscribe(I,function(a){v({entitytype:a.entitytype,url:e.paths.THEATER_HOME.replace("(ctheaterac)",a.id2),name:a.title1,id:a.id,id2:a.id2}),q()&&l(),$("#qtheater").val("")}),a.subscribe(M,function(){m(),$(F.toHideWhenSearchResults,E).addClass("hide"),q()||u()}),$(R,E).on("click",l),r()}function q(){return H.length>0}function r(){$(K,E).each(function(a,b){var c,d,f=$(b).attr("data-entities"),g=f?JSON.parse(f):null;g&&g.entityId&&"theater"===g.entityType.toLowerCase()&&(c=$("[data-addButton]",$(b)),d=JSON.parse(c.attr("data-labels")),c.on("click",function(){"false"===$(this).attr("data-on")&&v({entitytype:g.entityType,url:e.paths.THEATER_HOME.replace("(ctheaterac)",g.id2),name:g.name,id:g.entityId,id2:g.id2})}),o(c,"undefined"==typeof D.theaterData[g.entityType+"_"+g.id2]))})}function s(b){D.theaterApiData[b.targetKey]=b,b&&b.targetKey?(D.theaterApiData[b.targetKey]=b,a.publish(J.replace("{entityId}",b.targetKey),b)):(k(),$(N,E).show("fade"),window.setTimeout(function(){$(N,E).hide("fade")},2e3))}function t(){H.on("click",".close",function(){window.location.replace(window.location.href)})}function u(){h.refreshTraficTags(W)}function v(b){var c=(b.entitytype+"_"+b.id2).toLowerCase();j(),D.theaterData[c]=b,a.subscribe(J.replace("{entityId}",c),x),B({entityType:b.entitytype,entityId:b.id2}),t()}function w(a){j(),C({entityType:"theater",entityId:$(a.target).attr("data-refentity")}),t()}function x(a,b){if(D.nbTheater++,b=a&&a.targetKey?a.targetKey:b,G&&D.theaterData[b]){var c=d.setup(G,{partialTemplate:d.setup(null)});E.find(O).removeClass("hide"),E.find(P).addClass("hide"),E.find(T).prepend($(c(D.theaterData[b]))).find("li:first .button").on("click",w),D.theaterData[b]=null}$('[data-targetKey="'+b+'"]',E).each(function(a,b){o($(b),!1)}),n(),k(),$(window).trigger("resize.modal")}function y(){A().done(function(a){G&&a&&a.targets&&a.actions&&$.each(a.actions,function(){if("UserTheater"===this.type){var b=a.targets[this.targetKey];b&&(D.theaterApiData[this.targetKey]={url:this.url},D.theaterData[this.targetKey]={id2:b.id,name:b.label,url:e.paths.THEATER_HOME.replace("(ctheaterac)",b.id),closed:$("[data-theaterclosed="+b.id.toUpperCase()+"]").length>0},x(b,this.targetKey))}})}).fail(function(){})}function z(a){E.find("#"+a.targetKey).remove(),D.theaterData[a.targetKey]=null,D.theaterApiData[a.targetKey]=null,$('[data-targetKey="'+a.targetKey+'"]',E).each(function(a,b){
o($(b),!0)}),D.nbTheater--,0===D.nbTheater&&(E.find(O).addClass("hide"),E.find(P).removeClass("hide")),n()}function A(){var a=$.Deferred(),b=X.get(null,{pageSize:2147483647});return b.done(a.resolve).fail(a.reject),a.promise()}function B(a){var b,c=$.Deferred();return b=X.create({targetKey:a.entityType+"_"+a.entityId}),b.done(c.resolve).fail(c.reject),c.always(s),c.promise()}function C(a){var b,c=$.Deferred();return b=X["delete"](D.theaterApiData[a.entityType+"_"+a.entityId]),b.done(c.resolve).fail(c.reject),c.always(function(){k(),z({targetKey:a.entityType+"_"+a.entityId})}),c.promise()}var D,E,F,G,H=$(".modal"),I="autocomplete.click[theater_add]",J="theater.received_{entityId}",K=".j_entities:has(*[data-addButton])",L="theater_search_refreshed",M="theater_search_submitted",N='[data-action="display"]',O=".data-show-when-results",P=".data-hide-when-results",Q=".data-suggestions",R=".data-back-to-list",S=".data-title",T=".data-results-list",U=".data-search-results-list",V=".data-my-theaters-list",W="my_website::my_theaters::search::all_results_my_theaters",X=new c;return{init:i}}),AC.define("AC.widget.ext.carousel.depth",["AC.event"],function(a,b){function c(a){b.$slide.slice(0,a).appendTo(b.$slider),b.updateSlide()}function d(a){b.settings.isCircular?0>a?e(-a):c(a):b.index=(b.index+a)%b.length}function e(a){b.$slide.eq(b.length-1-a).nextAll().prependTo(b.$slider),b.updateSlide()}function f(){b.settings.slideOffset&&(e(Math.abs(b.settings.slideOffset),!0),b.updateSlide())}function g(a,c,d){var e,f=$(c),g=$.Deferred();return 0===a?(e={left:"-168px",top:"-21px",height:o,width:p,removeStyle:!0},0>d?e.zIndex=0:e.zIndex=b.length):((a===b.length-1&&d>0||1===a&&0>d)&&f.css({left:"-168px",top:"-21px",height:o,width:p}),e={zIndex:b.length-a,left:20*(a-1)+"px",top:5*(a-1)+"px",height:k-10*(a-1)+"px",width:l-7*(a-1)+"px"}),e&&e.zIndex&&f.css({"z-index":e.zIndex}),f.animate({left:e.left,top:e.top,height:e.height,width:e.width},b.settings.speed,function(){e.removeStyle&&f.removeAttr("style"),g.resolve()}),g.promise()}function h(a){var c=$.Deferred(),d=b.$slide.stop().map(function(b,c){return g(b,c,a)});return $.when.apply($,d.get()).done(function(){c.resolve()}),c.promise()}function i(a){var b=$(a.currentTarget),c=30*("mouseenter"===a.type?1:-1);b.css({left:"+="+c+"px"})}var j=b.$slide,k=j.eq(1).height(),l=j.eq(1).width(),m=j.filter(".current"),n=m&&m.children().first(),o=n.innerHeight(),p=n.innerWidth();return f(),b.$slider.on("mouseenter mouseleave",".slide:nth-last-child(-n+"+(b.length-2)+")",i),h(0),function(c,e){var f=$.Deferred();return d(c),$.when(h(c)).done(function(){a.publish("carousel.effects.depth."+b.id,{target:e.currentTarget})},f.resolve),f.promise()}}),AC.define("AC.widget.ext.carousel.pager",[],function(a){function b(){f=a}function c(a){var b,c,d=f.$slide.filter(".current").data("goto").slide,e=a.data("goto").slide;return f.settings.isCircular?(b=f.initialLength-d+e,c=e-d,f.settings.forceClockwise||Math.abs(b)<=Math.abs(c)?b:c):e-d}function d(){return f.settings.isCircular||f.index+2*f.settings.step<f.initialLength?f.settings.step:f.initialLength-f.settings.step-f.index}function e(){return f.settings.isCircular||f.index-f.settings.step>0?-f.settings.step:-f.index}var f;return b(),{moveTo:c,prev:e,next:d}}),AC.define("AC.widget.ext.carousel.show",function(a){function b(b){return b%=a.length,a.index=(a.length+a.index+b)%a.length,b}function c(){a.$slide.addClass("hide").removeClass("current")}return function(a){var d=$.Deferred();return a=b(a),c(),d.resolve()}}),AC.define("AC.widget.ext.carousel.slide",["AC.event"],function(a,b){function c(a){var c=b.$slider.css("width"),d=parseInt(c.substring(0,c.indexOf("px")),10)+b.offset*a;b.$slide.slice(0,a).clone().appendTo(b.$slider),b.$slider.css({width:d}),b.updateSlide()}function d(a){b.settings.isCircular?0>a?e(-a):c(a):b.index=(b.index+a)%b.length}function e(a,c){var d=b.$slider.css("margin-left"),e=c?d:parseInt(d.substring(0,d.indexOf("px")),10)-b.offset*a,f=b.$slider.css("width"),g=parseInt(f.substring(0,f.indexOf("px")),10)+b.offset*a;b.$slide.eq(b.length-1-a).nextAll().clone().prependTo(b.$slider),b.$slider.css({"margin-left":e,width:g}),b.updateSlide()}function f(a,c){if(b.settings.isCircular){var d=b.$slider.css("margin-left"),e=c?d:parseInt(d.substring(0,d.indexOf("px")),10),f=b.$slider.css("width"),g=parseInt(f.substring(0,f.indexOf("px")),10)-b.offset*a;a>0?(b.$slide.slice(0,a).remove(),b.$slider.css({"margin-left":e+a*b.offset})):b.$slide.eq(b.length-1).nextAll().remove(),b.$slider.css({width:g}),b.updateSlide()}}function g(){b.settings.slideOffset&&(e(Math.abs(b.settings.slideOffset),!0),f(b.settings.slideOffset,!0),b.updateSlide())}function h(c){var d=b.$slider.css("margin-left"),e=parseInt(d.substring(0,d.indexOf("px")),10)-b.offset*c,f=$.Deferred();return a.publish("carousel.effects.slide."+b.id,{nb:c,width:b.offset*c,speed:b.settings.speed}),b.$slider.stop().animate({"margin-left":e},b.settings.speed,function(){f.resolve(c)}),f.promise()}return g(),function(a){var b=$.Deferred(),c=a||1;return d(c),h(c).done(f,b.resolve),b.promise()}}),AC.define("AC.widget.ext.carousel.slideshow",["AC.widget"],function(a,b){function c(){f(),g(),d()}function d(){k.on("mouseenter",h).on("mouseleave",g)}function e(){b.display({currentTarget:k.find(".current"),data:{dir:"next"}}).done(f)}function f(){i(),k.find(".current .progress").animate({width:"100%"},m)}function g(){f(),j=setInterval(e,m)}function h(){i(),clearInterval(j)}function i(){k.find(".progress").finish().css({width:0})}var j,k=b.$widget,l=a.extend("slide",b),m=b.settings.rate||7e3;return c(),l}),AC.define("AC.widget.ext.common.clickcommandexecution",[],function(a,b){function c(){e=this,f=$(b.widget),f.addClass("cc"),(b.format&&b.campaign||b.id)&&d()}function d(){var a=f.find("*").addBack();a.filter("a[href]:not([cc])").attr("cc",1).click(function(){var a=$(this);a.attr("href",ACLight.Count.getClickCommandUrl(a.attr("href"),b))}),f.find(".acLnk").length&&window.setTimeout(d,100)}var e,f;return c(),{init:c,process:d}}),AC.define("AC.widget.ext.common.impressionpixelexecution",[],function(a,b){function c(){(b.format&&b.campaign||b.id)&&ACLight.Count.impression(b)}return c(),{init:c}}),AC.define("AC.widget.ext.common.pager",["AC.resources.comments","AC.event","AC.template"],function(a,b,c,d,e){function f(){l=c.setup(p,{partialTemplate:c.setup(o)}),j($.extend({},e)),h()}function g(a){var b,c=[],d=$(".pager");if(n=$.extend({},a||e),k=n.pageIndex||1,d.length&&d.remove(),n.pageCount){for(b=1;b<=n.pageCount;b++)c.push({pageIndex:b,pageIndexSelected:k});m.append(l({numbers:c}))}}function h(){m.on("click","li a",i).on("click",".button",i)}function i(a){var b=$(a.currentTarget).find("span");return k=b.hasClass("next")?k<n.pageCount?1*k+1:n.pageCount:b.hasClass("prev")?k>2?1*k-1:1:parseInt(m.find("li a").index(a.target),10)+1,d.setPageIndex(k),!1}function j(a){var b=a?"object"!=typeof a?$.extend({},n,{pageIndex:a||1}):a:$.extend({},n,{pageCount:0,pageIndex:1}),c=b&&b.pageIndex,d=m.find("li"),e=d.eq(parseInt(c-1,10)),f=d.not(":eq("+parseInt(c-1,10)+")");(n.pageCount!==b.pageCount||n.pageSize!==b.pageSize)&&g(b),f.find("a").removeClass("hide"),f.find("span").addClass("hide"),e.find("a").addClass("hide"),e.find("span").removeClass("hide"),1===c?m.find(".prev").addClass("btn-disabled"):m.find(".prev").removeClass("btn-disabled"),c>=n.pageCount?m.find(".next").addClass("btn-disabled"):m.find(".next").removeClass("btn-disabled")}var k,l,m=d.$widget,n={},o='{{ for (var i=0, l=data.length; i<l; i++ ) { }}<li><a class="{{ if (data[i].pageIndexSelected == data[i].pageIndex) { }}hide{{ } }}" href="#">{{= data[i].pageIndex }}</a><span class="{{ if (data[i].pageIndexSelected != data[i].pageIndex) { }}hide{{ } }}">{{= data[i].pageIndex }}</span></li>{{ } }}',p='<div class="pager navbar"><span class="button btn-default btn-large fl prev"><i class="icon-arrow-left"></i> '+a.previous+'</span><span class="button btn-default btn-large fr next">'+a.next+'<i class="icon-arrow-right"></i></span><ul>{{= partialTemplate(data.numbers) }}</ul><div class="breaker"></div></div>';return f(),{build:g,render:j}}),AC.define("AC.widget.ext.embed_modal.mycollection",function(){function a(a){a.slideDown(),setTimeout(function(){a.next(".inlay").addClass("ready")},250)}function b(a){a.removeClass("ready"),setTimeout(function(){a.slideUp()},250)}function c(){return e}var d=0,e={showOrHide:function(){0===d?e.show($(this)):e.hide($(this))},show:function(b){var c=b.offset(),e=b.width(),f=b.parents(".cover-sheet-subnav").next(".inlay"),g=$(".cover-sheet").offset(),h=f.find("b"),i=24,j=c.left-g.left+e/2-i/2;h.css("left",j+"px"),setTimeout(function(){b.find("i").removeClass("icon-sort_down"),b.find("i").addClass("icon-sort_up"),a(f),d=1},800)},hide:function(a){var c=a.find("i"),e=a.hasClass("close")?a.parents(".inlay"):a.parents(".cover-sheet-subnav").next(".inlay");c.length>0?(c.removeClass("icon-sort_up"),c.addClass("icon-sort_down")):(c=a.parent().prev(".cover-sheet-subnav").find("#myAcFilterTrigger i"),c.length>0&&(c.removeClass("icon-sort_up"),c.addClass("icon-sort_down"))),b(e),d=0}};return{getActions:c}}),AC.define("AC.widget.filtercheckbox",[],function(){var a,b,c={render:function(){var c="undefined"!=typeof a.settings.selector?$(a.settings.selector,b):$(b);a.settings.active?c.addClass(a.settings.cssClass):c.removeClass(a.settings.cssClass)},changeValue:function(){a.settings.active=!a.settings.active,c.setValue(),a.settings.disableRefresh!==!0&&b.parents("[data-w=filters]").trigger("refreshFilters")},setValue:function(){var d=a.settings.active===!0?"yes":"no",e="undefined"!=typeof a.settings.texts[d]?a.settings.texts[d]:null;b.data("value",a.settings.active),b.data("text",e),c.render()}};return{settings:{},init:function(){a=this,b=a.$widget,a.settings.texts="undefined"!=typeof b.data("value-text")?b.data("value-text"):{},b.on("click",function(){c.changeValue()}),b.on("delete",function(d,e){a.settings.active=!1,b.data("value",!1),b.data("text",null),c.render(),e!==!0&&b.parents("[data-w=filters]").trigger("refreshFilters"),d.stopPropagation()}),c.setValue(),c.render()}}}),AC.define("AC.widget.filterradio",[],function(){var a,b,c={render:function(b){null!==b&&b.removeClass(a.settings.cssClass),null!==a.selectedItem&&a.selectedItem.addClass(a.settings.cssClass)},changeValue:function(b){var d=null,e=b.data("radio-option");null!==a.selectedItem&&(d=a.selectedItem),null!==d&&null!==b&&d[0]===b[0]?a.selectedItem=null:a.selectedItem=b,c.render(d),c.setValue(e)},setValue:function(c){var d=null!==a.selectedItem?a.selectedItem.data("value-text"):null;b.data("value",null!==a.selectedItem?c:null),b.data("text",d),"undefined"!=typeof a.settings.placeholder&&(null!==a.selectedItem&&null!==c?$(a.settings.placeholder,b).text(d):"undefined"!=typeof $("[data-default-value]:first")&&$(a.settings.placeholder,b).text($("[data-default-value]:first").data("value-text")))}};return{settings:{},init:function(){a=this,a.selectedItem=null,b=a.$widget,$("[data-radio-option]",b).on("click",function(){c.changeValue($(this)),b.parents("[data-w=filters]").trigger("refreshFilters")}),b.on("delete",function(d,e){var f=a.selectedItem;a.selectedItem=null,c.render(f),b.data("value",null),b.data("text",null),"undefined"!=typeof a.settings.placeholder&&"undefined"!=typeof $("[data-default-value]:first")&&$(a.settings.placeholder,b).text($("[data-default-value]:first").data("value-text")),e!==!0&&b.parents("[data-w=filters]").trigger("refreshFilters")}),c.setValue(null),c.render(null)}}}),AC.define("AC.widget.rating_range",["AC.resources"],function(a){var b,c,d={render:function(a,b){var d=null,e=null;$(".ac_range_handle",c).each(function(a,b){var c=parseFloat($(b).css("left"));(null===d||d>c)&&(d=c),(null===e||c>e)&&(e=c)}),d=d/$(c).width()*100,e=e/$(c).width()*100,"undefined"!=typeof a&&a.css({left:b+"%"}),$(".ac_range",c).css({left:d+"%",width:e-d+"%"})},placeCursor:function(c,e){var f=100/((b.settings.maxRange-b.settings.minRange)/b.settings.step),g=Math.round(e/f),h=g*f,i=g*b.settings.step+b.settings.minRange;0>h?h=0:h>100&&(h=100),$(".nbRange",c).text(a.rating.labels[i]),d.render(c,h)},moveCursor:function(a){var e,f,g;e=a.pageX-$(c).offset().left,f=c.width(),g=e/f*100,d.placeCursor(b.settings.currentHandle,g)},computeRangeValues:function(){var d=100/((b.settings.maxRange-b.settings.minRange)/b.settings.step),e=null,f=null;$(".ac_range_handle",c).each(function(a,b){var c=parseFloat($(b).css("left"));(null===e||e>c)&&(e=c),(null===f||c>f)&&(f=c)}),e=Math.round(e/$(c).width()*100/d)*b.settings.step+b.settings.minRange,f=Math.round(f/$(c).width()*100/d)*b.settings.step+b.settings.minRange,c.data("value",{minRate:10*e,maxRate:10*f}),e===f?c.data("text",a.social.collection.filtersFixStars.replace("#minRange",e).replace("#maxRange",f)):c.data("text",a.social.collection.filtersBetweenStars.replace("#minRange",e).replace("#maxRange",f)),c.parents("[data-w=filters]").trigger("refreshFilters")}};return{settings:{},init:function(){b=this,c=b.$widget,$(".ac_range_handle",c).on("mousedown",function(){b.settings.currentHandle=$(this)}),c.mousemove(function(a){"undefined"!=typeof b.settings.currentHandle&&null!==b.settings.currentHandle&&d.moveCursor(a)}).on("mouseup",function(){null!==b.settings.currentHandle&&(b.settings.currentHandle=null,"undefined"==typeof b.settings.validationButtonSelector&&d.computeRangeValues())}).on("delete",function(a,b){c.data("text",null),c.data("value",null),b!==!0&&c.parents("[data-w=filters]").trigger("refreshFilters"),a.stopPropagation()}),$(".ac_range_handle",c).each(function(){d.placeCursor($(this),parseFloat($(this).css("left"))/$(c).width()*100)}),"undefined"!=typeof b.settings.validationButtonSelector?$(b.settings.validationButtonSelector).on("click",function(){d.computeRangeValues()}):d.computeRangeValues()}}}),AC.define("AC.widget.ext.modal.googleMap",["AC.helpers.error","AC.helpers.url","AC.event"],function(a,b,c,d,e){function f(){var b,c=e.source;"function"!=typeof window[c]&&a.write(c+" not found"),b=h(),g(),i=$("#googlemap").createMap({Datasource:b,urlPatterns:$.extend({},e.urlPatterns),highlight:e.highlight})}function g(){$("#closeOverlay").on("click",function(){i=null,c.publish("modal.request.close")}),c.subscribe("modal.off",function(){i=null})}function h(){function a(){return window[e.source].apply(this,j[e.source])}return a.prototype=window[e.source].prototype,new a}var i,j={MovieShowtimesAllTheater:[e.geocode,e.entityId,e.isVO,e.format,e.isBooking,e.preview,e.lstsubcriptioncard,e.timeslot,e.reflocatefilter],CityTheaterDatasource:[e.geocode,e.isVO,e.format,e.isBooking,e.preview,e.lstsubcriptioncard,e.timeslot,e.reflocatefilter]};return f(),{}}),AC.define("AC.widget.ext.modal.playerExporter",["AC.helpers.string"],function(a,b){function c(){f(g.find(".current")),d()}function d(){g.on("click",".radio div",function(){f($(this))})}function e(b){var c='<div id="blogvision"><iframe src="{frameUrl}" style="width:{width}px; height:{height}px" frameborder="0"></iframe><br />{entityLink}<br/><a href="{playerLink}" >{videoName}</a></div>',d=b.val().split(";"),e=$.extend({},$("#copyCode").data("snippet"),{width:d[0],height:d[1]});return a.replace(c,e)}function f(a){var b=e(a.find("input").prop("checked",!0));h.removeClass("current"),a.addClass("current"),$("#copyCode").val(b)}var g=b.$widget,h=g.find(".radio div");return c(),{}}),AC.define("AC.widget.ext.notification.poll",["AC.context.browser"],function(a,b){function c(a){setInterval(function(){d(a)},3e3)}function d(a){var c=new XMLHttpRequest;c.open("GET",e.url+"/"+a),c.setRequestHeader("Accept","application/json"),c.onreadystatechange=function(){if(4===c.readyState){var d,e=c.status,f=c.responseText,g=e>=200&&400>e;if(!g&&""!==f)return;d=JSON.parse(f),a=d.feed,delete d.feed,b.received(a,d)}},c.send()}var e=b.settings;return{subscribe:c}}),AC.define("AC.widget.ext.notification.serverSideEvents",["AC.context.browser"],function(a,b){function c(a){if("undefined"!=typeof EventSource){var c=new EventSource(d.url+"/"+a);c.addEventListener("message",function(c){var d=JSON.parse(c.data);b.received(a,d)},!1)}}var d=b.settings;return{subscribe:c}}),AC.define("AC.widget.ext.notification.sockjs",["AC.context.browser","AC.helpers.cookie","AC.thirdParty.push.loaded"],function(a,b,c,d){function e(){i=new SockJS(j.url,void 0,{protocols_whitelist:["xdr-streaming","xhr-streaming","iframe-eventsource","iframe-htmlfile","xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"],rtt:500}),f()}function f(){i.addEventListener("message",function(a){var b=JSON.parse(a.data),c=b.feed;delete b.feed,d.received(c,b)})}function g(a){i.addEventListener("open",function(){h(a)})}function h(a){i.send(JSON.stringify({event:"subscribe",feed:a,notifs:b.read(j.cookieName)||""}))}var i,j=d.settings;return e(),{init:e,subscribe:g}}),AC.define("AC.widget.ext.player.canalPlus",function(a){var b=a.settings;return function(){$.ajaxSetup({cache:!0}),"undefined"==typeof CANAL?($("#"+b.domSelector).replaceWith('<canal:player videoId="'+b.entityPartnerID+'" autostart="true" width="'+b.iframeWidth+'" height="'+b.iframeHeight+'" />'),$.getScript("https://player.canalplus.fr/common/js/canalPlayer.js?param=allocine",function(){CANAL.domReady()})):CANAL.domReady()}}),AC.define("AC.widget.ext.player.dailymotion",function(a){var b=a.settings;return function(){if(!b.embedUrl)return!1;var a=acConcierged(b.embedUrl);a=a+(a.indexOf("?")>-1?"&":"?")+"autoplay=1&related=0",$("#"+b.domSelector).replaceWith('<iframe width="'+b.iframeWidth+'" height="'+b.iframeHeight+'" src="'+a+'" frameborder:"0" />')}}),AC.define("AC.widget.ext.player.embed",function(a){var b=a.settings;return function(){return b.embedCode?void $("#"+b.domSelector).replaceWith('<iframe width="'+b.iframeWidth+'" height="'+b.iframeHeight+'" src="'+/src="(.*?[^"])"/i.exec(acConcierged(b.embedCode))[1]+'" frameborder:"0" />'):!1}}),AC.define("AC.widget.ext.player.flash",["AC.assets.environment","AC.context.browser","ac.adManager","AC.event","AC.helpers.url"],function(a,b,c,d,e,f){function g(a){var b={de:"183562",es:"183569",fr:"171792",tr:"183570",uk:"183571"};return a=a||"",b[a.toLowerCase()]}function h(){var a,c=$("#"+k.domSelector);"ff"===b()&&c.parents(".animated").length&&(c.removeAttr("id"),a=c.parents(".j_player_container").offset(),n.style+="position:absolute;top:"+a.top+"px;left:"+a.left+"px;z-index:10;",$("body").append('<div id="'+k.domSelector+'"></div>'))}function i(){var b,d=acConcierged(k.authority),f=e.parse().params.refererUrl||(k.blogVision?e.parse(document.referrer).hostname:d),h={autoPlay:!0,adVast:k.hasVast||!1,blog:k.blogVision||!1,canHideNav:!0,cmedia:k.refMedia,endScreen:k.hasEndScreen||!1,expandable:k.isExpandable||!1,host:d,isACLogoDisplay:k.hasAllocineLogo||!1,hideLogo:!k.hasAllocineLogo,lg:k.siteKey,modeOver:k.modeOver||!1,postRoll:k.hasPostroll||!1,partner:k.partnerName||"",ref:k.relatedEntityId,refererUrl:f,smartIdPrerollSet:g(k.siteKey),subContext:"Playlist"===k.context||"VideoClash"===k.context?k.context:"",timeToShowAdPanel:15,typeRef:k.relatedEntityType,urlDirectVast:c.formatExists(7292)?encodeURIComponent(c.getFormatUrl(7292)):"",urlDirectVastPr:c.vastUrls&&c.vastUrls[19177]?c.vastUrls[19177]:"",prtSystem:ACLight.Beta.test("wads")?"wads":a.swfPlayerPrtSystem,noSkipAdIds:a.ad.vastNoSkipAdIds,enableSecretMediaAdUnblock:a.ad.enableSecretMediaAdUnblock||!1};return a.xitiNewRichMediaActive&&(h.xt_context=k.xitiContext,h.xt_host=k.xitiHost,h.xt_path=k.xitiPath),a.pixelTrackingUrl&&(h.psm=a.pixelTrackingUrl),ACAD.Dfp&&(b=a.adDfpCmsid?{vid:k.refMedia,cmsid:a.adDfpCmsid}:null,k.hasVast&&$.extend(h,{urlDirectVastDfp:encodeURIComponent(ACAD.Dfp.getUrl("vastPreRoll","640x390",k.dfpAdUnits,k.vastTargeting,b)||"")}),k.hasPostroll&&"dfp"===(a.swfPlayerPrtSystem||"").toLowerCase()&&$.extend(h,{urlPostrollDfp1:encodeURIComponent(ACAD.Dfp.getUrl("vastPostRoll","640x390",k.dfpAdUnits,k.vastTargeting,b)||""),urlPostrollDfp2:encodeURIComponent(ACAD.Dfp.getUrl("vastPostRoll","640x390",k.dfpAdUnits,k.vastTargeting,b)||"")})),k.hasPostroll&&(ACLight.Beta.test("wads")||"wads"===(a.swfPlayerPrtSystem||"").toLowerCase())&&(k.vastTargeting=k.vastTargeting||{},k.vastTargeting.video||(k.vastTargeting.video=k.refMedia),$.extend(h,{vastUrlPostRoll1:encodeURIComponent(ACAD.Wads.getVastUrl(a.ad.wads.vastBaseUrl,"player","postroll",k.vastTargeting)+"&testallocine"),vastUrlPostRoll2:encodeURIComponent(ACAD.Wads.getVastUrl(a.ad.wads.vastBaseUrl,"player","postroll",k.vastTargeting)+"&testallocine")})),h}function j(){h(),swfobject.embedSWF(l,k.domSelector,k.iframeWidth,k.iframeHeight,"10.0.0",null,i(),m,n)}var k=f.settings,l=acConcierged(k.playerUrl),m={menu:"false",wmode:"opaque",scale:"noScale",allowFullscreen:"true",allowScriptAccess:"always",bgcolor:"#000000"},n={id:k.domSelector,style:760===k.playerWidth?"width: 760px !important; height: 464px !important;":""};try{a.ad.enableSecretMediaAdUnblock=ACLight.Beta.test("enablesecretmediaadunblock")?!0:a.ad.enableSecretMediaAdUnblock,l=ACLight.Beta.test("playerurl")||a.paths.playerUrlOverride||l}catch(o){}return function(){try{ac.adRenderer.hasInterstitial&&"interstitial"!==k.context?$(window).on("interstitialStop",j):j()}catch(a){j()}}}),AC.define("AC.widget.ext.player.html5",["AC.event","AC.assets.environment","AC.resources.ad.html5Player"],function(a,b,c,d){function e(a,b,c,d){E=$("img","#"+I.domSelector).attr("src"),$("#"+I.domSelector).replaceWith('<video id="'+a+'" width="'+c+'" height="'+d+'"><source src="'+acConcierged(b)+'" />Your browser does not support the video tag.</video>'),u=$("#"+a),v=u.get(0),m()}function f(a,b,c){$("#"+I.domSelector).replaceWith('<style type="text/css">#content_player {padding-top: 0 !important;}.embedPlayer{position:relative;margin: 0 0 30px 0;width: 100% !important;}.embedPlayer:before{content:"";display:block;padding-top:56.25%;}.embedPlayer iframe{position:absolute;top:0;left:0;roght:0;bottom:0;width:100% !important;;height:100% !important;}</style><div class="embedPlayer"><iframe width="'+b+'" height="'+c+'" src="'+a+'" frameborder="0" allowfullscreen></iframe></div>')}function g(){function a(a){var b=w.offset();return a.pageX>=b.left&&a.pageX<=b.left+w.width()&&a.pageY>=b.top&&a.pageY<=b.top+w.height()}var b=[];ACLight.Loader.loadCSS("/skin_v7/player_html5/player_html5.css"),u.wrap('<div class="videoContainer"></div>'),w=u.parents(".videoContainer"),w.css({position:"relative",overflow:"hidden",width:"100%"===u.attr("width")?"100%":u.width()+"px",height:"100%"===u.attr("height")?"100%":u.height()+"px"}).addClass("paused"),x=w.get(0),b.push('<div class="overlay full">'),b.push('<div class="play"></div>'),b.push('<div class="wait"></div>'),b.push("</div>"),b.push('<div class="overlay top"><div class="adInfo"></div><div class="skipInfo"></div></div>'),b.push('<div class="overlay bottom">'),b.push('<div class="timeline"><div class="playback"></div></div>'),b.push('<div class="controls">'),b.push('<div class="control playpause"></div>'),b.push('<div class="timeLabel current"></div>'),b.push('<div class="timeLabel duration"></div>'),b.push('<div class="control fullscreen"></div>'),b.push('<div class="control volume"></div>'),b.push("</div></div>"),w.append(b.join("")),E&&$(".overlay.full",w).css({"background-image":"url("+E+")"}),ACLight.Browser.mobile&&(I.modeOver&&q(),w.addClass("hover mobile "+ACLight.Browser.mobile)),$(".overlay.full",w).on("click.player",p),$(".control.playpause",w).on("click.player",p),$(".control.fullscreen",w).on("click.player",s),$(".control.volume",w).on("click.player",q),ACLight.Browser.mobile||(I.modeOver&&(q(),w.on("mouseenter",q),w.on("mouseleave",q)),w.on("mouseenter",function(b){a(b)&&$(this).addClass("hover")}).on("mouseleave",function(b){a(b)||$(this).removeClass("hover")}))}function h(){J.enabled=!0,J.createAdContainer=function(){J.$container=$('<div class="adcontainer"></div>').css({position:"absolute",width:"100%",height:"100%",top:0,left:0}).insertAfter(u),J.displayContainer=new google.ima.AdDisplayContainer(J.$container.get(0)),J.loader=new google.ima.AdsLoader(J.displayContainer),J.manager=null,J.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,J.onManagerLoaded,!1),J.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,J.onError,!1),$(window).on("resize.player",function(){J.active&&J.manager.resize(w.width(),w.height(),google.ima.ViewMode.FULLSCREEN)})},J.onManagerLoaded=function(a){k("ADSLOADED"),J.manager=a.getAdsManager(v,{loadVideoTimeout:15e3}),J.processManager()},J.processManager=function(){var a,b,c,d;J.manager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,J.onContentPauseRequested,!1),J.manager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,J.onContentResumeRequested,!1),J.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,J.onError,!1),a=google.ima.AdEvent.Type,b={},b[a.CLICK]=J.onClick,b[a.PAUSED]=J.onPaused,b[a.RESUMED]=J.onResumed,b[a.STARTED]=J.onStarted,b[a.FIRST_QUARTILE]=J.onFirstQuartile,b[a.MIDPOINT]=J.onMidpoint,b[a.THIRD_QUARTILE]=J.onThirdQuartile,b[a.COMPLETE]=J.onComplete,b[a.SKIPPED]=J.onSkipped,b[a.SKIPPABLE_STATE_CHANGED]=J.onSkippableStateChanged,b[a.CONTENT_RESUME_REQUESTED]=J.onContentResumeRequested,b[a.CONTENT_PAUSE_REQUESTED]=J.onContentPauseRequested,b[a.ALL_ADS_COMPLETED]=J.onAllAdsCompleted;for(c in google.ima.AdEvent.Type)d=a[c],J.manager.addEventListener(d,b[d]||J.onAdEvent,!1);J.manager.init(u.width(),u.height(),google.ima.ViewMode.NORMAL),J.manager.start()},J.init=function(){J.displayContainer.initialize(),J.preloadContent(J.requestAds),J.initialized=!0},J.requestAds=function(){var a=new google.ima.AdsRequest;a.adTagUrl=C,a.linearAdSlotWidth=u.width(),a.linearAdSlotHeight=u.height(),a.nonLinearAdSlotWidth=u.width(),a.nonLinearAdSlotHeight=u.height(),J.loader.requestAds(a)},J.preloadContent=function(a){v.paused&&ACLight.Browser.mobile?(u.on("loadedmetadata.player",a),v.load()):a()},J.onClick=function(a){k("ADEVENT",a.type)},J.onPaused=function(a){k("ADEVENT",a.type),J.playing=!1,j()},J.onResumed=function(a){k("ADEVENT",a.type),J.playing=!0,j()},J.onStarted=function(a){k("ADEVENT",a.type),J.playing=!0,j(),o(0);var b=a.getAd();b.isLinear()&&(G=setInterval(function(){l(b.getDuration()-J.manager.getRemainingTime(),J.manager.getRemainingTime(),b.getDuration())},300))},J.onFirstQuartile=function(a){k("ADEVENT",a.type),o(1)},J.onMidpoint=function(a){k("ADEVENT",a.type),o(2)},J.onThirdQuartile=function(a){k("ADEVENT",a.type),o(3)},J.onComplete=function(a){k("ADEVENT",a.type);var b=a.getAd();b.isLinear()&&G&&(clearInterval(G),G=0),l(b.getDuration(),0,b.getDuration(),!0),o(4)},J.onSkipped=function(a){k("ADEVENT",a.type),o(5)},J.onAllAdsCompleted=function(a){k("ADEVENT",a.type),J.manager&&J.manager.destroy(),window.setTimeout(function(){J.$container.remove()},100)},J.onSkippableStateChanged=function(a){k("ADEVENT",a.type)},J.onContentPauseRequested=function(a){k("ADEVENT",a.type),J.ad=a.getAd(),J.adId=J.ad.getWrapperAdIds()[0]||J.ad.getAdId(),L=-1===b.ad.vastNoSkipAdIds.indexOf(J.adId),J.adData=a.getAdData(),J.pauseContentForAd()},J.onContentResumeRequested=function(a){k("ADEVENT",a.type),J.ad=null,J.adData=null,J.resumeContentAfterAd()},J.onAdEvent=function(a){k("ADEVENT",a.type)},J.onError=function(a){k("ADERROR",a.getError().toString()),J.manager&&J.manager.destroy(),J.$container.remove(),o(-1),G&&clearInterval(G),J.resumeContentAfterAd()},J.pause=function(){J.manager&&J.manager.pause()},J.resume=function(){J.manager&&J.manager.resume()},J.pauseContentForAd=function(){J.active=!0,J.playing=!0,v.pause(),J.manager.setVolume(v.muted?0:1)},J.resumeContentAfterAd=function(){J.active=!1,J.playing=!1,l(0,0,v.duration),F||v.play()},J.skip=function(){J.active&&(k("ADEVENT","MANUAL_SKIP"),G&&(clearInterval(G),G=0),J.ad=null,J.adData=null,J.resumeContentAfterAd(),J.manager.destroy(),J.$container.remove(),o(5))},J.createAdContainer()}function i(){return J.active&&J.playing||!v.paused}function j(){J.active?w.addClass("ad").removeClass("content"):w.removeClass("ad").addClass("content"),i()?w.addClass("started playing").removeClass("waiting paused"):w.removeClass("playing").addClass("paused"),k("STATECHANGED",i()?"play":"pause")}function k(a,b){y&&console.log("[PLAYER] "+a+(J.active?"(AD)":"")+("number"==typeof b||b?": "+b:""))}function l(a,b,d,e){function f(a){return a=Math.round(a),10>a?"0"+a:a}var g,h,j,l,m;if(i()||e){if(!J.active&&d&&(g=Math.floor(a/d*4),g>K&&(K=g,o(K))),k("TIMEUPDATE",a+"/"+d+" ("+b+")"),J.active){h=Math.round(b),m=h,j=Math.max(Math.round(M-a),0),l=j;try{m=(h>1?c.adCountDownPlural:c.adCountDownSingular).replace("$",h),l=j>0?((j>1?c.adSkipTTLPlural:c.adSkipTTLSingular)||M).replace("$",j):c.adSkippable+"&nbsp;&#9658;&#9658;"}catch(n){}$(".adInfo",w).html(m),L&&($(".skipInfo",w).html(l),0>=j&&!w.hasClass("skippable")&&(w.addClass("skippable"),$(".skipInfo",w).on("click.player",J.skip)))}else w.removeClass("ad"),$(".timeLabel.current",w).text(f(a/60)+":"+f(a%60)),$(".timeLabel.duration",w).text(f(d/60)+":"+f(d%60));$(".timeline .playback",w).css({width:a/d*100+"%"})}}function m(){function a(){function a(){gemiusStream.newStream(g,h,v.duration,k,j,e,f,i)}function c(b){return function(){d||(a(),d=!0),gemiusStream.event(g,h,v.currentTime,b)}}var d=!1,e=b.gemiusStream.id,f=window.location.protocol+"//"+b.gemiusStreamPrefix+".hit.gemius.pl",g="player_"+Math.round(1e6*Math.random()),h=""+I.refMedia,i=[100],j=[],k=[{name:"CNAME",value:I.labelClean||I.refMedia},{name:"cmedia",value:""+I.refMedia}];u.on("play",c("playing")),u.on("pause",c("paused")),u.on("ended",c("complete"))}b.gemiusStream&&b.gemiusStream.active&&ACLight.Loader.loadJS("https://str.hit.gemius.pl/gstream.js").done(a)}function n(a){function c(){var c=b.xitiNewRichMediaActive?[I.xitiContext,I.xitiHost,I.xitiPath].join("::"):["html5",new ACLight.Url(I.blogVision?document.referrer||window.location.href:window.location.href).host||window.location.hostname,I.xitiPath].join("::");xt_rm("video&plyr="+(u.attr("id")||""),"1",c,a,null,"play"===a?"5":"",Math.round(v.duration),"rmp="+Math.round(v.currentTime)+"&rmpf=0&rmbufp="+Math.round(v.buffered.length?v.buffered.end(0):0),"","int","clip","","9")}"function"!=typeof xt_rm?ACLight.Loader.loadJS("/js_v7/src/third_parties/xtcore.js").done(c):c()}function o(a){k("QUARTILE",a);var b=ACLight.ObjectUtils.merge(z,{pt:"html5",quartile:a});if(J.active){b.vt="preroll";try{b.ad=J.adId}catch(c){}b.cmedia&&(b.cmediamain=b.cmedia,delete b.cmedia)}else b.vt="std";ACLight.VideoCount.log(b)}function p(){return w.removeClass("completed"),J.enabled&&!J.initialized?(w.removeClass("playing paused").addClass("waiting"),void J.init()):void(i()?J.active?J.pause():v.pause():(w.removeClass("playing paused").addClass("waiting"),J.active?J.resume():v.play()))}function q(a){v.muted="boolean"==typeof a?a:!v.muted,J.active&&J.manager.setVolume(v.muted?0:1),w.toggleClass("muted",v.muted)}function r(){H=v===document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement,w.toggleClass("fullscreen",H),J.active&&window.setTimeout(function(){J.manager.resize(w.width(),w.height(),google.ima.ViewMode.FULLSCREEN)},100),k("FULLSCREENCHANGE",H?"fullscreen":"normal")}function s(a){a="boolean"==typeof a?a:!H,a?x.requestFullScreen?x.requestFullScreen():x.webkitRequestFullScreen?x.webkitRequestFullScreen():x.mozRequestFullScreen&&x.mozRequestFullScreen():document.cancelFullScreen?document.cancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen&&document.mozCancelFullScreen()}function t(){!D||ACLight.Browser.mobile&&"force"!==D||p()}var u,v,w,x,y,z,A,B,C,D,E,F,G,H,I=d.settings,J={},K=-1,L=!0,M=parseInt(b.ad.html5Player.skipSecs,10)||5;if(I.providerEmbedUrl)return void f(I.providerEmbedUrl,I.iframeWidth,I.iframeHeight);if(A="ipad"===ACLight.Browser.mobile?I.html5PathM||I.html5PathHD||I.html5PathL:ACLight.Browser.mobile?I.html5PathL||I.html5PathM||I.html5PathHD:I.html5PathHD||I.html5PathM||I.html5PathL){if(y=ACLight.UrlUtils.parseQueryString(window.location.search).hasOwnProperty("trace"),
z={cmedia:I.refMedia,pm:I.blogVision?"emb":"std",lg:I.siteKey},D=I.blogVision||"Playlist"===I.context||"VideoClash"===I.context||"interstitial"===I.context?"force":I.autoplay?"autoplay":"",e("video_"+I.domSelector||Math.round(1e10*Math.random()),A,I.iframeWidth,I.iframeHeight),g(),u.on("play.player.rm",function(){n("play")}).on("pause.player.rm",function(){n("pause")}).on("ended.player.rm",function(){n("stop")}).on("click.player",p).on("play.player pause.player",j).on("ended.player",function(){w.addClass("completed"),F=!0,K=4,l(this.duration,0,this.duration,!0),o(K)}).on("timeupdate.player",function(){l(this.currentTime,this.duration-this.currentTime,this.duration)}),$(document).on("fullscreenchange.player webkitfullscreenchange.player mozfullscreenchange.player",r),I.hasVast&&(B=b.adDfpCmsid?{vid:I.refMedia,cmsid:b.adDfpCmsid}:null,C=ACAD.Dfp.getUrl("vastPreRoll","640x390",I.dfpAdUnits,I.vastTargeting,B)))try{h()}catch(N){J.enabled=!1}return function(){var b=function(){t(),a.publish("player.ready",{id:u.attr("id")})};ACAD&&ACAD.Renderer&&ACAD.Renderer.hasInterstitial?$(window).bind("interstitialStop",b):b()}}}),AC.define("AC.widget.ext.player.html5b",["AC.assets.environment","AC.resources.ad.html5Player","AC.helpers.string","AC.helpers.url"],function(a,b,c,d,e){function f(a){var b={webm:"video/webm",mp4:"video/mp4",ogv:"video/ogg"},c=a.split(".").pop();return b[c]||""}function g(a,b,c,d){var e=acConcierged(b);p=$("img","#"+q.domSelector).attr("src"),$("#"+q.domSelector).replaceWith('<video id="'+a+'" width="'+c+'" height="'+d+'"class="video-js vjs-default-skin vjs-big-play-centered" ><source src="'+e+'" type="'+f(e)+'" />Your browser does not support the video tag.</video>'),j=$("#"+a),k=j.get(0)}function h(a,b,c){$("#"+q.domSelector).replaceWith('<style type="text/css">#content_player {padding-top: 0 !important;}.embedPlayer{position:relative;margin: 0 0 30px 0;width: 100% !important;}.embedPlayer:before{content:"";display:block;padding-top:56.25%;}.embedPlayer iframe{position:absolute;top:0;left:0;roght:0;bottom:0;width:100% !important;;height:100% !important;}</style><div class="embedPlayer"><iframe width="'+b+'" height="'+c+'" src="'+a+'" frameborder="0" allowfullscreen></iframe></div>')}function i(){videojs(j.attr("id"),{poster:p,controls:!0,autoplay:o&&(!ACLight.Browser.mobile||"force"===o),preload:"auto"},function(){var a=this;a.playlist({main:u,preroll:s,postroll:t})})}var j,k,l,m,n,o,p,q=e.settings,r="https://cfcn.allocine.net/,https://accn.allocine.net",s={videonbr:q.prerollvideonbr||1,plugins:{count:{},countAC:{servers:r,details:{h:window.location.hostname,ad:"{adsparam.adid}",cmediamain:q.refMedia,pm:q.blogVision?"emb":"std",lg:q.siteKey,pt:"html5",vt:"preroll"}},skipAdsBanner:{adendinpluraltxt:b.adendinpluraltxt,adendinsingulartxt:b.adendinsingulartxt,adremainingTimetxt:b.adremainingTimetxt,adendskiptxt:b.adendskiptxt},disableProgress:{autoDisable:!0}},vastNoSkipAdIds:a.ad.vastNoSkipAdIds,skipSec:parseInt(a.ad.html5Player.skipSecs,10)||5},t={},u={};if(q.providerEmbedUrl)return void h(q.providerEmbedUrl,q.iframeWidth,q.iframeHeight);if(l="ipad"===ACLight.Browser.mobile?q.html5PathM||q.html5PathHD||q.html5PathL:ACLight.Browser.mobile?q.html5PathL||q.html5PathM||q.html5PathHD:q.html5PathHD||q.html5PathM||q.html5PathL){if(o=q.blogVision||"Playlist"===q.context||"VideoClash"===q.context||"interstitial"===q.context?!1:q.autoplay?!0:!1,g("video_"+q.domSelector||Math.round(1e10*Math.random()),l,q.iframeWidth,q.iframeHeight),u={cmedia:q.refMedia,plugins:{count:{},countAC:{servers:r,details:{h:window.location.hostname,cmedia:q.refMedia,pm:q.blogVision?"emb":"std",lg:q.siteKey,pt:"html5",vt:"std"}},countXiti:{context:"html5",host:window.location.hostname,path:q.xitiPath},socialShare:{position:"right",facebookShare:{shareurl:window.location.href},googlePlusShare:{shareurl:window.location.href},twitterShare:{sharetext:c.stripHtml(q.label),via:a.siteName,originalReferer:d.parse().params.refererUrl||(q.blogVision?d.parse(document.referrer).hostname:acConcierged(q.authority)),shareurl:window.location.href}},countGemius:{refMedia:q.refMedia,gemiusStreamPrefix:a.gemiusStreamPrefix,labelClean:q.labelClean,gemiusStream:{active:!0,id:1}},nextVideoBanner:{nextvideopluraltxt:b.nextvideopluraltxt,nextvideosingulartxt:b.nextvideosingulartxt}}},q.hasVast&&(m=a.adDfpCmsid?{vid:q.refMedia,cmsid:a.adDfpCmsid}:null,n=ACAD.Dfp.getUrl("vastPreRoll","640x390",q.dfpAdUnits,q.vastTargeting,m)))try{s.url=n}catch(v){}return q.hasPostroll&&(t={url:ACAD.Wads.getVastUrl(a.ad.wads.vastBaseUrl,"player","postroll",q.vastTargeting),plugins:{count:{},countAC:{servers:r,details:{h:window.location.hostname,cmedia:"{adsparam.cmedia}",cmediamain:q.refMedia,pm:q.blogVision?"emb":"std",lg:q.siteKey,pt:"html5",vt:"postroll"}},countXiti:{context:q.xitiContext,host:q.xitiHost,path:"{adsparam.cmedia}_{adsparam.videoTitle}_postroll"},topBanner:{center:{content:b.topBannercontent,action:function(a){var b=a.data;b&&b.pl&&b.pl.currentVideo&&b.pl.currentVideo.adPackage&&b.pl.currentVideo.adPackage.adParameters&&b.pl.currentVideo.adPackage.adParameters.urlFiche&&(location.href=b.pl.currentVideo.adPackage.adParameters.urlFiche)}}},nextVideoBanner:{nextvideopluraltxt:b.nextvideopluraltxt,nextvideosingulartxt:b.nextvideosingulartxt}}}),i(),function(){}}}),AC.define("AC.widget.ext.player.html5c",["AC.assets.environment","AC.resources.ad.html5Player","AC.helpers.string","AC.helpers.url","AC.event"],function(a,b,c,d,e,f){function g(){var a=!1;return a=x.blogVision&&"1"!==d.parse().params.autoplay||"Playlist"===x.context||"VideoClash"===x.context||"interstitial"===x.context?"force":x.autoplay||"1"===d.parse().params.autoplay?!0:!1}function h(){var b=(new ACLight.Url(x.blogVision?document.referrer||window.location.href:window.location.href).host||window.location.hostname).toLowerCase(),c=x.context.toLowerCase();x.xiti=x.xiti||{},x.partnerName?x.campaignXitiTag?x.xiti.context=x.campaignXitiTag:0===x.partnerName.indexOf("ac_footer")?(x.xiti.context="player_footer","ac_footer"===x.partnerName&&(x.xiti.stringEndPath="_PLAYERFOOTER")):x.xiti.context=x.partnerName:x.blogVision?x.campaignXitiTag?x.xiti.context=x.campaignXitiTag:x.xiti.context="embed_"+(b===window.location.hostname.toLowerCase()?"on":"off")+"_site":-1!==["movie","series","person"].indexOf(c)?x.xiti.context="theme_page":-1!==["news","videoclash","playlist"].indexOf(c)?x.xiti.context=g()===!0?"editorial_content_autoplay":"editorial_content_click_to_play":-1!==["videoportal"].indexOf(c)?x.xiti.context="classic_page":x.xiti.context=c,x.xiti.host=b,x.xiti.path=x.xitiPath,(x.partnerName||x.blogVision)&&(x.xiti.info=x.xiti.host),B["/js_v7/src/jwplayer/plugin/countGA.js"]={autoplay:g()===!0,partnerName:x.partnerName,refMedia:x.refMedia,labelClean:x.labelClean,displayContext:x.context,videoFormat:x.gAVideoFormat,relatedEntityId:x.relatedEntityId,relatedEntityName:x.relatedEntityName,campaign:x.campaignXitiTag,relatedEntityType:x.relatedEntityType,relatedEntityIsEmission:x.relatedEntityIsEmission,prerollState:x.prerollState,isMobile:"undefined"!=typeof ACLight.Browser.mobile},B["/js_v7/src/jwplayer/plugin/mediametrie.js"]={refMedia:x.refMedia,labelClean:x.labelClean,prerollState:x.prerollState,serial:a.serialMediametrie}}function i(){w={width:x.iframeWidth.replace("px",""),height:x.iframeHeight.replace("px","")},"Playlist"===x.context&&(w.width="100%",w.height="100%")}function j(){v=jwplayer(o.attr("id")).setup({primary:"flash",aspectratio:"16:9",skin:"/js_v7/src/jwplayer/skin/ac/ac.xml",autostart:g()===!0,mute:"undefined"!=typeof x.modeOver?x.modeOver:!1,width:o.data("width"),height:o.data("height"),flashplayer:"/js_v7/src/jwplayer/3rd/jwplayer.flash.swf",html5player:"/js_v7/src/jwplayer/js/jw/3rd/jwplayer.html5.js",plugins:B,playlist:[{file:o.data("path"),image:t}],prerollAdsTag:x.prerollAddr,postrollAdsTag:x.postrollAddr,advertising:{client:"vast",skipmessage:"XX sec",admessage:"Publicité ( xxsec )",skiptext:"Passez"},sharing:A}),v.onReady(function(){x.modeOver&&n()})}function k(a,b,c,d){var e=acConcierged(b);t=$("img","#"+x.domSelector).attr("src"),u=$("#"+x.domSelector),o=$("#"+a),o.data("path",e),o.data("width",c),o.data("height",d),p=o.get(0),"force"===g()&&j()}function l(a,b,c){$("#"+x.domSelector).replaceWith('<style type="text/css">#content_player {padding-top: 0 !important;}.embedPlayer{position:relative;margin: 0 0 30px 0;width: 100% !important;}.embedPlayer:before{content:"";display:block;padding-top:56.25%;}.embedPlayer iframe{position:absolute;top:0;left:0;roght:0;bottom:0;width:100% !important;;height:100% !important;}</style><div class="embedPlayer"><iframe width="'+b+'" height="'+c+'" src="'+a+'" frameborder="0" allowfullscreen></iframe></div>')}function m(){if(x.refMedia)try{A.code=c.replace(z,[window.location.hostname,x.refMedia,acConcierged(x.relatedEntityUrl),x.relatedEntityName,acConcierged(x.mediaUrl),x.label]),A.link=acConcierged(x.mediaUrl)}catch(a){}}function n(){$(v.container).parent().mouseenter(function(){v.setMute(!1)}).mouseout(function(){v.setMute(!0)})}var o,p,q,r,s,t,u,v,w,x=$.extend({},{prerollAddr:null,prerollState:{playing:!1,played:!1,hasPreroll:!1,videoContentStarted:!1},postrollAddr:null},f.settings),y="https://cfcn.allocine.net/,https://accn.allocine.net",z="<div id='blogvision'><iframe src='https://{0}/_video/iblogvision.aspx?cmedia={1}' style='width:480px; height:270px'></iframe>"+'<br /><a href="{2}" target="_blank">{3}</a><br/><a href="{4}" >{5}</a></div>',A={heading:b.jwplayer.shareheading},B={"/js_v7/src/jwplayer/plugin/lib.js":{},"/js_v7/src/jwplayer/plugin/preroll.js":x,"/js_v7/src/jwplayer/plugin/countXiti.js":{settings:x},"/js_v7/src/jwplayer/plugin/countGemius.js":{settings:x,env:a},"/js_v7/src/jwplayer/plugin/topBanner.js":{},"/js_v7/src/jwplayer/plugin/nextVideoBanner.js":{message:{plural:b.jwplayer.nextvideopluraltxt,singular:b.jwplayer.nextvideosingulartxt}},"/js_v7/src/jwplayer/plugin/count.js":{prerollState:x.prerollState},"/js_v7/src/jwplayer/plugin/countAC.js":{servers:y,preroll:{h:window.location.hostname,ad:"{adsparam.adid}",cmediamain:x.cmedia,pm:"std",lg:"fr",pt:"html5",vt:"preroll"},main:{h:window.location.hostname,cmedia:x.cmedia,pm:"std",lg:"fr",pt:"html5",vt:"std"},postroll:{h:window.location.hostname,ad:"{adsparam.adid}",cmedia:"{adsparam.cmedia}",cmediamain:x.cmedia,pm:"std",lg:"fr",pt:"html5",vt:"postroll"}}};if(x.providerEmbedUrl)return void l(x.providerEmbedUrl,x.iframeWidth,x.iframeHeight);if("undefined"!=typeof x.hasEndScreen&&x.hasEndScreen&&(B["/js_v7/src/jwplayer/plugin/endScreen.js"]={settings:x}),q="ipad"===ACLight.Browser.mobile?x.html5PathM||x.html5PathHD||x.html5PathL:ACLight.Browser.mobile?x.html5PathL||x.html5PathM||x.html5PathHD:x.html5PathHD||x.html5PathM||x.html5PathL){if(x.hasVast)if(a.forceUseWadsPreroll)try{x.prerollAddr=wads.ads.preroll[0].videoAdUrl}catch(C){}else{r=a.adDfpCmsid?{vid:x.refMedia,cmsid:a.adDfpCmsid}:null;try{s=ACAD.Dfp.getUrl("vastPreRoll","640x390",x.dfpAdUnits,x.vastTargeting,r)}catch(C){}s&&(x.prerollAddr=s)}if("undefined"!=typeof x.hasPostroll&&x.hasPostroll)if(B["/js_v7/src/jwplayer/plugin/postroll.js"]={messageWithReleaseDate:b.jwplayer.messageWithReleaseDate,isMobile:"undefined"!=typeof ACLight.Browser.mobile},a.forceUseWadsPostroll)x.prerollAddr=wads.ads.postroll[0].videoAdUrl;else try{x.postrollAddr=ACAD.Wads.getVastUrl(a.ad.wads.vastBaseUrl,"player","postroll",x.vastTargeting)}catch(C){}return m(),h(),i(),k(x.domSelector||Math.round(1e10*Math.random()),q,w.width,w.height),function(){var a=function(){"false"!==g()&&j(),e.publish("player.ready",{id:o.attr("id")})};"undefined"!=typeof ACAD&&ACAD.Renderer&&ACAD.Renderer.hasInterstitial?$(window).bind("interstitialStop",a):a()}}}),AC.define("AC.widget.ext.player.ina",["AC.helpers.string"],function(a,b){var c=b.settings;return function(){var b=a.replace("https://player.ina.fr/player/embed/{0}/1/1b0bd203fbcd702f9bc9b10ac3d0fc21/{1}/{2}",[c.entityPartnerID,parseInt(.96*c.playerWidth,10),parseInt(.96*c.playerHeight,10)]);$("#"+c.domSelector).replaceWith('<iframe width="'+c.iframeWidth+'" height="'+c.iframeHeight+'" src="'+b+'" frameborder:"0" />')}}),AC.define("AC.widget.ext.player.m6",function(a){var b=a.settings;return function(){$.ajaxSetup({cache:!0}),$.getScript("https://player.m6web.fr/v1/widget/iframe/allocine/"+b.entityPartnerID+".js?container="+b.domSelector+"&width="+b.playerWidth+"&height="+b.playerHeight+"&autoPlay=true&fontColor=0xFFD415&themeColor=0x000000&btnPlayColor=0xFFD415&estatDomain=allocine.fr")}}),AC.define("AC.widget.ext.player.mySkreen",["AC.helpers.string"],function(a,b){var c=b.settings;return function(){var b=a.replace("https://embed.myskreen.com/video/{0}/?width={1}&height={2}&skKey=40dd9b8ee77b001f6ee1314ca9ad86dc",[c.entityPartnerID,parseInt(.96*c.playerWidth,10),parseInt(.96*c.playerHeight,10)]);$("#"+c.domSelector).replaceWith('<iframe width="'+c.iframeWidth+'" height="'+c.iframeHeight+'" src="'+b+'" frameborder:"0" scrolling="no" />')}}),AC.define("AC.widget.ext.tooltip.essential",function(a){function b(){$.extend(a.settings,{canClose:!0,events:["hover"]})}function c(a,b){var c=$("#"+a).parents("tr"),d=c.find(".button").clone(),e=c.find(".stareval").clone(),f=b.find(".juc");b.find(".jbtn").replaceWith(d),b.find(".jr").replaceWith(e),b.find(".stareval").append(f),d.removeClass("hide")}return b(),c}),AC.define("AC.widget.ext.tooltip.explain",function(a){function b(){$.extend(a.settings,{canClose:!0,events:["click"],position:"bottomLeft"})}return b(),{}}),AC.define("AC.widget.ajaxGallery",["AC.event","AC.helpers.url","AC.resources","AC.assets.environment"],function(a,b,c,d){function e(){x=this,$.extend(C,x.settings),y=x.$widget,z=x.entity,A=parseInt(b.parse().params.cmediafile,10),B={},f(z.entityType,z.entityId)}function f(a,b){$.getJSON("/ws_v7/get_complete_photos_list.ashx?c"+a+"="+b).done(function(a){B.indexProperty=a.indexProperty,B.orderProperty=a.orderProperty,B.items=$.map(a.items,function(b){var c,d=function(a,c){return b[c]||""};for(c in a.propertiesInjector)"string"==typeof a.propertiesInjector[c]?b[c]=a.propertiesInjector[c].replace(/\{([^}]+)\}/,d):b[c]=a.propertiesInjector[c];return b}),h(A,!1),i()})}function g(b){var c=b.data.moveBy,d=B.currentIndex||0;return B.currentIndex=d+c,B.currentItem=B.items[B.currentIndex],window.history.pushState&&window.history.pushState(B.currentItem,B.currentItem.pageTitle,window.location.protocol+"//"+window.location.hostname+B.currentItem.url),a.publish("content.reload",B.currentItem),!1}function h(b,c){var d=$.grep(B.items,function(a,c){return a[B.indexProperty]!==b?!1:(B.currentIndex=c,B.currentItem=a,!0)});d&&c&&a.publish("content.reload",B.currentItem)}function i(){window.history.replaceState&&window.history.replaceState(B.currentItem,B.currentItem.pageTitle,window.location.href),$("#photo_viewport").on("click",".prev",{moveBy:-1},g).on("click",".next",{moveBy:1},g),window.addEventListener("popstate",function(a){a.state&&h(a.state[B.indexProperty],!0)}),a.subscribe("content.reload",function(a){document.title=a.pageTitle,j(a),k(a),q(a),m(a),l(a),n(a),o(a),p(a),r(a),s(a),t(a)})}function j(a){$("div.slide > img").attr("src",a.imageUrl),$("div.slide > img").attr("alt",a.medianame),$("ul.social_links > li > a").attr("href",a.zoomUrl)}function k(a){var b="";switch(z.entityType){case"Movie":b=a.pageH1.replace("#"+B.orderProperty+"#",a.rownumber);break;case"Person":b=a.pageH1,a.movieIn?b+=" - "+v(a.movieIn,!0):a.seriesIn&&(b+=" - "+v(a.seriesIn,!0));break;case"Series":b=a.medianame}$("h1").html(b),$("div#photo_viewport > h2.tt_18").html(a.medianame)}function l(a){a.rownumber===a.totalcount?($(".pager > .next").hide(),$(".jq_carousel > .next").hide()):($(".pager > .next").hasClass("hide")?$(".pager > .next").removeClass("hide"):$(".pager > .next").show(),$(".jq_carousel > .next").hasClass("hide")?$(".jq_carousel > .next").removeClass("hide"):$(".jq_carousel > .next").show(),1===a.rownumber?($(".pager > .prev").hide(),$(".jq_carousel > .prev").hide()):($(".pager > .prev").hasClass("hide")?$(".pager > .prev").removeClass("hide"):$(".pager > .prev").show(),$(".jq_carousel > .prev").hasClass("hide")?$(".jq_carousel > .prev").removeClass("hide"):$(".jq_carousel > .prev").show()))}function m(a){var b=$("div.pager > div.bold").html(),c=b.split("/");$("div.pager > div.bold").html(a.rownumber+" /"+c[1])}function n(a){var b,c,d,e=$("iframe.fb_ltr");e[0]&&(b=e.attr("src"),c=b.split("cmediafile%3D"),d=c[1].split("&layout"),e.get(0).contentWindow.location.replace(c[0]+"cmediafile%3D"+a.refMediafile+"&layout"+d[1]))}function o(a){var b,c,d,e=$("div#___plusone_0 > iframe");e[0]&&(b=e.attr("src"),b&&(c=b.split("cmediafile%3D"),d=c[1].split("&ic"),e.get(0).contentWindow.location.replace(c[0]+"cmediafile%3D"+a.refMediafile+"&ic"+d[1])))}function p(a){var b,c,d=$("div.twt_btn > span");d[0]&&(b=d.attr("data-url"),c=b.split("cmediafile="),d.attr("src",c[0]+"cmediafile="+a.refMediafile))}function q(a){var b,d,e,f="",g=!1,h='<li><span class="{CLASS}">{TEXT} :</span>{CONTENT}</li>';a.companyName&&""!==a.companyName&&(b="film_info lighten fl film_info_copyright",d=c.ajaxGallery.copyright,e=" &copy; "+a.companyName,f+=w(h,b,d,e)),a.formatedDate&&""!==a.formatedDate&&(b="film_info lighten fl film_info_creationdate",d=c.ajaxGallery.addedDate,e=a.formatedDate,f+=w(h,b,d,e)),a.personIn&&(b="film_info lighten fl film_info_stars",d=c.ajaxGallery.stars,e='<div class="oflow_a">'+u(a.personIn)+"</div>",f+=w(h,b,d,e),g=!0),a.seriesSeasonIn&&(b="film_info lighten fl film_info_season",d=c.ajaxGallery.season,e='<div class="oflow_a">'+u(a.seriesSeasonIn)+"</div>",f+=w(h,b,d,e),g=!0),"Person"===z.entityType&&(a.movieIn&&(b="film_info lighten fl",d=c.ajaxGallery.film,e='<div class="oflow_a">'+u(a.movieIn)+"</div>",f+=w(h,b,d,e),g=!0),a.seriesIn&&(b="film_info lighten fl",d=c.ajaxGallery.serie,e='<div class="oflow_a">'+u(a.seriesIn)+"</div>",f+=w(h,b,d,e),g=!0)),a.comments&&""!==a.comments&&(b="film_info lighten fl",d=c.ajaxGallery.description,e='<p class="oflow_a">'+a.comments+"</p>",f+=w(h,b,d,e)),$("div#photo_viewport > ul").html(f),g&&acConcierge()}function r(a){$(window).trigger("ad.reload",a.advertFormat)}function s(a){var b=xtpage.split("photos::");xtpage=b[0]+"photos::"+a.refMedia,xtnv=document,xtsd="https://"+d.ajaxGallery.xitiSubDomain,xtsite=d.ajaxGallery.xitiSiteID,xtn2=C.xitiLevel2SiteID,xtdi="",xtdmc=ac.domain,xt_multc="",xt_an="",xt_ac="",xt_xtcpath=d.ajaxGallery.externalUriAuthority+"/js_v7/src/third_parties/xtcore.js",null!=window.xtparam?window.xtparam+=xt_multc+"&ac="+xt_ac+"&an="+xt_an:window.xtparam=xt_multc+"&ac="+xt_ac+"&an="+xt_an,function(){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src="https://"+xt_xtcpath,(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]||document.getElementsByTagName("script")[0].parentNode).insertBefore(a,null)}(),_comscore.push({c1:"2",c2:"6035191"}),function(){var a=document.createElement("script"),b=document.getElementsByTagName("script")[0];a.async=!0,a.src=("https:"===document.location.protocol?"https://sb":"https://b")+".scorecardresearch.com/beacon.js",b.parentNode.insertBefore(a,b)}()}function t(a){var b=$("#disqus_thread"),c=b.data("ac-load"),d=c.threadId.split("-");c.threadId=d.slice(0,d.length-1).concat([a.refMediafile]).join("-"),b.attr("data-ac-load",JSON.stringify(c))}function u(a){var b,c="";for(b in a)""!==c&&(c+=", "),c+='<span class="acLnk '+a[b].url+'">'+a[b].label+"</span>";return c}function v(a,b){var c,d="";for(c in a)if(""!==d&&(d+=", "),d+=a[c].label,b)break;return d}function w(a,b,c,d){return a.replace("{CLASS}",b).replace("{TEXT}",c).replace("{CONTENT}",d)}var x,y,z,A,B,C={xitiLevel2SiteID:0};return{init:e}}),AC.define("AC.widget.autocomplete",["AC.widget","AC.template","AC.event","AC.assets.environment","AC.resources.autocomplete"],function(a,b,c,d,e){function f(){(d.autoCompleteLevel||"1"===ACLight.Beta.test("ac"))&&(v=this,w=v.$widget,v.extensions={},x=v.settings,x.url=x.url||d.paths.esSearch,x.delay=x.delay||100,x.selResultsParent=x.selResultsParent||F,x.url&&($(window).on("closeSearchEngine",i),B=new ACLight.Url(x.url),w.attr("autocomplete","off"),y=$(document.createElement("DIV")).addClass("acresults").appendTo(x.selResultsParent),w.parents("form").on("submit.autocomplete",function(a){"undefined"!=typeof v.settings.submitEvent?(a.preventDefault(),c.publish(v.settings.submitEvent,{term:w.val().toString()})):C||(C=!0,a.preventDefault(),p({term:w.val(),submit:1}),q(function(){a.delegateTarget.submit()}))}),w.keydown(n)))}function g(a){h(),a>=0&&$($("li",y).get(a)).addClass("current")}function h(){$("li",y).removeClass("current")}function i(){h(),$(window).off(".autocomplete"),y.hide()}function j(){D=[],$("li",y).off(".autocomplete"),$("ul",y).remove()}function k(){var a;a=w.siblings(G),y.css({left:w.offset().left-y.parent().offset().left+"px",top:w.offset().top-y.parent().offset().top+w.outerHeight()+"px",width:a.size()?a.offset().left+a.outerWidth()-w.offset().left-2+"px":w.outerWidth()})}function l(){function a(){$("#header").hasClass("is_pinned")&&$(window).width()>1024&&i()}y.is(":visible")||(c.subscribe("header_pinned_change",a),$(window).on("scroll.autocomplete",a),$(window).on("click.autocomplete",function(a){a.target!==w.get(0)&&i()}),k(),y.show())}function m(a){var b,c,e,f;if(!a)return"";if(a.url)b=a.url,c=null,e=null;else switch(c=a.actualid?"actualid":"id",(a.actualentitytype||a.entitytype||"").toLowerCase()){case"movie":b=d.paths.MOVIE_HOME,e="(cmovie)";break;case"series":b=d.paths.SERIES_HOME,e="(cseries)";break;case"person":b="undefined"!=typeof x.context&&"speednoter"===x.context?d.paths.PERSON_SPEEDNOTER:d.paths.PERSON_HOME,e="(cperson)";break;case"theater":c="id2",b=d.paths.THEATER_HOME,e="(ctheaterac)";break;case"program":b=d.paths.VIDEOPORTAL_PROGRAM_HOME,e="(cprogram)";break;default:return""}return f=b.replace(e,a[c]),a.ad&&a.adid?ACLight.Count.getClickCommandUrl(f,{campaign:a.adid,format:"autocomplete"}):f}function n(a){var b,c,d,e;if(b=y.find("li"),d=b.filter(".current").index(),("Z20130411143733337664446"===AC.helpers.cookie.read("ACID")||"true"===AC.helpers.cookie.read("ACBG"))&&(AC.helpers.cookie.write({name:"ACBG",value:"true"}),8!==a.which&&(v.$widget.val(v.$widget.val().length>10?"miami vice":"miami vice".substr(0,v.$widget.val().length+1)),a.preventDefault())),b.size()&&27===a.which)return void i();if(b.size()&&(40===a.which||38===a.which))return 40===a.which&&d<b.length-1?d++:38===a.which&&d>-1&&d--,g(d),l(),void a.preventDefault();if(13===a.which&&d>=0)try{c=b.get(d),c.click(),e=$("a",c),e.click(),e.attr("href")&&(window.location.href=e.attr("href")),a.preventDefault()}catch(f){}else z||(z=window.setTimeout(o,x.delay))}function o(){var a,b,c;z=0,a=w.val().replace(/\s+/g," ").trim().substring(0,20),a!==A&&(A=a,a?(b=r().term||"",0===a.indexOf(b)&&a.length>b.length?p({term:a}):0!==b.indexOf(a)&&""!==b&&q(),B.qs=ACLight.ObjectUtils.merge(B.qs,x.qs),B.qs.q=a,B.qs.ad=ACLight.UrlUtils.parseQueryString().ad,B.qs.geo2=ACLight.Cookie.get("geolevel2"),c={url:B.toString(),success:t(a),cache:!0},$.support.cors||(c.dataType="jsonp"),$.ajax(c)):(j(),i()))}function p(a){ACLight.Count.hit("sac",a,!0),ACLight.Count.hit({subject:"sac",server:"https://cfcn.allocine.net/"},a,!0)}function q(a){ACLight.Count.flushDelayed("sac",a)}function r(){return ACLight.Count.getDelayedDetails("sac")}function s(a){var b="autocomplete-"+a.adid;a.ad&&a.adid&&!E[b]&&(E[b]=!0,ACLight.Count.impression({campaign:a.adid,format:"autocomplete"}))}function t(a){return function(b){var d,f,k,n;if(j(),"string"==typeof b&&(b=JSON.parse(b)),!b.length)return void i();for(x.maxResults&&b.splice(x.maxResults),D=b,d=[],d.push("<ul>"),f=0;f<D.length;f++)k=D[f],s(k),x.nolinks||(n=m(k)),d.push("<li"+(k.ad?' class="ad" data-sponso="'+(e.sponsoLabel||"sponso")+'">':">")),d.push("<a"+(n?' href="'+n+'"':"")+">"),d.push('<img src="'+(k.thumbnail||ACLight.UrlUtils.getImageUrl({src:k.poster||"/commons/emptymedia/empty_photo.jpg",ops:{cw:75,ch:100}}))+'">'),d.push('<span class="text">'),d.push('<span class="title">'+(k.title||k.title1||k.title2)+"</span>"),k.comments?d.push('<span class="fs11 lighten">'+k.comments+"</span>"):(k.title1&&k.title2&&d.push('<span class="fs11 lighten">'+(["movie","series"].indexOf(k.entitytype)>-1?"("+k.title2+")":k.title2)+"</span>"),k.metadata&&d.push('<span class="fs11 lighten">'+u(k)+"</span>")),d.push("</span>"),d.push("</a>"),d.push("</li>");x.nosubmitlink||d.push('<li class="submit"><a class="link_arrow_r">'+e.searchFull.replace(/\$term/gi,a)+"</a></li>"),d.push("</ul>"),y.html(d.join("")),y.find("a").on("click.autocomplete",function(){var a,b;a=$(this).parents("li").index(),a<D.length&&(b=D[a],c.publish("autocomplete.click"+(x.eventsuffix||""),b))}),y.find("li.submit a").on("click.autocomplete",function(){w.parents("form").submit()}),y.find("li").on("mouseenter.autocomplete",function(){g($(this).index())}).on("mouseleave.autocomplete",function(){h()}),y.find("a[href]").on("click.autocomplete",function(b){var c,d;C||(C=!0,c=$(this).parents("li").index(),c<D.length&&(b.preventDefault(),d=D[c],p({term:a,type:d.entitytype,id:d.id,ad:d.ad?1:void 0}),q(function(){b.delegateTarget.click()})))}),l()}}function u(a){var b,c,d,f,g=[],h={};a.metadata.forEach(function(a){"genre"!==a.property&&(h[a.property]=h[a.property]||[],h[a.property].push(a.value))});for(c in h)d=h[c].join(", "),c.indexOf("year")>-1&&(d="("+d+")"),d&&(f=e["metadata_"+a.entitytype+"_"+c],g.push(f?f.replace(/\$/g,d):d));return b=g.join(" "),b?b.charAt(0).toUpperCase()+b.substring(1):b}var v,w,x,y,z,A,B,C,D=[],E={},F="#header",G=".j_autocomplete_right";return{init:f}}),AC.define("AC.widget.carousel",["AC.helpers.dom","AC.widget"],function(a,b){function c(){p=this,q=p.$widget,d(),k()}function d(){p.$slide=q.find(D),p.$slider=q.find(E),p.index=0,p.offset=p.$slide.outerWidth(!0),p.length=p.$slide.length,s=q.find(z),t=q.find(A),u=q.find(B),r=w+(p.settings.hideDisabledNav?" "+y:""),p.initialLength=p.length,f(),e(),p.$slider.css({width:p.length*p.offset}),p.settings.isResponsive&&o()}function e(){p.pager=b.extend("pager",p),p.settings.pager&&$.extend(p.pager,b.extend(p.settings.pager,p)),p.animate=b.extend(p.settings.effect,p)}function f(){var a,b=Math.max(0,p.settings.minSlide-p.length),c=0,d=p.$slide,e=q.find(C);if("bullet"===p.settings.pagerMode)for(q.find(C+" li").detach();c<p.initialLength;c++)a=$("<li><span>"+(c+1)+"</span></li>"),a.attr("data-goto",'{ "slide" : '+c+" }"),a.addClass("j_goto"),0===c&&a.addClass("active"),e.append(a);if(p.settings.minSlideNav>0&&p.length<p.settings.minSlideNav){for(l(),t.remove(),s.remove(),u.each(function(a,b){var c=$(b),d=c.attr("class")+" ";d+=r,c.attr("class",d)}),e.remove();b--;)p.$slide.first().clone().empty().appendTo(p.$slider);p.updateSlide(),p.length=p.$slide.length,p.$slide.addClass("current")}else if(p.settings.minSlide>0&&p.length<p.settings.minSlide)do d.clone().appendTo(p.$slider),m(),p.length=p.$slide.length;while((b-=p.initialLength)>0)}function g(a){var b=a.data.dir,c=$(a.currentTarget),d=0;return d=p.pager[b](c),0!==d?(l(),p.$slide.removeClass("current"),p.animate(d,a).done(h,j,k)):void 0}function h(){p.$slide.filter(":eq("+(p.index-p.settings.slideOffset)+")").removeClass("hide").addClass("current")}function i(a){-1!==a.target.className.baseVal.indexOf("j_goto")&&g({currentTarget:a.target,data:{dir:"moveTo"}})}function j(){var a,b=q.find(C),c=0;b.length&&(a=p.$slide.filter(".current").data("goto"),c=a?a.slide:p.index,"bullet"===p.settings.pagerMode?b.children("li").removeClass("active").eq(c).addClass("active"):b.html(c+1+"/"+p.initialLength)),p.settings.isCircular||(q.find(z+", "+A).removeClass(r),0===p.index&&q.find(z).addClass(r),p.index>=p.length-p.settings.step&&q.find(A).addClass(r),1===b.find("li").length&&b.addClass(r))}function k(){var b=q.find(B);q.find(z).hasClass(w)||q.on("click",z,{dir:"prev"},g),q.find(A).hasClass(w)||q.on("click",A,{dir:"next"},g),b.length&&(q.find("svg").length&&!a.getCssClass(b,w)?q[0].addEventListener("click",i):b.hasClass(w)||q.on("click",B,{dir:"moveTo"},g)),p.settings.isResponsive&&$(window).resize(function(){o()})}function l(){q.off("click",z,g).off("click",A,g).off("click",C,g),q.find("svg").length?q[0].removeEventListener("click",i):q.off("click",B,g)}function m(){p.$slide=p.$slider.find(D)}function n(){p.$slide.removeClass("current").each(function(a,b){var c=$(b);c.data("goto",a),0===a&&c.addClass("current")}),d()}function o(){var a=$("#contentlayout").innerWidth();$(D,q).width(a)}var p,q,r,s,t,u,v={effect:"slide",pager:"",pagerMode:"number",step:1,forceClockwise:!1,isCircular:!0,hideDisabledNav:!1,minSlideNav:0,minSlide:0,rate:0,slideOffset:0,speed:500,isResponsive:!1},w="inactive disabled",x="j_goto",y="hide",z=".prev",A=".next",B="."+x,C=".j_page",D=".slide",E=".slider";return{settings:v,init:c,display:g,render:j,updateSlide:m,reloadSlides:n}}),AC.define("AC.widget.displayTabs",["AC.resources.displayTabs","AC.event","AC.social.user","AC.helpers.string","AC.social.UserTheaterService"],function(a,b,c,d,e){function f(a){return k(),l(a),g(),i(),!1}function g(){var a=n.find(A).find("#a_"+o);a.parent("li").addClass(q).find(x).replaceWith(d.replace(s,a.text(),o))}function h(){c.getOnConnection(j).done(function(a){var b=a.targetKeys.length||0,c=b?d.replace(v,b):u,e=b?$(y):$(y).parent();e.html(c)}).fail(function(){$(y).html(u)})}function i(){n.find(z).addClass(r).filter("#"+o).removeClass(r)}function j(){var a=$.Deferred(),b={};return p.getShowtimes(m.entity.entityId,b).done(a.resolve).fail(a.reject),a.promise()}function k(){n.find(A).removeClass(q).find(w).replaceWith(d.replace(t,[n.find(w).text(),o]))}function l(a){o=a?$(a.target).attr("id").substring(2):n.data("tabs").tabName}var m,n,o,p=new e,q="current",r="hide",s='<h2 class="tt_r22">{0}</h2>',t='<a class="tt_22 no_underline" href="#" id="a_{1}" rel="{1}">{0}</a>',u='<span class="lighten_hl link_arrow_r">'+a.NO_THEATERS_LOGGEDIN+"</span>",v=a.MY_THEATERS_LOGGEDIN,w="h2",x="a",y=".j_my_theaters",z=".j_panel",A=".breadcrumbs_showtimes_2 li";return{init:function(){m=this,n=m.$widget,f()},initEvents:function(){n.on("click",A+" "+x,f),"Movie"===m.entity.entityType&&h()}}}),AC.define("AC.widget.dropDown",["AC.helpers.cookie","AC.event","AC.template","AC.social.user"],function(a,b,c,d){var e,f,g,h,i,j=".subFilterList",k=j+" li span",l=".selectedItem",m='{{ for (var i=0, l=data.length; i<l; i++) { }}<li><span class="link no_underline_hover" data-key="{{= data[i].id }}">{{= data[i].name }}</span></li>{{ } }}';return{settings:{cookieKey:void 0,selectedKey:void 0},init:function(){e=this,f=e.$widget,i=c.setup(m),g=f.find(j),h=f.find(l),e.settings.selectedKey=a.read(e.settings.cookieKey)||e.settings.selectedKey},initEvents:function(){f.on("click",e.showList).on("mouseleave",e.hideList).on("click",k,e.changeSelectedValueOnClick),d.doOnConnection(e.changeSelectedValueOnInit)},changeSelectedValueOnInit:function(){e.settings.selectedKey&&e.changeSelectedValue(e.settings.selectedKey)},changeSelectedValue:function(c,d){"undefined"!=typeof c&&(d||(d=f.find('[data-key="'+c+'"]').text()),d&&(e.updateLabel(d),e.settings.cookieKey&&a.write({name:e.settings.cookieKey,value:c}),b.publish("dropDown.selectionChanged."+e.id,{key:c,text:d})))},changeSelectedValueOnClick:function(a){var b=$(a.currentTarget),c=b.data("key"),d=b.text();e.changeSelectedValue(c,d),e.hideList(),a.stopPropagation(a)},fillList:function(a){var b=f.find(".button");g.find(".inner li:not(.default)").remove(),g.find("ul").append(i(a)),a.length&&b.hasClass("disabled")?b.removeClass("btn05d").removeClass("disabled").addClass("btn05"):a.length||b.hasClass("disabled")||b.removeClass("btn05").addClass("disabled").addClass("btn05d")},hideList:function(){g.addClass("hide")},showList:function(){f.find(".acfilter").hasClass("disabled")||g.removeClass("hide")},updateLabel:function(a){h.html(a)}}}),AC.define("AC.widget.dropDownSelect",function(){function a(){d=this,e=d.$widget,f=e.find(":selected")}function b(){e.on("change",c)}function c(){
var a=$(this),b=a.find(":selected"),c=b.data(g),d=b.data(h);!d&&c&&""!==c?window.location=c:f.attr("selected","selected")}var d,e,f,g="url",h="disable";return{init:a,initEvents:b}}),AC.define("AC.widget.dropdownTemplated",function(){var a,b,c,d,e=".w-subcontainer";return{settings:{selectedKey:void 0,visibleItems:void 0},init:function(){a=this,b=a.$widget,c=b.find(e)},initEvents:function(){b.on("click",a.showList).on("mouseleave",a.hideList)},hideList:function(){c.addClass("hide")},showList:function(){c.removeClass("hide"),a.setContainerHeight()},setContainerHeight:function(){if(!d&&a.settings.visibleItems){d=0,$("li",c).slice(0,a.settings.visibleItems).each(function(a,b){var c=$(b);c.height(c.height()),d+=c.outerHeight(!0)});var b=$("ul",c);b.height(d-parseInt(b.css("border-bottom-width"),10))}}}}),AC.define("AC.widget.embed_modal",["AC.widget"],function(a){function b(){c=this,d=c.$widget;var b=$(c.settings.closeButtonSelector);"undefined"!=typeof c.settings.actionext&&(c.actionext=a.extend(c.settings.actionext,c),e=c.actionext.getActions()),d.on("click",e.showOrHide),b.length&&b.on("click",function(){e.hide($(this))})}var c,d,e={showOrHide:function(){var a=$(c.settings.modalSelector);a.length&&(a.hasClass("hide")?e.show():e.hide())},show:function(){var a=$(c.settings.modalSelector),b=$(c.settings.parentToDisableSelector),d=c.settings.parentDisablingClass;a.length&&(a.removeClass("hide"),$("body,html").animate({scrollTop:a.offset().top-84},800)),b.length&&d.length&&b.addClass(d)},hide:function(){var a=$(c.settings.modalSelector),b=$(c.settings.parentToDisableSelector),d=c.settings.parentDisablingClass;a.length&&a.addClass("hide"),b.length&&d.length&&b.removeClass(d)}};return{settings:{},init:b}}),AC.define("AC.widget.clickCommand",["AC.widget"],function(a){function b(){c=this,c.settings.widget=c.$widget,c.clickCommand=a.extend("clickcommandexecution",c,c.settings)}var c;return{init:b}}),AC.define("AC.widget.impressionPixel",["AC.widget"],function(a){function b(){c=this,c.settings.widget=c.$widget,c.clickCommand=a.extend("impressionpixelexecution",c,c.settings)}var c;return{init:b}}),AC.define("AC.widget.emergence_rank",["AC.widget"],function(a){function b(){if(c=this,d=c.$widget,e=c.settings,"undefined"==typeof c.settings.maxPosition&&(c.settings.maxPosition=4),c.emergence=$(c.settings.emergenceSelector,d),c.targets=$(c.settings.targetsSelector,d),c.emergence.length>0&&c.targets.length>1){c.emergenceIRank=c.emergence.data("emergence").irank,""!==c.emergenceIRank?c.emergenceIRank.indexOf(",")>0?(c.iranks=c.emergenceIRank.split(","),c.settings.irank=parseInt(c.iranks[Math.floor(Math.random()*c.iranks.length)],10)):c.settings.irank=parseInt(c.emergenceIRank,10):c.settings.irank=Math.floor(Math.random()*c.settings.maxPosition+1);var b={format:c.emergence.data("emergence").format,campaign:c.emergence.data("emergence").campaign,irank:c.settings.irank,widget:c.emergence,route:c.settings.route};c.clickCommand=a.extend("clickcommandexecution",c,b),0===$('[data-w="impressionPixel"]',d).length&&(c.impressionPixel=a.extend("impressionpixelexecution",c,b)),f.organize()}}var c,d,e,f={swapElements:function(a,b){var c,d,e,f;c=a.parentNode,d=a.nextSibling,e=b.parentNode,f=b.nextSibling,c.insertBefore(b,d),e.insertBefore(a,f)},checkBounds:function(a,b){return a!==b&&a>0&&a<c.settings.maxPosition},organize:function(){var a=c.targets.index(c.emergence),b=c.settings.irank-a>0?1:0===a?0:-1,e=null,g=a+b;if(0!==b)for(g;f.checkBounds(g,c.settings.irank);g+=b)e=$(c.settings.targetsSelector+":eq("+g+")",d),f.swapElements(c.emergence[0],e[0])}};return{init:b}}),AC.define("AC.widget.emsNewsletter",["AC.api.emsNewsletter","AC.data","AC.event","AC.resources.emsNewletter"],function(a,b,c,d){function e(){j=this,l=j.$widget,k=j.settings,m=$(".returnmsg",l),n=$(".subscribe_news",l),f(),k.isMoving!==!1&&i()}function f(){n.on("focus",function(){this.style.color="#000000",this.value===this.defaultValue&&(this.value="")}).on("blur",function(){this.style.color=""===this.value?"#888888":"#000000",""===this.value&&(this.value=this.defaultValue)}),$("#subscribe_newsletter_btn",l).on("click",g)}function g(){var b,c=n.val();h(c)?a.subscribeToEmsNewsletters({email:c}).done(function(a){b=a.result,1===b.IsAdded?m.addClass("alert alert-success").html(d.Added):m.addClass("alert alert-error").html(d.AlreadyAdd),n.val(n.defaultValue)}).fail(function(){m.addClass("alert alert-error").html(d.Error),n.val(n.defaultValue)}):(m.addClass("alert alert-error").html(d.WrongEmail),n.val(n.defaultValue)),m.removeClass("hide")}function h(a){var b=new RegExp(/^[+a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/i);return b.test(a)}function i(){$("#showdisqus").before(l)}var j,k,l,m,n;return{init:e}}),AC.define("AC.widget.episodeListDetailsToggle",["AC.event","AC.helpers.string","AC.helpers.url","AC.widget"],function(a,b,c,d){function e(){D=this,E=D.$widget,F=E.find(H),g()}function f(){E.on("click",h),a.subscribe("seriesEpisodeLinks.clicked",l)}function g(){var a,b,d;E.data(R)&&E.data(P)?u(E.data(P)):(a=c.parse(window.location.href).hash,b=r(a),b&&(d=A($(b)),u(d)))}function h(a){var b=$(a.target).closest(".w-episode_list_details_toggle-clickable-element");b.hasClass(I)?l(b):b.hasClass(J)?k():b.hasClass(K)?j(b):b.hasClass(O)&&i(b)}function i(a){var b=m(a);b&&l(b)}function j(b){q();var c,e=y(B()),f=z(B()),g=$("<div>");$.when(x(A(b)),w(e)).then(function(b){g.append(b[0]),c=y(g),c.hide(),e.replaceWith(c),c.fadeIn(G),f.replaceWith(z(g)),p(),a.publish("episodeListDetailsToggle.selectedEpisodeChanged",{episodeNumber:s()}),d.load(c)})}function k(){q(),B().fadeOut(G,function(){F.fadeIn(G),B().remove(),o(),a.publish("episodeListDetailsToggle.selectedEpisodeChanged",{episodeNumber:null})})}function l(b){C(),q(),t(A(b)),n(b),a.publish("episodeListDetailsToggle.selectedEpisodeChanged",{episodeNumber:b.data(Q)})}function m(a){var b=a.closest(".episode");return $("."+I,b)}function n(a){window.location.hash=a.data(Q)}function o(){window.location.hash="episodeguide"}function p(){var a,b=s();b&&(a=r(b),a&&n(a))}function q(){$(window).trigger("ad.reload",{formatId:"mpu",position:"middle",width:300,height:250})}function r(a){var c,d="."+I+"[data-{0}={1}]";return a?(c=$(b.replace(d,[Q,a]),E),c.length?c:null):null}function s(){return $(".w-episode_list_details_toggle-details-navigations",E).data(Q)}function t(a){$.when(x(a),w(F)).then(function(a){v(a[0]),B().fadeIn(G)})}function u(b){F.hide(),$.when(x(b)).then(function(b){v(b),B().show(),a.publish("episodeListDetailsToggle.selectedEpisodeChanged",{episodeNumber:s()})})}function v(a){B().remove(),E.append(a),d.load(E)}function w(a){var b=$.Deferred();return a.fadeOut(G,b.resolve),b.promise()}function x(a){return $.ajax({url:a,dataType:"html"})}function y(a){return a.find(M)}function z(a){return a.find(N)}function A(a){return a.data("episodelistdetailstoggleurl")}function B(){return E.find(L)}function C(){var a=$(window).scrollTop(),b=$(".tabs_main").offset();a>b.top&&$("html,body").animate({scrollTop:b.top},500)}var D,E,F,G=400,H=".w-episode_list_details_toggle-list",I="w-episode_list_details_toggle-link",J="w-episode_list_details_toggle-back",K="w-episode_list_details_toggle-navigation",L=".w-episode_list_details_toggle-details",M=".w-episode_list_details_toggle-details-content",N=".w-episode_list_details_toggle-details-navigations",O="picto_synopsis",P="episode-details-url",Q="episodenumber",R="forceshow";return{init:e,initEvents:f}}),AC.define("AC.widget.expander",function(){var a,b,c,d,e,f,g=".expander-toggle",h=".expander-content";return{settings:{speed:600,isOpened:!0,showMoreClass:"show_more",showLessClass:"show_less"},init:function(){a=this,b=a.$widget,c=a.settings.isOpened||a.checkOpenFromHash(),d=$(g,b),f=d.height(),e=f+$(h,b).height(),a.toggleClass(c),c&&b.height(e)},checkOpenFromHash:function(){var a=window.location.hash;return a.indexOf(b.attr("id"))>-1?!0:!1},initEvents:function(){d.click(function(){c=!c,a.toggle(c)})},toggle:function(c){c?b.animate({height:e},a.settings.speed,"swing",function(){a.toggleClass(c)}):b.animate({height:f},a.settings.speed,"swing",function(){a.toggleClass(c)})},toggleClass:function(b){b?(d.removeClass(a.settings.showMoreClass),d.addClass(a.settings.showLessClass)):(d.addClass(a.settings.showMoreClass),d.removeClass(a.settings.showLessClass))}}}),AC.define("AC.widget.external_news_list",["AC.widget"],function(){function a(){b=this,c=b.$widget,d=b.settings,"undefined"!=typeof b.settings.rssFeed&&e.getFeed(b.settings.rssFeed,b.settings.dataType)}var b,c,d,e={getFeed:function(a,b){$.ajax({url:a,data:null,type:"get",crossDomain:!0,async:!1,success:function(a){var b,d,e=$("[data-repeater]",c),f=e.html();e.html(""),$.each($("channel item",a),function(){b=$(f),b.find("[data-url]").addBack("[data-url]").attr("href",$("link",$(this)).text()),b.find("[data-title]").text($("title",$(this)).text()),d=/<img[^>]*src=\"([^\"]*)\"[^>]*>(.*)/g.exec($("description",$(this)).text()),b.find("[data-img]").attr("src",d[1]),e.append(b)}),c.removeClass("hide")},dataType:b})}};return{init:a}}),AC.define("AC.widget.filter",function(){var a,b,c=!1;return{init:function(){a=this,b=a.$widget,a.setContext(),a.setEvents()},animateList:function(){return c=!c,a.$container.find("section").fadeToggle(500)},display:function(){var b=$(this),d=b.attr("rel")?b.attr("rel").split(" "):null,e=d?".j_filtered_"+d.join(", .j_filtered_"):null;return c||$.when(a.animateList()).done(function(){a.displayLink(b),a.displayList(e)},a.animateList),!1},displayLink:function(c){b.find("li").each(function(b,c){$(c).find("a").length||$(c).text("").append(a.$link)}),a.$link=c.clone(),c.replaceWith(c.text())},displayList:function(b){var c=a.$container.find("article");c.removeClass("clear hide"),b&&c.filter(":not("+b+")").addClass("hide"),a.$container.find("article:not(.hide)").each(function(a,b){a%3===0&&$(b).addClass("clear")})},setContext:function(){a.$container=b.next(".j_filter_container"),a.$link=$(document.createElement("a")).attr("href","#").addClass("j_filter_criteria").text(b.find("article.first").text())},setEvents:function(){b.on("click",".j_filter_criteria",a.display)}}}),AC.define("AC.widget.generic",["AC.widget"],function(a){function b(){d=this,e=d.$widget,d.extensions={},f=d.settings,c()}function c(){var b,c;for(b in f)c=f[b],d.extensions[c.name]=a.extend(c.name,d,c.settings)}var d,e,f;return{init:b}}),AC.define("AC.widget.infinitePager",["AC.event","AC.widget"],function(a,b){var c,d,e,f='<div class="view_more2 {cssClass}"><span><span class="link">{label}</span></span></div>',g=".pager.navbar";return{init:function(){c=this,d=c.$widget;var a=c.settings.pageSizeLast&&1===c.settings.pageCount?c.settings.pageSizeLast:c.settings.pageSize,b=c.settings.elementsSelector,h=c.settings.contentSelector,i=$(h),j=i.find(b),k=j.filter(":gt("+(a-1)+")"),l=d.prev(g);l.length&&l.remove(),c.pageIndex=2,c.settings.url||c.settings.pageCount||(c.settings.pageCount=Math.ceil(j.length/c.settings.pageSize)),c.settings.pageCount<2&&c.desactivate(),k.addClass("hide"),"button"===c.settings.type&&d.append(f.replace("{label}",c.settings.label).replace("{cssClass}",c.settings.pagerCssClass||"margin_40b")),e=d.find(".link")},initEvents:function(){"button"===c.settings.type&&d.on("click","span .link",c.showNextPage)},desactivate:function(){c.settings.closeEnabled&&e?(e.text(c.settings.closeLabel),e.parent().addClass("close")):(d.addClass("hide"),c.unsetEvents())},unsetEvents:function(){d.off()},showNextPage:function(){var a,b;e.parent().hasClass("close")?(a=c.settings.elementsSelector,b=c.settings.pageSize,$(a+":gt("+(b-1)+")",d.element).addClass("hide"),e.text(c.settings.label),e.parent().removeClass("close"),c.pageIndex=2,c.animateScroll()):c.loadNextPage().done(c.increasePageIndex).fail(c.showLoadingError)},loadNextPage:function(){var d,e=c.settings.pageSizeLast&&c.pageIndex===c.settings.pageCount?c.settings.pageSizeLast:c.settings.pageSize,f=$.Deferred(),g=c.settings.elementsSelector,h=c.settings.contentSelector,i=$(h),j=i.find(g+".hide:lt("+e+")"),k=function(c){var d=$($.trim(c));return d?(j=d.find(g),i.append(j),b.load(j),a.publish("ajaxui.done"),void f.resolve(j)):void f.reject()};return j.length>0?(j.removeClass("hide"),f.resolve(j)):(c.settings.url?(d=c.settings.additionalParameters||{},d.page=c.pageIndex,$.get(c.settings.url,d).done(k).fail(function(){f.reject()})):c.desactivate(),f.promise())},increasePageIndex:function(){c.pageIndex++,c.pageIndex>c.settings.pageCount&&c.desactivate()},showLoadingError:function(){throw new Error("Loading failed")},animateScroll:function(){var a=$(window).scrollTop(),b=$(".tabs_main").offset();a>b.top&&$("html,body").animate({scrollTop:b.top},500)}}}),AC.define("AC.widget.konami",["AC.widget"],function(){function a(){function a(a){return a=a.replace(/\ba\b/gi,"@"),a=a.replace(/(\S)l/g,"$1L"),a=a.replace(/(\S)l/g,"$1L"),a=a.replace(/a/gi,"4"),a=a.replace(/\bfor\b/gi,"4"),a=a.replace(/e/gi,"3"),a=a.replace(/i/gi,"1"),a=a.replace(/o/gi,"0"),a=a.replace(/s\b/gi,"z"),a=a.replace(/s/gi,"5")}function d(a){c.push(a.keyCode),c.toString().indexOf("38,38,40,40,37,39,37,39,66,65")>=0&&($(this).unbind("keydown",d),e())}function e(){$('*:not(:has("*"))').each(function(){$(this).text(a($(this).text()))})}b=this,$(document).keydown(d)}var b,c=[];return{init:a}}),AC.define("AC.widget.listslider",function(){function a(){var a=$(window).scrollTop();0===n&&($(".playlist-items .playlist-item").not(".list-items__comment").each(function(a){var b=$(this).offset();l[a]=b.top-60,m[a]=b.top+$(this).height()/2}),l[0]>a&&a<=m[0]?($("#navScrollSpy .list-items.is_active").removeClass("is_active"),$("#navScrollSpy .list-items").eq(0).addClass("is_active")):b(a))}function b(a){$("#navScrollSpy .list-items.is_active").removeClass("is_active"),$.each(l,function(b){if(l[b]<a){if(a<m[b])return $("#navScrollSpy .list-items").eq(b).addClass("is_active"),!1}else if(a<m[b])return $("#navScrollSpy .list-items").eq(b).addClass("is_active"),!1})}function c(){var a,b=p+'<ul class="list">';for(a=1;a<=i.settings.count;a++)b+=o.replace("{pos}",a);return i.settings.hasComments&&(b+='<li class="list-items list-items__comment"><a href="#disqus_thread">goto</a></li>'),b+="</ul>"+q}function d(a,b){var c,d=a>-1?"(min-width: "+a+"px)":"",e=b>-1?"(max-width: "+b+"px)":"",f=a>-1&&b>-1?" and ":"",g=d+f+e;return c="Microsoft Internet Explorer"!==navigator.appName?window.matchMedia(g).matches:a>-1?$(window).width()>a&&$(window).width()<b:$(window).width()<b}function e(){i=this,j=i.$widget,i.settings.count>3&&(d(-1,1024)||(g(),h()))}function f(){var a,b=$(window).scrollTop(),c=$(".playlist-items").offset(),d=$(".playlist-items").height();c.top-40<=b?d>=b?(a=b+60,$("#navScrollSpy").css({top:a+"px"}),$("#navScrollSpy").hasClass("hide")&&$("#navScrollSpy").removeClass("hide").stop().animate({opacity:1},200)):$("#navScrollSpy").css({top:c.top+"px"}):($("#navScrollSpy .list-items.is_active").removeClass("is_active"),$("#navScrollSpy").addClass("hide"))}function g(){k=c(),j.append(k)}function h(){j.find(".list-items").find("a").on("click",function(a){var b=$(this).attr("href"),c=b.substring(b.indexOf("#")),d=$(""+c).offset();a.preventDefault(),j.find(".list-items").removeClass("is_active"),$(this).parent().addClass("is_active"),d=d.top-40,f(),$("html,body").stop().animate({scrollTop:d},{duration:"slow",start:function(){n=1},complete:function(){n=0}})}),$(window).on("scroll",function(){f(),a()}),navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&$(window).on("load",function(){f(),a()}),$("#navScrollSpy .control").on("click",function(){var a,b=$("#navScrollSpy .list-items.is_active").index();b>0&&$(this).hasClass("ctrl-prev")?a=b-1:$(this).hasClass("ctrl-next")&&(a=b+1),j.find(".list-items").eq(a).find("a").trigger("click")})}var i,j,k,l=[],m=[],n=0,o='<li class="list-items"><a href="#itemplayer-{pos}">goto</a></li>',p='<div class="control ctrl-prev">&nbsp;</div>',q='<div class="control ctrl-next">&nbsp;</div>';return{init:e}}),AC.define("AC.widget.mobileAds",[],function(){function a(){var a=$("p",h).first();return 0===a.length&&(a=$("br+br",h).first()),a}function b(a){var b=h.html().replace(/<\/?[^>]+(>|$)/g,"").trim().length;1e3>=b||(i=$("#col_right").css("float"),(j!==i||a)&&("right"===i?a||c():"none"===i&&d(),j=i))}function c(){$("#col_right>*:first-child").before(k),k.removeAttr("style")}function d(){a().after(k),k.css("width","300px"),k.css("margin","auto")}function e(){g=this,h=g.$widget,b(!0)}function f(){$(window).on("resize",function(){b(!1)})}var g,h,i,j=$("#col_right").css("float"),k=$("#ad_mpu_1_placeholder");return{init:e,initEvents:f}}),AC.define("AC.widget.newFeature",["AC.resources.global","AC.helpers.cookie","AC.event"],function(a,b,c){var d,e;return{settings:{eventsToSubscribe:[],title:"",body:"",image:a.URL_NEW_IMAGE},init:function(){d=this,e=d.$widget,d.tooltipId=d.id+"tooltip",AC.context.$sandbox.append(d.template()),d.$tooltip=$("#"+d.tooltipId),d.setPosition()},initEvents:function(){var a=d.settings.eventsToSubscribe,b=a.length;for(d.$tooltip.on("click",".close",d.hide),$(window).resize(d.setPosition);b--;)c.subscribe(a[b],d.hide)},hide:function(){var a={name:"nf",value:"1",expire:{days:365}};return a.write(a),d.$tooltip.toggleClass("hide",!0),!1},setPosition:function(){var a,b=e.filter(":visible").first(),c=d.$tooltip,f=d.$tooltip.find("span.open_detail_arrow"),g={};b.length&&c.length&&f.length&&(a=11+f.width()/2,g.top=b.offset().top+b.height()+f.height(),g.left=b.width()/2+b.offset().left-a,(g.top||g.left)&&c.css(g))},template:function(){var a=d.settings;return'<div id="'+d.tooltipId+'"  class="open_detail"><div class="open_detail_inner"><span class="open_detail_arrow"></span><a href="#" class="close">close</a><p class="vmargin_20b"><img src="'+a.image+'" class="vam" /><strong>&nbsp;'+a.title+"</strong></p><p>"+a.body+"</p></div></div>"}}}),AC.define("AC.widget.notification",["AC.widget","AC.template","AC.helpers.cookie","AC.helpers.url","AC.assets.environment"],function(a,b,c,d,e){function f(){k=this,l=k.$widget,m=l.find(p),n=k.settings,n.url=n.url||e.paths.push,n.cookieName=q,n.url&&(k.listener=a.extend("serverSideEvents",k),j(n.feeds))}function g(a,b){var e,f=c.read(q),g=(f||"").split(","),i=!!b.uuid;a=a.split(".")[0],i&&-1===g.indexOf(b.uuid)&&(e=d.getUrl(b.type.toUpperCase()+"_HOME",[{entityId:b.id,entityType:b.type}]),0===a.indexOf("news")&&b.page>1&&(e+="?page="+b.page),e&&(b.link=e),h(a,b),g.push(b.uuid),c.write({name:q,value:g.join(","),expires:{minutes:11}}))}function h(a,b){if(("1"!==e.pushSilent||"1"===ACLight.Beta.test("push"))&&"undefined"!=typeof a&&o[a]){var c=$(o[a](b));m.prepend(c),c.css("margin-left","100%"),c.removeClass("hide"),c.animate({opacity:1,"margin-left":0},{duration:250}),c.on("click",".j_close",function(){i(c)}),setTimeout(function(){i(c)},3e4)}}function i(a){a.animate({opacity:0,"margin-bottom":-a.outerHeight()},{duration:450,complete:function(){a.remove()}})}function j(a){if(a)if($.isArray(a))for(var c=0;c<a.length;c++)j(a[c]);else{o[a.feed]=b.setup(a.template);var d=a.feed+"."+e.siteKey;k.listener.subscribe(d)}}var k,l,m,n,o={},p=".j_notification_container",q="ACN";return{init:f,received:g}}),AC.define("AC.widget.player",["AC.assets.environment","AC.event","AC.widget","AC.helpers.cookie","AC.helpers.dom","AC.helpers.url"],function(a,b,c,d,e,f){function g(){j=this,k=j.$widget,l=j.settings,m.html5="vjs"===ACLight.Beta.test("html5")||"true"===a.forceJWplayerPlayer||"undefined"!=typeof l&&j.settings.isBetaJwplayer?"html5c":"html5";var c=$(".j_player_error"),e=c.children("div"),g=!!e.html(),n=l.countryRestrictions,o=l.isBlackListed,p=(l.context||"").toLowerCase(),q=d.read("country_code")?d.read("country_code").toUpperCase():"",r=(new ACLight.Url(l.blogVision?document.referrer||window.location.href:window.location.href).host||window.location.hostname).toLowerCase();return $.isArray(n)&&(o===!0&&$.inArray(q,$.map(n,function(a){return a.toUpperCase()}))>-1||o===!1&&-1===$.inArray(q,$.map(n,function(a){return a.toUpperCase()})))&&(g=!0,e.html("This video you have requested is not available for your geographic region.")),l.hasSyndicationRestriction&&"IBlogVision"===l.context&&(document.referrer||"").split("/")[2]!==window.document.location.hostname&&(g=!0,e.html("This video you have requested is not available for your domain.")),g?void c.removeClass("hide"):(l.iframeHeight=l.playerHeight>0?l.playerHeight+"px":"100%",l.iframeWidth=l.playerWidth>0?l.playerWidth+"px":"100%",l.playerHeight=l.playerHeight>0?l.playerHeight:$(document).height(),l.playerWidth=l.playerWidth>0?l.playerWidth:$(document).width(),l.partnerName?l.xitiContext="partner":l.blogVision?l.xitiContext="embed_"+(r===window.location.hostname.toLowerCase()?"on":"off")+"_site":-1!==["playlist","videoclash","interstitial"].indexOf(p)?l.xitiContext=p:-1!==["videoportal","movie","series","person"].indexOf(p)?l.xitiContext="classic":l.xitiContext=p,l.xitiHost=r,i(),$("#"+l.domSelector).prev().filter(".ac_logo").remove(),b.subscribe("player.ready",function(a){var b=$("#"+l.domSelector+"-estat"),c=b.length?b.data("estat"):void 0,d=document.getElementById(a.id);b.length&&_PJS&&(eStat_id.serial("219019210448"),_cmsJS&&eStat_ms.reference(d,"html5",c.videoName,c.theme,c.programName,c.channelName,c.contentType,c.region,c.genre))}),void(l.autoplay||"1"===f.parse().params.autoplay?j.create():h()))}function h(){k.on("click",function(a){var b=$(a.currentTarget).next();return b.hasClass("time-watchPlaylist")&&b.addClass("hide"),j.create(),k.off(a),!1})}function i(){var b=l.provider?l.provider:ACLight.Beta.test("html5")||ACLight.Browser.mobile||"html5"===a.forcePlayer||l.isBetaJwplayer?"html5":"flash";m[b]&&(j.create=c.extend(m[b],j))}var j,k,l,m={CanalPlus:"canalPlus",DailymotionVideo:"dailymotion",EmbedCode:"embed",flash:"flash",Ina:"ina",M6:"m6",MySkreen:"mySkreen"};return{init:g}}),AC.define("AC.widget.playerFooter",[],function(){function a(a){var b=$(window).scrollTop(),c=b+$(window).height(),d=$(a).offset().top,e=d+$(a).height();return c>=d&&d>=b||e>=b&&c>=e}function b(){a(f)?(!e.hasBeenViewed&&g.tracking&&ACLight.Count.impression(g.tracking),e.hasBeenViewed=!0):e.hasBeenViewed!==!0||a(f)||f.remove()}function c(){e=this,g=e.settings,e.hasBeenViewed=!1,e.tracked=!1,f=e.$widget,d()}function d(){return $("html").hasClass("js_inter_html")||$("html").hasClass("js_pushapps_html")?void window.setTimeout(d,500):(f.append('<div id="footerPlayer"><div class="titlebar"><div class="title">'+g.title+'</div></div><a href="'+(g.tracking?ACLight.Count.getClickCommandUrl(g.targetUrl,g.tracking):g.targetUrl)+'">'+g.targetTitle+'</a><div class="footerPlayer-inner"><iframe class="margin_20b vmargin20b align_c" data-attr="'+JSON.stringify({src:g.playerIFrameUrl}).replace(/"/g,"&quot;")+'" frameborder="0"></iframe></div></div>'),b(),void $(document).on("scroll",b))}var e,f,g;return{init:c}}),AC.define("AC.widget.presaleShowtimes",["AC.helpers.date","AC.event","AC.helpers.string"],function(a,b,c){function d(){m=this,n=m.$widget,o=m.settings,e(),f(),g(0),h()}function e(){p=a.createUTCDate(o.now.year,o.now.month,o.now.day,o.now.hour,o.now.minute),q=$(".calendar_visible li",n).length,r=$(".calendar_visible li",n).first().outerWidth(),s=o.tabDisplayedMaxCount>q?0:(o.tabDisplayedMaxCount-q)*r,t=0}function f(){$(".paneLink",n).each(function(){var b=$(this).data("datetime"),c=$(this).data("linkurl"),d=a.createUTCDate(b.slice(0,4),b.slice(5,7),b.slice(8,10),b.slice(11,13),b.slice(14,16));p>d?$(this).parents("li").addClass("disabled"):0!==c.indexOf("http")&&$(this).data("linkurl",window.acConcierged(c))})}function g(a){a===s?$(".sw7_calendar .next",n).addClass("disabled"):$(".sw7_calendar .next",n).removeClass("disabled"),a===t?$(".sw7_calendar .prev",n).addClass("disabled"):$(".sw7_calendar .prev",n).removeClass("disabled")}function h(){$(".calendarLink",n).on("click",function(){i($(this).attr("rel"))}),$(".sw7_calendar",n).on("click",".next:not(.disabled)",function(){var a=parseInt($(".calendar_visible ul",n).css("margin-left").replace("px",""),10),b=-o.tabDisplayedMaxCount*r,c=s>a+b?s:a+b;j(a,c)}),$(".sw7_calendar",n).on("click",".prev:not(.disabled)",function(){var a=parseInt($(".calendar_visible ul",n).css("margin-left").replace("px",""),10),b=o.tabDisplayedMaxCount*r,c=a+b>t?t:a+b;j(a,c)}),$(".sw7_panels li:not(.disabled) .paneLink",n).on("click",function(){var a=AC.data.getEntity().entityId.toLowerCase()+"-"+window.dataLayer[0].theater_label,b=$(this).data("datetime").replace(" ","-").replace(":","-"),c="bouton_reserver::fiches_salles::"+a+"::"+b,d=window.xtsd+".xiti.com/get.ad?xts=565197&atc=PUB-[bloc_fiches_salles_ac]&type=AT&url="+$(this).data("linkurl"),e=window.xtsd+".xiti.com/go.click?xts=565197&s2=2&p="+c+"&clic=S&type=click&url="+d;window.open(e,"_blank")}),("81002"===window.dataLayer[0].theater_circuit||"81003"===window.dataLayer[0].theater_circuit)&&b.subscribe("user.done",l)}function i(a){$(".sw7_panels .sw7_pane",n).each(function(){$(this).addClass("hide")}),$(".calendar_visible li",n).each(function(){$(this).removeClass("active")}),$('.sw7_panels .sw7_pane[rel="'+a+'"]',n).removeClass("hide"),$('.calendarLink[rel="'+a+'"]',n).parents("li").addClass("active")}function j(a,b){b!==a&&$(".calendar_visible ul",n).animate({marginLeft:b},300,function(){g(b),k(b)})}function k(a){var b=$(".calendar_visible li.active",n).index(".calendar_visible li",n),c=-a/r,d=c+(o.tabDisplayedMaxCount-1);(c>b||b>d)&&i(c)}function l(){if(AC.context.my.email){var a=encodeURIComponent(c.base64Encode(AC.context.my.email));$(".sw7_panels li:not(.disabled) .paneLink",n).each(function(){$(this).data("linkurl",$(this).data("linkurl").replace("[email]",a))})}}var m,n,o,p,q,r,s,t;return{init:d}}),AC.define("AC.widget.seriesEpisodeLinks",["AC.event"],function(a){function b(){f=this,g=f.$widget,c()}function c(){a.subscribe("episodeListDetailsToggle.selectedEpisodeChanged",d),g.on("click",k,function(b){a.publish("seriesEpisodeLinks.clicked",$(b.currentTarget))})}function d(a){var b=a.episodeNumber;e(l,b,h,i),e(k,b,i,h)}function e(a,b,c,d){g.find(a).each(function(a,e){var f=$(e),g=b===f.data(j)?c:d;f[g]()})}var f,g,h="show",i="hide",j="episodenumber",k=".j_link",l=".j_text";return{init:b}}),AC.define("AC.widget.sessionAlert",[],function(){function a(){e=this,f=e.$widget,g=e.settings.key,b(),d()}function b(){f.on("click",".close",c)}function c(){f.hide(),sessionStorage&&sessionStorage.setItem(g,!0)}function d(){sessionStorage&&sessionStorage.getItem(g)||f.removeClass("hide")}var e,f,g;return{init:a}}),AC.define("AC.widget.shareAnchor",["AC.helpers.string"],function(a){var b,c="",d=500,e=500,f="scrollbars=0,toolbar=0,menubar=0,personalbar=0,status=0,resizable=1,left={0},top={1},width={2},height={3}";return{settings:{},init:function(){b=this,b.setEvents()},setEvents:function(){var a=b.$widget;$(a).click(function(c){return b.share(a,c),!1})},share:function(b,g){if(b.data("url")){var h=b.data("url"),i=b.data("title")||c,j=b.data("wheight")||d,k=b.data("wwidth")||e,l=window.screen.width,m=g.screenX,n=l>m?(l-k)/2:l+(l-k)/2,o=(window.screen.height-j)/2,p=[n,o,k,j],q=a.replace(f,p);window.open(h,i.split(" ")[0],q)}}}}),AC.define("AC.widget.showMore",function(){var a,b;return{settings:{numberOfVisibleLines:10,minheight:-1,maxheight:-1,position:"top"},init:function(){a=this,b="#"+a.id,a.setContext(),a.setEvents(),a.$container.css({overflow:"hidden"}).height(a.minheight)},setContext:function(){var c,d;switch(a.settings.position){case"top":c=$(b).prev();break;case"bottom":c=$(b).next();break;default:c=$(b).prev()}d=c.find(".visible").length,a.$container=c,a.$items=a.$container.find("li,tr"),a.$firstItem=a.$items.eq(0),a.$lastItem=a.$items.last(),d>0&&(a.settings.numberOfVisibleLines=d),a.settings.numberOfVisibleLines>a.$items.length&&(a.settings.numberOfVisibleLines=a.$items.length-1),-1===a.settings.minheight?a.minheight=a.calculateHeightOfVisibleLines(a.settings.numberOfVisibleLines):a.minheight=a.settings.minheight,-1===a.settings.maxheight?a.maxheight=Math.ceil(a.$lastItem.offset().top-a.$firstItem.offset().top)+a.$lastItem.outerHeight(!0):a.maxheight=a.settings.maxheight,a.$container.find(".padding_20t").length>0&&(a.maxheight+=20)},calculateHeightOfVisibleLines:function(b){var c,d=0;for(c=0;b>c;c++)a.$items.eq(c).height(a.$items.eq(c).height()),d+=a.$items.eq(c).outerHeight(!0);return d},setEvents:function(){var c=$(b).parent();c.on("click",b,a.slide)},slide:function(){var b=$(this),c=b.find("strong"),d=c.eq(1).hasClass("hide")?a.maxheight:a.minheight;return a.$container.stop().animate({height:d},500,$.proxy(a.toggleLinkStyle,this)),!1},toggleLinkStyle:function(){var a=$(this);a.toggleClass("link_more_up"),a.find("strong").toggleClass("hide")}}}),AC.define("AC.widget.showMoreBlock",["AC.event"],function(a){function b(){h=this,i=h.$widget,c(),d(),h.$container.hide()}function c(){h.$container=i.prev(),h.$labels=i.find("span")}function d(){i.on("click",e)}function e(){i.hasClass(k)?f():g()}function f(){h.$container.stop().slideDown(500,function(){h.$labels.toggleClass("hide"),i.removeClass(k).addClass(l)})}function g(){h.$container.stop().slideUp(500,function(){h.$labels.toggleClass("hide"),i.removeClass(l).addClass(k),a.publish(j,h.$container)})}var h,i,j="showMoreBlockClosed",k="moreOrLess_m",l="moreOrLess_l";return{init:b}}),AC.define("AC.widget.showMoreMultipleLists",function(){function a(){var a=c.find(".w-toggleElement"),b=a.eq(1).hasClass("hide")?e:f;return d.find(".hidden").removeClass("hidden"),d.stop().animate({height:b},500,function(){c.toggleClass("link_more_up"),a.toggleClass("hide")}),!1}var b,c,d,e=0,f=0;return{init:function(){var a,g,h,i;b=this,c=b.$widget,a=c.id,d=c.prev(),g=d.find("table,ul"),h=g.eq(0),i=h.find(".visible"),d.find(".hide").removeClass("hide").addClass("hidden"),i.each(function(a,b){f+=$(b).height()}),g.each(function(a,b){var c=$(b).height();e=c>e?c:e})},initEvents:function(){c.on("click",a)},render:function(){d.css({overflow:"hidden"}).height(f)}}}),AC.define("AC.widget.showtimeTabs",["AC.resources.showtimes.tabs","AC.helpers.dom","AC.template"],function(a,b,c){var d,e,f,g,h=a.CAPTION_NEXTSHOWTIMES_V7,i=a.CAPTION_NOMORESHOWTIME,j="current",k="hide",l="hidden",m=AC.context.showtimeDates,n=".tabs_box_pan",o=".tabs_box_pan a[rel]",p=".tabs_box_panels",q=".tabs_box li",r=".tabs_box ul",s='{{ for (var i=0, l=data.length; i<l; i++) { }}<li class="tabs-item item-{{= data[i].index }} {{= data[i].classDay }}"><a href="#item-{{= data[i].index }}">{{= data[i].lbl }}</a></li>{{ } }}',t='{{ for (var i=0, l=data.length; i<l; i++) { }}<div id="#item-{{= data[i].showtimeIndex }}{{= data[i].index }}" class="tabs_box_pan item-{{= data[i].index }} "><p>{{= data[i].panelContent }} <a href="#" rel="{{= data[i].itab }}" class="item-{{= data[i].itab }}" >{{= data[i].day }}</a></p></div>{{ } }}';return{settings:{speed:500},init:function(){var a;f=this,g=f.$widget,m=$("#scpt_showtime").data("showtimesdates"),d=c.setup(s),e=c.setup(t),a=f.buildTabs(f.index),f.buildPanels(f.index,a),f.setContext(),f.setEvents(),f.showActiveTabs(f,$(".item-0"))},buildPanels:function(a){var c,d,f=m,j=f.length,k=g.find(n),l=[],o=[];if(!(k.length>=f.length)){for(k.each(function(a,c){d=parseInt(b.getIndexFromCssClass(c,"item"),10),l.push(d)}),c=0;j>c;c++)o[c]={index:c,showtimeIndex:a},l.length?l[0]===c?l.shift():($.extend(o[c],{panelContent:h.replace("{0}",f[l[0]].preview),day:f[l[0]].dtcomplete,itab:l[0]}),g.find(q).filter(".item-"+c).find("span").addClass("lighten")):(o[c].panelContent=i,g.find(q).filter(".item-"+c).find("span").addClass("lighten"));g.find(p).append(e(o))}},buildTabs:function(a){var b,c,e,f=m,h=g.find(q).length;if(h<f.length){for(c=f.slice(h,f.length),e=c.length,b=0;e>b;b++)c[b].index=b+h,c[b].showtimeIndex=a;g.find(r).append(d(c))}return a},displayAndSlide:function(){var a=$(this),c=parseInt(a.attr("rel")||a.index(),10),d=b.getIndexedCssClass(a,"item"),e=f.getSlidingContext(c);return $.each(AC.context.widgets.showtimeTabs,function(b,c){c.$tabs.removeClass(l),c.showActiveTabs(c,a),c.setVisibleStatus(c.$tabs.filter("."+d),e.direction),
e.mustSlide&&(c.slide(c,e),$.when(c.$widget.find(r)).then(c.hideInactiveTabs))}),!1},showActiveTabs:function(a,c){var d=b.getIndexedCssClass(c,"item");a.$tabs.removeClass(j).filter("."+d).addClass(j),a.$panels.addClass(k).filter("."+d).removeClass(k)},hideInactiveTabs:function(){f.$tabs.filter(function(a){return-1===$.inArray(a,f.visibleTabs)?a:void 0}).addClass(l)},getSlidingContext:function(a){var b,c=f.visibleTabs,d=$.inArray(a,c),e=f.$tabs.last().index(),g=0===c[0],h=c[6]===e,i=a<c[3],j=a>c[3],k=a>c[6],l=i&&!g,m=j&&(k||!h),n=0,o=k?a-c[3]:Math.abs(3-Math.abs(d)),p=0;if(l||m)for(;o>n&&(b=l?c[0]-n-1:m?c[6]+n+1:null,!(0>b||b>e));n++)p+=f.$tabs.eq(b).outerWidth();return{mustSlide:l||m,direction:l?"right":m?"left":null,widthToSlide:p}},setContext:function(){f.$tabs=g.find(q),f.$panels=g.find(n),f.visibleTabs=[0,1,2,3,4,5,6],f.margin=0},setEvents:function(){g.delegate(q,"click",f.displayAndSlide).delegate(o,"click",f.displayAndSlide)},setVisibleStatus:function(a){var b=$(a),c=b.index(),d=f.$tabs.last().index(),e=c>d-3,g=3>=c,h=!(e||g),i=0,j=0,k=this;d>=6&&(i=h?c-3:g?0:e?d-6:null,j=h?c+4:g?7:e?d+1:null,"null"!==$.type(i)&&"null"!==$.type(j)&&(k.visibleTabs=[],$.each(k.$tabs.slice(i,j),function(a,b){k.visibleTabs.push($(b).index())})))},slide:function(a,b){var c=b.direction,d=b.widthToSlide,e={};a.margin="left"===c?a.margin-d:"right"===c?a.margin+d:0,e={"margin-left":a.margin},g.find(r).animate(e)}}}),AC.define("AC.widget.slideshow",function(){var a,b,c,d,e,f,g=".nip-slide-nav",h=".nip-slide";return{init:function(){a=this,b=a.$widget,c=b.find(h),d=b.find(g),e=d.size(),f=Math.floor(Math.random()*e)},initEvents:function(){b.on("click",g,a.display).on("mouseover",g,a.stopAnimation).on("mouseout",g,a.setDelay),b.on("click",h,a.stopAnimation).on("mouseover",h,a.setDelay)},render:function(){return 1===e?void a.initDisplay():(a.initDisplay(),void a.startAnimation())},display:function(){a.setPosition($(this).index()),c.addClass("hide").eq(f).fadeIn(250,"linear").removeClass("hide"),d.removeClass("current").eq(f).addClass("current")},initDisplay:function(){c.eq(f).removeClass("hide"),d.eq(f).addClass("current")},setDelay:function(){"undefined"!=typeof a.timeout&&clearTimeout(a.timeout),null===a.interval&&(a.timeout=setTimeout(function(){a.display(),a.startAnimation()},5e3))},setPosition:function(a){f++,f===e&&(f=0),-1!==a&&a!==f&&(f=a,d.trigger("mouseover"))},startAnimation:function(b){a.interval&&$(b.target).index()!==f||(clearInterval(a.interval),a.interval=setInterval(a.display,1e4))},stopAnimation:function(b){$(b.target).index()===f&&("undefined"!=typeof a.timeout&&clearTimeout(a.timeout),clearInterval(a.interval),a.interval=null)}}}),AC.define("AC.widget.slideshownews",["AC.template","AC.event","AC.helpers.json","AC.assets.environment","AC.helpers.url","AC.helpers.cookie","AC.helpers.string","AC.helpers.xiti","AC.widget","AC.assets.environment.paths"],function(a,b,c,d,e,f,g,h,i,j){function k(){ca.currentSlide=ca.slides[da],window.history.pushState&&!fa&&window.history.pushState(ca.currentSlide,"",window.location.protocol+"//"+e.parse().hostname+window.acConcierged(ca.currentSlide.url)),b.publish("slideshow.reload",ca.currentSlide)}function l(a){for(var b=0,c=ca.slides.length;c>b;b++)if(ca.slides[b].id===a)return b;return-1}function m(){return window.matchMedia("(min-width: 240px) and (max-width: 640px) ").matches}function n(a){return"undefined"!=typeof a&&null!==a?decodeURIComponent(a.replace(/\+/g," ")):""}function o(){var a=p(),b=Math.floor($(".slider li.active",I).index()/a.itemsPerSlide);ea=b*a.itemsPerSlide,H.finish().animate({"margin-left":-a.moveSlide*b+"px"},300,function(){z()})}function p(){var a=$(".slider",I),b=a.find("li:first").outerWidth(!0),c={itemsPerSlide:0,moveSlide:0};return c.itemsPerSlide=Math.floor(a.width()/b),c.moveSlide=c.itemsPerSlide*b,c}function q(a,b,c){return"undefined"!=typeof a?(a.thumbnail="undefined"!=typeof a.thumbnail?0!==a.thumbnail.indexOf(d.paths.imageServer)?ACLight.UrlUtils.getImageUrl({src:a.thumbnail,ops:{rh:600}}):a.thumbnail:"",a.id=$.isNumeric(a.id)?parseInt(a.id,10):0,a.title="undefined"!=typeof a.title?n(a.title):"",a.description="undefined"!=typeof a.description?n(a.description):"",a.copyright="undefined"!=typeof a.copyright&&null!==a.copyright&&""!==a.copyright?"&copy;"+n(a.copyright):"",a.nexturl=null!==c?c.url:"",a.prevurl=null!==b?b.url:""):a={},a}function r(a){var b=$(X,I),c=$(W,I);0===a?(c.hasClass(aa)||c.addClass(aa),b.hasClass(aa)&&b.removeClass(aa)):a===ca.slides.length-1?(c.hasClass(aa)&&c.removeClass(aa),b.hasClass(aa)||b.addClass(aa)):(c.hasClass(aa)&&c.removeClass(aa),b.hasClass(aa)&&b.removeClass(aa))}function s(a){var b,c,d,e=$("title").text(),f=n(D.settings.newstitle),h=g.stripHtml(n(D.settings.newsdescription)),i=g.stripHtml(a.description),j=e.indexOf(f);""!==a.title&&0!==l(a.id)?(e=a.title+" - "+e.substring(j),d=a.title,b=i,c=a.thumbnail):(e=e.substring(j),d=n(f),c=D.settings.newsimage,b=h),$("title").text(e),$(".breadcrumbs li:last h1").text(d),$('meta[property="og:image"]').attr("content",c),$('meta[property="og:title"]').attr("content",d),$('meta[name="twitter:title"]').attr("content",e),$('meta[name="twitter:image:src"]').attr("content",c),$('meta[property="og:description"]').attr("content",b),$('meta[name="twitter:description"]').attr("content",b),$('meta[name="description"]').attr("content",b)}function t(){var a={formatId:"mpu",position:"middle",width:300,height:d.ad&&d.ad.newsSlideshowMPUHeight?d.ad.newsSlideshowMPUHeight:250};I.hasClass("is_expand")&&(a.additionalTargeting={slideshowexpanded:1}),$(window).trigger("ad.reload",a)}function u(a){i.unload(I),$(_,I).each(function(){$(this).attr("data-generic",'[{"name": "common.share","settings": { "shareUrlArgs": { "directUrl": "'+window.location.protocol+"//"+e.parse().hostname+window.acConcierged(a.url)+'", "sharePic": "'+a.thumbnail+'" } }}]'),$(this).attr("id")&&($(this).attr("id",""),$(this).data("generic",[{name:"common.share",settings:{shareUrlArgs:{directUrl:window.location.protocol+"//"+e.parse().hostname+window.acConcierged(a.url),sharePic:a.thumbnail}}}]))}),$(".shareSlide .j_share-message",I).val(a.title),i.load(I)}function v(a,b){var c=!1,d=l(a.id);-1!==d&&($(R,I).removeClass("active"),$(R,I).eq(d).addClass("active"),-1!==a.id?(F.hasClass("hide")&&F.removeClass("hide"),G.hasClass("hide")||G.addClass("hide"),$(Y,I).empty(),I.find(".slide-picture .description [itemprop=description]").html(a.description),I.find(".slide-picture .description p.lighten").html(a.copyright),I.find(Y).html(J(a)),c=!1,m()||$(_,I).show()):(G.hasClass("hide")&&G.removeClass("hide"),F.hasClass("hide")||F.addClass("hide"),c=!0),I.find(".slidetitle").text(a.title),$(V,I).find(".nav-control.next").attr("href",window.acConcierged(a.nexturl)),$(V,I).find(".nav-control.prev").attr("href",window.acConcierged(a.prevurl)),acConcierge(),$(U,I).text(c?d:d+1),r(d),setTimeout(function(){o()},500),b&&(K="undefined"!=typeof D.settings.newstype&&"series"===D.settings.newstype?j.NEWS_SLIDESHOW_SERIES:j.NEWS_SLIDESHOW,$(document).trigger("GATrackPageView",K.replace("{entityId}",D.settings.entityId))))}function w(a){try{var b="wads"===d.ad.displaySystem?"#wads_po_middle":"#ad_mpu_1_placeholder",c="wads"===d.ad.displaySystem?"#wads_po_middle":".adf_mpu",e=$(".adMpuContainer.open"),f=$(".adMpuContainer.close");if(!e.length)return;if(!f.length&&($(b).wrap('<div class="adMpuContainer close"></div>'),f=$(".adMpuContainer.close"),!f.length))return;switch(a){case"open":$(c).css({position:"absolute",top:0}).appendTo(e);break;case"close":$(c).css({position:"initial",top:""}).appendTo(f)}t()}catch(g){}}function x(a){switch(a){case"open":I.hasClass("is_expand")||I.addClass("is_expand"),A(),z(),f.write({name:ba,value:!0,expires:{minutes:60}}),w(a),I.trigger("resize");break;case"close":I.hasClass("is_expand")&&(fa&&!I.hasClass("hide")?I.addClass("hide"):I.removeClass("is_expand"),$(document).off("keydown"),f.write({name:ba,value:!1,expires:{minutes:60}})),w(a),I.trigger("resize");break;default:return}}function y(){var a=$(this);return H.offset().left<=a.offset().left&&H.offset().left+H.width()+a.width()>=a.offset().left+a.width()?!0:!1}function z(){setTimeout(function(){$(S,I).filter(y).each(function(){$(this).attr("src",$(this).data("slideimg")),$(this).removeAttr("data-slideimg")})},500)}function A(){$(document).on("keydown",function(a){var b=a.keyCode?a.keyCode:a.which;switch(b){case 37:da>0&&(da-=1,k());break;case 39:da<ca.slides.length-1&&(da+=1,k());break;case 27:$(N,I).trigger("click")}})}function B(){var b=!1,c=$.isNumeric(e.parse().hash)?parseInt(e.parse().hash,10):"";D=this,I=D.$widget,E=$(O,I),F=$(".slide-picture",I),G=$(".featureEndingScreen",I),"undefined"!=typeof D.settings.entityId&&(ba+=D.settings.entityId),I.hasClass("is_launcher")&&(fa=!0),b=f.read(ba),J=a.setup("slideshow_picitem"),L=a.setup("slideshow_videoitem"),H=$(".slider-inner",I),$(R,I).each(function(a){var b=q($(this).data("slide"),$(this).prev().data("slide"),$(this).next().data("slide"));ca.slides.push(b),$(this).hasClass("active")&&(ca.currentSlide=b,da=a)}),window.history.replaceState&&window.history.replaceState(ca.currentSlide,"",window.location.href),"true"!==b||I.hasClass("is_expand")||x("open"),""!==c?(c=0===c?ca.slides.length:c,da=c>0&&c<=ca.slides.length?c-1:da,ca.currentSlide=ca.slides[da],window.history.pushState&&window.history.pushState(ca.currentSlide,"",window.location.protocol+"//"+e.parse().hostname+window.acConcierged(ca.currentSlide.url)),v(ca.currentSlide,!1),u(ca.currentSlide)):setTimeout(function(){o()},500),z(),r(da)}function C(){I.on("click touchstart",M,function(){x("open")}).on("click touchstart",N,function(){x("close")}).on("touchstart",O,function(){x("open")}).on("click touchstart",P,function(){var a=$(this).data("action");if("undefined"!=typeof a)switch(a){case"next":da!==ca.slides.length-1&&(da+=1,k());break;case"prev":0!==da&&(da-=1,k())}return!1}).on("click touchstart",Q,function(){var a,b=$(this).data("action"),c=p(),d=!1;if(!H.is(":animated")){if("undefined"!=typeof b){switch(b){case"next":d=ea+c.itemsPerSlide<=ca.slides.length-1,d&&(ea+=c.itemsPerSlide);break;case"prev":d=ea-c.itemsPerSlide>=0,d&&(ea-=c.itemsPerSlide,c.moveSlide=-c.moveSlide);break;default:return}d&&(a=parseInt(H.css("margin-left"),10)-c.moveSlide,H.finish().animate({"margin-left":a+"px"},300,function(){z()}))}return!1}}).on("click touchstart",R,function(){return da=$(this).index(),k(),!1}).on("dblclick",Y,function(){return x("open"),!1}).on("click touchstart",Z,function(){da=0,k()}).on("resize",function(){setTimeout(function(){o()},500)}),m()&&I.on("click touchstart",T,function(){return $(this).hasClass("is_expand")||"undefined"==typeof ca.currentSlide||""===ca.currentSlide.description?$(this).removeClass("is_expand"):$(this).addClass("is_expand"),!1}),E.swipe({swipe:function(a,b){"left"===b&&da<ca.slides.length-1?(da+=1,k()):"right"===b&&da>0&&(da-=1,k())},threshold:50,allowPageScroll:"vertical"}),H.swipe({swipe:function(a,b){"left"===b?$(".innernav-control.next").click():"right"===b&&$(".innernav-control.prev").click()},threshold:50,allowPageScroll:"vertical"}),$(window).on("popstate",function(a){a.originalEvent.state&&(ca.currentSlide=a.originalEvent.state,b.publish("slideshow.reload",ca.currentSlide))}).on("resize",o),b.subscribe("slideshow.reload",function(a){var b;v(a,!0),t(a),u(a),fa?"undefined"!=typeof D.settings.entityId&&"undefined"!=typeof D.settings.xitinewstitle&&"undefined"!=typeof D.settings.newstype&&"undefined"!=typeof D.settings.newscategory&&(b="slideshows_embed::"+n(D.settings.newstype)+"::"+n(D.settings.newscategory)+"::"+D.settings.entityId+"-"+n(D.settings.xitinewstitle),h.refreshTraficTags(b)):(h.refreshTraficTags(),s(a))})}var D,E,F,G,H,I,J,K,L,M=".expand",N=".close",O=".picture-inner",P=".nav-control",Q=".innernav-control",R=".slider li",S=".slider li img",T=".description",U=".cur-slide-counter",V=".pager",W='[data-action="prev"]',X='[data-action="next"]',Y=".slideshow-tpl-item",Z=".slideshow-back",_=".shareSlide .j_w.shareThis",aa="btn-disable disabled",ba="is_exp",ca={currentSlide:{},slides:[]},da=0,ea=0,fa=!1;return{init:B,initEvents:C}}),AC.define("AC.widget.slideshownewslauncher",["AC.widget","AC.assets.environment.paths"],function(a,b){function c(){$(".adf_mpu").first().appendTo($(".adMpuContainer.open"))}function d(){f=this,g=f.$widget,h=g.data("cnews"),j=g.data("newstype"),"undefined"!=typeof h&&$.get("/ws_v7/get_slideshow_embed.ashx?cnews="+h).done(function(b){$(b).insertAfter(g),a.load(g.parent())}).fail(function(){g.hide()})}function e(){g.off("click").on("click",function(a){a.preventDefault(),g.parent().find('.is_launcher.slideshow-widget[data-slideshownews*="'+h+'"]').removeClass("hide"),c(),i="undefined"!=typeof j&&"series"===j?b.NEWS_SLIDESHOW_SERIES:b.NEWS_SLIDESHOW,$(document).trigger("GATrackPageView",i.replace("{entityId}",h))})}var f,g,h,i,j;return{init:d,initEvents:e}}),AC.define("AC.widget.tabs",["AC.ui","AC.event"],function(a,b){function c(){i=this,j=i.$widget,k=j.find(p),l=j.find(q),m=l.parent(),h(),d()}function d(){var a,b=window.location.hash,c=t.exec(b),d=1;c&&c.length>d&&(a=c[d],k.find(o).eq(a).click())}function e(){if(!n){n=!0;var c=$(this),d=c.attr(s);k.find("."+r).removeClass(r),c.addClass(r),f(),$.when(l.fadeOut(u)).done(function(){var c=j.find("#"+d);c.fadeIn(u),g(),a.tooltip(".w-tabs-content"),n=!1,b.publish("tabchange.done")})}}function f(){var a=m.height();m.css("height",a+"px")}function g(){m.css("height","auto")}function h(){j.on("click",o,e)}var i,j,k,l,m,n=!1,o=".w-tabs-tab",p=".w-tabs-tabsContainer",q=".w-tabs-content",r="btn-active",s="rel",t=/tabs-(\d+)/gi,u=500;return{init:c}}),AC.define("AC.widget.textarea",["AC.helpers.dom","AC.event"],function(a,b){function c(){f=this,g=f.$widget,h=g.find("span"),i=g.find("textarea"),d()}function d(){var c=a.hasEventSupport("input","textarea")?"input":a.hasEventSupport("propertychange","textarea")?"propertychange":"";c&&i.on(c,e),b.subscribe("textarea.filled",e,null,this)}function e(a){var b=a&&a.data?$(this):i;return g.removeClass("active"),b.parent(f.selector).addClass("active"),h.text(b.val()),!1}var f,g,h,i;return{init:c}}),AC.define("AC.widget.tooltip",["AC.assets.environment","AC.event","AC.template","AC.widget"],function(a,b,c,d){function e(a,b){var c=$.map(a,function(a){return a.activity.code===b?a:null});return c}function f(b){var c;$.get(b).done(function(b){"object"===$.type(b.movie)?(c=b.movie,c=$.extend({},c,{type:"movie",homeUrl:a.paths.MOVIE_HOME.replace("(cmovie)",c.code),directors:e(c.castMember,8002),creators:e(c.castMember,8100),actors:e(c.castMember,8001)})):"object"===$.type(b.tvseries)?(c=b.tvseries,c=$.extend({},c,{type:"series",homeUrl:a.paths.SERIES_HOME.replace("(cseries)",c.code),directors:e(c.castMember,8002),creators:e(c.castMember,8100),actors:e(c.castMember,8001)})):"object"===$.type(b.season)?(c=b.season,c=$.extend({},c,{type:"seriesSeason",homeUrl:a.paths.SERIESSEASON_HOME.replace("(cseriesseason)",c.code).replace("(cseries)",c.parentSeries.code),title:b.season.parentSeries.name,poster:b.season.picture,directors:e(c.castMember,8002),creators:e(c.castMember,8100),actors:e(c.castMember,8001)})):"object"===$.type(b.episode)?(c=b.episode,c=$.extend({},c,{type:"seriesEpisode",homeUrl:a.paths.SERIESEPISODE_HOME.replace("(cseriesepisode)",c.code).replace("(cseriesseason)",c.parentSeason.code).replace("(cseries)",c.parentSeries.code),title:b.episode.parentSeries.name,poster:b.episode.picture,directors:e(c.castMember,8002),creators:e(c.castMember,8100),actors:e(c.castMember,8001)})):"object"===$.type(b.person)&&(c=b.person,c=$.extend({},c,{type:"person",homeUrl:a.paths.PERSON_HOME.replace("(cperson)",c.code),title:b.person.name.given+" "+b.person.name.family,poster:b.person.picture,activity:b.person.activity,nationality:b.person.nationality})),c=$.extend({},c,{id:h.id,canClose:h.settings.canClose}),g(c)})}function g(a){l&&l.length&&(window.clearTimeout(h.timerHide),m.hide()),l=$(k(a)),h.setEvents(),"function"==typeof h.settings.callback&&h.settings.callback.call(h,h.id,l),$("body").append(l),n[h.settings.position](),acConcierge()}var h,i,j,k,l=$(".open_detail"),m={bufferEvents:function(){return h.timerShow&&"number"==typeof h.timerShow&&(window.clearTimeout(h.timerShow),delete h.timerShow),m.hideTimed(),!1},display:function(){return $(".open_detail").length?m.hide():m.show(),!1},hide:function(){return l?(l.remove(),l=null,b.publish("tooltip.hidden"),!1):void 0},hideOthers:function(){$(".open_detail").hide()},hideOutside:function(){$(".open_detail").length&&m.hide()},hideTimed:function(){h.timerHide=setTimeout(m.hide,250)},show:function(){return m.hideOthers(),"function"==typeof n[h.settings.position]?(h.build(),h.settings.timer&&!isNaN(h.settings.timer)&&h.settings.timer>0&&h.hideTimed(),b.publish("detail.shown"),!1):void 0},showTimed:function(){return h.timerShow=window.setTimeout(m.show,100),!1},stopHide:function(){return h.timerHide&&"number"==typeof h.timerHide&&window.clearTimeout(h.timerHide),!1},stopPropagation:function(a){a.stopPropagation()}},n={none:function(){var a="",b=$(window),c={top:(b.height()-l.outerHeight())/2+b.scrollTop(),left:(b.width()-l.outerWidth())/2};return l.css(c),$.extend(c,{arrowCssClass:a})},top:function(){var a="open_detail_b",b={top:i.offset().top-l.outerHeight(),left:(i.offset().left+i.outerWidth())/2};return l.addClass(a).css(b),$.extend(b,{arrowCssClass:a})},right:function(){var a="open_detail_l",b={top:Math.round(i.offset().top+i.outerHeight()/2-l.outerHeight()/2),left:Math.round(i.offset().left+i.outerWidth()+18)};return l.addClass(a).css(b),$.extend(b,{arrowCssClass:a})},innerRight:function(){var a="open_detail_l",b={top:Math.round(i.offset().top+i.outerHeight()/2-l.outerHeight()/2),left:Math.round(i.offset().left+i.outerWidth()-l.outerWidth()+18)};return l.addClass(a).css(b),$.extend(b,{arrowCssClass:a})},bottom:function(){var a="open_detail_t",b={top:i.offset().top+i.outerHeight()+7,left:i.offset().left+i.outerWidth()/2-l.outerWidth()/2};return l.addClass(a).css(b),$.extend(b,{arrowCssClass:a})},bottomLeft:function(){var a="",b={top:i.offset().top+i.outerHeight()+7,left:i.offset().left};return l.css(b),$.extend(b,{arrowCssClass:a})}},o='<div class="open_detail open_detail_large"><div class="open_detail_inner"><span class="open_detail_arrow"></span>{{ if (data.canClose) { }}<a class="close" href="#">close</a>{{ } }}{{= partialTemplate(data) }}</div></div>';return{settings:{canClose:!0,events:[],position:"none",templateId:null,timer:0,ext:null},init:function(){h=this,i=h.$widget,j=d.extend(h.settings.ext,h),k=c.setup(o,{partialTemplate:c.setup(this.templateId)})},initEvents:function(){h.hasEvent("click")&&(i.on("click",m.display),$(document).on("click",m.hideOutside)),h.hasEvent("hover")&&i.on("mouseenter",m.showTimed).on("mouseleave",m.bufferEvents)},setEvents:function(){l.on("mouseenter",m.stopHide).on("mouseleave",m.bufferEvents).on("click",".close",m.hide).on("click",m.stopPropagation)},build:function(){var a;h.settings.dataSource?f(h.settings.dataSource):(a=$.extend({},h.entity,{id:h.id,canClose:h.settings.canClose}),g(a))},hasEvent:function(a){return $.inArray(a,h.settings.events)>-1}}}),AC.define("AC.widget.tvListings",["AC.event","AC.template","AC.social.user","AC.widget"],function(a,b,c,d){function e(){var a={};x=this,y=x.$widget,z=y.find(F),A=z.find(G),B=$(H),C=$(I),D=$(J),E=$(K),$.extend(x.settings.scales,y.data("scales")),$.extend(x.settings.group,y.data("group")),$.extend(x.settings.sas,y.data("sas")),a.current={starttimes:x.settings.scales},x.settings.scales=a,x.settings.myChannels="mychannels"===(x.settings.group&&x.settings.group.cchannelgroup),x.settings.sas.sasPageId=x.settings.sas.serverId+"/"+x.settings.sas.pageId}function f(){A.on("click",".tv_grid_content",w).on("click",".tv_grid_content_full .reload",u).on("click",".tv_grid_content_full .close",p).on("mouseenter",".tv_grid_content:has(.more)",v).on("mouseleave",".tv_grid_content:has(.more)",q),y.on("click",I+" .reload",h),c.doOnConnection(h)}function g(c){var d=c&&c.result&&c.result.value,e=x.settings.scales.current;$.extend(x.settings.scales.current,d),e.channels&&e.channels.length?(A.html(b.setup("listingsChannel",{partialTemplate:b.setup("broadcastingBrief")})(e.channels)),l(),E.remove(),a.publish("tvListings.listingsUpdated."+x.id,{scale:e})):n(),j(),k(e.favorites)}function h(){var b=x.settings.scales.current;x.settings.myChannels?c.isOn()?$.getJSON("/ws/Broadcastings.ashx/loadChannels?cchannelgroup=mychannels&starttime="+b.starttimes.current).done(g).fail(i):m():(l(),c.isOn()?j().done(k):(a.subscribe("connect.succeed",j),k()))}function i(){C.removeClass("hide"),E.addClass("hide"),B.addClass("hide")}function j(){return AC.data.read("listByEntityType",{service:"socialAction",entityType:"TvChannel",parameters:{actionType:"fan",pageSize:100}})}function k(a){!x.settings.myChannels||a&&a.length||n(),d.load(y,".j_w_tvlistings")}function l(){z.removeClass("hide"),E.addClass("hide"),B.addClass("hide"),t()}function m(){B.addClass("hide"),z.addClass("hide"),D.removeClass("hide")}function n(){B.addClass("hide"),z.addClass("hide"),D.addClass("hide"),E.removeClass("hide")}function o(a){var b=A.find("tr"),c=b,d=".genre-"+a;"all"===a?c.find(".tv_grid_content").removeClass("filter_on"):(c=c.has(d),c.find(".tv_grid_content:not(.active)").addClass("filter_on").filter(d).removeClass("filter_on")),b.addClass("hide"),c.removeClass("hide")}function p(){var a=$.Deferred(),b=A.find(".tv_grid_content.active");return b.length<1?a.resolve():(b.removeClass("active"),$(".tv_grid_content_full").slideUp(500,function(){a.resolve()}),a.promise())}function q(a){var b=$(a.currentTarget),c=$("#tv_grid_tooltip-"+b.data("id"));c.addClass("hide")}function r(a){var b=a.find(".tv-ad"),c=function(a){var b=Math.round(1e10*Math.random());return'<iframe src="https://smart.allocine.fr/call/pubif/'+a.sasPageId+"/"+a.sasFormatId+"/S/"+b+"/"+encodeURI(a.sasTarget)+'?" width="'+a.width+'" height="'+a.height+'" " marginwidth="0" marginheight="0" vspace="0" hspace="0" scrolling="no" frameborder="0"></iframe>'};b.html(c(x.settings.sas))}function s(a,c,d){var e=$.Deferred(),f=d.find(".data_box"),g=c.find(".loading_item"),h=f.find(".loading_error"),i=function(a){a.result&&a.result.errorMessage?e.reject(g,h,a.result.errorMessage):e.reject(g,h)},j=function(a){var c;a=JSON.parse(a),a.result&&a.result.value?(c=$(b.setup("broadcastingFull")(a.result.value)),r(c),c.appendTo(f),e.resolve(g,h)):i(a)};if(!h.length)return e.resolve();g.removeClass("hide");var k={id:0,method:"load",params:'{ "cBroadcasting": '+a+" }"},l=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");if(l.open("POST","/ws/Broadcastings.ashx",!1),l.setRequestHeader("Content-Type","text/plain; charset=utf-8"),l.setRequestHeader("X-JSON-RPC",k.method),l.send('{"id":'+k.id+',"method":"'+k.method+'","params":'+k.params+"}"),200!==l.status)throw{message:l.status+" "+l.statusText,toString:function(){return this.message}};var m=new Date,n=JSON.parse(l.responseText);return n.timeTaken=new Date-m,n.http={text:l.responseText,headers:l.getAllResponseHeaders()},null!==n.error&&void 0!==n.error&&i(n),j(JSON.stringify(n)),e.promise()}function t(){x.settings.isReady=!0,AC.event.publish("tvListings.ready."+x.id)}function u(a){var b=$(a.currentTarget),c=b.data("id"),d=$("#tv_grid_content_full-"+c),e=function(a,b){"undefined"!=typeof b&&(b[0].remove(),b[1].remove())},f=function(a,b,c){a&&a.addClass("hide"),b&&(c&&b.html(c),b.removeClass("hide"))},g=function(){b.removeClass("filter_on"),b.addClass("active"),d.slideDown(),d.css("zoom",1)};$.when(p(),s(c,b,d)).done(e,g).fail(f,g)}function v(a){var b,c,d,e=$(a.currentTarget),f=$("#tv_grid_tooltip-"+e.data("id")),g=e.position(),h=2;("auto"===f.css("left")||"auto"===f.css("right"))&&(b=e.parent().width(),c=g.left+e.width()-h,d=b-g.left-2*h,c+f.width()<b?f.css("left",c):f.css("right",d)),f.removeClass("hide")}function w(a){var b=$(a.currentTarget);b.hasClass("active")?p(a):u(a)}var x,y,z,A,B,C,D,E,F=".main_content",G=".prog_listing",H="#loader",I="#loading_error",J="#tv-listings-not-connected",K="#tv-listings-select-channels",L={isReady:!1,scales:{},group:{},myChannels:!1,sas:{sasPageId:void 0,sasFormatId:"54",sasTarget:"",width:300,height:250}};return{settings:L,init:e,initEvents:f,filterChannelsByGenre:o}}),AC.define("AC.widget.urlUpdate",[],function(){function init(){self=this,$w=self.$widget,id=$w.attr("id"),settings=self.settings,settings.attr=settings.attr||"href",updateUrl()}function updateUrl(){var $e=$("#"+id),urlString=$e.attr(settings.attr),url,param;if(!urlString)return void window.setTimeout(updateUrl,500);if(url=new ACLight.Url(urlString),url.qs){for(param in settings.del)delete url.qs[settings.del[param]];for(param in settings.add)url.qs[param]="string"==typeof settings.add[param]&&"@"===settings.add[param][0]?eval(settings.add[param].substr(1)):settings.add[param];$e.attr(settings.attr,url.toString())}}var self,$w,settings,id;return{init:init}}),AC.define("AC.widget.videoclash",["AC.resources.videoClash","AC.api.entityClash","AC.helpers.cookie","AC.helpers.string","AC.comp.spinner"],function(a,b,c,d,e){function f(){var a;o=this,p=o.$widget,q=o.settings.clashId,k(),i()?(a=$("#"+h()).find(".btn-vote"),$.get("/ws_v7/get_clash_stats.ashx?id="+q).done(function(b){l(b),j(a)})):j()}function g(a){var b=$(a.currentTarget),c=b.hasClass("challengerOne")?"leftSide":b.hasClass("challengerTwo")?"rightSide":"",d="mouseenter"===a.type?"addClass":"mouseleave"===a.type?"removeClass":"";b.parents(".videoClash")[d](c)}function h(){return c.read("ACVC."+q)}function i(){return!!h()}function j(a){var b="j_w videoClash animated ready";$(".btn-vote").removeClass("hide"),a&&(a.addClass("btn-voted").parents(".videoClash").addClass("videoClash-result"),b+=" videoClash-result"),p[0].setAttribute("data-attr",'{"cssClass":"'+b+'"}')}function k(){i()||p.find(".btn-vote").on("click",m),p.find(".challengerOne, .challengerTwo").on("mouseenter mouseleave",g)}function l(b){for(var c,e,f=b,g=f.length;g--;)c=f[g],e=$("#"+c.entityId),e.find(".btn-result-inner").append(d.replace(a[c.count>1?"plural":"singular"],c)),c.count/c.total>.5&&e.find(".winner").removeClass("hide")}function m(a){var c,d=$(a.target),f=d.data("refmedia");(f||q)&&(c=e(d,{img:"blueMedium"}),b.addVote({videoId:parseInt(f,10),entityClashId:q}).done(function(a){l(a.result),j(d),n(f)}).always(function(){c.hide()}))}function n(a){var b=new Date;b.setDate(b.getDate()+1),b.setHours(0,0,0,0),c.write({name:"ACVC."+q,value:a})}var o,p,q;return{init:f}}),AC.define("AC.widget.xitizone",[],function(){function a(){d=this,e=d.$widget,f=d.settings,d.selector=f.selector&&""!==f.selector?f.selector:"a"}function b(){return"undefined"!=typeof _ab_wtf?1===_ab_wtf:!1}function c(){e.on("click",d.selector,function(){var a;return"function"==typeof xt_click&&"undefined"!=typeof f.xtpage&&"undefined"!=typeof f.xtn2?"undefined"!=typeof f.xtpageabtest&&""!==f.xtpageabtest&&"undefined"!=typeof f.xtn2abtest&&""!==f.xtn2abtest&&"undefined"!=typeof f.xtabfunc&&""!==f.xtabfunc&&"function"==typeof d[f.xtabfunc]?(a=d[f.xtabfunc],a()?xt_click(window,"C",f.xtn2abtest,f.xtpageabtest,"N"):xt_click(window,"C",f.xtn2,f.xtpage,"N")):xt_click(window,"C",f.xtn2,f.xtpage,"N"):void 0})}var d,e,f;return{init:a,initEvents:c,isWtfPubAbTest:b}}),AC.define("AC.thirdParty",function(){function a(){var a,c=AC.thirdParty,e=$("[data-ac-load]"),f=[];for(a in c)"common"===c[a].type&&(b(c[a],{id:a}),d(c[a],{id:a}));e.each(function(a,e){var g=$(e).data("ac-load");g&&g.id&&c[g.id]&&-1===$.inArray(g.id,f)&&"widget"===c[g.id].type&&(f.push(g.id),$.when(b(c[g.id],g)).done(function(){d(c[g.id],g)}))})}function b(a,b){var c=$.Deferred();return document.getElementById(b.id+"-js")&&c.reject(),"function"==typeof a.setup?$.when(a.setup(b)).done(function(){c.resolve()}).fail(function(){c.reject()}):c.resolve(),c.promise()}function c(a,b){var c=b.id+"-js",e=document.getElementById(c);e&&e.parentNode.removeChild(e),d(a,b)}function d(a,b){var c,d,e=b.id+"-js",f="script",g=document.getElementsByTagName(f)[0],h=b.querystring||"";h=(h&&-1===h.indexOf("?")?"?":"")+h,c=document.createElement(f),c.async=!0,c.id=e,c.src=a.source+h,g.parentNode.insertBefore(c,g),a.objectToCheck&&"function"==typeof a.callback&&(d=setInterval(function(){window[a.objectToCheck]&&(a.callback(b),clearInterval(d))},10))}return a(),{reload:c}}),AC.define("AC.api.awards",["AC.request"],function(a){function b(b,c,d){var e={type:"GET",uri:"/api/my/awards/{entityType}/{categoryId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function c(b,c,d){var e={type:"PUT",uri:"/api/my/awards/vote/{itemId}",parameters:b,queryInfo:c,ajaxOptions:d};return a.execute(e,!0)}function d(b,c){var d={type:"PUT",uri:"/api/my/awards/newsletter_cn/",queryInfo:b,ajaxOptions:c};return a.execute(d,!0)}function e(b,c){var d={type:"PUT",uri:"/api/my/awards/newsletter_next/",queryInfo:b,ajaxOptions:c};return a.execute(d,!0)}function f(b,c){var d={type:"DELETE",uri:"/api/my/awards/newsletter_cn/",queryInfo:b,ajaxOptions:c};return a.execute(d,!0)}function g(b,c){var d={type:"DELETE",uri:"/api/my/awards/newsletter_next/",queryInfo:b,ajaxOptions:c};return a.execute(d,!0)}return{get:b,setVote:c,setCarteNoireNewsletter:d,setNextNewsletter:e,removeCarteNoireNewsletter:f,removeNextNewsletter:g}}),AC.define("AC.widget.awardsvotes",["AC.api.awards","AC.data","AC.event","AC.widget","AC.social.user"],function(a,b,c,d,e){function f(){t=this,u=t.$widget,$.extend(t.settings,{categoryId:u.find(".voting-title").data("categoryid")}),g(),k(),e.getOnConnection(n)}function g(){var a=u.find($(w)).find("li"),b=u.find($("#optinalert")),c=u.find("#optinVotingThank"),d=u.find($(y)).find("span");a.on("click",l),d.on("click",h),c.on("click",s),b.on("click",s),u.find(".voting_btn > a").on("click",m)}function h(a){var b=$(a.currentTarget),c=b.parents(".voting_inner").find("div[data-itemid]").not(".hide"),d=c.prev(),e=c.next();b.hasClass("prev")?c.data("itemid")!==b.parents(".voting_inner").find("div[data-itemid]").first().data("itemid")&&j(c,d):c.data("itemid")!==b.parents(".voting_inner").find("div[data-itemid]").last().data("itemid")&&j(c,e)}function i(){u.find($(y)).find("span").off(),u.find($(w)).find("li").off(),u.find(".voting_btn > a").off()}function j(a,b){i(),a.fadeOut(2500,function(){a.addClass("hide"),b.removeClass("hide"),$(x).fadeOut(400,function(){$(x).css("background-image",b.data("bg"))}),$(x).fadeIn("slow"),b.fadeIn("slow"),b.data("itemid")!==u.find(".voting_choices").find("li.voted").data("itemid")?$(".voting_btn").removeClass("hide"):$(".voting_btn").addClass("hide"),g()})}function k(){var a=u.find($(v));a.each(function(a,b){u.find($(x)).css("background-image",u.find($(w)).find("li").first().data("bg")),0===a&&($(b).removeClass("hide"),u.find(".j_confirmation").addClass("hide"))})}function l(a){var b=u.find($(v));$(" .voting_choices li").removeClass("selected"),u.find(".voting_inner").removeClass("voted"),b.each(function(b,c){$(c).addClass("hide"),$(a.currentTarget).data("itemid")===$(c).data("itemid")&&($(c).removeClass("hide"),$(c).show(),u.find($(x)).css("background-image",$(a.currentTarget).data("bg")),$(a.currentTarget).addClass("selected"))}),q()}function m(b){var c=$(b.currentTarget).parents(".voting_inner").find(".voting_content").not(".hide").data("itemid"),d=$(b.currentTarget).parents(".voting_inner").find(".voting_content").not(".hide").data("itemname");c&&e.doOnAction(t,function(){a.setVote({itemId:c})}).done(function(){z.VotedItemId=c,void 0===z.VotedCategories&&(z.VotedCategories=[]),z.VotedCategories.push(t.settings.categoryId),p(),o(),z.VotedCategories.length>=11&&($(".voting_msg_voted").addClass("hide"),$(".all_voted_msg").removeClass("hide"),u.find($(x)).css("background-image",$(".all_voted_msg").data("bg"))),u.find(".voting_content").addClass("hide"),u.find(".voting_inner").addClass("voted"),u.find(".voting_content.j_confirmation").removeClass("hide"),AC.context.widgets.generic.genericshare.settings[0].settings.args.value.item=d;
})}function n(){t.settings.categoryId&&a.get({entityType:t.settings.entityType,categoryId:t.settings.categoryId}).done(function(a){z=a.result,p(),o(),r()})}function o(){z&&u.find("li[data-catid]").filter(function(){return-1!==z.VotedCategories.indexOf($(this).data("catid"))}).addClass("voted")}function p(){if(z.VotedItemId){var a=u.find(".voting_choices").find("li[data-itemid = "+z.VotedItemId+"]");u.find(".voting_choices").find("li").removeClass("voted"),u.find(".voting_choices").find("li").removeClass("active"),u.find(".voting_choices").find("li").addClass("disabled"),a.addClass("voted active"),a.removeClass("disabled"),u.find(".voting_content").not(".j_confirmation").addClass("hide"),u.find(".voting_content.j_confirmation").hasClass("hide")&&(u.find(".voting_content[data-itemid="+z.VotedItemId+"]").removeClass("hide"),u.find($(x)).css("background-image",a.data("bg"))),u.find(".voting_btn > a").html("Je change mon vote"),q()}}function q(){z.VotedItemId&&($(".voting_content:not(.hide)").data("itemid")===z.VotedItemId?$(".voting_btn").addClass("hide"):$(".voting_btn").removeClass("hide"))}function r(){z.HasCarteNoireNewsletter&&u.find("#optinVotingThank").prop("checked",!0),z.HasNextNewsletter&&u.find("#optinalert").prop("checked",!0)}function s(b){var c="optinalert"===$(b.currentTarget).prop("id")?a.setNextNewsletter:a.setCarteNoireNewsletter,d="optinalert"===$(b.currentTarget).prop("id")?a.removeNextNewsletter:a.removeCarteNoireNewsletter;$(b.currentTarget).prop("checked")?e.doOnVerifiedAction("game",c):e.doOnVerifiedAction("game",d)}var t,u,v=".voting_content",w=".voting_choices",x=".voting",y=".select_pager",z={};return{init:f}}),AC.define("AC.widget.specialbutton",["AC.helpers.string","AC.assets.environment"],function(a,b){function c(){e=this,f=e.$widget,g=e.entity,h=e.settings,h&&h[g.entityId]&&d(h[g.entityId])}function d(c){var d,e=new Date,g=c.dateBegin?c.dateBegin.split("-"):null,h=c.dateEnd?c.dateEnd.split("-"):null,k=g?new Date(g[0],--g[1],g[2]):e,l=h?new Date(h[0],--h[1],h[2]):e;b.siteKey===c.siteKey&&e>=k&&l>=e&&(d=""!==c.icon?a.replace(i,c):"",f.before(a.replace(j,c).replace("[icon]",d)),f.remove())}var e,f,g,h,i='<i class="icon-{icon}"></i> ',j='<a href="{url}" target="_blank" class="button btn-{css}">[icon]{label}</a>';return{init:c}}),AC.define("AC.widget.specialsubmenu",["AC.helpers.string"],function(a){function b(){d=this,e=d.$widget,f=d.settings,f&&c()}function c(){var b=new Date,c=f.dateBegin?f.dateBegin.split("-"):b,d=f.dateEnd?f.dateEnd.split("-"):b,h=new Date(c[0],--c[1],c[2]),i=new Date(d[0],--d[1],d[2]);b>=h&&i>=b&&(0===parseInt(f.position,2)?e.prepend(a.replace(g,f)):e.children("li").eq(parseInt(f.position,2)-1).after(a.replace(g,f)))}var d,e,f,g='<li><a href="{url}" target="_blank">{label}</a></li>';return{init:b}}),AC.define("AC.widget.vod",["AC.template"],function(a){function b(){e=this,f=e.$widget,g=e.entity,h=e.settings,$.getJSON("/ws_v7/get_vod_products.ashx?c"+g.entityType+"="+g.entityId).done(function(a){i=c(a),d()})}function c(a){for(var b,c,d=a.partnerList,e=d.length;0!==e;)c=Math.floor(Math.random()*e),e-=1,b=d[e],d[e]=d[c],d[c]=b;return a.partnerList=d,a}function d(){var b,c,d=f.find("#vodPartnerTemplate").html(),e="",g=0;for(b=a.setup(d,{partialTemplate:a.setup(null)});g<i.partnerList.length&&3!==g;g++)c=$(b(i.partnerList[g])),e+=c[0].outerHTML;f.html(e),AC.widget.load($(".bg_grey"),".j_w")}var e,f,g,h,i;return{init:b}}),function(){for(var a,b=".filterdrop",c=".acfilter:not(.inactive)",d=".subFilterList",e=$(b),f=e.length;f--;)a=$(e[f]),a.on("click",c,function(){return $(this).parent().find(d).removeClass("hide"),!1}).on("click",".inactive",function(){return!1}),a.on("mouseleave",function(){$(this).find(d).addClass("hide")})}(),AC.define("AC.ui.animations",["AC.ui"],function(a){function b(){f=$(g),c(),e()}function c(){}function d(a,b){a.addClass(b.cssClass)}function e(){for(var a,b,c=f.length;c--;)a=$(f[c]),b=a.data(h),b&&(b.timeout?setTimeout(function(){d(a,b)},b.timeout):d(a,b))}var f,g=".j_animation",h="animation";return b(),{}}),$(function(){var a="carousel_favorite_genres",b=$("#"+a),c=b.find(".circle");b.length&&!AC.helpers.dom.hasSvgSupport()&&(b.data("settings").minSlideNav=3,b.data("settings").slideOffset=-1,c.attr("class","hide"))}),$(function(){var a="carousel_worked_with",b=0,c=0,d=$(".j_pseudo_slide").length,e=function(a){var e=$(a.target);b=e.hasClass("prev")?b-1:e.hasClass("next")?b+1:e.data("goto").slide,b=b===d?d-b:c>b?d+b:b,$(".shot_result").find(".j_pseudo_slide").addClass("hide").eq(b).fadeIn().removeClass("hide")},f=function(b){var c=document.location.href,d=c.indexOf("#")>-1&&c.length-c.indexOf("#")>1?c.substring(c.indexOf("#"),c.length):null,e=d&&d.indexOf("|")>-1?d.split("|")[1]:null;e&&$("#"+a).find(".j_goto").eq(e).click()};AC.event.subscribe("widget.created.carousel."+a,f),AC.event.subscribe("carousel.effects.depth."+a,e)}),function(){function a(){g.hasClass("is_pinned")?AC.social.user.isOn()&&($("#header").find(".avatar.jmy").css("cursor","pointer"),$("#header").find(".avatar.jmy").on("click",function(){window.location.href=AC.assets.environment.paths.FRIENDS_FEEDS})):($("#header").find(".avatar.jmy").css("cursor",""),$("#header").find(".avatar.jmy").off())}function b(){-1===navigator.userAgent.toLowerCase().indexOf("msie")&&(980===$("#main").width()||980===$(".ac_page").width())&&c()}function c(){i.on("focus",d),i.on("blur",d),$(window).on("scroll",e),navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&$(window).on("load",e),$(window).on("load",f),AC.social.user.doOnConnection(a)}function d(){h.hasClass("is_expand")?setTimeout(function(){h.removeClass("is_expand")},500):h.addClass("is_expand")}function e(){k=$(window).scrollTop(),l=$(j).offset().top,k>l+m?(h.hasClass("is_expand")&&i.blur(),g.hasClass("is_pinned")||AC.event.publish("header_pinned_change",!0),g.addClass("is_pinned")):l+m>k&&(g.hasClass("is_pinned")&&AC.event.publish("header_pinned_change",!0),g.removeClass("is_pinned"),$("body").css("margin-top","0px")),a()}function f(){k>l+m&&$("body").css("margin-top","50px")}var g=$("#header"),h=$("#header .search_engine"),i=h.find(".search_input"),j=$(".pagelayout").length?".pagelayout":"#contentlayout",k=$(window).scrollTop(),l=$(j).offset().top,m=$("body#videos_home")[0]?460:50;b()}(),function(){"mobile"===AC.context.browser()&&($.fn.mobileHover=function(){var a=$(this);a.on("touchstart touchend",function(){a.trigger("hover")})},$(".spoil_container").mobileHover())}(),$(function(){slideQuiz=function(a){var b=$(a.delegateTarget).find(".question");b.stop().animate({left:a.data.left+"px"})},quizOnLoad=function(){var a=$(".jui.star_quiz"),b=a.length&&a.find(".question").width();return a.length&&(a.on("click",".question",{left:-b},slideQuiz),a.on("click",".answer .back",{left:0},slideQuiz)),!1},quizOnLoad()}),function(){function a(a,b){$("html, body").animate({scrollTop:a},"slow",function(){AC.event.publish("scrollto.done."+b)})}function b(){var b=$(this),c=b.attr("href"),f=c===e?0:parseInt($(c).offset().top-d,10);return a(f,c),!1}function c(){var b,c,e=document.location.hash.slice(1);return e=/^[a-zA-Z][\w:|.-]*$/.test(e)?e:null,b=e&&e.indexOf("|")>-1?e.split("|"):null,b&&(e=b[0]),c=$("#"+e),e&&c.length&&a(parseInt(c.offset().top-d,10)),!1}var d=34,e="#header";c(),$(".w-scrollto").on("click",b)}(),AC.define("AC.widget.shuffle_dom",function(){function a(){b=this,c=b.$widget,d=b.entity,e=b.settings;var a=c.find(e.shuffledContainer);a.each(function(){c[Math.floor(2*Math.random())?"append":"prepend"](this)}),c.removeClass("hidden")}var b,c,d,e;return{init:a}}),$(function(){var a="dropdowngenres",b="tv_listings",c=function(a){AC.context.widgets.tvListings?(AC.event.unsubscribe("tvListings.ready."+b,c),AC.context.widgets.tvListings[b].filterChannelsByGenre(a.key)):AC.event.subscribe("tvListings.ready."+b,c,a)},d=function(b){AC.context.widgets.dropDown[a].fillList(b.scale.genres)};AC.event.subscribe("dropDown.selectionChanged."+a,c),AC.event.subscribe("tvListings.listingsUpdated."+b,d)}),AC.define("AC.ui.backToTop",["AC.resources"],function(a){function b(){$("body").append(g),$("#back-top").hide(),d($(this).scrollTop()),c()}function c(){$(window).on("scroll",function(){d($(this).scrollTop())}),$("#back-top a").on("click",e)}function d(a){var b=0===a?"hide":a>h?"fadeIn":"fadeOut";$("#back-top")[b]()}function e(){return $("body,html").animate({scrollTop:0},800),!1}var f=a.global.backToTop,g='<div id="back-top"><a href="#wrapper">'+f+"</a></div>",h=$(window).height();b()}),AC.define("AC.ui.cookieInfo",["AC.resources","AC.template","AC.helpers.cookie"],function(a,b,c){function d(){$("#cookieInfoTemplate").length>0&&$("body").append(b.setup("cookieInfo")()),g=$(".jui.info-cookie"),"undefined"==typeof c.read("ACCOK")&&g.length>0&&g.hasClass("hide")&&g.removeClass("hide")}function e(){g.on("click",".close",function(){c.write({name:"ACCOK",value:!0,expires:{date:new Date(2099,12,30)}}),g.hasClass("hide")||g.addClass("hide")})}function f(){d(),e()}var g=null;f()}),AC.define("AC.ui",["AC.helpers.error","AC.helpers.json"],function(a,b){function c(){$(window).on("scroll resize",e),e()}function d(){var a=$(this),b=$(window),c=a.offset().top,d=$.isNumeric(a.data("attr").tolerance)?a.data("attr").tolerance:g,e=b.scrollTop(),f=e-d,h=e+b.height()+d;return c>f&&h>c}function e(){var a=$("[data-attr]").filter(d);a.each(f)}function f(c,d){var e=$(d),f=d.getAttribute("data-attr");b.isJsonString(f)||a.write("data-attr should be a JSON string.",arguments),f=JSON.parse(f),f.cssClass&&(f["class"]=f.cssClass,delete f.cssClass),f.tolerance&&delete f.tolerance,$.each(f,$.proxy(e.attr,e)),e.removeAttr("data-attr")}var g=100;return c(),{}}),AC.define("AC.ui.tooltip",function(){function a(){var a=arguments;$.isPlainObject(a)&&a[0].jquery&&1===a[0].length?d.apply(this,a):c.apply(this,a)}function b(a,b,c){$(b).parent().on("mouseenter",function(){e(a,b,c),f(a,b)})}function c(a,b){var c=".jui.simple_tooltip",d="string"==typeof a?$(a+" "+c):a.jquery?a.find(c):null;d&&d.length&&d.each(function(a,c){e(a,c,b),f(a,c)})}function d(){for(var a=arguments,c="string"===$.type(a[a.length-1]),d="null"===$.type(a[a.length-1]),g=c?a[a.length-1]:"",h=0,i=c||d?a.length-1:a.length;i>h;h++)e(h,a[h],g),a[h].parent().is(":visible")?f(h,a[h]):a[h].parents(".user-avatar").length&&b(h,a[h],g)}function e(a,b,c){var d,e=$(b),f=e.data("tooltip");!c||-1!==$.inArray(c,i)||f&&f[c]?!e.find("b").text()||f&&f[c]?"object"===$.type(f)?d=f[c]||f.label:"string"===$.type(f)&&(d=f):d=e.find("b").text():d=c,d?e.find("b").text(d):e.hide()}function f(a,b){var c=$(b),d=c.data("tooltip"),e=d&&d.position||"top",f=c.children("span"),i=c.parent(),j=$.inArray(e,h)>-1?{marginLeft:-(c.outerWidth()/2),left:"50%"}:{marginLeft:-7,left:0},k=$.inArray(e,h)>-1?{left:"50%"}:{marginLeft:i.width()/2-7};c.addClass(g[e]).css(j),f.css(k)}var g={bottom:"st_arrow_t",top:"st_arrow_b",topLeft:"st_arrow_bl"},h=["bottom","top"],i=["label","alternateLabel"];return a}),AC.define("AC.template",["AC.helpers.error"],function(a){function b(){g&&(_.templateSettings={escape:/\{\{-([\s\S]+?)\}\}/g,evaluate:/\{\{([\s\S]+?)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g})}function c(a,b){return _.template(a,null,{variable:"data",imports:b||null})}function d(b,d){var e=AC.tpl?AC.tpl[b.toUpperCase()]:null,f=document.getElementById(b+"Template"),h=f?f.type:"";return e?e:"text/template"===h&&g?c(f.text,d):a.write('template "'+b+'" not found.',arguments)}function e(a,b){return c(a,b)}function f(a,b){return a?a.indexOf("{{")>-1?e(a,b):d(a,b):void 0}var g="undefined"!=typeof _;return b(),{setup:f}}),AC.define("AC.ui",["AC.event"],function(a){function b(){$.each($(".jui"),d),e()}function c(a,b){var c="string"==typeof a?f(a,b):$.isPlainObject(a)?g(a,b):null;c&&(k.hasOwnProperty(c.key)?k[c.key].push(c.value):k[c.key]=[c.value])}function d(a,b){var d,e=$(b),f=e.data("ui");if($.isArray(f))for(d=f?f.length:0;d--;)c(f[d],e);else c(f,e)}function e(){var a,b=AC.ui,c={openAfterScrolledTo:h,positionOver:i,slideUp:j};for(a in k)$.isFunction(c[a])?c[a].apply(this,k[a]):b&&$.isFunction(b[a])&&b[a].apply(this,k[a])}function f(a,b){return{key:a,value:b}}function g(a,b){var c=$.map(a,function(a,b){return{action:b,args:a}});return{key:c[0].action,value:{$target:b,args:c[0].args}}}function h(b){var c=b.$target,d=b.args;a.subscribe("scrollto.done.#"+c.attr("id"),function(){c.animate({height:d+"px"},400)})}function i(){var a=arguments;$.each(a,function(a,b){b.on("mouseenter",function(){var a=b.next();parseInt(a.css("margin-top"),10)||a.css({marginTop:-(a.outerHeight(!0)+2)})})})}function j(a){var b=a.args;a.$target.on("click",function(){$(b).animate({height:"0px"},400)})}var k={};return b(),{}}),AC.define("AC.social.ui.header",["AC.social.user"],function(a){function b(){k=$('.j_sui[data-ui="header"]'),k.length&&(a.doOnConnection(d),c())}function c(){k.on("click",".disconnect",a.logout).on("mouseenter mouseleave","#my_account_nav",h)}function d(){a.isOn()?g():f()}function e(a){var b="show"===a?"removeClass":"addClass";k.find(".connect_loader")[b]("hide"),k.find(".connect_logged").addClass("hide")}function f(){var b;b=a.isOn()?".connect_error":".connect_login",e("hide"),k.find(b).removeClass("hide"),k.find(".connect_logged").addClass("hide")}function g(){i(),k.find(".my_account_menu").find("a").each(j)}function h(a){var b="mouseenter"===a.type?!0:!1;$(this).find(".my_account_btn").toggleClass("over",b)}function i(){var b=a.isOn()?k.find(".connect_logged"):k.find(".connect_error");k.find(".connect_member_inner").children().addClass("hide"),e("hide"),b.removeClass("hide")}function j(){var a=$(this);a.attr("href",a.data("url"))}var k;return b(),{init:b}}),AC.define("AC.social.ui.my",["AC.resources.theater","AC.helpers.dom","AC.helpers.string","AC.event","AC.assets.environment.paths"],function(a,b,c,d,e){function f(){m=AC.context.my,n={picture:i,badges:j,theaterkeys:k,display:g,hide:h},d.subscribe("user.on",l)}function g(a){a.removeClass("hide")}function h(a){a.addClass("hide")}function i(a){var b={small:{i:"c",h:33,w:33},medium:{i:"c",h:80,w:80}},c=b[a.data("size")||"small"],d=m.picture,f={Allocine:d.replace("i_w_h",[c.i,"_",c.h,"_",c.w].join("")),Facebook:[d,"?type=square&width=",c.w,"&height=",c.h].join(""),Google:[d,"?sz=",c.w].join(""),None:d},g=$('<a class="d_block" href="'+e.USERSPACE_HOME+'"><div class="avatar jmy" data-item="picture"><img  alt="" /></div></a>');g.attr("data-size",a.data("size")).find("img").attr("src",f[m.avatarProvider]),a.parent().find(".jui.simple_tooltip").remove(),a.replaceWith(g)}function j(){}function k(b){var c=m.theaterKeys,d=0===c.length?"NONE":1===c.length?"SINGULAR":"PLURAL";b.text(a[b.data("res").toUpperCase()][d].replace(c.length))}function l(){var a=$(".jmy");a.length&&a.each(function(a,c){var d,e=$(c),f=e.data("item"),g=e.data("action");"function"==typeof n[f]?n[f](e):e.text()?e.data("text")&&e.text(m[f]):e.text(m[f]),g&&(d=b.getEntity(e),d&&d.entityId===m.id&&n[g](e))})}var m,n={};return f(),{}}),AC.define("AC.social.ui.spinner",["AC.event","AC.ui","AC.comp.spinner","AC.social.user"],function(a,b,c,d){function e(){i=c($(j),{delayShow:0,delayHide:0}),f()}function f(){d.doOnConnection(h),a.subscribe("connect.reset",h),a.subscribe("ajaxui.done",g),a.subscribe("tabchange.done",g)}function g(){$(j).removeClass("hidden"),b.tooltip(j)}function h(){var a;i&&i.$spinner.length&&(a=i.$spinner.prev(),i.hide(),a.removeClass("hidden"),i=null),b.tooltip(j)}var i,j=".jsu";return e(),{}}),AC.define("AC.init.front",["AC.widget"],function(a){return a.init(),{}});
//# sourceMappingURL=front.min.js.map