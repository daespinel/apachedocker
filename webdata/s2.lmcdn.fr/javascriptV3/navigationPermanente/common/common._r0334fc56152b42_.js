(function(){function decimalAdjust(type,value,exp){if(typeof exp==='undefined'||+exp===0){return Math[type](value);}
value=+value;exp=+exp;if(isNaN(value)||!(typeof exp==='number'&&exp%1===0)){return NaN;}
value=value.toString().split('e');value=Math[type](+(value[0]+'e'+(value[1]?(+value[1]-exp):-exp)));value=value.toString().split('e');return+(value[0]+'e'+(value[1]?(+value[1]+exp):exp));}
if(!Math.round10){Math.round10=function(value,exp){return decimalAdjust('round',value,exp);};}
if(!Math.floor10){Math.floor10=function(value,exp){return decimalAdjust('floor',value,exp);};}
if(!Math.ceil10){Math.ceil10=function(value,exp){return decimalAdjust('ceil',value,exp);};}})();;window.Modernizr=function(a,b,c){function v(a){i.cssText=a}function w(a,b){return v(l.join(a+";")+(b||""))}function x(a,b){return typeof a===b}function y(a,b){return!!~(""+a).indexOf(b)}function z(a,b,d){for(var e in a){var f=b[a[e]];if(f!==c)return d===!1?a[e]:x(f,"function")?f.bind(d||b):f}return!1}var d="2.6.2",e={},f=b.documentElement,g="modernizr",h=b.createElement(g),i=h.style,j,k={}.toString,l=" -webkit- -moz- -o- -ms- ".split(" "),m={},n={},o={},p=[],q=p.slice,r,s=function(a,c,d,e){var h,i,j,k,l=b.createElement("div"),m=b.body,n=m||b.createElement("body");if(parseInt(d,10))while(d--)j=b.createElement("div"),j.id=e?e[d]:g+(d+1),l.appendChild(j);return h=["&#173;",'<style id="s',g,'">',a,"</style>"].join(""),l.id=g,(m?l:n).innerHTML+=h,n.appendChild(l),m||(n.style.background="",n.style.overflow="hidden",k=f.style.overflow,f.style.overflow="hidden",f.appendChild(n)),i=c(l,a),m?l.parentNode.removeChild(l):(n.parentNode.removeChild(n),f.style.overflow=k),!!i},t={}.hasOwnProperty,u;!x(t,"undefined")&&!x(t.call,"undefined")?u=function(a,b){return t.call(a,b)}:u=function(a,b){return b in a&&x(a.constructor.prototype[b],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(b){var c=this;if(typeof c!="function")throw new TypeError;var d=q.call(arguments,1),e=function(){if(this instanceof e){var a=function(){};a.prototype=c.prototype;var f=new a,g=c.apply(f,d.concat(q.call(arguments)));return Object(g)===g?g:f}return c.apply(b,d.concat(q.call(arguments)))};return e}),m.touch=function(){var c;return"ontouchstart"in a||a.DocumentTouch&&b instanceof DocumentTouch?c=!0:s(["@media (",l.join("touch-enabled),("),g,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(a){c=a.offsetTop===9}),c},m.video=function(){var a=b.createElement("video"),c=!1;try{if(c=!!a.canPlayType)c=new Boolean(c),c.ogg=a.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),c.h264=a.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),c.webm=a.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")}catch(d){}return c};for(var A in m)u(m,A)&&(r=A.toLowerCase(),e[r]=m[A](),p.push((e[r]?"":"no-")+r));return e.addTest=function(a,b){if(typeof a=="object")for(var d in a)u(a,d)&&e.addTest(d,a[d]);else{a=a.toLowerCase();if(e[a]!==c)return e;b=typeof b=="function"?b():b,typeof enableClasses!="undefined"&&enableClasses&&(f.className+=" "+(b?"":"no-")+a),e[a]=b}return e},v(""),h=j=null,e._version=d,e._prefixes=l,e.testStyles=s,e}(this,this.document);/*
 * Lazy Load - jQuery plugin for lazy loading images
 * Copyright (c) 2007-2013 Mika Tuupola
 * Licensed under the MIT license:
 *   https://www.opensource.org/licenses/mit-license.php
 * Project home:
 *   https://www.appelsiini.net/projects/lazyload
 * Version:  1.8.4
 * Exemple :
 * <img class="lazy" src="https://s1.lmcdn.fr/imagesV3/navigationPermanente/common/lazy._r01000559ce854_.png" data-original="votre-image.xxx" width="xx" height="xx" alt="" />
 * + <noscript><img src="votre-image.xxx" width="xx" height="xx" alt="" /></noscript>
 */
(function(a,b,c,d){var e=a(b);a.fn.lazyload=function(c){function i(){var b=0;f.each(function(){var c=a(this);if(h.skip_invisible&&!c.is(":visible"))return;if(!a.abovethetop(this,h)&&!a.leftofbegin(this,h))if(!a.belowthefold(this,h)&&!a.rightoffold(this,h))c.trigger("appear"),b=0;else if(++b>h.failure_limit)return!1})}var f=this,g,h={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:b,data_attribute:"original",skip_invisible:!0,appear:null,load:null};return c&&(d!==c.failurelimit&&(c.failure_limit=c.failurelimit,delete c.failurelimit),d!==c.effectspeed&&(c.effect_speed=c.effectspeed,delete c.effectspeed),a.extend(h,c)),g=h.container===d||h.container===b?e:a(h.container),0===h.event.indexOf("scroll")&&g.bind(h.event,function(a){return i()}),this.each(function(){var b=this,c=a(b);b.loaded=!1,c.one("appear",function(){if(!this.loaded){if(h.appear){var d=f.length;h.appear.call(b,d,h)}a("<img />").bind("load",function(){c.hide().attr("src",c.data(h.data_attribute))[h.effect](h.effect_speed),b.loaded=!0;var d=a.grep(f,function(a){return!a.loaded});f=a(d);if(h.load){var e=f.length;h.load.call(b,e,h)}}).attr("src",c.data(h.data_attribute))}}),0!==h.event.indexOf("scroll")&&c.bind(h.event,function(a){b.loaded||c.trigger("appear")})}),e.bind("resize",function(a){i()}),/iphone|ipod|ipad.*os 5/gi.test(navigator.appVersion)&&e.bind("pageshow",function(b){b.originalEvent.persisted&&f.each(function(){a(this).trigger("appear")})}),a(b).load(function(){i()}),this},a.belowthefold=function(c,f){var g;return f.container===d||f.container===b?g=e.height()+e.scrollTop():g=a(f.container).offset().top+a(f.container).height(),g<=a(c).offset().top-f.threshold},a.rightoffold=function(c,f){var g;return f.container===d||f.container===b?g=e.width()+e.scrollLeft():g=a(f.container).offset().left+a(f.container).width(),g<=a(c).offset().left-f.threshold},a.abovethetop=function(c,f){var g;return f.container===d||f.container===b?g=e.scrollTop():g=a(f.container).offset().top,g>=a(c).offset().top+f.threshold+a(c).height()},a.leftofbegin=function(c,f){var g;return f.container===d||f.container===b?g=e.scrollLeft():g=a(f.container).offset().left,g>=a(c).offset().left+f.threshold+a(c).width()},a.inviewport=function(b,c){return!a.rightoffold(b,c)&&!a.leftofbegin(b,c)&&!a.belowthefold(b,c)&&!a.abovethetop(b,c)},a.extend(a.expr[":"],{"below-the-fold":function(b){return a.belowthefold(b,{threshold:0})},"above-the-top":function(b){return!a.belowthefold(b,{threshold:0})},"right-of-screen":function(b){return a.rightoffold(b,{threshold:0})},"left-of-screen":function(b){return!a.rightoffold(b,{threshold:0})},"in-viewport":function(b){return a.inviewport(b,{threshold:0})},"above-the-fold":function(b){return!a.belowthefold(b,{threshold:0})},"right-of-fold":function(b){return a.rightoffold(b,{threshold:0})},"left-of-fold":function(b){return!a.rightoffold(b,{threshold:0})}})})(jQuery,window,document);(function(f,h,$){var a='placeholder' in h.createElement('input'),d='placeholder' in h.createElement('textarea'),i=$.fn,c=$.valHooks,k,j;if(a&&d){j=i.placeholder=function(){return this};j.input=j.textarea=true}else{j=i.placeholder=function(){var l=this;l.filter((a?'textarea':':input')+'[placeholder]').not('.placeholder').bind({'focus.placeholder':b,'blur.placeholder':e}).data('placeholder-enabled',true).trigger('blur.placeholder');return l};j.input=a;j.textarea=d;k={get:function(m){var l=$(m);return l.data('placeholder-enabled')&&l.hasClass('placeholder')?'':m.value},set:function(m,n){var l=$(m);if(!l.data('placeholder-enabled')){return m.value=n}if(n==''){m.value=n;if(m!=h.activeElement){e.call(m)}}else{if(l.hasClass('placeholder')){b.call(m,true,n)||(m.value=n)}else{m.value=n}}return l}};a||(c.input=k);d||(c.textarea=k);$(function(){$(h).delegate('form','submit.placeholder',function(){var l=$('.placeholder',this).each(b);setTimeout(function(){l.each(e)},10)})});$(f).bind('beforeunload.placeholder',function(){$('.placeholder').each(function(){this.value=''})})}function g(m){var l={},n=/^jQuery\d+$/;$.each(m.attributes,function(p,o){if(o.specified&&!n.test(o.name)){l[o.name]=o.value}});return l}function b(m,n){var l=this,o=$(l);if(l.value==o.attr('placeholder')&&o.hasClass('placeholder')){if(o.data('placeholder-password')){o=o.hide().next().show().attr('id',o.removeAttr('id').data('placeholder-id'));if(m===true){return o[0].value=n}o.focus()}else{l.value='';o.removeClass('placeholder');l==h.activeElement&&l.select()}}}function e(){var q,l=this,p=$(l),m=p,o=this.id;if(l.value==''){if(l.type=='password'){if(!p.data('placeholder-textinput')){try{q=p.clone().attr({type:'text'})}catch(n){q=$('<input>').attr($.extend(g(this),{type:'text'}))}q.removeAttr('name').data({'placeholder-password':true,'placeholder-id':o}).bind('focus.placeholder',b);p.data({'placeholder-textinput':q,'placeholder-id':o}).before(q)}p=p.removeAttr('id').hide().prev().attr('id',o).show()}p.addClass('placeholder');p[0].value=p.attr('placeholder')}else{p.removeClass('placeholder')}}}(this,document,jQuery));/*
 * hoverIntent r7 // 2013.03.11 // jQuery 1.9.1+
 * https://cherne.net/brian/resources/jquery.hoverIntent.html
 *
 * You may use hoverIntent under the terms of the MIT license.
 * Copyright 2007, 2013 Brian Cherne
 */
(function(e){e.fn.hoverIntent=function(t,n,r){var i={interval:100,sensitivity:5,timeout:250};if(typeof t==="object"){i=e.extend(i,t)}else if(e.isFunction(n)){i=e.extend(i,{over:t,out:n,selector:r})}else{i=e.extend(i,{over:t,out:t,selector:n})}var s,o,u,a;var f=function(e){s=e.pageX;o=e.pageY};var l=function(t,n){n.hoverIntent_t=clearTimeout(n.hoverIntent_t);if(Math.abs(u-s)+Math.abs(a-o)<i.sensitivity){e(n).off("mousemove.hoverIntent",f);n.hoverIntent_s=1;return i.over.apply(n,[t])}else{u=s;a=o;n.hoverIntent_t=setTimeout(function(){l(t,n)},i.interval)}};var c=function(e,t){t.hoverIntent_t=clearTimeout(t.hoverIntent_t);t.hoverIntent_s=0;return i.out.apply(t,[e])};var h=function(t){var n=jQuery.extend({},t);var r=this;if(r.hoverIntent_t){r.hoverIntent_t=clearTimeout(r.hoverIntent_t)}if(t.type=="mouseenter"){u=n.pageX;a=n.pageY;e(r).on("mousemove.hoverIntent",f);if(r.hoverIntent_s!=1){r.hoverIntent_t=setTimeout(function(){l(n,r)},i.interval)}}else{e(r).off("mousemove.hoverIntent",f);if(r.hoverIntent_s==1){r.hoverIntent_t=setTimeout(function(){c(n,r)},i.timeout)}}};return this.on({"mouseenter.hoverIntent":h,"mouseleave.hoverIntent":h},i.selector)}})(jQuery)
var lm=window.lm||{};lm.flags={touchDevice:Modernizr.touch||false};lm.common={};lm.common.init=function(){$('#wrapper').addClass('js');var delay=(function(){var timer=0;return function(callback,ms){clearTimeout(timer);timer=setTimeout(callback,ms);};})();var elementsToDisplay=$('#suggest, #header div.corner-suggest'),tousNosProduits=$('#header a.all-products-nav');var displaySearchHandler=function(){if($('#suggest div.wrapper-suggest').length>0){$('#overlay').addClass('transparent').show();if(tousNosProduits.is(':visible')){$('#overlay').css("background","#000");}
else{$('#overlay').css("background","none");}
elementsToDisplay.show();}
else{elementsToDisplay.hide();$('#overlay').hide();}};var successCallbackSearch=function(data){$('#suggest-recip').html(data);};var completeCallbackSearch=function(){displaySearchHandler();};$('#globalSearch').on('submit',function(e){if(!$('#autocomplete').val()){e.preventDefault();}
$(this).addClass('go-search');}).on('keyup','#autocomplete',function(){var $this=$(this);delay(function(){if($this.val().length>2&&!$('#globalSearch').hasClass('go-search')){$('#suggest-recip div.bg-loader, div.loader-suggest').show();ajaxHandler('get','/v3/search-endeca/autosuggest.do','Ntt='+(encodeURIComponent($this.val()))+'*',successCallbackSearch,completeCallbackSearch);}},500);}).on('focus','#autocomplete',function(){displaySearchHandler();if(tousNosProduits.is(':visible')&&tousNosProduits.hasClass('active')){$('#nav').hide();tousNosProduits.removeClass('active');}});$('body').on('click','#overlay.transparent',function(){$('#overlay').hide().removeClass('transparent');elementsToDisplay.hide();if(tousNosProduits.is(':visible')){$('#overlay').css("background","none");}});(function(){if($('.nav-infos-wrapper').length==0){if(lm.tools.getCookie('data_uNav')){lm.tools.getCookieVal('data_uNav');}
else{lm.tools.setCookie('data_uNav','display=true');}
var string=lm.tools.getCookie('data_uNav').split('=');for(var i=0;i<string.length;i++){var response=string[1];if(response==='true'){var displayInfo="<div class='nav-infos-wrapper'><div class='navigation-infos'><p>En poursuivant votre navigation sur ce site, vous acceptez l\'utilisation de cookies pour vous proposer des services et offres adaptés à vos centres d\'intérêts.<a href='#' class='politic-agree'>OK</a><a href='/v3/p/donnees-personnelles-l1308220759'>En savoir plus</a></p></div></div>";$('#header .secondaryNav').before(displayInfo);$('#nav').css("top","179px");}
return false;}}}());var lazyLoadLm=function(){var tabNavImage=$('#nav img.lazy-lm, #header img.lazy-lm');for(i=0;i<tabNavImage.length;i++){var image=tabNavImage[i],imageSrc=image.getAttribute('data-original');image.src=imageSrc;image.removeAttribute('data-src');image.classList.remove('lazy-lm');}};if(window.matchMedia){var checkWidthOfNavigator=function(){if(window.matchMedia("(max-width: 980px)").matches){if($('#nav img.lazy-lm').length>0){lazyLoadLm();}}};checkWidthOfNavigator();}
var headerCommon=$('#header');var tabHeaderHandler=function(elt,eltVisible){headerCommon.on('mouseenter',elt,function(){if($(eltVisible).is(':visible')){$(this).find('.accountEntry').addClass('hover');}}).on('mouseleave',elt,function(){$(this).find('.accountEntry').removeClass('hover');});};tabHeaderHandler('.ongletMag','.ongletMag');tabHeaderHandler('.ongletCompte','.sub-menu');tabHeaderHandler('.other-tab','.sub-menu');$('#header').on('hover','.ongletBasket',function(){if($(this).hasClass('active')){delay(function(){lm.vad.loadBasketPreview();},200);}});$('.ongletBasket.inactive').click(function(e){e.preventDefault();});$('.formContextRedirect').each(function(){$(this).click(function(){$('#formContextRedirect').submit();});});$('.accountEntry.unlogged').on('touchstart',function(){window.location=$(this).attr('href');});$('.ongletBasket').on('touchstart',function(){if(!$(this).hasClass('inactive')){window.location=$(this).find('.accountEntry').attr('href');}});$('#nav').on('click','.ico-cross',function(){$(this).parent('.layerOnglet').hide().prev('.fleche').hide();}).on('mouseenter','.linkHeader',function(){$(this).find('.fleche, .layerOnglet').show();}).on('mouseleave','.linkHeader',function(){if($(this).find('.fleche').is(':visible')){$(this).find('.fleche, .layerOnglet').hide();}});headerCommon.on('click','a.politic-agree',function(e){e.preventDefault();var uNavExpire=new Date;uNavExpire.setFullYear(uNavExpire.getFullYear()+1);lm.tools.setCookie('data_uNav','display=false',uNavExpire);$('div.nav-infos-wrapper').slideUp(140);$('#nav').css("top","120px");});$('#header').on('click','a.all-products-nav',function(e){var $nav=$('#nav');var $t=$(this);var $overlay=$('#overlay');e.preventDefault();if($nav.is(':visible')){$t.removeClass('active');$nav.hide();$overlay.css("display","none");}
else{if($('#suggest').is(':visible')){$('#suggest, #overlay').hide();}
$nav.show();$t.addClass('active');$overlay.css("display","block");}});$("body").on("click",".clicCT",function(e){var jThis=$(this);if(jThis.attr("href")=="#"){e.preventDefault();}
var tabClick=jThis.attr("data-clicCT").split(",");if(typeof tc_events_3!='undefined'){return tc_events_3(e.target,'click',{'event_type':tabClick[0],'click_type':tabClick[3],'name':tabClick[2],'xtn2':tabClick[1]});}else if(typeof tc_events_5!='undefined'){return tc_events_5(e.target,'click',{'event_type':tabClick[0],'click_type':tabClick[3],'name':tabClick[2],'xtn2':tabClick[1]});}
return;});lm.geoloc.contextualisation.init();var jGeoContextInfo=jQuery("#geoContextInfo");if(lm.geoloc.hasToDisplayPopup){lm.layers.displayAutoClosingLayer(jGeoContextInfo,"#header .ongletMag",".layerClose",null,5000);}
jGeoContextInfo.on("hover",function(event){event.stopPropagation();});var jSearchStoresForm=jQuery("#searchStoresForm");if(jSearchStoresForm.length!==0){var rgx_CP=/^(\d{2}|\d{5}|2[aA]|2[aA]\d{3}|2[bB]|2[bB]\d{3})$/;jSearchStoresForm.on("submit",function(event){var url=jSearchStoresForm.attr("action");var jZipCode=jSearchStoresForm.find("#zipCodeSearch");var zipCode=jZipCode.val();var jResults=jQuery("#search-stores-results");var error="";jSearchStoresForm.find(".errorfield").removeClass("errorfield");jSearchStoresForm.find(".form-error").remove();if(!rgx_CP.test(zipCode)){error="<p class='form-error'>Veuillez entrer un code postal ou un numéro de département valide.</p>";jZipCode.addClass("errorfield");jSearchStoresForm.append(error);event.preventDefault();return;}
jResults.addClass("loader");jQuery.support.cors=true;jQuery.ajax(url,{cache:false,type:'POST',data:{zipCode:zipCode},success:function(data,textStatus,jqXHR){jResults.removeClass("loader");jResults.html(data);jQuery(".searchStores").find(".stores-search-title, .activate-geoloc, .stores-search-wording").fadeOut("slow");jQuery("#searchStoresForm label strong").text("Nouvelle recherche");if(typeof google==='object'&&typeof google.maps==='object'){lm.geoloc.initializeGoogleMap();}else{jQuery.getScript(lm.geoloc.urls.gMapsScript,function(data,textStatus,jqxhr){});}},error:function(jqXHR,textStatus,errorThrown){jResults.removeClass("loader");jZipCode.addClass("errorfield");jSearchStoresForm.append("<p class='form-error'>Il n'y a pas de magasin trouvé pour votre recherche</p>");}});event.preventDefault();});if(!navigator.geolocation||(jQuery.browser.mozilla&&parseFloat(jQuery.browser.version)<5)){jQuery(".searchStores .activate-geoloc").hide();}
if($('#tablet-header').length>0){var jStoreSearchLayer=jQuery("#tablet-header").find(".searchStores");}
else{var jStoreSearchLayer=jQuery("#header .searchStores");}
jStoreSearchLayer.on("click",".store-context, .selectStoreBtn",function(event){var storeID=jQuery(this).attr("data-store-id");var manuallyContextualizing=lm.geoloc.settingContextualizationWithGivenStoreID(storeID,true);jQuery.when(manuallyContextualizing).done(function(){lm.geoloc.reloadPageWithContextualizationNotif();});event.preventDefault();});var jResults=jQuery("#search-stores-results");jResults.on("click","li",function(){var jThis=jQuery(this);var storeId=jThis.attr("data-store-id");google.maps.event.trigger(lm.geoloc.markers[storeId],"click.fromList");});}
lm.tools.lazyloadInit();var jInputs=jQuery("input");jInputs.placeholder();jQuery('.btn_emerch_prev').on('click',function(e){e.preventDefault();$('<div id="endeca_preview_param" class="lm_popin"><div class="lm-popin-container"><span class="popin-close-link">X</span><iframe id="frame" src="" width="800px" height="450px"></iframe></div></div><div id="endeca_overlay"></div>').appendTo('body');$('#frame').attr('src','https://'+window.location.host+'/v3/emerch/preview/afficher.do');jQuery('#endeca_preview_param .lm-popin-container .popin-close-link, #endeca_overlay').on('click',function(){jQuery('#endeca_preview_param').remove();jQuery('#endeca_overlay').remove();window.location.reload();});});$(window).on('resize',function(){if(window.matchMedia){var checkWidthOfNavigator=function(){if(window.matchMedia("(max-width: 980px)").matches){if($('#nav img.lazy-lm').length>0){lazyLoadLm();}}};checkWidthOfNavigator();}
if($('.all-products-nav').is(':visible')){$('#overlay').css('background','#000');}
else if($('.all-products-nav').is(':hidden')){$('#overlay').css('background','none');}});lm.layers.init();lm.forms.initBlockableButtons("#corps");lm.satisfaction={}
lm.satisfaction.params={pas:500,prime:{txt:'Nous aimerions connaitre votre niveau de satisfaction concernant votre visite sur le site www.leroymerlin.fr.</p><p>Pour recueillir votre opinion, un questionnaire vous sera proposé à la fin de votre visite.',url:'https://enquetes.easypanel.fr/leroy-merlin-visite/ethnos.dll'},product:{txt:'Nous aimerions connaître votre avis sur la qualité du site www.leroymerlin.fr.</p><p>Un questionnaire de 5 minutes vous sera proposé à la fin de votre visite..',url:'https://enquetes.easypanel.fr/140714lmpr/ethnos.dll?q1='+$('#global-reflm span').text()+'&P2'},defaut:{txt:'Nous aimerions connaître votre avis sur la qualité du site www.leroymerlin.fr.</p><p>Pour recueillir vos impressions, un questionnaire vous sera proposé à la fin de votre visite.',url:'https://enquetes.easypanel.fr/lmsatisv6/introduction/intro-leroymerlin.asp'}};lm.satisfaction.affichagePopinSatisfaction=function(nbRefus,btnOui,btnNon,urlEnquete,txtEnquete,cookieName){var tabParam=lm.satisfaction.controleCookie(cookieName);if(tabParam['aff']=='true'&&tabParam['rep']=='false'&&parseInt(tabParam['ref'],10)<nbRefus){var popinSatisfaction=$('<div id="layerSatisfaction" class="lm-popin lm-popinFx3 lm-popinVisible" style="left: 409px;"><div class="lm-popin-background"><div class="lm-popin-container"><a class="popin-close-link"><i class="ico-cross"></i></a><h1 class="title-page">Enquête de satisfaction</h1><p>'+txtEnquete+'</p><p class="question">Acceptez-vous d\'y participer ?</p><div><a class="repondre cta green" href="#">Oui</a><a class="refus popin-close-link cta grey" href="#">Non</a></div><p class="remerciements">Merci d\'avance pour votre aide et bonne visite !</p></div></div></div>');popinSatisfaction.appendTo('body');lm.layers.displayPopin(popinSatisfaction,true,".popin-close-link");}
$(btnOui).on('click',function(e){var tabParam=lm.satisfaction.controleCookie(cookieName);tabParam['rep']='true';lm.satisfaction.rewriteCookie(tabParam,cookieName);window.open(urlEnquete).blur();window.focus();});$(btnNon).on('click',function(e){var tabParam=lm.satisfaction.controleCookie(cookieName);tabParam['ref']=String(parseInt(tabParam['ref'],10)+1);lm.satisfaction.rewriteCookie(tabParam,cookieName);});};var dtExpire=new Date();dtExpire.setTime(dtExpire.getTime()+(2*30*24*60*60*1000));lm.satisfaction.creationCookie=function(step,cookieName){if(parseInt(Math.random()*step,10)===1||step==1){lm.tools.setCookie(cookieName,'aff=true|ref=0|rep=false',dtExpire);}else{lm.tools.setCookie(cookieName,'aff=false|ref=0|rep=false',dtExpire);}};lm.satisfaction.controleCookie=function(cookieName){var tableau=lm.tools.getCookie(cookieName).split('|');var tabParam=new Object();var tabTemp;for(i=0;i<tableau.length;i++){tabTemp=tableau[i].split('=');tabParam[tabTemp[0]]=tabTemp[1];}
return tabParam;};lm.satisfaction.rewriteCookie=function(tabParam,cookieName){lm.tools.setCookie(cookieName,'aff='+tabParam['aff']+'|ref='+tabParam['ref']+'|rep='+tabParam['rep'],dtExpire);};lm.satisfaction.init=function(step,nbRefus,btnOui,btnNon,objEnquete,cookieName){if(!lm.tools.getCookie(cookieName)){lm.satisfaction.creationCookie(step,cookieName);}
var tabParam=lm.satisfaction.controleCookie(cookieName);if(parseInt(Math.random()*step,10)===1||step==1){tabParam['aff']='true';}else{tabParam['aff']='false';}
lm.satisfaction.rewriteCookie(tabParam,cookieName);lm.satisfaction.affichagePopinSatisfaction(nbRefus,btnOui,btnNon,objEnquete.url,objEnquete.txt,cookieName);};if(document.getElementById('productSurvey')){lm.satisfaction.objRef=lm.satisfaction.params.product;lm.satisfaction.init(1,2,'a.repondre','a.refus',lm.satisfaction.objRef,'satisf_product');}else{if(Math.random()<0.5){lm.satisfaction.objRef=lm.satisfaction.params.prime;}else{lm.satisfaction.objRef=lm.satisfaction.params.defaut;}
lm.satisfaction.init(lm.satisfaction.params.pas,2,'a.repondre','a.refus',lm.satisfaction.objRef,'satisfaction');}
var visuelsSelecteur=".prd-visuel";var apercusSelecteur=".prd-apercu";var jPage=jQuery("#page");var jApercus=jQuery("#page .prd-apercu").not("#page .infos.prd-apercu");jPage.on('mouseenter.apercus',visuelsSelecteur,function(){var jPicto=jQuery(this).find('a.prd-apercu');jPicto.stop().animate({opacity:1},150);}).on('mouseleave.apercus',visuelsSelecteur,function(){var jPicto=jQuery(this).find('a.prd-apercu');jPicto.animate({opacity:0},150);});jPage.on('click.apercus',apercusSelecteur,function(event){var reflm=jQuery(this).attr('data-reflm');var displayButton=true;var displayCrossSelling=false;if($(this).attr('data-button')=='false'){displayButton=false;}
if($(this).attr('data-cs')=='true'){var displayCrossSelling=true;}
lm.tools.miniFicheProduit(reflm,displayButton,displayCrossSelling);event.preventDefault();});$('.sample-popin').on('click','a.add-sample',function(e){var $t=$(this),$reflm=$t.attr('data-reflm');e.preventDefault();lm.vad.updateBasket('1',$reflm,'MAG');if($('.sample-exist').length===0){$('.sample-popin').removeClass('lm-popinVisible');$('#overlay').hide();}});$(document).on('click','.checkout-sample',function(e){e.preventDefault();var $t=$(this),$tReflm=$t.attr('data-reflm');if($('#layerSuppression').length>0){$('#layerSuppression').remove();}
$('.sample-popin').each(function(){if($tReflm===$(this).attr('id')){lm.layers.displayPopin('#'+$tReflm,true,".popin-close-link");return false;}});});$('#corps').on('click','.finance-3xcb',function(e){e.preventDefault();lm.layers.displayPopin("#cb3x-popin",true,".popin-close-link");});ajaxHandler=function(method,url,dataString,successCallback,completeCallback,errorCallback){$.ajax({type:method,url:url,data:dataString,dataType:'html',success:function(data){if(successCallback&&typeof successCallback==="function"){return successCallback(data);}},complete:function(){if(completeCallback&&typeof completeCallback==="function"){return completeCallback();}},error:function(){if(errorCallback&&typeof errorCallback==="function"){return errorCallback();}}});};lm.vad.init();};lm.common_Elements={};lm.common_Elements.init=function(){function partagerLien(id){var adresse="";switch(id){case 0:adresse="https://www.facebook.com/share.php?u="+escape(window.location.href);break;case 1:adresse="https://twitter.com/share?text="+encodeURI(window.document.title)+" "+escape(window.location.href);break;}
window.open(adresse,"partager","left="+String((screen.width-500)/2)+",top="+String((screen.height-300)/2)+"menubar=no, status=no, scrollbars=no, menubar=no, width=500, height=300");}
$('#corps li.navContentItem').hover(function(){$(this).addClass('hover').find('ul.layerNavContent').show();},function(){$(this).removeClass('hover').find('ul.layerNavContent').hide();});$.fn.showInfobulle=function(obj){var obj=obj;$(this).on('click',function(e){e.preventDefault();var left=$(this).offset().left-obj.width()+$(this).width()*2;var top=$(this).offset().top+$(this).height();obj.show().css({'left':left+'px','top':top+'px'});lm.layers.overlay(obj);});}
if($('a.boutonImpression').length>0){function createElementPrint(){var $layerPrint=$('<div class="layerHighSmall" id="layerImprimerParam"></div>');var $formLayerPrint=$('<form name="form02" action="#" method="get"><div class="layerHighSmallContent"><div class="layerClose"><a href="#" title="">Fermer</a></div><h2>Imprimer</h2><p>Voulez-vous imprimer cette page ?</p><input type="submit" value="Imprimer" class="lienBoutton" /></div><div class="layerHighBottom"></div></form>');var $finalLayerPrint=$formLayerPrint.appendTo($layerPrint);$layerPrint.appendTo('body');}
createElementPrint();$('a.boutonImpression').showInfobulle($('#layerImprimerParam'));$("#layerImprimerParam .lienBoutton").click(function(){window.print();$(this).closest('.layerHighBig, .layerHighSmall').hide();$('#overlay').unbind('click').hide();return false;});}
$('.print').on('click',function(e){e.preventDefault();window.print();});$('a.boutonComparaison').click(function(e){e.preventDefault();lm.layers.displayLayer($(this),'#layerComparer');if($.browser.msie==true&&$.browser.version=="8.0"){$('#layerComparer .lienBoutton:last').css({"margin-bottom":15+"px"});}});$('.boutonEnvoi').showInfobulle($('#layerEnvoiAmi'));};lm.playerVideo={};lm.playerVideo.init=function(){$('.player .lireVideo').on('click',function(e){e.preventDefault();var uidMedia=$(this).attr('data-media-uid');if(uidMedia!=''){var flashvars={};var params={APIKey:"~W1u-zrdL7B0",ck:"~W1u-zrdL7B0",clientKey:"~W1u-zrdL7B0",player:"~sQguulDFL9Q",view:"script",language:"fr",hostServices:"leroymerlin.api.v3.vpod.tv",preloadLogoUrl:"https://leroymerlin.st.v3.vpod.tv/products/flash/as3/player/resources/logo_leroymerlin.swf",preloadColor:"0x4fa204",buttonsbarBehaviour:"OVER",initialPanel:"",mediaID:uidMedia,base:"https://leroymerlin.api.v3.vpod.tv/api/tools/flash/player?kmgmt=~W1u-zrdL7B0"};var attributes={};var url="https://"+params.hostServices+'/'+uidMedia+'/player/flash/'+params.player+'/';swfobject.embedSWF(url,"lecteurSWF","640","480","10.2.0","https://s1.lmcdn.fr/swf/expressInstall._r02d7559ce85c_.swf",flashvars,params,attributes);}
$('.layerVideo .layerVideoContent h2').text($('img',this).attr('alt'));});$('.lireVideo, .player').showLayerMedia($('.layerVideo'));$('.layerVideo').appendTo('body');};lm.owlCarousel={};lm.owlCarousel.init=function(){/*
     *  jQuery OwlCarousel v1.31
     *
     *  Copyright (c) 2013 Bartosz Wojciechowski
     *  https://www.owlgraphic.com/owlcarousel
     *
     *  Licensed under MIT
     *
     */
eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('7(B 3i.3E!=="9"){3i.3E=9(e){9 t(){}t.5v=e;q 5c t}}(9(e,t,n,r){b i={1J:9(t,n){b r=d;r.$k=e(n);r.6=e.3K({},e.3A.2c.6,r.$k.w(),t);r.29=t;r.3U()},3U:9(){b t=d;7(B t.6.2M==="9"){t.6.2M.P(d,[t.$k])}7(B t.6.2I==="2F"){b n=t.6.2I;9 r(e){7(B t.6.3F==="9"){t.6.3F.P(d,[e])}m{b n="";1C(b r 2f e["h"]){n+=e["h"][r]["1K"]}t.$k.2h(n)}t.2Y()}e.5G(n,r)}m{t.2Y()}},2Y:9(e){b t=d;t.$k.w("h-4p",t.$k.2s("2t")).w("h-4K",t.$k.2s("J"));t.$k.A({2z:0});t.2A=t.6.v;t.4L();t.5R=0;t.1M;t.1P()},1P:9(){b e=d;7(e.$k.1S().S===0){q c}e.1O();e.3H();e.$X=e.$k.1S();e.G=e.$X.S;e.4M();e.$I=e.$k.16(".h-1K");e.$L=e.$k.16(".h-1h");e.2H="Y";e.15=0;e.1W=[0];e.p=0;e.4I();e.4G()},4G:9(){b e=d;e.2V();e.31();e.4D();e.35();e.4C();e.4A();e.2x();e.4z();7(e.6.2w!==c){e.4w(e.6.2w)}7(e.6.Q===j){e.6.Q=5i}e.1e();e.$k.16(".h-1h").A("4v","4r");7(!e.$k.2p(":33")){e.34()}m{e.$k.A("2z",1)}e.56=c;e.2o();7(B e.6.39==="9"){e.6.39.P(d,[e.$k])}},2o:9(){b e=d;7(e.6.1I===j){e.1I()}7(e.6.1A===j){e.1A()}e.4n();7(B e.6.3n==="9"){e.6.3n.P(d,[e.$k])}},3o:9(){b e=d;7(B e.6.3p==="9"){e.6.3p.P(d,[e.$k])}e.34();e.2V();e.31();e.4m();e.35();e.2o();7(B e.6.3t==="9"){e.6.3t.P(d,[e.$k])}},4i:9(e){b t=d;19(9(){t.3o()},0)},34:9(){b e=d;7(e.$k.2p(":33")===c){e.$k.A({2z:0});18(e.1r);18(e.1M)}m{q c}e.1M=4g(9(){7(e.$k.2p(":33")){e.4i();e.$k.4f({2z:1},2J);18(e.1M)}},5O)},4M:9(){b e=d;e.$X.5N(\'<M J="h-1h">\').3G(\'<M J="h-1K"></M>\');e.$k.16(".h-1h").3G(\'<M J="h-1h-4d">\');e.1U=e.$k.16(".h-1h-4d");e.$k.A("4v","4r")},1O:9(){b e=d;b t=e.$k.1V(e.6.1O);b n=e.$k.1V(e.6.28);7(!t){e.$k.K(e.6.1O)}7(!n){e.$k.K(e.6.28)}},2V:9(){b t=d;7(t.6.2Z===c){q c}7(t.6.4b===j){t.6.v=t.2A=1;t.6.17=c;t.6.1q=c;t.6.21=c;t.6.24=c;t.6.25=c;t.6.26=c;q c}b n=e(t.6.4a).1m();7(n>(t.6.1q[0]||t.2A)){t.6.v=t.2A}7(B t.6.17!=="3b"&&t.6.17!==c){t.6.17.5x(9(e,t){q e[0]-t[0]});1C(b r 2f t.6.17){7(B t.6.17[r]!=="3b"&&t.6.17[r][0]<=n){t.6.v=t.6.17[r][1]}}}m{7(n<=t.6.1q[0]&&t.6.1q!==c){t.6.v=t.6.1q[1]}7(n<=t.6.21[0]&&t.6.21!==c){t.6.v=t.6.21[1]}7(n<=t.6.24[0]&&t.6.24!==c){t.6.v=t.6.24[1]}7(n<=t.6.25[0]&&t.6.25!==c){t.6.v=t.6.25[1]}7(n<=t.6.26[0]&&t.6.26!==c){t.6.v=t.6.26[1]}}7(t.6.v>t.G&&t.6.49===j){t.6.v=t.G}},4C:9(){b n=d,r;7(n.6.2Z!==j){q c}b i=e(t).1m();n.3f=9(){7(e(t).1m()!==i){7(n.6.Q!==c){18(n.1r)}5o(r);r=19(9(){i=e(t).1m();n.3o()},n.6.48)}};e(t).47(n.3f)},4m:9(){b e=d;e.2j(e.p);7(e.6.Q!==c){e.3l()}},46:9(){b t=d;b n=0;b r=t.G-t.6.v;t.$I.2i(9(i){b s=e(d);s.A({1m:t.N}).w("h-1K",3q(i));7(i%t.6.v===0||i===r){7(!(i>r)){n+=1}}s.w("h-1L",n)})},45:9(){b e=d;b t=0;b t=e.$I.S*e.N;e.$L.A({1m:t*2,V:0});e.46()},31:9(){b e=d;e.44();e.45();e.43();e.3x()},44:9(){b e=d;e.N=1N.5a(e.$k.1m()/e.6.v)},3x:9(){b e=d;b t=(e.G*e.N-e.6.v*e.N)*-1;7(e.6.v>e.G){e.C=0;t=0;e.3D=0}m{e.C=e.G-e.6.v;e.3D=t}q t},42:9(){q 0},43:9(){b t=d;t.H=[0];t.2C=[];b n=0;b r=0;1C(b i=0;i<t.G;i++){r+=t.N;t.H.2D(-r);7(t.6.14===j){b s=e(t.$I[i]);b o=s.w("h-1L");7(o!==n){t.2C[n]=t.H[i];n=o}}}},4D:9(){b t=d;7(t.6.2b===j||t.6.1s===j){t.D=e(\'<M J="h-4R"/>\').4Q("4P",!t.F.13).5E(t.$k)}7(t.6.1s===j){t.3Z()}7(t.6.2b===j){t.3Y()}},3Y:9(){b t=d;b n=e(\'<M J="h-5h"/>\');t.D.1k(n);t.1w=e("<M/>",{"J":"h-1l",2h:t.6.2T[0]||""});t.1y=e("<M/>",{"J":"h-Y",2h:t.6.2T[1]||""});n.1k(t.1w).1k(t.1y);n.z("2W.D 1Z.D",\'M[J^="h"]\',9(e){e.1n()});n.z("2a.D 2n.D",\'M[J^="h"]\',9(n){n.1n();7(e(d).1V("h-Y")){t.Y()}m{t.1l()}})},3Z:9(){b t=d;t.1o=e(\'<M J="h-1s"/>\');t.D.1k(t.1o);t.1o.z("2a.D 2n.D",".h-1p",9(n){n.1n();7(3q(e(d).w("h-1p"))!==t.p){t.1i(3q(e(d).w("h-1p")),j)}})},3T:9(){b t=d;7(t.6.1s===c){q c}t.1o.2h("");b n=0;b r=t.G-t.G%t.6.v;1C(b i=0;i<t.G;i++){7(i%t.6.v===0){n+=1;7(r===i){b s=t.G-t.6.v}b o=e("<M/>",{"J":"h-1p"});b u=e("<3Q></3Q>",{54:t.6.38===j?n:"","J":t.6.38===j?"h-5l":""});o.1k(u);o.w("h-1p",r===i?s:i);o.w("h-1L",n);t.1o.1k(o)}}t.3a()},3a:9(){b t=d;7(t.6.1s===c){q c}t.1o.16(".h-1p").2i(9(n,r){7(e(d).w("h-1L")===e(t.$I[t.p]).w("h-1L")){t.1o.16(".h-1p").Z("2d");e(d).K("2d")}})},3d:9(){b e=d;7(e.6.2b===c){q c}7(e.6.2e===c){7(e.p===0&&e.C===0){e.1w.K("1b");e.1y.K("1b")}m 7(e.p===0&&e.C!==0){e.1w.K("1b");e.1y.Z("1b")}m 7(e.p===e.C){e.1w.Z("1b");e.1y.K("1b")}m 7(e.p!==0&&e.p!==e.C){e.1w.Z("1b");e.1y.Z("1b")}}},35:9(){b e=d;e.3T();e.3d();7(e.D){7(e.6.v>=e.G){e.D.3N()}m{e.D.3L()}}},5g:9(){b e=d;7(e.D){e.D.3j()}},Y:9(e){b t=d;7(t.1G){q c}t.p+=t.6.14===j?t.6.v:1;7(t.p>t.C+(t.6.14==j?t.6.v-1:0)){7(t.6.2e===j){t.p=0;e="2k"}m{t.p=t.C;q c}}t.1i(t.p,e)},1l:9(e){b t=d;7(t.1G){q c}7(t.6.14===j&&t.p>0&&t.p<t.6.v){t.p=0}m{t.p-=t.6.14===j?t.6.v:1}7(t.p<0){7(t.6.2e===j){t.p=t.C;e="2k"}m{t.p=0;q c}}t.1i(t.p,e)},1i:9(e,t,n){b r=d;7(r.1G){q c}7(B r.6.1F==="9"){r.6.1F.P(d,[r.$k])}7(e>=r.C){e=r.C}m 7(e<=0){e=0}r.p=r.h.p=e;7(r.6.2w!==c&&n!=="4e"&&r.6.v===1&&r.F.1u===j){r.1B(0);7(r.F.1u===j){r.1H(r.H[e])}m{r.1x(r.H[e],1)}r.2q();r.4k();q c}b i=r.H[e];7(r.F.1u===j){r.1T=c;7(t===j){r.1B("1D");19(9(){r.1T=j},r.6.1D)}m 7(t==="2k"){r.1B(r.6.2u);19(9(){r.1T=j},r.6.2u)}m{r.1B("1j");19(9(){r.1T=j},r.6.1j)}r.1H(i)}m{7(t===j){r.1x(i,r.6.1D)}m 7(t==="2k"){r.1x(i,r.6.2u)}m{r.1x(i,r.6.1j)}}r.2q()},2j:9(e){b t=d;7(B t.6.1F==="9"){t.6.1F.P(d,[t.$k])}7(e>=t.C||e===-1){e=t.C}m 7(e<=0){e=0}t.1B(0);7(t.F.1u===j){t.1H(t.H[e])}m{t.1x(t.H[e],1)}t.p=t.h.p=e;t.2q()},2q:9(){b e=d;e.1W.2D(e.p);e.15=e.h.15=e.1W[e.1W.S-2];e.1W.55(0);7(e.15!==e.p){e.3a();e.3d();e.2o();7(e.6.Q!==c){e.3l()}}7(B e.6.3z==="9"&&e.15!==e.p){e.6.3z.P(d,[e.$k])}},W:9(){b e=d;e.3k="W";18(e.1r)},3l:9(){b e=d;7(e.3k!=="W"){e.1e()}},1e:9(){b e=d;e.3k="1e";7(e.6.Q===c){q c}18(e.1r);e.1r=4g(9(){e.Y(j)},e.6.Q)},1B:9(e){b t=d;7(e==="1j"){t.$L.A(t.2y(t.6.1j))}m 7(e==="1D"){t.$L.A(t.2y(t.6.1D))}m 7(B e!=="2F"){t.$L.A(t.2y(e))}},2y:9(e){b t=d;q{"-1R-1a":"2B "+e+"1z 2r","-27-1a":"2B "+e+"1z 2r","-o-1a":"2B "+e+"1z 2r",1a:"2B "+e+"1z 2r"}},3I:9(){q{"-1R-1a":"","-27-1a":"","-o-1a":"",1a:""}},3J:9(e){q{"-1R-O":"1g("+e+"T, E, E)","-27-O":"1g("+e+"T, E, E)","-o-O":"1g("+e+"T, E, E)","-1z-O":"1g("+e+"T, E, E)",O:"1g("+e+"T, E,E)"}},1H:9(e){b t=d;t.$L.A(t.3J(e))},3M:9(e){b t=d;t.$L.A({V:e})},1x:9(e,t){b n=d;n.2g=c;n.$L.W(j,j).4f({V:e},{59:t||n.6.1j,3O:9(){n.2g=j}})},4L:9(){b e=d;b r="1g(E, E, E)",i=n.5f("M");i.2t.3P="  -27-O:"+r+"; -1z-O:"+r+"; -o-O:"+r+"; -1R-O:"+r+"; O:"+r;b s=/1g\\(E, E, E\\)/g,o=i.2t.3P.5k(s),u=o!==1d&&o.S===1;b a="5z"2f t||5C.4U;e.F={1u:u,13:a}},4A:9(){b e=d;7(e.6.22!==c||e.6.23!==c){e.3R();e.3S()}},3H:9(){b e=d;b t=["s","e","x"];e.12={};7(e.6.22===j&&e.6.23===j){t=["2W.h 1Z.h","2P.h 3V.h","2a.h 3W.h 2n.h"]}m 7(e.6.22===c&&e.6.23===j){t=["2W.h","2P.h","2a.h 3W.h"]}m 7(e.6.22===j&&e.6.23===c){t=["1Z.h","3V.h","2n.h"]}e.12["3X"]=t[0];e.12["2O"]=t[1];e.12["2N"]=t[2]},3S:9(){b t=d;t.$k.z("5A.h",9(e){e.1n()});t.$k.z("1Z.40",9(t){q e(t.1f).2p("5F, 5H, 5Q, 5S")})},3R:9(){9 o(e){7(e.2L){q{x:e.2L[0].2K,y:e.2L[0].41}}m{7(e.2K!==r){q{x:e.2K,y:e.41}}m{q{x:e.52,y:e.53}}}}9 u(t){7(t==="z"){e(n).z(i.12["2O"],f);e(n).z(i.12["2N"],l)}m 7(t==="R"){e(n).R(i.12["2O"]);e(n).R(i.12["2N"])}}9 a(n){b n=n.3B||n||t.3w;7(n.5d===3){q c}7(i.G<=i.6.v){q}7(i.2g===c&&!i.6.3v){q c}7(i.1T===c&&!i.6.3v){q c}7(i.6.Q!==c){18(i.1r)}7(i.F.13!==j&&!i.$L.1V("3s")){i.$L.K("3s")}i.11=0;i.U=0;e(d).A(i.3I());b r=e(d).2l();s.3g=r.V;s.3e=o(n).x-r.V;s.3c=o(n).y-r.5y;u("z");s.2m=c;s.30=n.1f||n.4c}9 f(r){b r=r.3B||r||t.3w;i.11=o(r).x-s.3e;i.2S=o(r).y-s.3c;i.U=i.11-s.3g;7(B i.6.2R==="9"&&s.2Q!==j&&i.U!==0){s.2Q=j;i.6.2R.P(i,[i.$k])}7(i.U>8||i.U<-8&&i.F.13===j){r.1n?r.1n():r.5M=c;s.2m=j}7((i.2S>10||i.2S<-10)&&s.2m===c){e(n).R("2P.h")}b u=9(){q i.U/5};b a=9(){q i.3D+i.U/5};i.11=1N.3x(1N.42(i.11,u()),a());7(i.F.1u===j){i.1H(i.11)}m{i.3M(i.11)}}9 l(n){b n=n.3B||n||t.3w;n.1f=n.1f||n.4c;s.2Q=c;7(i.F.13!==j){i.$L.Z("3s")}7(i.U<0){i.1t=i.h.1t="V"}m{i.1t=i.h.1t="2G"}7(i.U!==0){b r=i.4h();i.1i(r,c,"4e");7(s.30===n.1f&&i.F.13!==j){e(n.1f).z("3u.4j",9(t){t.4S();t.4T();t.1n();e(n.1f).R("3u.4j")});b o=e.4O(n.1f,"4V")["3u"];b a=o.4W();o.4X(0,0,a)}}u("R")}b i=d;b s={3e:0,3c:0,4Y:0,3g:0,2l:1d,4Z:1d,50:1d,2m:1d,51:1d,30:1d};i.2g=j;i.$k.z(i.12["3X"],".h-1h",a)},4h:9(){b e=d,t;t=e.4l();7(t>e.C){e.p=e.C;t=e.C}m 7(e.11>=0){t=0;e.p=0}q t},4l:9(){b t=d,n=t.6.14===j?t.2C:t.H,r=t.11,i=1d;e.2i(n,9(s,o){7(r-t.N/20>n[s+1]&&r-t.N/20<o&&t.3m()==="V"){i=o;7(t.6.14===j){t.p=e.4o(i,t.H)}m{t.p=s}}m 7(r+t.N/20<o&&r+t.N/20>(n[s+1]||n[s]-t.N)&&t.3m()==="2G"){7(t.6.14===j){i=n[s+1]||n[n.S-1];t.p=e.4o(i,t.H)}m{i=n[s+1];t.p=s+1}}});q t.p},3m:9(){b e=d,t;7(e.U<0){t="2G";e.2H="Y"}m{t="V";e.2H="1l"}q t},4I:9(){b e=d;e.$k.z("h.Y",9(){e.Y()});e.$k.z("h.1l",9(){e.1l()});e.$k.z("h.1e",9(t,n){e.6.Q=n;e.1e();e.36="1e"});e.$k.z("h.W",9(){e.W();e.36="W"});e.$k.z("h.1i",9(t,n){e.1i(n)});e.$k.z("h.2j",9(t,n){e.2j(n)})},2x:9(){b e=d;7(e.6.2x===j&&e.F.13!==j&&e.6.Q!==c){e.$k.z("57",9(){e.W()});e.$k.z("58",9(){7(e.36!=="W"){e.1e()}})}},1I:9(){b t=d;7(t.6.1I===c){q c}1C(b n=0;n<t.G;n++){b i=e(t.$I[n]);7(i.w("h-1c")==="1c"){4q}b s=i.w("h-1K"),o=i.16(".5b"),u;7(B o.w("1X")!=="2F"){i.w("h-1c","1c");4q}7(i.w("h-1c")===r){o.3N();i.K("4s").w("h-1c","5e")}7(t.6.4t===j){u=s>=t.p}m{u=j}7(u&&s<t.p+t.6.v&&o.S){t.4u(i,o)}}},4u:9(e,t){9 s(){r+=1;7(n.2X(t.2U(0))||i===j){o()}m 7(r<=2v){19(s,2v)}m{o()}}9 o(){e.w("h-1c","1c").Z("4s");t.5j("w-1X");n.6.4x==="4y"?t.5m(5n):t.3L();7(B n.6.3r==="9"){n.6.3r.P(d,[n.$k])}}b n=d,r=0;7(t.5p("5q")==="5r"){t.A("5s-5t","5u("+t.w("1X")+")");b i=j}m{t[0].1X=t.w("1X")}s()},1A:9(){9 s(){i+=1;7(t.2X(n.2U(0))){o()}m 7(i<=2v){19(s,2v)}m{t.1U.A("3h","")}}9 o(){b n=e(t.$I[t.p]).3h();t.1U.A("3h",n+"T");7(!t.1U.1V("1A")){19(9(){t.1U.K("1A")},0)}}b t=d;b n=e(t.$I[t.p]).16("5w");7(n.2U(0)!==r){b i=0;s()}m{o()}},2X:9(e){7(!e.3O){q c}7(B e.4B!=="3b"&&e.4B==0){q c}q j},4n:9(){b t=d;7(t.6.37===j){t.$I.Z("2d")}t.1v=[];1C(b n=t.p;n<t.p+t.6.v;n++){t.1v.2D(n);7(t.6.37===j){e(t.$I[n]).K("2d")}}t.h.1v=t.1v},4w:9(e){b t=d;t.4E="h-"+e+"-5B";t.4F="h-"+e+"-2f"},4k:9(){9 u(e,t){q{2l:"5D",V:e+"T"}}b e=d;e.1G=j;b t=e.4E,n=e.4F,r=e.$I.1E(e.p),i=e.$I.1E(e.15),s=1N.4H(e.H[e.p])+e.H[e.15],o=1N.4H(e.H[e.p])+e.N/2;e.$L.K("h-1Y").A({"-1R-O-1Y":o+"T","-27-4J-1Y":o+"T","4J-1Y":o+"T"});b a="5I 5J 5K 5L";i.A(u(s,10)).K(t).z(a,9(){e.3C=j;i.R(a);e.32(i,t)});r.K(n).z(a,9(){e.2E=j;r.R(a);e.32(r,n)})},32:9(e,t){b n=d;e.A({2l:"",V:""}).Z(t);7(n.3C&&n.2E){n.$L.Z("h-1Y");n.3C=c;n.2E=c;n.1G=c}},4z:9(){b e=d;e.h={29:e.29,5P:e.$k,X:e.$X,I:e.$I,p:e.p,15:e.15,1v:e.1v,13:e.F.13,F:e.F,1t:e.1t}},4N:9(){b r=d;r.$k.R(".h h 1Z.40");e(n).R(".h h");e(t).R("47",r.3f)},1Q:9(){b e=d;7(e.$k.1S().S!==0){e.$L.3y();e.$X.3y().3y();7(e.D){e.D.3j()}}e.4N();e.$k.2s("2t",e.$k.w("h-4p")||"").2s("J",e.$k.w("h-4K"))},5T:9(){b e=d;e.W();18(e.1M);e.1Q();e.$k.5U()},5V:9(t){b n=d;b r=e.3K({},n.29,t);n.1Q();n.1J(r,n.$k)},5W:9(e,t){b n=d,i;7(!e){q c}7(n.$k.1S().S===0){n.$k.1k(e);n.1P();q c}n.1Q();7(t===r||t===-1){i=-1}m{i=t}7(i>=n.$X.S||i===-1){n.$X.1E(-1).5X(e)}m{n.$X.1E(i).5Y(e)}n.1P()},5Z:9(e){b t=d,n;7(t.$k.1S().S===0){q c}7(e===r||e===-1){n=-1}m{n=e}t.1Q();t.$X.1E(n).3j();t.1P()}};e.3A.2c=9(t){q d.2i(9(){7(e(d).w("h-1J")===j){q c}e(d).w("h-1J",j);b n=3i.3E(i);n.1J(t,d);e.w(d,"2c",n)})};e.3A.2c.6={v:5,17:c,1q:[60,4],21:[61,3],24:[62,2],25:c,26:[63,1],4b:c,49:c,1j:2J,1D:64,2u:65,Q:c,2x:c,2b:c,2T:["1l","Y"],2e:j,14:c,1s:j,38:c,2Z:j,48:2J,4a:t,1O:"h-66",28:"h-28",1I:c,4t:j,4x:"4y",1A:c,2I:c,3F:c,3v:j,22:j,23:j,37:c,2w:c,3p:c,3t:c,2M:c,39:c,1F:c,3z:c,3n:c,2R:c,3r:c}})(67,68,69)',62,382,'||||||options|if||function||var|false|this||||owl||true|elem||else|||currentItem|return|||||items|data|||on|css|typeof|maximumItem|owlControls|0px|browser|itemsAmount|positionsInArray|owlItems|class|addClass|owlWrapper|div|itemWidth|transform|apply|autoPlay|off|length|px|newRelativeX|left|stop|userItems|next|removeClass||newPosX|ev_types|isTouch|scrollPerPage|prevItem|find|itemsCustom|clearInterval|setTimeout|transition|disabled|loaded|null|play|target|translate3d|wrapper|goTo|slideSpeed|append|prev|width|preventDefault|paginationWrapper|page|itemsDesktop|autoPlayInterval|pagination|dragDirection|support3d|visibleItems|buttonPrev|css2slide|buttonNext|ms|autoHeight|swapSpeed|for|paginationSpeed|eq|beforeMove|isTransition|transition3d|lazyLoad|init|item|roundPages|checkVisible|Math|baseClass|setVars|unWrap|webkit|children|isCss3Finish|wrapperOuter|hasClass|prevArr|src|origin|mousedown||itemsDesktopSmall|mouseDrag|touchDrag|itemsTablet|itemsTabletSmall|itemsMobile|moz|theme|userOptions|touchend|navigation|owlCarousel|active|rewindNav|in|isCssFinish|html|each|jumpTo|rewind|position|sliding|mouseup|eachMoveUpdate|is|afterGo|ease|attr|style|rewindSpeed|100|transitionStyle|stopOnHover|addCssSpeed|opacity|orignalItems|all|pagesInArray|push|endCurrent|string|right|playDirection|jsonPath|200|pageX|touches|beforeInit|end|move|touchmove|dragging|startDragging|newPosY|navigationText|get|updateItems|touchstart|completeImg|logIn|responsive|targetElement|calculateAll|clearTransStyle|visible|watchVisibility|updateControls|hoverStatus|addClassActive|paginationNumbers|afterInit|checkPagination|undefined|offsetY|checkNavigation|offsetX|resizer|relativePos|height|Object|remove|apStatus|checkAp|moveDirection|afterAction|updateVars|beforeUpdate|Number|afterLazyLoad|grabbing|afterUpdate|click|dragBeforeAnimFinish|event|max|unwrap|afterMove|fn|originalEvent|endPrev|maximumPixels|create|jsonSuccess|wrap|eventTypes|removeTransition|doTranslate|extend|show|css2move|hide|complete|cssText|span|gestures|disabledEvents|updatePagination|loadContent|mousemove|touchcancel|start|buildButtons|buildPagination|disableTextSelect|pageY|min|loops|calculateWidth|appendWrapperSizes|appendItemsSizes|resize|responsiveRefreshRate|itemsScaleUp|responsiveBaseWidth|singleItem|srcElement|outer|drag|animate|setInterval|getNewPosition|reload|disable|singleItemTransition|closestItem|updatePosition|onVisibleItems|inArray|originalStyles|continue|block|loading|lazyFollow|lazyPreload|display|transitionTypes|lazyEffect|fade|owlStatus|moveEvents|naturalWidth|response|buildControls|outClass|inClass|onStartup|abs|customEvents|perspective|originalClasses|checkBrowser|wrapItems|clearEvents|_data|clickable|toggleClass|controls|stopImmediatePropagation|stopPropagation|msMaxTouchPoints|events|pop|splice|baseElWidth|minSwipe|maxSwipe|dargging|clientX|clientY|text|shift|onstartup|mouseover|mouseout|duration|round|lazyOwl|new|which|checked|createElement|destroyControls|buttons|5e3|removeAttr|match|numbers|fadeIn|400|clearTimeout|prop|tagName|DIV|background|image|url|prototype|img|sort|top|ontouchstart|dragstart|out|navigator|relative|appendTo|input|getJSON|textarea|webkitAnimationEnd|oAnimationEnd|MSAnimationEnd|animationend|returnValue|wrapAll|500|baseElement|select|wrapperWidth|option|destroy|removeData|reinit|addItem|after|before|removeItem|1199|979|768|479|800|1e3|carousel|jQuery|window|document'.split('|'),0,{}))}
lm.carousel={};lm.carousel.init=function(){$.fn.slides=function(option){option=$.extend({},$.fn.slides.option,option);return this.each(function(){$('.'+option.container,$(this)).children().wrapAll('<div class="carouselContent"/>');var elem=$(this),control=$('.carouselContent',elem),total=control.children().size(),width=control.children().outerWidth(),height=control.children().outerHeight(),start=option.start-1,effect=option.effect.indexOf(',')<0?option.effect:option.effect.replace(' ','').split(',')[0],paginationEffect=option.effect.indexOf(',')<0?effect:option.effect.replace(' ','').split(',')[1],next=0,prev=0,number=0,current=0,loaded,active,clicked,position,direction,imageParent,pauseTimeout,playInterval;if(total<2){$('.'+option.container,$(this)).fadeIn(option.fadeSpeed,option.fadeEasing,function(){loaded=true;option.slidesLoaded();});$('.'+option.next+', .'+option.prev).fadeOut(0);return false;}
function animate(direction,effect,clicked){if(!active&&loaded){active=true;option.animationStart(current+1);switch(direction){case'next':prev=current;next=current+1;next=total===next?0:next;position=width*2;direction=-width*2;current=next;break;case'prev':prev=current;next=current-1;next=next===-1?total-1:next;position=0;direction=0;current=next;break;case'pagination':next=parseInt(clicked,10);prev=$('.'+option.paginationClass+' li.'+option.currentClass+' a',elem).attr('href').match('[^#/]+$');if(next>prev){position=width*2;direction=-width*2;}else{position=0;direction=0;}
current=next;break;}
if(effect==='fade'){if(option.crossfade){control.children(':eq('+next+')',elem).css({zIndex:10}).fadeIn(option.fadeSpeed,option.fadeEasing,function(){if(option.autoHeight){control.animate({height:control.children(':eq('+next+')',elem).outerHeight()},option.autoHeightSpeed,function(){control.children(':eq('+prev+')',elem).css({display:'none',zIndex:0});control.children(':eq('+next+')',elem).css({zIndex:0});option.animationComplete(next+1);active=false;});}else{control.children(':eq('+prev+')',elem).css({display:'none',zIndex:0});control.children(':eq('+next+')',elem).css({zIndex:0});option.animationComplete(next+1);active=false;}});}else{control.children(':eq('+prev+')',elem).fadeOut(option.fadeSpeed,option.fadeEasing,function(){if(option.autoHeight){control.animate({height:control.children(':eq('+next+')',elem).outerHeight()},option.autoHeightSpeed,function(){control.children(':eq('+next+')',elem).fadeIn(option.fadeSpeed,option.fadeEasing);});}else{control.children(':eq('+next+')',elem).fadeIn(option.fadeSpeed,option.fadeEasing,function(){if($.browser.msie){$(this).get(0).style.removeAttribute('filter');}});}
option.animationComplete(next+1);active=false;});}}else{control.children(':eq('+next+')').css({left:position,display:'block'});if(option.autoHeight){control.animate({left:direction,height:control.children(':eq('+next+')').outerHeight()},option.slideSpeed,option.slideEasing,function(){control.css('left','-width');control.children(':eq('+next+')').css('left','width');control.children(':eq('+prev+')').css({left:width,display:'none',zIndex:0});option.animationComplete(next+1);active=false;});}else{control.animate({left:direction},option.slideSpeed,option.slideEasing,function(){control.css('left','-width');control.children(':eq('+next+')').css('left','width');control.children(':eq('+prev+')').css({left:width,display:'none',zIndex:0});option.animationComplete(next+1);active=false;});}}
if(option.pagination){$('.'+option.paginationClass+' li.'+option.currentClass,elem).removeClass(option.currentClass);$('.'+option.paginationClass+' li:eq('+next+')',elem).addClass(option.currentClass);}}}
function stop(){clearInterval(elem.data('interval'));}
function pause(){if(option.pause){clearTimeout(elem.data('pause'));clearInterval(elem.data('interval'));pauseTimeout=setTimeout(function(){clearTimeout(elem.data('pause'));playInterval=setInterval(function(){animate("next",effect);if($('.'+option.paginationClass+' li a').next().length>1){$('.'+option.paginationClass+' li a').not('li.current').next().hide();$('.'+option.paginationClass+' li.current a').next().show();}},option.play);elem.data('interval',playInterval);},option.pause);elem.data('pause',pauseTimeout);}else{stop();}}
if(total<2){return;}
if(start<0){start=0;}
if(start>total){start=total-1;}
if(option.start){current=start;}
if(option.randomize){control.randomize();}
$('.'+option.container,elem).css({overflow:'hidden',position:'relative'});control.children().css({position:'absolute',top:0,left:control.children().outerWidth(),zIndex:0,display:'none'});control.css({position:'relative',width:(width*3),height:height,left:-width});$('.'+option.container,elem).css('display','block');if(option.autoHeight){control.children().css('height','auto');control.animate({height:control.children(':eq('+start+')').outerHeight()},option.autoHeightSpeed);}
if(option.preload&&control.find('img:eq('+start+')').length){$('.'+option.container,elem).css('background','url('+option.preloadImage+') no-repeat 50% 50%');var img=control.find('img:eq('+start+')').attr('src')+'?'+(new Date()).getTime();if($('img',elem).parent().attr('class')!='carouselContent'){imageParent=control.children(':eq(0)')[0].tagName.toLowerCase();}else{imageParent=control.find('img:eq('+start+')');}
control.find('img:eq('+start+')').attr('src',img).load(function(){control.find(imageParent+':eq('+start+')').fadeIn(option.fadeSpeed,option.fadeEasing,function(){loaded=true;option.slidesLoaded();});});}else{control.children(':eq('+start+')').fadeIn(option.fadeSpeed,option.fadeEasing,function(){loaded=true;option.slidesLoaded();});}
if(option.bigTarget){control.children().css('cursor','pointer');control.children().click(function(){animate('next',effect);return false;});}
if(option.hoverPause&&option.play){control.bind('mouseover',function(){stop();});control.bind('mouseleave',function(){pause();});}
if(option.generateNextPrev){$('.'+option.container,elem).after('<a href="#" class="'+option.prev+'">Prev</a>');$('.'+option.prev,elem).after('<a href="#" class="'+option.next+'">Next</a>');}
$('.'+option.next,elem).click(function(e){e.preventDefault();if(option.play){pause();}
animate('next',effect);});$('.'+option.prev,elem).click(function(e){e.preventDefault();if(option.play){pause();}
animate('prev',effect);});if(option.generatePagination){if(option.prependPagination){elem.prepend('<ul class='+option.paginationClass+'></ul>');}else{elem.append('<ul class='+option.paginationClass+'></ul>');}
control.children().each(function(){$('.'+option.paginationClass,elem).append('<li><a href="#'+number+'">'+(number+1)+'</a></li>');number++;});}else{$('.'+option.paginationClass+' li a',elem).each(function(){$(this).attr('href','#'+number);number++;});}
$('.'+option.paginationClass+' li:eq('+start+')',elem).addClass(option.currentClass);$('.'+option.paginationClass+' li a',elem).click(function(){if(option.play){pause();}
clicked=$(this).attr('href').match('[^#/]+$');if(current!=clicked){animate('pagination',paginationEffect,clicked);if($('.'+option.paginationClass+' li a').next().length>1){$('.'+option.paginationClass+' li a').next().hide();$(this).next().show();}}
return false;});$('a.link',elem).click(function(){if(option.play){pause();}
clicked=$(this).attr('href').match('[^#/]+$')-1;if(current!=clicked){animate('pagination',paginationEffect,clicked);}
return false;});if(option.play){playInterval=setInterval(function(){animate('next',effect);if($('.'+option.paginationClass+' li a').next().length>1){$('.'+option.paginationClass+' li a').not('li.current').next().hide();$('.'+option.paginationClass+' li.current a').next().show();}},option.play);elem.data('interval',playInterval);if($('.'+option.paginationClass+' li a').next().length>1){$('.'+option.paginationClass+' li a').not('li.current').next().hide();$('.'+option.paginationClass+' li.current a').next().show();}}});};$.fn.slides.option={preload:false,preloadImage:'https://s1.lmcdn.fr/imagesV3/navigationPermanente/common/loader._r024d3559ce854_.gif',container:'carouselBox',generateNextPrev:false,next:'next',prev:'prev',pagination:true,generatePagination:true,prependPagination:true,paginationClass:'pagination',currentClass:'current',fadeSpeed:200,fadeEasing:'',slideSpeed:350,slideEasing:'',start:1,effect:'slide',crossfade:false,randomize:false,play:0,pause:0,hoverPause:false,autoHeight:false,autoHeightSpeed:350,bigTarget:false,animationStart:function(){},animationComplete:function(){},slidesLoaded:function(){}};$.fn.randomize=function(callback){function randomizeOrder(){return(Math.round(Math.random())-0.5);}
return($(this).each(function(){var $this=$(this);var $children=$this.children();var childCount=$children.length;if(childCount>1){$children.hide();var indices=[];for(i=0;i<childCount;i++){indices[indices.length]=i;}
indices=indices.sort(randomizeOrder);$.each(indices,function(j,k){var $child=$children.eq(k);var $clone=$child.clone(true);$clone.show().appendTo($this);if(callback!==undefined){callback($child,$clone);}
$child.remove();});}}));};};lm.vad={};lm.vad.isBasketPreviewUpToDate=false;lm.vad.isInt=function(o){return!isNaN(o-0);};lm.vad.loadBasketPreview=function(){if(!lm.vad.isBasketPreviewUpToDate){var jBasketPreview=jQuery("#basketContentPreview");jBasketPreview.empty().addClass("loader");$.ajax({type:"POST",url:"/v3/ajax/previewPanier.do",cache:false,dataType:"html",success:function(data,status,jqxHR){jBasketPreview.removeClass("loader");jBasketPreview.append(data);lm.vad.isBasketPreviewUpToDate=true;},error:function(){jBasketPreview.removeClass("loader");jBasketPreview.append("<p>Une erreur technique s'est produite</p>");var goToBasketButton='<a href="/v3/vad/voirPanier.do" class="cta green clicCT" data-clicCT="C,1,navigation_permanente::header::panier,N"><span class="s16">Voir mon panier</span></a>';jBasketPreview.append(goToBasketButton);}});}};lm.vad.initModifQteProduit=function(){function preventKeyQtite(elem){if(elem.val()<1&&elem.val()!=''||(/[^0-9]/).test(elem.val())){elem.val(1);}}
$('.qtiteMoins, .qtitePlus').unbind('click');$('.qtiteMoins').click(function(e){e.preventDefault();inputQtite=$(this).next('.inputQtite');if(inputQtite.val()==''){inputQtite.val(1);}
if(inputQtite.val()>1)
inputQtite.val(parseInt(inputQtite.val(),10)-1)
else if(inputQtite.val()<1)
inputQtite.val(1);});$('.qtitePlus').click(function(e){e.preventDefault();inputQtite=$(this).prev('.inputQtite');if(inputQtite.val()==''){inputQtite.val(1);}
if(inputQtite.val()<9999){inputQtite.val(parseInt(inputQtite.val(),10)+1);}});$('.qtiteMoinsRE').click(function(e){e.preventDefault();$('.qtiteMoins').click();});$('.qtitePlusRE').click(function(e){e.preventDefault();$('.qtitePlus').click();});$('.inputQtite').keydown(function(){preventKeyQtite($(this));});$('.inputQtite').keyup(function(){preventKeyQtite($(this));});$('.inputQtite').blur(function(){preventKeyQtite($(this));});$('.inputQtite').click(function(){preventKeyQtite($(this));});$('.inputQtite').unbind('focus').focus(function(e){e.preventDefault();});}
lm.vad.updateQuantityBasketHeader=function(){$.ajax({type:"GET",url:"/v3/ajax/getNbProducts.do",cache:false,async:true,dataType:"html",success:function(data,status,jqxHR){lm.vad.controlTextBasket(data);}});};lm.vad.updateQuantity=function(refLm,storeId,quantity,uniqueId,isQuantityConditionning){data="";if(isQuantityConditionning!=null&&isQuantityConditionning==true){data="refLm="+refLm+"&storeId="+storeId+"&quantityConditionning="+quantity+"&uniqueId="+uniqueId;}
else{data="refLm="+refLm+"&storeId="+storeId+"&quantity="+quantity+"&uniqueId="+uniqueId;}
$.ajax({type:"POST",url:"/v3/vad/updateQuantity.do",cache:false,async:false,data:data,dataType:"html",success:function(data){if(data=='success'){if($('section#container').hasClass('reloadBasket')){lm.vad.reloadBasket();}}
else{$('body').append(data);lm.layers.displayPopin('#layerSuppression',true,null,null,true);lm.vad.initBtnLayerPanier();}
lm.vad.updateQuantityBasketHeader()}});};lm.vad.initBtnLayerPanier=function(){$('#layerSuppression').on('click','table.layerPanier .btnSub',function(e){$this=$(this);var elementQty=$this.siblings('#layerSuppression table.layerPanier input.qtyLayer');var valeurQty=parseFloat(elementQty.attr("value"));var decrementeQty=valeurQty-1;if(valeurQty>0){elementQty.attr("value",decrementeQty);}
e.preventDefault();});$('#layerSuppression table.layerPanier .btnAdd').click(function(e){$this=$(this);var valeurQty=parseInt($('input.qtyLayer').attr("value"),10);var valeurQtyDispo=parseInt($('td.qtyDispo').attr("data-qtyStock"),10);if(valeurQty>=valeurQtyDispo){alert('Le produit n\'est pas disponible dans cette quantite');$this.addClass('errorField');e.preventDefault();}else{valeurQty++
$('input.qtyLayer').attr("value",valeurQty);e.preventDefault();}});$('#layerSuppression .btnWide').click(function(e){$this=$(this);var reflm=$this.attr("data-reflm");var storeId=$this.attr("data-delivery");var valeurQty=parseFloat($('input.qtyLayer').attr("value"));var valeurQtyDispo=parseFloat($('td.qtyDispo').attr("data-qtyStock"));var quantity=$('input.qtyLayer').attr("value");if(valeurQty<=valeurQtyDispo){lm.vad.updateQuantity(reflm,storeId,quantity);$('#overlayB').hide();$('#overlay').hide();$('#layerSuppression table.layerPanier .btnSub, #layerSuppression table.layerPanier .btnAdd').unbind('click');$('#layerSuppression').remove();if($('.blocPanier').length===0){lm.vad.layerAjoutPanier($this.attr('data-reflm'));}
lm.layers.displayLayer($this,'#layerPanier',null,null,true);e.preventDefault();}});$('#layerSuppressionPanier table.layerPanier .qtiteMoins').click(function(e){$this=$(this);var elementQty=$this.siblings('#layerSuppressionPanier table.layerPanier input.quantity-selector');var valeurQty=parseFloat(elementQty.attr("value"));var decrementeQty=valeurQty-1;if(valeurQty>0){elementQty.attr("value",decrementeQty);}
e.preventDefault();});$('body').on('click','#layerSuppressionPanier table.layerPanier .qtitePlus',function(e){$this=$(this);var valeurQty=parseInt($('input.quantity-selector').attr("value"),10);var valeurQtyDispo=parseInt($('td.qtyDispo').attr("data-qtyStock"),10);if(valeurQty>=valeurQtyDispo){alert('Le produit n\'est pas disponible dans cette quantite');$this.addClass('errorField');e.preventDefault();}else{valeurQty++
$('input.quantity-selector').attr("value",valeurQty);e.preventDefault();}});};lm.vad.updateBasket=function(nbrProduit,reflm,deliveryType){var now=new Date();var result='';var storeId=380;if(deliveryType==2){storeId='MAG';}
$.ajax({type:'POST',url:'/v3/vad/addProduct.do',dataType:'html',cache:false,async:false,data:'quantity='+nbrProduit+'&refLm='+reflm+'&storeId='+storeId,success:function(data){result=data;if(lm.vad.isInt(data)){$basketContent=$('#nbrPrdPanier');$basketContent.text(data);lm.vad.controlTextBasket(data);if($('#nbrPrdPanier').length===0){var $nbrPrdBasket='<i id="nbrPrdPanier">'+data+'</i>';$('.i-basket a').append($nbrPrdBasket);}}else{if($(data).hasClass('sample-exist')){if($('div.sample-exist').length>0){$('div.sample-exist').remove();}
$('body').append(data);}
else{lm.vad.updateQuantityBasketHeader();$('body').append(data);lm.layers.displayPopin('#layerSuppression',true,null,null,true);lm.vad.initBtnLayerPanier();}}},complete:function(){if(!$('#header li.ongletBasket.ongletBanner').hasClass('active')){$('#header li.ongletBasket.ongletBanner').addClass('active');}
if($('#no-sample').length===1){if($('body').find('.lm-popinVisible')){$('body').find('.lm-popinVisible').removeClass('lm-popinVisible');}
function closingCallbackLayer(){$('body').find('#no-sample').remove();}
lm.layers.displayPopin("#no-sample",true,'.popin-close-link',closingCallbackLayer);}}});return result;};lm.vad.updateBasketAtm=function(nbrParticipant,reflm,deliveryType,sessionId,storeId){var now=new Date();var result='';if(deliveryType==2){storeId='MAG';}
$.ajax({type:'POST',url:'/v3/vad/addProduct.do',dataType:'html',cache:false,async:false,data:'refLm='+reflm+'&reflmAvailability='+sessionId+'&storeId='+storeId+'&quantity='+nbrParticipant+'&itemType=ATM',success:function(data){result=data;if(lm.vad.isInt(data)){$basketContent=$('#nbrPrdPanier');$basketContent.text(data);lm.vad.controlTextBasket(data);if($('#nbrPrdPanier').length===0){var $nbrPrdBasket='<i id="nbrPrdPanier">'+data+'</i>';$('.i-basket a').append($nbrPrdBasket);}}else{$('body').append(data);lm.layers.displayPopin('#layerSuppression',true,null,null,true);lm.vad.initBtnLayerPanier();}}});return result;};function openCustomURLinIFrame(src){var rootElm=document.documentElement;var newFrameElm=document.createElement("IFRAME");newFrameElm.setAttribute("src",src);rootElm.appendChild(newFrameElm);newFrameElm.parentNode.removeChild(newFrameElm);};lm.vad.updateBasketAchatRapide=function(nbrProduit,reflm,deliveryType){var now=new Date();var result='';var storeId=380;if(deliveryType==2){storeId='MAG';}
$.ajax({type:'POST',url:'/v3/vad/addProductExpress.do',dataType:'html',cache:false,async:false,data:'quantity='+nbrProduit+'&refLm='+reflm+'&storeId='+storeId,success:function(data){window.location.href="/v3/vad/paiementExpress.do";}});return result;};lm.vad.updateBasketSerie=function(productId,productMasterId,quantity){$.ajax({type:'POST',url:'/v3/products/addProductSeriesToUserSelection.do',dataType:'html',cache:false,async:false,data:'productId='+productId+'&productMasterId='+productMasterId+'&quantity='+quantity,success:function(data){$(".selection-container").html(data);},error:function(xhr,responseText){console.warn(xhr.status+' : '+responseText);}});};lm.vad.addSelectionConcept=function(productId,selectionKey,quantity,pageUrl,portalId){$.ajax({type:'POST',url:'/v3/products/addProductConceptToUserSelection.do',dataType:'html',cache:false,async:false,data:'productId='+productId+'&selectionKey='+selectionKey+'&quantity='+quantity+'&pageUrl='+encodeURIComponent(pageUrl)+'&portalId='+portalId,success:function(data){$(".selection-container").html(data);if(!$('.total-composition').hasClass('display-composition')){$('.total-composition').addClass('display-composition');}},error:function(xhr,responseText){console.warn(xhr.status+' : '+responseText);}});};lm.vad.addBasketInit=function(elemt){elemt.live('click',function(e){e.preventDefault();$('#basket-lot-popin').remove();var $this=$(this),$quantite=$this.parents().find('.quantity-selector').val(),$reflm=$this.attr("data-reflm"),$sessionId=$this.attr("data-sessionId"),$storeId=$(this).attr('data-storeid'),$productId=$this.attr("data-productId"),$productMasterId=$this.attr("data-productMasterId"),$selectionKey=$this.attr("data-selectionKey"),$pageUrl=$('#concept').attr("data-url"),$portalId=$(this).attr("data-portalId"),resultUpdateBasket,$deliveryType="1";if($(this).parent().hasClass('cta-carte-cadeaux')){var $quantite=$(this).parent().siblings('form.quantity-management').find('input.quantity-selector').val();}
if($this.parent('.box-price').length>0){$quantite=$this.parent('.box-price').attr('data-lot');}
if(!$quantite){$quantite=$(this).parents('.layerQuantite').find('.inputQtite').val();}
if(!$quantite){$quantite=$(this).parents('.listContent tr').find('.inputQtite').val();}
if(!$quantite){$quantite=1;}
if($(this).hasClass('one-click')){lm.vad.updateBasketAchatRapide($quantite,$reflm,$deliveryType);}else if($(this).hasClass('serie-ajout-selection')){var $quantite=$this.parent().find('.quantity-selector').val();lm.vad.updateBasketSerie($productId,$productMasterId,$quantite);}else if($(this).hasClass('concept-ajout-selection')){var $quantite=$this.parent().find('.quantity-selector').val();lm.vad.addSelectionConcept($productId,$selectionKey,$quantite,$pageUrl,$portalId);$('.selection-container').show();}else{if($(this).hasClass('lienBouttonAtmPanier')){resultUpdateBasket=lm.vad.updateBasketAtm($quantite,$reflm,$deliveryType,$sessionId,$storeId);}else{resultUpdateBasket=lm.vad.updateBasket($quantite,$reflm,$deliveryType);}
if(lm.vad.isInt(resultUpdateBasket)){lm.vad.layerAjoutPanier($this.attr('data-reflm'));if($('#basket-popin').length>0){$('#basket-popin').remove();}
if($('#product-details-popin').length>0){$('#product-details-popin').remove();}
lm.layers.displayPopin("#basket-popin",true,".popin-close-link");}else{if(!$(resultUpdateBasket).hasClass('sample-exist')){$('#overlayB').remove();$('#basket-lot-popin').remove();$('body').append(resultUpdateBasket);lm.layers.displayPopin("#basket-lot-popin",true,".popin-close-link");}}}});};lm.vad.reloadBasket=function(){$.ajax({type:"GET",url:"/v3/vad/panier.do?ajax=true",async:false,dataType:"html",success:function(data){$(".blocPanier").html(data);}});};lm.vad.layerAjoutPanier=function(reflm){$.ajax({url:'/v3/miniFicheProduit/layerBasket.do',dataType:'html',contentType:'text/plain',data:'reflm='+reflm,success:function(data){$('body').append(data);if($('.layerProduit').is(':visible')){$('.layerProduit').hide();}
function basketHandler(){if($('.blocPanier').length>0){window.location="/v3/basketcontroller/showBasket.do";}}
lm.layers.displayPopin("#basket-popin",true,".popin-close-link",basketHandler);}});};lm.vad.controlTextBasket=function(data){var nbPanier;if(data){lm.vad.isBasketPreviewUpToDate=false;nbPanier=parseInt(data,10);jQuery(".ongletBasket ").removeClass("inactive");if(lm.isApp){openCustomURLinIFrame('lm://shopping_cart_infos?itemsCount=&quantity='+nbPanier+'&stage=');}}else{nbPanier=parseInt($('#nbrPrdPanier').text(),10);}
if(nbPanier<2){$("#txtPrdPanier").text("article");}else{$("#txtPrdPanier").text("articles");}
$("#nbrPrdPanier").text(nbPanier);if(nbPanier<=0){$("#panier").html("<span class=\"monPanier\">"+$("header .monPanier").remove().html()+"</span>");}else{$("#panier").html("<a onclick=\"return xt_click(this,'C','1', 'navigation_permanente::header::panier','N');\" class=\"monPanier\" href=\"/v3/vad/panier.do\">"+$("header .monPanier").remove().html()+"</a>");}};lm.vad.init=function(){$(document).ready(function(){lm.vad.controlTextBasket();var jButtonBasket=$('body').find('a.lienBouttonPanier'),jButtonAchatRapide=$('body').find('a.one-click'),jButtonSerie=$('body').find('a.serie-ajout-selection'),jButtonConcept=$('body').find('a.concept-ajout-selection'),jButtonBasketAtm=$('body').find('a.lienBouttonAtmPanier');lm.vad.addBasketInit(jButtonBasket);lm.vad.addBasketInit(jButtonAchatRapide);lm.vad.addBasketInit(jButtonBasketAtm);lm.vad.addBasketInit(jButtonSerie);lm.vad.addBasketInit(jButtonConcept);if(jQuery("#overlayB").length==0){var overlayB=$('<div id="overlayB"></div>');overlayB.css({'height':$(document).height()+'px','width':$(document).width()+'px'})
overlayB.appendTo('body');}});};lm.layers={};lm.layers.init=function(){var jOverlay=jQuery("#overlay");if(jOverlay.length===0){var jOverlay=$('<div id="overlay"></div>');jOverlay.appendTo('body');}
jQuery('.lm-popin, .layerProduit, .layerHighSmall, .layerHighBig, .layerAjouterPanier, .layerForum, .layerVideo, .layerVideoNew').appendTo('body');jQuery("body").on("click",".layerClose a, .bouttonClose, p.fermer a",function(e){e.preventDefault();$(this).closest('.layerProduit, .layerVideoIdeesConseils, .layerVideo, .layerVideoNew, #layerPanier, .layerVideoProduits, .layerImprimerParam, .layerConfortMagasin, .layerSon, .layerInfoBulle, .layerInfoBulleAvis, .layerEnvoiAmi, .layerQuantite, .layerHighSmall, .layerHighBig, .layerArticle, .layerAgenda, .layerForum').hide();jOverlay.unbind('click.overlayClose').hide();$('#overlay').hide();});jQuery("body").on("click",".layerVideo .layerClose a",function(e){$('#lecteurSWF').remove();$('.lecteur').html('<div id="lecteurSWF"><div id="inviteInstallFlash"><a href="https://get.adobe.com/fr/flashplayer/" target="_blank"><img width="49" height="51" src="https://s2.lmcdn.fr/imagesV3/navigationPermanente/getflashplayer_home._r011e5559ce854_.png" alt=""></a><p>Pour visionner cette vidéo,<br>vous aurez besoin d\'installer Flash Player :</p><a href="https://get.adobe.com/fr/flashplayer/" id="lienGetFlash" target="_blank">Télécharger maintenant</a></div></div>');});jQuery("body").on("click",".layerVideoNew .layerClose a",function(e){});};lm.layers.overlay=function(jElem){var jOverlay=jQuery('#overlay');jOverlay.show();jOverlay.css({'height':jQuery(document).height()+'px','width':jQuery(document).width()+'px',"display":"block"})
jOverlay.bind('click.overlayClose',function(event){jOverlay.unbind('click.overlayClose').hide();jElem.trigger("layerClose");jElem.hide();event.preventDefault();event.stopPropagation();});};lm.layers.overlay2=function(jElem){var jOverlay=jQuery('#overlay');jOverlay.show();jOverlay.css({'height':jQuery(document).height()+'px',"display":"block"})
jOverlay.bind('click.overlayClose',function(event){jOverlay.unbind('click.overlayClose').hide();jElem.trigger("layerClose");jElem.removeClass('lm-popinVisible');event.preventDefault();event.stopPropagation();});};lm.layers.showOverlayLayer=function(jElem,jCloseElem){};lm.layers.showInfobulle=function(){};lm.layers.displayLayer=function(trigger,layer,closingElem,closingCallback,isBlockingLayer){var jLayer=jQuery(layer);var globalScrollTop=0;jLayer.show();if(document.documentElement.scrollTop){globalScrollTop=document.documentElement.scrollTop;}else{globalScrollTop=$("body").scrollTop();}
if(jLayer.height()>document.documentElement.clientHeight){currentTop=globalScrollTop+10;currentHeight=document.documentElement.clientHeight-90;currentWidth=jLayer.width()+30;}else{currentTop=(globalScrollTop)+((parseInt(document.documentElement.clientHeight,10)/2)-(parseInt(jLayer.height(),10)/2));currentHeight='auto';currentWidth=jLayer.width();}
jLayer.css({'left':($(document).width()/2)-(jLayer.width()/2)+'px','top':currentTop+'px','width':currentWidth+'px'});if(jLayer.height()>document.documentElement.clientHeight){jLayer.find('.layerProduitContent').css({'height':currentHeight+'px','overflow':'auto','width':(currentWidth-60)+'px'});}
jLayer.find('.layerProduitBackground').css({'height':(jLayer.height()+30)+'px','width':currentWidth+30+'px'});if(!isBlockingLayer){lm.layers.overlay(jLayer);}
if(closingElem){jQuery(closingElem,jLayer).on("click.overlayClose",function(event){jLayer.trigger("layerClose");jQuery(this).off("click.overlayClose");event.preventDefault();event.stopPropagation();});}
jLayer.on("layerClose",function(){if(closingCallback&&typeof closingCallback==="function"){closingCallback();}
jLayer.hide();var jOverlay=jQuery("#overlay");jOverlay.unbind('click.overlayClose').hide();jQuery(this).off("layerClose");});};lm.layers.displayPopin=function(layer,hasToCenter,closingElem,closingCallback,isBlockingLayer,isAbsolute){var jLayer=jQuery(layer);var finalTopPosition=$(document).scrollTop()+16;if((jLayer.height()>$(window).height())||isAbsolute){jLayer.css({'position':'absolute','left':($(document).width()/2)-(jLayer.width()/2)+'px','top':finalTopPosition+'px'});}
if(hasToCenter){jLayer.css({'left':($(document).width()/2)-(jLayer.width()/2)+'px'});}
jLayer.addClass('lm-popinVisible');var navU=navigator.userAgent;var isAndroidMobile=navU.indexOf('Android')>-1&&navU.indexOf('Mozilla/5.0')>-1&&navU.indexOf('AppleWebKit')>-1;var regExAppleWebKit=new RegExp(/AppleWebKit\/([\d.]+)/);var resultAppleWebKitRegEx=regExAppleWebKit.exec(navU);var appleWebKitVersion=(resultAppleWebKitRegEx===null?null:parseFloat(regExAppleWebKit.exec(navU)[1]));var isAndroidBrowser=isAndroidMobile&&appleWebKitVersion!==null&&appleWebKitVersion<537;if(isAndroidBrowser){jLayer.css({transition:'none'})}
if(!isBlockingLayer){lm.layers.overlay2(jLayer);}else{jQuery('#overlayB').show();}
if(closingElem){jQuery(closingElem,jLayer).on("click.overlayClose",function(event){jLayer.trigger("layerClose");jQuery(this).off("click.overlayClose");event.preventDefault();event.stopPropagation();});}
jLayer.on("layerClose",function(){if(closingCallback&&typeof closingCallback==="function"){closingCallback();}
jLayer.removeClass("lm-popinVisible");var jOverlay=jQuery("#overlay");jOverlay.unbind('click.overlayClose').hide();jQuery(this).off("layerClose");});$(window).on('resize',function(){if(hasToCenter){jLayer.css({'left':($(document).width()/2)-(jLayer.width()/2)+'px'});}});};lm.layers.closePopin=function(layer){var jLayer=jQuery(layer);jLayer.trigger("layerClose");};lm.layers.displayAutoClosingLayer=function(layer,container,closingElem,closingCallback,closingDelay){var jLayer=jQuery(layer);if(container){jQuery(container).append(jLayer);}
jLayer.show();if(!closingDelay||!jQuery.isNumeric(closingDelay)){closingDelay=2000;}
var timeOutID=window.setTimeout(function(){jLayer.trigger("layerClose");},closingDelay);if(closingElem){jQuery(closingElem,jLayer).on("click.closingElem",function(event){jLayer.trigger("layerClose");jQuery(this).off("click.closingElem");event.preventDefault();event.stopPropagation();});}
jLayer.on("layerClose",function(){window.clearTimeout(timeOutID);if(closingCallback&&typeof closingCallback==="function"){closingCallback();}
jLayer.fadeOut("slow");jQuery(this).off("layerClose");});};lm.video={};lm.video.inPageInit=function(){var uidMedia=jQuery('.player').attr('data-media-uid');var videoContainer='lecteurSWF';if(uidMedia&&uidMedia!=''){if(!Modernizr.video.h264){lm.video.playerFlash(uidMedia,videoContainer,{width:455,height:341});}else{var jVideoContainer=jQuery("#"+videoContainer);jVideoContainer.empty();var jVideo=jQuery('<video>',{"controls":"controls"});jVideoContainer.append(jVideo);lm.video.HTML5Player(uidMedia,videoContainer,{width:455,height:341});}}};lm.video.popinInit=function(delegateContainerSelector){var videoTriggerSelector=".lireVideo";function videoClickHandler(that,event){event.preventDefault();var jThis=$(that);var videoContainer="lecteurSWF";var mediaUid=jThis.attr("data-media-uid");var videoId=jThis.attr("data-videoid");var playerId=jThis.attr("data-playerid");var playerKey=jThis.attr("data-playerkey");if(videoId&&videoId!=''){if(jThis.parents('.layerCont').length>0){if(jThis.hasClass('vOutils'))
lm.video.addBrightcove(videoId,playerId,playerKey,440,300,'.videoContOutils');else
lm.video.addBrightcove(videoId,playerId,playerKey,440,300,'.videoCont');}else{lm.video.addBrightcove(videoId,playerId,playerKey,711,400);}
lm.layers.displayLayer(jThis,'.layerVideo','.layerClose a',null);}else if(mediaUid&&mediaUid!=''){if(jThis.parents('.layerCont').length>0){var jVideoContainer=$("#layerVideo .videoCont");}else{var jVideoContainer=$("#"+videoContainer);}
jVideoContainer.empty();if(!Modernizr.video.h264){lm.video.playerFlash(mediaUid,videoContainer);lm.layers.displayLayer(jThis,'.layerVideo');}else{var jVideo=$('<video>',{"controls":"controls"});jVideoContainer.append(jVideo);if(jThis.parents('.layerCont').length>0){lm.video.HTML5Player(mediaUid,jVideoContainer,{width:440,height:300});}else{lm.video.HTML5Player(mediaUid,jVideoContainer);}
lm.layers.displayLayer(jThis,'.layerVideo','.layerClose a',function(){var jVideoElem=jVideoContainer.find("video");jVideoElem.get(0).pause();jVideoElem.removeAttr("src");});}
$('.layerVideo .layerVideoContent h2').text($('img',this).attr('alt'));}}
if(!delegateContainerSelector){var jVideoTriggers=jQuery(videoTriggerSelector);jVideoTriggers.on("click",function(event){videoClickHandler(this,event);});}
else{var jDelegateContainer=jQuery(delegateContainerSelector);jDelegateContainer.on("click",videoTriggerSelector,function(event){videoClickHandler(this,event);});}};lm.video.addBrightcove=function(videoId,playerId,playerKey,width,height,container){var htmlString='<div class="cntPlayer"><object id="myExperience'+videoId+'" class="BrightcoveExperience"><param name="bgcolor" value="#ffffff" /><param name="width" value="'+width+'" /><param name="height" value="'+height+'" /><param name="playerID" value="'+playerId+'" /><param name="playerKey" value="'+playerKey+'" /><param name="isVid" value="true" /><param name="isUI" value="true" /><param name="dynamicStreaming" value="true" /><param name="@videoPlayer" value="ref:'+videoId+'" /><param name="htmlFallback" value="true" /><param name="linkBaseURL" value="'+window.location+'" /><param name="wmode" value="transparent" /><param name="secureConnections" value="true" /><param name="secureHTMLConnections" value="true" /></object></div>';if(container){$(container).html(htmlString);}else{$('.lecteur').html(htmlString);}
brightcove.createExperiences();}
lm.video.playerFlash=function(uidMedia,targetContainer,dimensions){if(!dimensions||!dimensions.width||!dimensions.height){var dimensions={};dimensions.width=640;dimensions.height=352;}
var flashvars={};var params={APIKey:"~W1u-zrdL7B0",ck:"~W1u-zrdL70",clientKey:"~W1u-zrdL7B0",player:"~sQguulDFL9Q",view:"script",language:"fr",hostServices:"leroymerlin.api.v3.vpod.tv",preloadLogoUrl:"https://leroymerlin.st.v3.vpod.tv/products/flash/as3/player/resources/logo_leroymerlin.swf",preloadColor:"0x4fa204",buttonsbarBehaviour:"OVER",initialPanel:"",mediaID:uidMedia,base:"https://leroymerlin.api.v3.vpod.tv/api/tools/flash/player?kmgmt=~W1u-zrdL7B0"};var attributes={};var url="https://"+params.hostServices+'/'+uidMedia+'/player/flash/'+params.player+'/';swfobject.embedSWF(url,targetContainer,dimensions.width,dimensions.height,"10.2.0","https://s1.lmcdn.fr/swf/expressInstall._r02d7559ce85c_.swf",flashvars,params,attributes);};lm.video.HTML5Player=function(uidMedia,targetContainer,dimensions){if(!dimensions||!dimensions.width||!dimensions.height){var dimensions={};}
var videoProfile="h264_leroymerlin";var jTargetContainer=targetContainer;var jVideo=jTargetContainer.find("video");$.support.cors=true;$.ajax({url:'https://leroymerlin.api.v3.vpod.tv/api/services/rest/general/Media_get',dataType:'json',data:"uids="+uidMedia+"&kmgmt=~W1u-zrdL7B0&ck=~W1u-zrdL7B0&time="+(Math.random()*10),success:function(data){var chosenMedia=null;for(var i=0;i<data.item[0].downloads.item.length;i++){var currentItem=data.item[0].downloads.item[i];if(currentItem.profileName==videoProfile){chosenMedia=currentItem;break;}}
if(chosenMedia){jVideo.attr({"src":chosenMedia.path,"width":(dimensions.width?dimensions.width:chosenMedia.width),"height":(dimensions.height?dimensions.height:chosenMedia.height)});}else{alert("Un problème est survenue lors de la récupération de la vidéo.");}},error:function(xhr,status,code){alert("Un problème est survenue lors de la récupération de la vidéo : "+code);}});};lm.geoloc={};if(typeof window.contextualizationReturnCode!=='undefined'&&window.contextualizationReturnCode){lm.geoloc.localizationAction=contextualizationReturnCode;}else{lm.geoloc.localizationAction="DISABLED";}
if(typeof window.espaceMagasinStoreId!=='undefined'&&window.espaceMagasinStoreId){lm.geoloc.forcedStoreId=espaceMagasinStoreId;}else{lm.geoloc.forcedStoreId="";}
if(typeof window.cookieIdStore!=='undefined'&&window.cookieIdStore){lm.geoloc.currentStoreId=cookieIdStore;}else{lm.geoloc.currentStoreId="";}
if(typeof window.hasToDisplayPopup!=='undefined'){lm.geoloc.hasToDisplayPopup=hasToDisplayPopup;}else{lm.geoloc.hasToDisplayPopup=false;}
lm.geoloc.tryGlobalGeoloc=function(succeed,failed){console.log("run lm.geoloc.tryGlobalGeoloc");var storedCoords=window.sessionStorage.getItem("geoCoordinates");if(!navigator.geolocation||(jQuery.browser.mozilla&&parseFloat(jQuery.browser.version)<25)){console.warn("geolocation not available");}else{if(storedCoords){var storedCoordsObj=JSON.parse(storedCoords);var coords={};coords.latitude=storedCoordsObj.coords.latitude;coords.longitude=storedCoordsObj.coords.longitude;coords.altitude=storedCoordsObj.coords.altitude;coords.accuracy=storedCoordsObj.coords.accuracy;console.log("let's call succeed function with data :");succeed(storedCoordsObj.coords);}else{navigator.geolocation.getCurrentPosition(function(obj){var geoloc={};geoloc.coords={};geoloc.coords.latitude=obj.coords.latitude;geoloc.coords.longitude=obj.coords.longitude;geoloc.coords.altitude=obj.coords.altitude;geoloc.coords.accuracy=obj.coords.accuracy;geoloc.timestamp=obj.timestamp;sessionStorage.setItem("geoCoordinates",JSON.stringify(geoloc));succeed(geoloc.coords);},function(obj){failed(obj);},{enableHighAccuracy:true,timeout:5000,maximumAge:0});}}};lm.geoloc.urls={rechercheGPS:"/v3/contextualization/store/getStoreIdFromGPS.do",storeContextualization:"/v3/contextualization/store/contextualize.do",gMapsScript:"https://maps.google.com/maps/api/js?sensor=false&language=fr&client=gme-leroymerlinsa&callback=lm.geoloc.initializeGoogleMap",infoBoxScript:"https://s2.lmcdn.fr/javascriptV3/navigationPermanente/common/infoBox.min._r01745559ce85c_.js"};lm.geoloc.initializeGoogleMap=function(){if(lm.geoloc.search.storeSearchResults){var mapOptions={mapTypeId:google.maps.MapTypeId.ROADMAP};mapOptions.center=new google.maps.LatLng(lm.geoloc.search.storeSearchResults[0].latitude,lm.geoloc.search.storeSearchResults[0].longitude);mapOptions.zoom=9;var container=document.getElementById("storesMap");lm.geoloc.gmap=new google.maps.Map(container,mapOptions);var jMap=jQuery("#storesMap");if(jQuery("#tablet-header").length>0){var jSearchOnglet=jQuery("#tablet-header .searchStores");}else{var jSearchOnglet=jQuery("#header .searchStores");}
jSearchOnglet.addClass("withMap");jMap.show();if(!window.InfoBox){jQuery.getScript(lm.geoloc.urls.infoBoxScript,function(){lm.geoloc.placeFoundStoresMarkers(lm.geoloc.search.storeSearchResults);});}else{lm.geoloc.placeFoundStoresMarkers(lm.geoloc.search.storeSearchResults);}}else{}};lm.geoloc.placeFoundStoresMarkers=function(storeSearchResults){lm.geoloc.markers=null;lm.geoloc.markers={};var hasToResizeMap=(storeSearchResults.length>1);var bounds=new google.maps.LatLngBounds();var marker=null;for(var i=0;i<storeSearchResults.length;i++){var letter=String.fromCharCode("A".charCodeAt(0)+i);marker=new google.maps.Marker({position:new google.maps.LatLng(storeSearchResults[i].latitude,storeSearchResults[i].longitude),map:lm.geoloc.gmap,title:storeSearchResults[i].storeName,labelContent:storeSearchResults[i].storeName,infoBoxContent:"<div class='box_arrow'></div>"+storeSearchResults[i].infoBoxContent,draggable:false,disableDoubleClickZoom:false,icon:"//chart.googleapis.com/chart?chst=d_map_pin_letter&chld="+letter+"|60ad0e|000000",clickable:true,storeId:storeSearchResults[i].id});lm.geoloc.markers[marker.storeId]=marker;if(hasToResizeMap){var point=new google.maps.LatLng(storeSearchResults[i].latitude,storeSearchResults[i].longitude);bounds.extend(point);}
var infoBoxOptions={closeBoxURL:"//www.google.com/intl/en_us/mapfiles/close.gif",pixelOffset:new google.maps.Size(-52,19),enableEventPropagation:true,boxStyle:{width:"200px"}};var infoBox=new InfoBox(infoBoxOptions);google.maps.event.addListener(marker,'click',function(){infoBox.setContent(this.infoBoxContent);infoBox.open(lm.geoloc.gmap,this);jQuery("#stores-result li").removeClass('selected');jQuery("#stores-result [data-store-id='"+this.storeId+"']").addClass('selected').get(0).scrollIntoView(false);});google.maps.event.addListener(marker,'click.fromList',function(){infoBox.setContent(this.infoBoxContent);infoBox.open(lm.geoloc.gmap,this);jQuery("#stores-result li").removeClass('selected');jQuery("#stores-result [data-store-id='"+this.storeId+"']").addClass('selected');})}
if(hasToResizeMap){lm.geoloc.gmap.fitBounds(bounds);}
if(lm.geoloc.search.isResultsFromZipCode){google.maps.event.trigger(lm.geoloc.markers[storeSearchResults[0].id],"click.fromList");}};lm.geoloc.retrievingStoreIdWithGPSCoords=function(latitude,longitude){if((latitude&&longitude)&&(jQuery.isNumeric(latitude)&&jQuery.isNumeric(longitude))){var url=lm.geoloc.urls.rechercheGPS;var data={latitude:latitude,longitude:longitude};return jQuery.post(url,data);}else{}};lm.geoloc.settingContextualizationWithGivenStoreID=function(storeId,hasToDisplayPopin){if(storeId&&jQuery.isNumeric(storeId)){var url=lm.geoloc.urls.storeContextualization;var data={storeId:storeId,redirect:false};if(hasToDisplayPopin){data.showPopin=true;}
return jQuery.post(url,data);}else{}};lm.geoloc.reloadPageWithContextualizationNotif=function(){var initialPage=window.location.href.substr(0,window.location.href.indexOf('#'));window.location.replace(initialPage);};lm.geoloc.contextualisation={};lm.geoloc.contextualisation.init=function(){var succeed=function(obj){console.log('succeed called _ geoloc');var retrievingStoreId=lm.geoloc.retrievingStoreIdWithGPSCoords(obj.latitude,obj.longitude);jQuery.when(retrievingStoreId).pipe(function(data,textStatus,jqXHR){var storeId=data;var settingContextualization=lm.geoloc.settingContextualizationWithGivenStoreID(storeId,true);return settingContextualization;},function(data,textStatus,jqXHR){}).done(function(data,textStatus,jqXHR){if(data==="success"){lm.geoloc.reloadPageWithContextualizationNotif();}else{}}).fail(function(data,textStatus,jqXHR){var notFoundMessage="Une erreur technique est survenue, veuillez réessayer plus tard.";jQuery("#geoContextInfo .geoContextMessage").text(notFoundMessage);if($('#tablet-header').length>0){if(lm.geoloc.hasToDisplayPopup){lm.layers.displayAutoClosingLayer(jQuery("#geoContextInfo"),"#tablet-header",".layerClose",null,5000);}}else{lm.layers.displayAutoClosingLayer(jQuery("#geoContextInfo"),"#header .ongletMag",".layerClose",null,5000);}});};var failed=function(obj){};var failedManualGeoloc=function(obj){var feedbackTxt="";switch(obj.code){case obj.UNKNOWN_ERROR:feedbackTxt="La geolocalisation a rencontre une erreur.";break;case obj.PERMISSION_DENIED:feedbackTxt="Vous n'avez pas souhaité partager vos données de géolocalisation.";break;case obj.POSITION_UNAVAILABLE:feedbackTxt="Les coordonnees de l'utilisateur n'ont pas pu être trouvees.";break;case obj.TIMEOUT:feedbackTxt="La geolocalisation prend trop de temps.";break;}
var jManualGeolocCont=jQuery(".activate-geoloc");var jManualGeolocErrors=jManualGeolocCont.find(".form-error");if(jManualGeolocErrors.length>0){jManualGeolocErrors.empty().text(feedbackTxt);}else{jManualGeolocCont.append("<span class='form-error'>"+feedbackTxt+"</span>");}
$("#searchCPLoader").hide();};$("#btnActivateGeolocation").on("click",function(event){lm.geoloc.tryGlobalGeoloc(succeed,failedManualGeoloc);$('span.error').hide();if($('.layered #searchCPLoader').length){$('#searchCPLoader').show().css("margin-right","510px");}else{$('#searchCPLoader').show().css("margin-right","638px");}});switch(lm.geoloc.localizationAction){case"FORCE_CONTEXTUALIZATION":var idStore=parseInt(lm.geoloc.forcedStoreId,10);if(idStore&&jQuery.isNumeric(idStore)){var contextualizingToForcedStore=lm.geoloc.settingContextualizationWithGivenStoreID(idStore,true);jQuery.when(contextualizingToForcedStore).done(function(){lm.geoloc.reloadPageWithContextualizationNotif();});}
break;case"OPEN_LAYER_PROPOSITION_CONTEXTUALIZATION":var jContextConflictPopin=jQuery("#contextConflictPopin");lm.layers.displayLayer(null,jContextConflictPopin,".layerClose",null,false);jQuery(".new-context-yes",jContextConflictPopin).on("click",function(event){var idStore=parseInt(lm.geoloc.forcedStoreId,10);if(idStore&&jQuery.isNumeric(idStore)){var contextualizingToForcedStore=lm.geoloc.settingContextualizationWithGivenStoreID(idStore,true);jQuery.when(contextualizingToForcedStore).then(function(){lm.geoloc.reloadPageWithContextualizationNotif();});}
event.preventDefault();});jQuery(".new-context-no",jContextConflictPopin).on("click",function(event){jContextConflictPopin.hide();event.preventDefault();});break;case"NONE":break;case"RUN_GEOLOC":lm.geoloc.tryGlobalGeoloc(succeed,failed);break;case"DISABLED":jQuery("#header .searchStores .activate-geoloc").hide();break;default:console.warn("technical error or geoloc disabled");}};lm.cuttingWood={};lm.cuttingWood.isTablet=false;lm.cuttingWood.init=function(){$('.decoupeBoisVerre').on('click',function(e){e.preventDefault();$.ajax({url:'/v3/dbv/openLayerCutting.do',data:'refPrincipale='+$(this).attr('data-reflm'),success:function(data){$('#content-popinCuttingWood').html(data);lm.layers.displayPopin('#cutting-wood-popin',true,".popin-close-link",null,null,true);$('.deleteLineCutting').hide();if($('#decoupesPanneau').length>0){evaluateCutting();}else if($('#decoupesTablette').length>0){lm.cuttingWood.isTablet=true;lm.cuttingWood.wG=$('#apercuTablette').width();lm.cuttingWood.hG=$('#apercuTablette').height();lm.cuttingWood.ctx=document.getElementById("apercuTablette").getContext("2d");evaluateTabletCutting();}},error:function(xhr){console.warn('Erreur Layer Cutting')}})});$('#content-popinCuttingWood').on('change','input',function(e){sendEvaluateCutting($(this).parents('tr'));});$('#content-popinCuttingWood').on('click','.qtiteMoins, .qtitePlus',function(e){var quantitySelector=$(this).parent().find('.quantity-selector');e.preventDefault();if($(this).hasClass('qtiteMoins')){if(quantitySelector.val()===''){quantitySelector.val(1);}
if(parseInt(quantitySelector.val(),10)>1){quantitySelector.val(parseInt(quantitySelector.val(),10)-1);}
else if(parseInt(quantitySelector.val(),10)<=1&&($('#decoupesPanneau tbody tr').length>1||$('.line-cutting-tablet').length>1)){$(this).parents('td').find('.deleteLineCutting').click();}}else{if(quantitySelector.val()===''){quantitySelector.val(1);}
if(parseInt(quantitySelector.val(),10)<9999){quantitySelector.val(parseInt(quantitySelector.val(),10)+1);}}
sendEvaluateCutting($(this).parents('tr'));});$('#content-popinCuttingWood').on('click','#addCuttingMesure',function(e){e.preventDefault();addNewLineCutting($(this));});$('#content-popinCuttingWood').on('click','.deleteLineCutting',function(e){e.preventDefault();removeNewLineCutting($(this));});$('#content-popinCuttingWood').on('click','.addCuttingToBasket',function(e){e.preventDefault();addCuttingToBasket();});$('#content-popinCuttingWood').on('keypress','input',function(e){if(e.keyCode==13){e.preventDefault();}});function sendEvaluateCutting(line){if(line.find('.longueur input').val()!=''&&line.find('.largeur input').val()!=''){if(!controlDimension(line)){if(lm.cuttingWood.isTablet){evaluateTabletCutting();}else{evaluateCutting();}}}}
function drawRect(ctx,w,h,x,y){ctx.beginPath();ctx.moveTo(x,y);ctx.lineTo(x+w,y);ctx.lineTo(x+w,y+h);ctx.lineTo(x,y+h);ctx.closePath();ctx.fill();ctx.stroke();}
function drawPreviewInit(ctx){var w;var h;var l=0;var q;var $this;ctx.font="18px Arial";ctx.lineWidth=10;ctx.fillStyle="#bebaaf";ctx.strokeStyle="#969b9e"
ctx.globalAlpha=1;drawRect(ctx,lm.cuttingWood.wG,lm.cuttingWood.hG,0,0);$('.line-cutting-tablet').each(function(incr){$this=$(this);w=parseInt(parseInt($this.find('.longueur').val(),10)/$('#maxLengthTotal').val()*lm.cuttingWood.wG,10);h=parseInt(parseInt($this.find('.largeur').val(),10)/$('#maxWidthTotal').val()*lm.cuttingWood.hG,10);q=parseInt($this.find('.quantity-selector').val(),10);for(var i=0;i<q;i++){ctx.lineWidth=1;ctx.fillStyle="#FFFFFF";ctx.strokeStyle="#FFFFFF"
ctx.globalAlpha=0.7;drawRect(ctx,w,h,l,parseInt(lm.cuttingWood.hG,10)-h);ctx.lineWidth=2;ctx.strokeStyle="#6abe10"
ctx.globalAlpha=1;ctx.beginPath();ctx.moveTo((l+w/2)+10,(lm.cuttingWood.hG-h/2));ctx.arc((l+w/2),(lm.cuttingWood.hG-h/2),10,0,Math.PI*2,true);ctx.closePath();ctx.fill();ctx.stroke();ctx.fillStyle=" #6abe10";ctx.fillText(incr+1,(l+w/2)-5,(lm.cuttingWood.hG-h/2)+6);l+=w+3;}});}
function buildRequestCutting(isTablet){var request="refPrincipale="+$('#reflmFather').val();var tabRef='decoupesPanneau';var incr=0;if(isTablet){tabRef='decoupesTablette';}
$('#'+tabRef+' tbody tr').not('.head-cutting-tablet').each(function(index){var line=$(this);request+='&cuttingDetails['+incr+'].length='+line.find('.longueur').val()+'&cuttingDetails['+incr+'].width='+line.find('.largeur').val()+'&cuttingDetails['+incr+'].quantity='+line.find('.quantity-management input').val();incr++;});return request;}
function controlDimension(line){var errorDimension=false;var message="";var longueurInput=parseFloat(line.find('.longueur').val());var largeurInput=parseFloat(line.find('.largeur').val());var borneMin=parseFloat($('#minSecurity').val());var borneLongMax=parseFloat($('#maxLength').val());var borneLargMax=parseFloat($('#maxWidth').val());var borneLongTotal=parseFloat($('#maxLengthTotal').val());var borneLargTotal=parseFloat($('#maxWidthTotal').val());var termeLargeur="Largeur";if(lm.cuttingWood.isTablet){termeLargeur="Profondeur";}
line.find('.longueur, .largeur').removeClass('errorField');$('#content-popinCuttingWood .error').hide();if(longueurInput!=borneLongTotal||borneLargTotal!=borneLargTotal){if(longueurInput>borneLongMax){if(lm.cuttingWood.isTablet){message+='<span>Les mesures renseignées ne sont pas réalisables</span>'}else{message+='<span>Longueur du panneau : '+borneLongTotal+'mm ; pas de découpe de moins de '+$('#minSecurity').val()+'mm</span>';}
errorDimension=true;line.find('.longueur').addClass('errorField');}else if(longueurInput<borneMin){if(lm.cuttingWood.isTablet){message+='<span>Les mesures renseignées ne sont pas réalisables</span>'}else{message+='<span>Longueur du panneau : '+borneLongTotal+'mm ; pas de découpe de moins de '+$('#minSecurity').val()+'mm</span>';}
errorDimension=true;line.find('.longueur').addClass('errorField');}
if(lm.cuttingWood.isTablet&&borneLargTotal!=borneLargTotal||!lm.cuttingWood.isTablet){if(largeurInput>borneLargMax){if(lm.cuttingWood.isTablet){message+='<span>Les mesures renseignées ne sont pas réalisables</span>'}else{message+='<span>Largeur du panneau : '+borneLargTotal+'mm ; pas de découpe de moins de '+$('#minSecurity').val()+'mm</span>';}
errorDimension=true;line.find('.largeur').addClass('errorField');}else if(largeurInput<borneMin){if(lm.cuttingWood.isTablet){message+='<span>Les mesures renseignées ne sont pas réalisables</span>'}else{message+='<span>Largeur du panneau : '+borneLargTotal+'mm ; pas de découpe de moins de '+$('#minSecurity').val()+'mm</span>';}
errorDimension=true;line.find('.largeur').addClass('errorField');}}}
if(errorDimension){$('#content-popinCuttingWood .error').html(message).show();$('#addCuttingMesure, .addCuttingToBasket').css('opacity',0.3).attr('disabled','disabled');}else{$('#addCuttingMesure, .addCuttingToBasket').css('opacity',1).removeAttr('disabled');}
return errorDimension;}
function evaluateCutting(){$.ajax({url:'/v3/dbv/evaluateCutting.do',type:'POST',data:buildRequestCutting(lm.cuttingWood.isTablet),success:function(data){reloadTabCutting(data);},error:function(xhr){}});}
function evaluateTabletCutting(){$.ajax({url:'/v3/dbv/evaluateCutting.do',type:'POST',data:buildRequestCutting(lm.cuttingWood.isTablet),success:function(data){reloadTabCuttingService(data);},error:function(xhr){}});}
function addNewLineCutting(obj){$.ajax({url:'/v3/dbv/addNewLineCutting.do',type:'POST',data:buildRequestCutting(lm.cuttingWood.isTablet),success:function(data){if(lm.cuttingWood.isTablet){reloadTabCuttingService(data);}else{reloadTabCutting(data);}
lm.tools.ctButtonToLink('C,84,ajouter_mesure::'+$('.xtpageCutting').val()+',A');if(($('#decoupesPanneau tbody tr').length<12&&!lm.cuttingWood.isTablet)||($('.line-cutting-tablet').length<5&&lm.cuttingWood.isTablet)){$('#addCuttingMesure').css('opacity',1).removeAttr('disabled','disabled');$('#content-popinCuttingWood .error').hide();}else{$('#addCuttingMesure').css('opacity',0.3).attr('disabled','disabled');$('#content-popinCuttingWood .error').html('<span>Nombre de découpes maximal atteint</span>').show();}},error:function(xhr){}});}
function removeNewLineCutting(obj){obj.parents('tr:not(.head-cutting-tablet)').remove();$('#content-popinCuttingWood .error').hide();if(lm.cuttingWood.isTablet){evaluateTabletCutting();}else{evaluateCutting();}}
function addCuttingToBasket(){var price=$('#content-popinCuttingWood .price').html();$.ajax({url:'/v3/dbv/addCutting.do',type:'POST',data:buildRequestCutting(lm.cuttingWood.isTablet),success:function(data){lm.tools.ctButtonToLink('C,29,ajout_panier::decoupe::'+$('#refPrincipale').text()+',A');$("#cutting-wood-popin").trigger("layerClose");$('#basket-popin').remove();$('body').append(data);lm.layers.displayPopin('#basket-popin',true,".popin-close-link",null,null,true);setPreviewBasket($('#nbProducts').val());if(lm.cuttingWood.isTablet){$('#basket-popin .price').html(price);}},error:function(xhr){}});}
function setPreviewBasket(nb){$('#nbrPrdPanier').text(nb);if(parseInt(nb,10)>1){$('#txtPrdPanier').text('articles');}else{$('#txtPrdPanier').text('article');}}
function reloadTabCuttingService(data){var jsonTab=JSON.parse(data);var tabCuttingInfos=jsonTab.cuttingDetailInfos;var lineCutting;var objTemp=$('<div></div>');var eltTabCutting;var errorDimension;var errorStock;var message="";var objectFocus={classe:$(':focus').attr('class'),ind:$(':focus').index()};$('#content-popinCuttingWood .error').hide();for(var i=0;i<tabCuttingInfos.length;i++){errorDimension=false;errorStock=false;eltTabCutting=tabCuttingInfos[i];if(eltTabCutting.errorStock){errorDimension=true;errorStock=true;$('#decoupesTablette tbody tr').eq(i+1).find('.quantity-selector').addClass('errorField');message+='<span>Plus assez de stock : vous pouvez en commander au maximum '+eltTabCutting.quantityMax+'</span>';}else{if(eltTabCutting.errorLength){errorDimension=true;$('#decoupesTablette tbody tr').eq(i+1).find('.longueur').addClass('errorField');if(lm.cuttingWood.isTablet){message+='<span>Les mesures renseignées ne sont pas réalisables</span>'}else{message+='<span>Longueur supérieure à '+$('#maxLength').val()+'mm</span>';}}else if(eltTabCutting.errorWidth){errorDimension=true;$('#decoupesTablette tbody tr').eq(i+1).find('.largeur').addClass('errorField');if(lm.cuttingWood.isTablet){message+='<span>Les mesures renseignées ne sont pas réalisables</span>'}else{message+='<span>Profondeur supérieure à '+$('#maxWidth').val()+'mm</span>';}}
lineCutting=$('<tr class="line-cutting-tablet"><td class="incrCutting"><span>'+String(i+1)+'</span> Découpe</td><td class="thicknessCutting">'+$('#thicknessCutting').val()+'</td><td><input type="text" value="'+eltTabCutting.length+'" class="longueur" maxlength="4" /></td><td><input type="text" value="'+eltTabCutting.width+'" class="largeur" maxlength="4" /></td><td><div class="quantity-management"><div><button class="fLeft qtiteMoins">-</button><input type="text" value="'+eltTabCutting.quantity+'" class="fLeft quantity-selector" maxlength="4"><button class="fLeft qtitePlus">+</button></div></div><a href="#" class="deleteLineCutting">Supprimer</a></td><td>'+eltTabCutting.nbSawcuts+'</td><td class="cuttingPrice">'+Number(eltTabCutting.totalPriceService).toFixed(2)+'&nbsp;€</td></tr>');objTemp.append(lineCutting);}}
objTemp.prepend($('.head-cutting-tablet').clone());if(errorStock){$('#decoupesTablette .qtitePlus').css('opacity',0.3).attr('disabled','disabled');}else{$('#decoupesTablette .qtitePlus').css('opacity',1).removeAttr('disabled');}
if(errorDimension){$('#content-popinCuttingWood .error').html(message).show();$('#addCuttingMesure, .addCuttingToBasket').css('opacity',0.3).attr('disabled','disabled');}else{$(objectFocus.classe).eq(objectFocus.ind).focus();$('#decoupesTablette tbody').html(objTemp.html());$('#cuttingTotalAmount').html(Number(jsonTab.totalProducts).toFixed(2)+'&nbsp;€');if($('#decoupesTablette tbody tr').length<=2){$('.deleteLineCutting').hide();}else{$('.deleteLineCutting').show();}
if($('.line-cutting-tablet').length>4){$('#addCuttingMesure').css('opacity',0.3).attr('disabled','disabled');}else{$('#addCuttingMesure').css('opacity',1).removeAttr('disabled');}
$('.addCuttingToBasket').css('opacity',1).removeAttr('disabled');drawPreviewInit(lm.cuttingWood.ctx);}}
function reloadTabCutting(data){var jsonTab=JSON.parse(data);var tabCuttingInfos=jsonTab.cuttingInfos;var lineCutting;var objTemp=$('<div></div>');var eltTabCutting;var errorDimension;var errorStock;var message="";var objectFocus={classe:$(':focus').attr('class'),ind:$(':focus').index()};$('#content-popinCuttingWood .error').hide();for(var i=0;i<tabCuttingInfos.length;i++){errorDimension=false;errorStock=false;eltTabCutting=tabCuttingInfos[i];if(eltTabCutting.errorStock){errorDimension=true;errorStock=true;$('#decoupesPanneau tbody tr').eq(i).find('.quantity-selector').addClass('errorField');message+='<span>Plus assez de stock : vous pouvez en commander au maximum '+eltTabCutting.quantityMax+'</span>';}else{if(eltTabCutting.errorLength){errorDimension=true;$('#decoupesPanneau tbody tr').eq(i).find('.longueur').addClass('errorField');message+='<span>Longueur du panneau : '+$('#maxLengthTotal').val()+'mm ; pas de découpe de moins de '+$('#minSecurity').val()+'mm</span>';}else if(eltTabCutting.errorWidth){errorDimension=true;$('#decoupesPanneau tbody tr').eq(i).find('.largeur').addClass('errorField');message+='<span>Longueur du panneau : '+$('#maxWidthTotal').val()+'mm ; pas de découpe de moins de '+$('#minSecurity').val()+'mm</span>';}
lineCutting=$('<tr><td class="incrCutting"><span>'+String(i+1)+'</span></td><td>'+$('#thicknessCutting').val()+' mm</td><td><input type="text" value="'+eltTabCutting.length+'" class="longueur" maxlength="4" /></td><td><input type="text" value="'+eltTabCutting.width+'" class="largeur" maxlength="4" /></td><td><div class="quantity-management"><div><button class="fLeft qtiteMoins">-</button><input type="text" value="'+eltTabCutting.quantity+'" class="fLeft quantity-selector" maxlength="4"><button class="fLeft qtitePlus">+</button></div></div><a href="#" class="deleteLineCutting">Supprimer</a></td><td class="cuttingPrice">'+Number(eltTabCutting.price).toFixed(2)+'&nbsp;€</td></tr>');objTemp.append(lineCutting);}}
if(errorStock){$('#decoupesPanneau .qtitePlus').css('opacity',0.3).attr('disabled','disabled');}else{$('#decoupesPanneau .qtitePlus').css('opacity',1).removeAttr('disabled');}
if(errorDimension){$('#content-popinCuttingWood .error').html(message).show();$('#addCuttingMesure, .addCuttingToBasket').css('opacity',0.3).attr('disabled','disabled');}else{$(objectFocus.classe).eq(objectFocus.ind).focus();$('#decoupesPanneau tbody').html(objTemp.html());$('#cuttingTotalAmount').html(Number(jsonTab.totalProducts).toFixed(2)+'&nbsp;€');if($('#decoupesPanneau tbody tr').length<=1){$('.deleteLineCutting').hide();}else{$('.deleteLineCutting').show();}
$('#addCuttingMesure, .addCuttingToBasket').css('opacity',1).removeAttr('disabled');}}}
lm.zoom={};lm.zoom.init=function(elem,layer){var url=elem.attr('data-original'),alt=elem.attr('alt');$(layer).find('img').attr({'src':url+'?$p=zmideesconseils','alt':alt});lm.layers.displayPopin(layer,true,'.popin-close-link',null,null,true);}
lm.tools={};lm.tools.controleUrl=function(url,jElement){if(url){var xhr;jElement.css('display','none');try{xhr=new ActiveXObject('Msxml2.XMLHTTP');}
catch(e){try{xhr=new ActiveXObject('Microsoft.XMLHTTP');}
catch(e2){try{xhr=new XMLHttpRequest();}
catch(e3){xhr=false;}}}
xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status==200){if(xhr.getResponseHeader("Content-Type")=="image/gif"||xhr.getResponseHeader("Content-Type")=="image/jpeg"||xhr.getResponseHeader("Content-Type")=="image/png"||xhr.getResponseHeader("Content-Type")=="image/svg"){jElement.css('display','block');}}}};xhr.open("GET",url);xhr.send(null);}};lm.tools.lazyloadInit=function(){$('#corps img.lazy').lazyload({effect:'fadeIn',threshold:600}).removeClass('lazy');};lm.tools.setCookie=function(name,value){var argv=lm.tools.setCookie.arguments;var argc=lm.tools.setCookie.arguments.length;var expires=(argc>2)?argv[2]:null;var path=(argc>3)?argv[3]:"/";var domain=(argc>4)?argv[4]:null;var secure=(argc>5)?argv[5]:false;document.cookie=name+"="+escape(value)+
((expires==null)?"":("; expires="+expires.toGMTString()))+
((path==null)?"":("; path="+path))+
((domain==null)?"":("; domain="+domain))+
((secure==true)?"; secure":"");}
lm.tools.deleteCookie=function(name){var expdate=new Date();expdate.setTime(expdate.getTime()-1);document.cookie=name+"="+null+"; expires="+expdate.toGMTString();}
lm.tools.getCookie=function(name){var arg=name+"=";var alen=arg.length;var clen=document.cookie.length;var i=0;while(i<clen){var j=i+alen;if(document.cookie.substring(i,j)==arg){return lm.tools.getCookieVal(j);}
i=document.cookie.indexOf(" ",i)+1;if(i==0){break;}}
return null;}
lm.tools.getCookieVal=function(offset){var endstr=document.cookie.indexOf(";",offset);if(endstr==-1){endstr=document.cookie.length;}
return unescape(document.cookie.substring(offset,endstr));};lm.tools.extractURLParams=function(){var match;var pl=/\+/g;var search=/([^&=]+)=?([^&]*)/g;var decode=function(s){return decodeURIComponent(s.replace(pl," "));};var query=window.location.search.substring(1);var urlParams={};while(match=search.exec(query)){urlParams[decode(match[1])]=decode(match[2]);}
return urlParams;};lm.tools.miniFicheProduit=function(reflm,displayButton,displayCrossSelling){$.ajax({url:'/v3/miniFicheProduit/display.do?reflm='+reflm+'&displayButton='+displayButton+'&displayCrossSelling='+displayCrossSelling,cache:false,dataType:'html',contentType:'text/plain',success:function(data){if($('#product-details-popin').length>0){$('#product-details-popin').remove();$('body').append(data);lm.layers.displayPopin('#product-details-popin',true,".popin-close-link");}
else{$('body').append(data);lm.layers.displayPopin('#product-details-popin',true,".popin-close-link");}
$("#product-details-popin").on("click",".checkout-sample",function(e){e.preventDefault();var $t=$(this),$tReflm=$t.attr('data-reflm');$('#product-details-popin').remove();$('.layerEchantillon').each(function(){if($tReflm===$(this).attr('id')){lm.layers.displayPopin('#'+$(this).attr('id'),true,".popin-close-link");}});});if($(data).find('#carousel-details').length>0){lm.owlCarousel.init();var owlDetails=$('#carousel-details');owlDetails.owlCarousel({slideSpeed:300,paginationSpeed:400,singleItem:true,pagination:true,afterInit:function(elem){$('#carousel-details .owl-pagination span').each(function(){var $t=$(this),$tIndex=$t.index();$('.carousel-details-navigation img').each(function(index){if($tIndex===index){$t.append($(this));return false;}});});var finalTopPosition=$(document).scrollTop()+16;$("#product-details-popin").css({'position':'absolute','left':($(document).width()/2)-($("#product-details-popin").width()/2)+'px','top':finalTopPosition+'px'});}});}
if($('#product-details-popin .promo-percent').length>0&&$('#carousel-details').length>0){$('#product-details-popin').find('.media-wrapper').append($('#product-details-popin .promo-percent'));$(data).find('.lm-popin-container .logo-marque img').each(function(){if(!this.complete||typeof this.naturalWidth=="undefined"||this.naturalWidth==0){$(this).parent().hide();}});}
else{$(data).find('.lm-popin-container .logo-marque img').each(function(){if(!this.complete||typeof this.naturalWidth=="undefined"||this.naturalWidth==0){$(this).parent().hide();}});}}});}
lm.tools.initGoogleMaps=function(callbackF){if(typeof google==='object'&&typeof google.maps==='object'){callbackF();}else{$.getScript('https://maps.google.com/maps/api/js?sensor=false&language=fr&client=gme-leroymerlinsa&callback=initialize',function(data){callbackF();});}}
lm.tools.ctButtonToLink=function(clicCT){$('<a href="#" target="_track" data-clicct="'+clicCT+'" class="clicCT dummyClicCT"></a>').appendTo('#wrapper').click();}
lm.tools.ctClickAllTag=function(clicCT){paramCT=clicCT.split(",");xt_med(paramCT[0],paramCT[1],paramCT[2],paramCT[3]);}
if($('#url-ope').length>0&&$('#url-ope').val()!=""){var urlBackground=$("#url-ope").val();$("#page").prepend("<a href="+urlBackground+" class='' style='display:block;position:absolute;top:0;left:0;width:100%;height:100%'></a>")}
lm.oauth={};lm.oauth.initCrossWindowMessaging=function initCrossWindowMessaging(){if(window.addEventListener){window.addEventListener('message',receiveMessage,false);}else if(window.attachEvent){window.attachEvent('onmessage',receiveMessage);}
function checkOrigin(origin,authorizedOrigins){if(authorizedURLs.indexOf("someString")>-1){return true;}else{return false;}}
function receiveMessage(event){console.log("+++++++ event.source : ");console.log(event.source);console.log("+++++++ event.origin : ");console.log(event.origin);var frame=document.getElementById('oauth-iframe');if(!document.location.origin){document.location.origin=document.location.protocol+"//"+document.location.hostname+(document.location.port?':'+document.location.port:'');}
if(event.origin==="null"&&event.source===frame.contentWindow){console.log("Source ok et origin null - Normalement, redirection vers "+event.data);window.location.replace(event.data);}
if(event.origin===document.location.origin&&event.source===frame.contentWindow){console.log("Source ok et origin ok - Normalement, redirection vers "+event.data);window.location.replace(event.data);}}};lm.initModifQteProduit=function initModifQteProduit(){function preventKeyQtite(elem){if(elem.val()<1&&elem.val()!==''||(/[^0-9]/).test(elem.val())){elem.val(1);}}
function modifQtyLayerBasket(){var quantitySelector=""}
function refreshLayerConcept(productReflm,selectionKey,quantity){$.ajax({type:'POST',url:'/v3/ajax/updateProductsConceptQuantityInBasket.do',dataType:'html',cache:false,async:false,data:'&productReflm='+productReflm+'&productQuantity='+quantity+'&selectionKey='+selectionKey,success:function(data){$("#total-selection-product .lm-popin-container").html(data);}});}
$('.qtiteMoins, .qtitePlus').unbind('click');$('body').on('click','span.qtiteMoins',function(){var quantitySelector=$(this).next('.quantity-selector');var quantity=quantitySelector.val();if(quantitySelector.val()===''){quantitySelector.val(1);}
if(quantitySelector.val()>1){quantitySelector.val(parseInt(quantitySelector.val(),10)-1);}else if(quantitySelector.val()<1)
quantitySelector.val(1);});$('body').on('click','span.qtitePlus',function(){var quantitySelector=$(this).prev('.quantity-selector');if(quantitySelector.val()===''){quantitySelector.val(1);}
if(quantitySelector.val()<9999){quantitySelector.val(parseInt(quantitySelector.val(),10)+1);}});$('body').on('focusout change','.qty-serie',function(e){if($('#basket-popin-multiple').length>0){var quantitySelector=$(this);var productReflm=quantitySelector.attr("data-productreflm");var productMasterId=quantitySelector.attr("data-productmasterid");var quantity=quantitySelector.val();refreshLayerSerie(productReflm,productMasterId,quantity);}});$('.table-serie-multiple').keydown(function(){preventKeyQtite($(this));}).keyup(function(){preventKeyQtite($(this));}).blur(function(){preventKeyQtite($(this));}).click(function(){preventKeyQtite($(this));});$('.quantity-selector').unbind('focus').focus(function(e){e.preventDefault();});$('#quantity-selector-meter').keyup(function(e){calculateQuantityConditionnement($(this).attr('data-reflm'),$('#quantity-selector-meter').val(),false);});$('.quantity-selector-conditionning-up').on('click',function(){var quantitySelector=$('#quantity-selector-conditionning');quantitySelector.val(parseInt(quantitySelector.val(),10)+1);calculateQuantityConditionnement($("#quantity-selector-conditionning").attr('data-reflm'),quantitySelector.val(),true);});$('.quantity-selector-conditionning-down').on('click',function(){var quantitySelector=$('#quantity-selector-conditionning');quantitySelector.val(parseInt(quantitySelector.val(),10)-1);calculateQuantityConditionnement($("#quantity-selector-conditionning").attr('data-reflm'),quantitySelector.val(),true);});$('.quantity-selector-meter-up').on('click',function(){var quantitySelector=$('#quantity-selector-meter');quantitySelector.val(parseInt(quantitySelector.val(),10)+1);calculateQuantityConditionnement($("#quantity-selector-meter").attr('data-reflm'),quantitySelector.val(),false);});$('.quantity-selector-meter-down').on('click',function(){var quantitySelector=$('#quantity-selector-meter');quantitySelector.val(parseInt(quantitySelector.val(),10)-1);calculateQuantityConditionnement($("#quantity-selector-meter").attr('data-reflm'),quantitySelector.val(),false);});$('#quantity-selector-conditionning').keyup(function(e){calculateQuantityConditionnement($(this).attr('data-reflm'),$('#quantity-selector-conditionning').val(),true);});};lm.forms=lm.forms||{};lm.forms.initBlockableButtons=function initBlockableButtons(wrapperSel,triggerClass){var jForms=wrapperSel?jQuery(wrapperSel).find("form"):jQuery("body").find("form");var triggerC=triggerClass?triggerClass:"block-double-click";jForms.on("submit.blockButton",function(){var jThis=jQuery(this);if(jThis.hasClass(triggerC)){var jButton=jQuery(this).find("button[type='submit'], input[type='submit']");jButton.attr("disabled","disabled");}});};lm.refreshZonePattern=function RefreshZonePattern(JSON,callBackCreate,callBackUpdate,callBackDelete,callBackSuccess,debug){"use strict";function createZones(zone){if(debug){console.log('_______________');console.log('Création de zone demandé pour :');console.log(zone);}
var element=$("[data-zoneId="+zone.id+"]"),elementDeReference=$("[data-zoneId="+zone.positionId+"]"),newZone=zone.contentHtml;if(element.length){updateZones(zone);}else{if(elementDeReference.length){if(zone.position='after'){elementDeReference.after(newZone);}else if(zone.position='before'){elementDeReference.before(newZone);}else if(zone.position='append'){elementDeReference.append(newZone);}}}
if(callBackCreate&&typeof callBackCreate==="function"){callBackCreate(zone);}}
function updateZones(zone){if(debug){console.log('_______________');console.log('Mise à jour de zone demandé pour :');console.log(zone);}
var element=$("[data-zoneId="+zone.id+"]");if(element.length){var elementLinked=$("[data-zoneIdLinked="+zone.id+"]");if(elementLinked.length){elementLinked.remove();}
var majZone=zone.contentHtml;element.replaceWith(majZone);}
if(callBackUpdate&&typeof callBackUpdate==="function"){callBackUpdate(zone);}}
function deleteZones(zone){if(debug){console.log('_______________');console.log('Supression de zone demandé pour :');console.log(zone);}
var element=$("[data-zoneId="+zone.id+"]");if(element.length){var elementLinked=$("[data-zoneIdLinked="+zone.id+"]");if(elementLinked.length){elementLinked.remove();}
element.remove();}
if(callBackDelete&&typeof callBackDelete==="function"){callBackDelete(zone);}}
if(debug){console.log('_______________');console.log('ResponseJSON');console.log(JSON);}
if(JSON.redirect){if(debug){console.log('_______________');console.log('Redirection vers '+JSON.redirect+' demandée');}else{window.location.href=JSON.redirect;}}else{if(JSON.createZones){$.each(JSON.createZones,function(i,zone){createZones(zone);});}
if(JSON.updateZones){$.each(JSON.updateZones,function(i,zone){updateZones(zone);});}
if(JSON.deleteZones){$.each(JSON.deleteZones,function(i,zone){deleteZones(zone);});}
if($('.layer_loader_fullpage').length&&$('.layer_loader_fullpage').hasClass('active')){$('.layer_loader_fullpage').removeClass('active');}
if(callBackSuccess&&typeof callBackSuccess==="function"){if(debug){console.log('_______________');console.log('successRefresh');}
callBackSuccess();}}}
lm.storeLocation=function storeLocation(latStoreId,lngStoreId){"use strict";var input=(document.getElementById('fromData'));var fromData;var direction;var positionDetected=new google.maps.LatLng(latStoreId,lngStoreId);var searchBox=new google.maps.places.SearchBox((input));var optionsLauncher=function(){var myOptions={zoom:14,center:positionDetected,mapTypeId:google.maps.MapTypeId.ROADMAP,maxZoom:20};var storeAccessWrapper=new google.maps.Map(document.getElementById('store-access-wrapper'),myOptions);var storePannelWrapper=document.getElementById('pannel-wrapper');direction=new google.maps.DirectionsRenderer({map:storeAccessWrapper,panel:storePannelWrapper});var markerImg="https://s1.lmcdn.fr/multimedia/1c4004979/3754e36d23e/picto-googlemap-2.gif";var marker=new google.maps.Marker({position:positionDetected,map:storeAccessWrapper,icon:markerImg});};storeLocation.calculate=function(){var fromData=input.value;var request={origin:fromData,destination:positionDetected,travelMode:google.maps.DirectionsTravelMode.DRIVING};var directionsService=new google.maps.DirectionsService();directionsService.route(request,function(response,status){if(status==google.maps.DirectionsStatus.OK){direction.setDirections(response);}});};storeLocation.userCalculate=function(){if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(position){var latitude=position.coords.latitude;var longitude=position.coords.longitude;var coords=new google.maps.LatLng(latitude,longitude);var request={origin:coords,destination:positionDetected,travelMode:google.maps.DirectionsTravelMode.DRIVING};var directionsService=new google.maps.DirectionsService();directionsService.route(request,function(response,status){if(status==google.maps.DirectionsStatus.OK){direction.setDirections(response);}});});}};optionsLauncher();$('#map-search').on('submit',function(e){e.preventDefault();storeLocation.calculate();});$('#user-geolocate').on('click',function(e){e.preventDefault();storeLocation.userCalculate();});};lm.contextualisation=lm.contextualisation||{};lm.contextualisation.initMireContextualisation=function initMireContextualisation(){$('#search-by-cp').on('submit',function(e){e.preventDefault();verifCodePostalPourContext();});function verifCodePostalPourContext(){var valueCodePostal=$('#departure').attr('value');$('span.error').hide();$('.activate-geoloc').html("");$errorBox=$('<span class="error">Veuillez renseigner un code postal valide.</span>');if((!isNaN(valueCodePostal)&&(valueCodePostal.length==2||valueCodePostal.length==5))||(valueCodePostal.toUpperCase()=="2A"||valueCodePostal.toUpperCase()=="2B")||(valueCodePostal.toUpperCase()=="974")){if(valueCodePostal==97){valueCodePostal='974';}
if(valueCodePostal==20){valueCodePostal='2A';}
if($('.layered #searchCPLoader').length){$('#searchCPLoader').show().css("margin-right","222px");}else{$('#searchCPLoader').show().css("margin-right","290px");}
if($("#showmode").length){var showmode=$("#showmode").val();}else{var showmode="context";}
if($("#contextLabel").length){var contextLabel=$("#contextLabel").val();}else{var contextLabel="";}
var getreflm="&reflm="+$(".changestore_produit").attr("data-reflm");if($("#contextControllerURL").length){var searchUrl=$("#contextControllerURL").val();}else{var searchUrl="/v3/contextualization/store/findStoresByZipCode.do";}
searchUrl=searchUrl+"?view=contact/stores&showmode="+showmode+getreflm+"&redirect="+$("#CtxRdrct").val()+"&zipCode="+valueCodePostal.toUpperCase()+"&codeZip="+valueCodePostal.toUpperCase()+"&codePostal="+valueCodePostal.toUpperCase()+"&contextLabel="+contextLabel;$.ajax({type:"GET",url:searchUrl,dataType:"text",contentType:"text/plain",success:function(data){var dataStr=(data);$('#searchCPLoader').hide();$('#ctxResults').html(data);if($("#layer_context").height()>$(window).height()){var finalTopPosition=$(document).scrollTop()+($(window).height()/20);$("#layer_context").css({'position':'absolute','top':finalTopPosition+'px'});}else{$("#layer_context").css({'position':'fixed','top':'5%'});}},error:function(object,msg){alert("Erreur, veuillez renouveler votre requête");$('#searchCPLoader').hide();}});}
else{$("#search-by-cp .error").remove();if($(".layered").length){$errorBox.appendTo('#search-by-cp').show().css("right","60px");}else{$errorBox.appendTo('#search-by-cp').show();}}}
$('#listeAlphabetiqueMagasin').on('change',function(e){$storeId=$('#listeAlphabetiqueMagasin option:selected').val();if($('#listeAlphabetiqueMagasin option:selected').attr('data-isopen')=='true'){$inputHidden.val($(e.target,'option:selected').attr('value'));}else{$('#searchCPLoader').show();$('.store-availability-content .combo-box span').html(this.options[this.selectedIndex].text);if(!$("#showmode").length||$("#showmode").val()=="context"){if($("#CtxRdrct").length&&$("#CtxRdrct").val()!="/v3/p/magasins-l1308220543"){if($("#selectMode").val()=="disponibilite"){$("#ctxResults").load('/v3/magasin/services/cours/search.do?reflm=serviceCoursBricolage&storeId='+this.options[this.selectedIndex].value+'&redirect='+$("#CtxRdrct").val(),function(){$('#searchCPLoader').hide();$('span.error').hide();$('.activate-geoloc').html("");});}else{$('span.error').hide();$('.activate-geoloc').html("");if($("#selectMode").val()!="disponibilite_produit"){window.location="/v3/contextualization/store/contextualize.do?storeId="+$storeId+"&redirect="+$("#CtxRdrct").val();}}}
else
{window.location="/v3/contextualization/store/contextualize.do?storeId="+$storeId+"&redirect=/v3/contextualization/store/displayStore.do?storeId="+$storeId;}}else{if($("#showmode").val()=="rental"){$("#ctxResults").load('/v3/truckRental/getStoreByStoreCode.do?storeCode='+this.options[this.selectedIndex].value+'&redirect='+$("#CtxRdrct").val(),function(){$('#searchCPLoader').hide();$('span.error').hide();$('.activate-geoloc').html("");});}}}});if($('#listeAlphabetiqueMagasin option:selected').val()!=""){$('.store-availability-content .combo-box.contxt span').html($('#listeAlphabetiqueMagasin option:selected').text());}};