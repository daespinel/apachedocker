define(["lib/hammer"],function(t){"use strict";function e(){return s=document.getElementsByClassName("caroussel")[0],o=document.getElementById("caroussel"),this.init(),this}var i,n,s=!1,o=!1,a=0,l=!1,d=!1,r=!1,c=0,u=!1,h=!1,m=0,f=!1,p=new Array,v=!1,y=45e3,E=!1,S=0,g=300,w=!1,b=8;return e.prototype.init=function(){o&&(l=o.getElementsByClassName("slider")[0]||!1,d=o.getElementsByClassName("shortSlider")[0]||!1,n=document.getElementById("main_menu_container")||!1,a=utils.posY(o),l&&d&&(r=o.getElementsByClassName("slide")||!1,r&&(c=r.length,window.addEventListener("resize",Cowboy.throttle(200,this.eventResize.bind(this))),this.eventResize(),this.addEvents(),window.setTimeout(function(){utils.removeClass(s,"loading")},300))))},e.prototype.eventResize=function(){this.setTranslateHoverLeft()},e.prototype.setTranslateHoverLeft=function(){return n&&utils.is_desktop_screen_size()?void(S=n.offsetWidth/o.offsetWidth*100):void(S=b)},e.prototype.addEvents=function(){this.setDimensions(),this.placeShortcut(),this.placePagination(),this.cloneElements(),c>1&&(this.autoRotation(),this.translateSlide(0,"direct"),utils.is_touch_device()&&this.addMobileGestureEvents())},e.prototype.addMobileGestureEvents=function(){E=new t(l),E.on("panend",function(t){2==t.direction?this.translateSlide(0,"right"):4==t.direction&&this.translateSlide(0,"left")}.bind(this))},e.prototype.setDimensions=function(){l.style.width=100*c+"%";for(var t=0;c>t;t++)r[t].style.width=100/c+"%"},e.prototype.placeShortcut=function(){for(var t=0;c>t;t++)p[t]=document.createElement("li"),p[t].setAttribute("data-id",t),0===t&&(p[t].className="selected"),d.appendChild(p[t]),p[t].addEventListener("click",function(t){m=parseInt(t.target.getAttribute("data-id"),10),this.translateSlide(0,"direct")}.bind(this))},e.prototype.placePagination=function(){u=document.createElement("div"),u.className="pagineSlide prevSlide",h=document.createElement("div"),h.className="pagineSlide nextSlide",u.addEventListener("mouseover",function(){this.translateSlide(S)}.bind(this)),u.addEventListener("mouseout",function(){this.translateSlide(0)}.bind(this)),u.addEventListener("click",function(){this.translateSlide(0,"left")}.bind(this)),h.addEventListener("mouseover",function(){this.translateSlide(-b)}.bind(this)),h.addEventListener("mouseout",function(){this.translateSlide(0)}.bind(this)),h.addEventListener("click",function(){this.translateSlide(0,"right")}.bind(this)),o.appendChild(u),o.appendChild(h)},e.prototype.translateSlide=function(t,e){if(window.clearInterval(v),e&&("left"===e?m=--m:"right"===e&&(m=++m)),l.style.marginLeft=-(100*(m+1))+t+"%",e){var i=!1;m>=c&&(m=0,i=!0),0>m&&(m=c-1,i=!0),i&&(window.clearTimeout(w),w=setTimeout(function(){utils.removeClass(l,"transitionSlider"),l.style.marginLeft=-(100*(m+1))+t+"%",setTimeout(function(){utils.addClass(l,"transitionSlider")},400)},g)),p.forEach(function(t){t.className=""}),p[m].className="selected"}this.autoRotation()},e.prototype.cloneElements=function(){var t=r[0],e=r[c-1];l.style.width=100*(c+2)+"%";for(var n=100/(c+2)+"%",s=0;c>s;s++)r[s].style.width=n;i=document.createElement("li"),i.style.width=n,i.innerHTML=t.innerHTML,l.appendChild(i),f=document.createElement("li"),f.style.width=n,f.innerHTML=e.innerHTML,l.insertBefore(f,l.firstChild)},e.prototype.autoRotation=function(){v=setInterval(function(){this.translateSlide(0,"right")}.bind(this),y)},e});